(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1850],{6977:(Rn,kt,e)=>{"use strict";e.d(kt,{r:()=>gt});var r=e(53907),m=e(30705),u=e(57032),W=e(56563),A=e(2784),o=e(77277),U=e(49558),We=e(73557),we=e(39857),a=e(43642),te=e(80079),q=e(90941),D=e(32915),Z=e(40562),Le=e(21853),ie=e(60744),re=e(66569),Q=e(30254),H=e(13384),S=e(15933),l=e(58838),b=e(86737),h=e(4989),C=e(44407),p=e(18628),be=e(84219),ge=e(98685),ye=e(39781),ne=e(39412),oe=e(78258),X=e(86287),xe=e(98192),It=e(15222);const P=[(0,m.ni)({api:u.q,deps:{configApi:u.p},factory:({configApi:de})=>r.pM.compile(`${de.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,m.ni)({api:u.l,deps:{},factory:()=>new r.CX}),(0,m.ni)({api:u.a,deps:{},factory:()=>new r.gN}),(0,m.ni)({api:u.r,deps:{alertApi:u.l},factory:({alertApi:de})=>{const G=new r.KN(de,new r.gr);return r.Jv.forward(G,{hidden:!1}),G}}),(0,m.ni)({api:u.x,deps:{errorApi:u.r},factory:({errorApi:de})=>r.CJ.create({errorApi:de})}),(0,m.ni)({api:u.s,deps:{configApi:u.p,identityApi:u.t,discoveryApi:u.q},factory:({configApi:de,identityApi:G,discoveryApi:Pe})=>(0,r.jJ)({middleware:[r.II.resolvePluginProtocol({discoveryApi:Pe}),r.II.injectIdentityAuth({identityApi:G,config:de})]})}),(0,m.ni)({api:u.v,deps:{},factory:()=>new r.YM}),(0,m.ni)({api:u.g,deps:{discoveryApi:u.q,oauthRequestApi:u.v,configApi:u.p},factory:({discoveryApi:de,oauthRequestApi:G,configApi:Pe})=>r.eE.create({configApi:Pe,discoveryApi:de,oauthRequestApi:G,environment:Pe.getOptionalString("auth.environment")})}),(0,m.ni)({api:u.m,deps:{discoveryApi:u.q,oauthRequestApi:u.v,configApi:u.p},factory:({discoveryApi:de,oauthRequestApi:G,configApi:Pe})=>r._i.create({configApi:Pe,discoveryApi:de,oauthRequestApi:G,environment:Pe.getOptionalString("auth.environment")})}),(0,m.ni)({api:u.d,deps:{discoveryApi:u.q,oauthRequestApi:u.v,configApi:u.p},factory:({discoveryApi:de,oauthRequestApi:G,configApi:Pe})=>r.Td.create({configApi:Pe,discoveryApi:de,oauthRequestApi:G,defaultScopes:["read:user"],environment:Pe.getOptionalString("auth.environment")})}),(0,m.ni)({api:u.o,deps:{discoveryApi:u.q,oauthRequestApi:u.v,configApi:u.p},factory:({discoveryApi:de,oauthRequestApi:G,configApi:Pe})=>r.sn.create({configApi:Pe,discoveryApi:de,oauthRequestApi:G,environment:Pe.getOptionalString("auth.environment")})}),(0,m.ni)({api:u.e,deps:{discoveryApi:u.q,oauthRequestApi:u.v,configApi:u.p},factory:({discoveryApi:de,oauthRequestApi:G,configApi:Pe})=>r.aq.create({configApi:Pe,discoveryApi:de,oauthRequestApi:G,environment:Pe.getOptionalString("auth.environment")})}),(0,m.ni)({api:u.h,deps:{discoveryApi:u.q,oauthRequestApi:u.v,configApi:u.p},factory:({discoveryApi:de,oauthRequestApi:G,configApi:Pe})=>r.$_.create({configApi:Pe,discoveryApi:de,oauthRequestApi:G,environment:Pe.getOptionalString("auth.environment")})}),(0,m.ni)({api:u.i,deps:{discoveryApi:u.q,oauthRequestApi:u.v,configApi:u.p},factory:({discoveryApi:de,oauthRequestApi:G,configApi:Pe})=>r.xP.create({configApi:Pe,discoveryApi:de,oauthRequestApi:G,defaultScopes:["team"],environment:Pe.getOptionalString("auth.environment")})}),(0,m.ni)({api:u.j,deps:{discoveryApi:u.q,oauthRequestApi:u.v,configApi:u.p},factory:({discoveryApi:de,oauthRequestApi:G,configApi:Pe})=>r.C4.create({configApi:Pe,discoveryApi:de,oauthRequestApi:G,defaultScopes:["REPO_READ"]})}),(0,m.ni)({api:u.k,deps:{discoveryApi:u.q,oauthRequestApi:u.v,configApi:u.p},factory:({discoveryApi:de,oauthRequestApi:G,configApi:Pe})=>r.uC.create({configApi:Pe,discoveryApi:de,oauthRequestApi:G,environment:Pe.getOptionalString("auth.environment")})}),(0,m.ni)({api:W.RV,deps:{discovery:u.q,identity:u.t,config:u.p},factory:({config:de,discovery:G,identity:Pe})=>W.iM.create({config:de,discovery:G,identity:Pe})})];function Jt({children:de}){return(0,We.GV)()?A.createElement(A.Fragment,null,de):A.createElement(We.VA,null,de)}const me=()=>A.createElement(U.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}),Lt=({step:de,error:G})=>{let Pe="";return de==="load-config"?Pe=`The configuration failed to load, someone should have a look at this error: ${G.message}`:de==="load-chunk"&&(Pe=`Lazy loaded chunk failed to load, try to reload the page: ${G.message}`),A.createElement(Jt,null,A.createElement(U.mf,{status:"501",statusMessage:Pe}))},Ct=({error:de,resetError:G,plugin:Pe})=>A.createElement(U.yu,{title:`Error in ${Pe==null?void 0:Pe.getId()}`,defaultExpanded:!0,error:de},A.createElement(o.Z,{variant:"outlined",onClick:G},"Retry")),je={Progress:U.Ex,Router:we.VK,NotFoundErrorPage:me,BootErrorPage:Lt,ErrorBoundaryFallback:Ct},nt={brokenImage:te.Z,catalog:p.Z,scaffolder:D.Z,techdocs:Z.Z,search:Le.Z,chat:ie.Z,dashboard:re.Z,docs:Q.Z,email:H.Z,github:l.Z,group:be.Z,help:b.Z,"kind:api":S.Z,"kind:component":C.Z,"kind:domain":a.Z,"kind:group":be.Z,"kind:location":h.Z,"kind:system":q.Z,"kind:user":ge.Z,"kind:resource":ne.Z,"kind:template":oe.Z,user:ge.Z,warning:ye.Z},Te=[{id:"light",title:"Light Theme",variant:"light",icon:A.createElement(It.Z,null),Provider:({children:de})=>A.createElement(X.IZ,{theme:X.np.light,children:de})},{id:"dark",title:"Dark Theme",variant:"dark",icon:A.createElement(xe.Z,null),Provider:({children:de})=>A.createElement(X.IZ,{theme:X.np.dark,children:de})}];function gt(de){var G,Pe,ce,le;return(0,r.bg)({...de,apis:(G=de==null?void 0:de.apis)!=null?G:[],bindRoutes:de==null?void 0:de.bindRoutes,components:{...je,...de==null?void 0:de.components},configLoader:de==null?void 0:de.configLoader,defaultApis:P,icons:{...nt,...de==null?void 0:de.icons},plugins:(Pe=de==null?void 0:de.plugins)!=null?Pe:[],featureFlags:(ce=de==null?void 0:de.featureFlags)!=null?ce:[],themes:(le=de==null?void 0:de.themes)!=null?le:Te})}},88285:(Rn,kt,e)=>{"use strict";e.d(kt,{MS:()=>re,mk:()=>Q,n3:()=>U});var r=e(34520),m=e(32272),u=e(96279),W=e.n(u),A=e(23587),o=e.n(A);const U=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111");function We(H){return!H.cursor}const we="catalog";var a=Object.defineProperty,te=(H,S,l)=>S in H?a(H,S,{enumerable:!0,configurable:!0,writable:!0,value:l}):H[S]=l,q=(H,S,l)=>(te(H,typeof S!="symbol"?S+"":S,l),l);class D{constructor(S){q(this,"discoveryApi"),q(this,"fetchApi"),this.discoveryApi=S.discoveryApi,this.fetchApi=S.fetchApi||{fetch:W()}}async analyzeLocation(S,l){const b=await this.discoveryApi.getBaseUrl(we),h="/analyze-location",C=A.parse(h).expand({});return await this.fetchApi.fetch(`${b}${C}`,{headers:{"Content-Type":"application/json",...(l==null?void 0:l.token)&&{Authorization:`Bearer ${l==null?void 0:l.token}`}},method:"POST",body:JSON.stringify(S.body)})}async createLocation(S,l){const b=await this.discoveryApi.getBaseUrl(we),h="/locations{?dryRun}",C=A.parse(h).expand({...S.query});return await this.fetchApi.fetch(`${b}${C}`,{headers:{"Content-Type":"application/json",...(l==null?void 0:l.token)&&{Authorization:`Bearer ${l==null?void 0:l.token}`}},method:"POST",body:JSON.stringify(S.body)})}async deleteEntityByUid(S,l){const b=await this.discoveryApi.getBaseUrl(we),h="/entities/by-uid/{uid}",C=A.parse(h).expand({uid:S.path.uid});return await this.fetchApi.fetch(`${b}${C}`,{headers:{"Content-Type":"application/json",...(l==null?void 0:l.token)&&{Authorization:`Bearer ${l==null?void 0:l.token}`}},method:"DELETE"})}async deleteLocation(S,l){const b=await this.discoveryApi.getBaseUrl(we),h="/locations/{id}",C=A.parse(h).expand({id:S.path.id});return await this.fetchApi.fetch(`${b}${C}`,{headers:{"Content-Type":"application/json",...(l==null?void 0:l.token)&&{Authorization:`Bearer ${l==null?void 0:l.token}`}},method:"DELETE"})}async getEntities(S,l){const b=await this.discoveryApi.getBaseUrl(we),h="/entities{?fields,limit,filter*,offset,after,order*}",C=A.parse(h).expand({...S.query});return await this.fetchApi.fetch(`${b}${C}`,{headers:{"Content-Type":"application/json",...(l==null?void 0:l.token)&&{Authorization:`Bearer ${l==null?void 0:l.token}`}},method:"GET"})}async getEntitiesByQuery(S,l){const b=await this.discoveryApi.getBaseUrl(we),h="/entities/by-query{?fields,limit,orderField*,cursor,filter*,fullTextFilterTerm,fullTextFilterFields}",C=A.parse(h).expand({...S.query});return await this.fetchApi.fetch(`${b}${C}`,{headers:{"Content-Type":"application/json",...(l==null?void 0:l.token)&&{Authorization:`Bearer ${l==null?void 0:l.token}`}},method:"GET"})}async getEntitiesByRefs(S,l){const b=await this.discoveryApi.getBaseUrl(we),h="/entities/by-refs",C=A.parse(h).expand({});return await this.fetchApi.fetch(`${b}${C}`,{headers:{"Content-Type":"application/json",...(l==null?void 0:l.token)&&{Authorization:`Bearer ${l==null?void 0:l.token}`}},method:"POST",body:JSON.stringify(S.body)})}async getEntityAncestryByName(S,l){const b=await this.discoveryApi.getBaseUrl(we),h="/entities/by-name/{kind}/{namespace}/{name}/ancestry",C=A.parse(h).expand({kind:S.path.kind,namespace:S.path.namespace,name:S.path.name});return await this.fetchApi.fetch(`${b}${C}`,{headers:{"Content-Type":"application/json",...(l==null?void 0:l.token)&&{Authorization:`Bearer ${l==null?void 0:l.token}`}},method:"GET"})}async getEntityByName(S,l){const b=await this.discoveryApi.getBaseUrl(we),h="/entities/by-name/{kind}/{namespace}/{name}",C=A.parse(h).expand({kind:S.path.kind,namespace:S.path.namespace,name:S.path.name});return await this.fetchApi.fetch(`${b}${C}`,{headers:{"Content-Type":"application/json",...(l==null?void 0:l.token)&&{Authorization:`Bearer ${l==null?void 0:l.token}`}},method:"GET"})}async getEntityByUid(S,l){const b=await this.discoveryApi.getBaseUrl(we),h="/entities/by-uid/{uid}",C=A.parse(h).expand({uid:S.path.uid});return await this.fetchApi.fetch(`${b}${C}`,{headers:{"Content-Type":"application/json",...(l==null?void 0:l.token)&&{Authorization:`Bearer ${l==null?void 0:l.token}`}},method:"GET"})}async getEntityFacets(S,l){const b=await this.discoveryApi.getBaseUrl(we),h="/entity-facets{?facet*,filter*}",C=A.parse(h).expand({...S.query});return await this.fetchApi.fetch(`${b}${C}`,{headers:{"Content-Type":"application/json",...(l==null?void 0:l.token)&&{Authorization:`Bearer ${l==null?void 0:l.token}`}},method:"GET"})}async getLocation(S,l){const b=await this.discoveryApi.getBaseUrl(we),h="/locations/{id}",C=A.parse(h).expand({id:S.path.id});return await this.fetchApi.fetch(`${b}${C}`,{headers:{"Content-Type":"application/json",...(l==null?void 0:l.token)&&{Authorization:`Bearer ${l==null?void 0:l.token}`}},method:"GET"})}async getLocations(S,l){const b=await this.discoveryApi.getBaseUrl(we),h="/locations",C=A.parse(h).expand({});return await this.fetchApi.fetch(`${b}${C}`,{headers:{"Content-Type":"application/json",...(l==null?void 0:l.token)&&{Authorization:`Bearer ${l==null?void 0:l.token}`}},method:"GET"})}async refreshEntity(S,l){const b=await this.discoveryApi.getBaseUrl(we),h="/refresh",C=A.parse(h).expand({});return await this.fetchApi.fetch(`${b}${C}`,{headers:{"Content-Type":"application/json",...(l==null?void 0:l.token)&&{Authorization:`Bearer ${l==null?void 0:l.token}`}},method:"POST",body:JSON.stringify(S.body)})}async validateEntity(S,l){const b=await this.discoveryApi.getBaseUrl(we),h="/validate-entity",C=A.parse(h).expand({});return await this.fetchApi.fetch(`${b}${C}`,{headers:{"Content-Type":"application/json",...(l==null?void 0:l.token)&&{Authorization:`Bearer ${l==null?void 0:l.token}`}},method:"POST",body:JSON.stringify(S.body)})}}var Z=Object.defineProperty,Le=(H,S,l)=>S in H?Z(H,S,{enumerable:!0,configurable:!0,writable:!0,value:l}):H[S]=l,ie=(H,S,l)=>(Le(H,typeof S!="symbol"?S+"":S,l),l);class re{constructor(S){ie(this,"apiClient"),this.apiClient=new D(S)}async getEntityAncestors(S,l){return await this.requestRequired(await this.apiClient.getEntityAncestryByName({path:(0,r.of)(S.entityRef)},l))}async getLocationById(S,l){return await this.requestOptional(await this.apiClient.getLocation({path:{id:S}},l))}async getEntities(S,l){const{filter:b=[],fields:h=[],order:C,offset:p,limit:be,after:ge}=S!=null?S:{},ye=[];if(C)for(const X of[C].flat())X&&ye.push(`${X.order}:${X.field}`);const ne=await this.requestRequired(await this.apiClient.getEntities({query:{fields:h,limit:be,filter:this.getFilterValue(b),offset:p,after:ge,order:C?ye:void 0}},l)),oe=(X,xe)=>{var It,P;if(((It=X.metadata)==null?void 0:It.name)===void 0||X.kind===void 0||((P=xe.metadata)==null?void 0:P.name)===void 0||xe.kind===void 0)return 0;const Jt=(0,r.eE)(X),me=(0,r.eE)(xe);return Jt<me?-1:Jt>me?1:0};return{items:ne.sort(oe)}}async getEntitiesByRefs(S,l){const b=await this.apiClient.getEntitiesByRefs({body:S},l);if(!b.ok)throw await m.VL.fromResponse(b);const{items:h}=await b.json();return{items:h.map(C=>C!=null?C:void 0)}}async queryEntities(S={},l){var b,h;const C={};if(We(S)){const{fields:p=[],filter:be,limit:ge,orderFields:ye,fullTextFilter:ne}=S;C.filter=this.getFilterValue(be),ge!==void 0&&(C.limit=ge),ye!==void 0&&(C.orderField=(Array.isArray(ye)?ye:[ye]).map(({field:X,order:xe})=>`${X},${xe}`)),p.length&&(C.fields=p);const oe=(b=ne==null?void 0:ne.term)==null?void 0:b.trim();oe&&(C.fullTextFilterTerm=oe),(h=ne==null?void 0:ne.fields)!=null&&h.length&&(C.fullTextFilterFields=ne.fields)}else{const{fields:p=[],limit:be,cursor:ge}=S;C.cursor=ge,be!==void 0&&(C.limit=be),p.length&&(C.fields=p)}return this.apiClient.getEntitiesByQuery({query:C},l).then(p=>p.json())}async getEntityByRef(S,l){return this.requestOptional(await this.apiClient.getEntityByName({path:(0,r.of)(S)},l))}async getEntityByName(S,l){const{kind:b,namespace:h="default",name:C}=S;return this.requestOptional(await this.apiClient.getEntityByName({path:{kind:b,namespace:h,name:C}},l))}async refreshEntity(S,l){const b=await this.apiClient.refreshEntity({body:{entityRef:S}},l);if(b.status!==200)throw new Error(await b.text())}async getEntityFacets(S,l){const{filter:b=[],facets:h}=S;return await this.requestOptional(await this.apiClient.getEntityFacets({query:{facet:h,filter:this.getFilterValue(b)}},l))}async addLocation(S,l){const{type:b="url",target:h,dryRun:C}=S,p=await this.apiClient.createLocation({body:{type:b,target:h},query:{dryRun:C?"true":void 0}},l);if(p.status!==201)throw new Error(await p.text());const{location:be,entities:ge,exists:ye}=await p.json();if(!be)throw new Error(`Location wasn't added: ${h}`);return{location:be,entities:ge,exists:ye}}async getLocationByRef(S,l){return(await this.requestRequired(await this.apiClient.getLocations({},l))).map(h=>h.data).find(h=>S===(0,r.NZ)(h))}async removeLocationById(S,l){await this.requestIgnored(await this.apiClient.deleteLocation({path:{id:S}},l))}async removeEntityByUid(S,l){await this.requestIgnored(await this.apiClient.deleteEntityByUid({path:{uid:S}},l))}async validateEntity(S,l,b){const h=await this.apiClient.validateEntity({body:{entity:S,location:l}},b);if(h.ok)return{valid:!0};if(h.status!==400)throw await m.VL.fromResponse(h);const{errors:C=[]}=await h.json();return{valid:!1,errors:C}}async requestIgnored(S){if(!S.ok)throw await m.VL.fromResponse(S)}async requestRequired(S){if(!S.ok)throw await m.VL.fromResponse(S);return S.json()}async requestOptional(S){if(!S.ok){if(S.status===404)return;throw await m.VL.fromResponse(S)}return await S.json()}getFilterValue(S=[]){const l=[];for(const b of[S].flat()){const h=[];for(const[C,p]of Object.entries(b))for(const be of[p].flat())be===U?h.push(C):typeof be=="string"&&h.push(`${C}=${be}`);h.length&&l.push(h.join(","))}return l}}const Q="backstage.io/catalog-processing"},34520:(Rn,kt,e)=>{"use strict";e.d(kt,{$1:()=>Ce,CV:()=>Ya,Dg:()=>Re,Dk:()=>We,In:()=>Ee,KS:()=>_n,M6:()=>Hn,M_:()=>Ne,NZ:()=>tr,Ou:()=>Ua,P1:()=>dr,S4:()=>V,Tf:()=>Le,U2:()=>q,X9:()=>pe,Zj:()=>tt,_b:()=>en,aS:()=>En,cz:()=>hn,eE:()=>be,hr:()=>mn,iB:()=>C,l2:()=>Z,nP:()=>_t,of:()=>p,q1:()=>Za,w$:()=>Ht,wI:()=>ot,wP:()=>Xt,y$:()=>_e,zG:()=>D});var r=e(76635),m=e.n(r),u=e(27991),W=e.n(u);function A(vt){return vt.kind.toLocaleUpperCase("en-US")==="API"}function o(vt){return vt.kind.toLocaleUpperCase("en-US")==="COMPONENT"}function U(vt){return vt.kind.toLocaleUpperCase("en-US")==="DOMAIN"}function We(vt){return vt.kind.toLocaleUpperCase("en-US")==="GROUP"}function we(vt){return vt.kind.toLocaleUpperCase("en-US")==="LOCATION"}function a(vt){return vt.kind.toLocaleUpperCase("en-US")==="RESOURCE"}function te(vt){return vt.kind.toLocaleUpperCase("en-US")==="SYSTEM"}function q(vt){return vt.kind.toLocaleUpperCase("en-US")==="USER"}const D="default",Z="backstage.io/view-url",Le="backstage.io/edit-url",ie="kubernetes.io/api-server",re="kubernetes.io/api-server-certificate-authority",Q="kubernetes.io/auth-provider";var H=Object.defineProperty,S=(vt,De,Ut)=>De in vt?H(vt,De,{enumerable:!0,configurable:!0,writable:!0,value:Ut}):vt[De]=Ut,l=(vt,De,Ut)=>(S(vt,typeof De!="symbol"?De+"":De,Ut),Ut);class b{constructor(De=D){l(this,"namespace"),this.namespace=De}async enforce(De){return De.metadata.namespace?De:lodash.merge({metadata:{namespace:this.namespace}},De)}}function h(vt){let De=vt.indexOf(":");const Ut=vt.indexOf("/");Ut!==-1&&Ut<De&&(De=-1);const Sn=De===-1?void 0:vt.slice(0,De),kn=Ut===-1?void 0:vt.slice(De+1,Ut),ta=vt.slice(Math.max(De+1,Ut+1));if(Sn===""||kn===""||ta==="")throw new TypeError(`Entity reference "${vt}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:Sn,namespace:kn,name:ta}}function C(vt){return{kind:vt.kind,namespace:vt.metadata.namespace||D,name:vt.metadata.name}}function p(vt,De){var Ut,Sn,kn,ta;if(!vt)throw new Error("Entity reference must not be empty");const ca=De==null?void 0:De.defaultKind,Wa=(De==null?void 0:De.defaultNamespace)||D;let za,Aa,Ia;if(typeof vt=="string"){const La=h(vt);za=(Ut=La.kind)!=null?Ut:ca,Aa=(Sn=La.namespace)!=null?Sn:Wa,Ia=La.name}else za=(kn=vt.kind)!=null?kn:ca,Aa=(ta=vt.namespace)!=null?ta:Wa,Ia=vt.name;if(za)if(Aa){if(!Ia){const La=JSON.stringify(vt);throw new Error(`Entity reference ${La} had missing or empty name`)}}else{const La=JSON.stringify(vt);throw new Error(`Entity reference ${La} had missing or empty namespace`)}else{const La=JSON.stringify(vt);throw new Error(`Entity reference ${La} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:za,namespace:Aa,name:Ia}}function be(vt){var De,Ut;let Sn,kn,ta;return"metadata"in vt?(Sn=vt.kind,kn=(De=vt.metadata.namespace)!=null?De:D,ta=vt.metadata.name):(Sn=vt.kind,kn=(Ut=vt.namespace)!=null?Ut:D,ta=vt.name),`${Sn.toLocaleLowerCase("en-US")}:${kn.toLocaleLowerCase("en-US")}/${ta.toLocaleLowerCase("en-US")}`}var ge=Object.defineProperty,ye=(vt,De,Ut)=>De in vt?ge(vt,De,{enumerable:!0,configurable:!0,writable:!0,value:Ut}):vt[De]=Ut,ne=(vt,De,Ut)=>(ye(vt,typeof De!="symbol"?De+"":De,Ut),Ut);class oe{constructor(De){ne(this,"parentRef");const{kind:Ut,namespace:Sn,name:kn}=p(De,{defaultKind:"Group",defaultNamespace:D});if(Ut.toLocaleUpperCase("en-US")!=="GROUP")throw new TypeError("group parent must be a group");this.parentRef=be({kind:Ut,namespace:Sn,name:kn})}async enforce(De){if(De.kind!=="Group")return De;const Ut=De;return Ut.spec.parent||be(Ut)!==this.parentRef&&(Ut.spec.parent=this.parentRef),Ut}}class X{static isValidPrefixAndOrSuffix(De,Ut,Sn,kn){if(typeof De!="string")return!1;const ta=De.split(Ut);return ta.length===1?kn(ta[0]):ta.length===2?Sn(ta[0])&&kn(ta[1]):!1}static isJsonSafe(De){try{return m().isEqual(De,JSON.parse(JSON.stringify(De)))}catch{return!1}}static isValidDnsSubdomain(De){return typeof De=="string"&&De.length>=1&&De.length<=253&&De.split(".").every(X.isValidDnsLabel)}static isValidDnsLabel(De){return typeof De=="string"&&De.length>=1&&De.length<=63&&/^[a-z0-9]+(?:\-+[a-z0-9]+)*$/.test(De)}static isValidTag(De){return typeof De=="string"&&De.length>=1&&De.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(De)}static isValidUrl(De){if(typeof De!="string")return!1;try{return new URL(De),!0}catch{return!1}}static isValidString(De){var Ut;return typeof De=="string"&&((Ut=De==null?void 0:De.trim())==null?void 0:Ut.length)>=1}static isNonEmptyString(De){var Ut;return typeof De=="string"&&((Ut=De==null?void 0:De.trim())==null?void 0:Ut.length)>=1}}var xe="http://json-schema.org/draft-07/schema",It="EntityEnvelope",P="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",Jt=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],me="object",Lt=["apiVersion","kind","metadata"],Ct=!0,je={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},nt={$schema:xe,$id:It,description:P,examples:Jt,type:me,required:Lt,additionalProperties:Ct,properties:je},Te="http://json-schema.org/draft-07/schema",gt="Entity",de="The parts of the format that's common to all versions/kinds of entity.",G=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],Pe="object",ce=["apiVersion","kind","metadata"],le=!1,Be={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},st={$schema:Te,$id:gt,description:de,examples:G,type:Pe,required:ce,additionalProperties:le,properties:Be},Kt="http://json-schema.org/draft-07/schema",ct="EntityMeta",Zt="Metadata fields common to all versions/kinds of entity.",O=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],B="object",w=["name"],L=!0,se={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},type:{type:"string",description:"An optional value to categorize links into specific groups.",examples:["runbook","documentation","logs","dashboard"],minLength:1}}}}},Me={$schema:Kt,$id:ct,description:Zt,examples:O,type:B,required:w,additionalProperties:L,properties:se},rt="http://json-schema.org/draft-07/schema",xt="common",ut="object",et="Common definitions to import from other schemas",Wt={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","targetRef"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference",deprecated:!0},targetRef:{type:"string",minLength:1,description:"The entity ref of the target of this relation."}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},fe={$schema:rt,$id:xt,type:ut,description:et,definitions:Wt};const Ae=new Map,Xe=[nt,st,Me,fe];function St(vt){if(!(vt!=null&&vt.length))throw new TypeError("Unknown error");const De=vt[0];throw new TypeError(`${De.instancePath||"<root>"} ${De.message}${De.params?` - ${Object.entries(De.params).map(([Ut,Sn])=>`${Ut}: ${Sn}`).join(", ")}`:""}`)}function pt(vt,De={}){var Ut;const Sn=(Ut=De==null?void 0:De.disableCache)!=null?Ut:!1,kn=Sn?"":JSON.stringify(vt);if(!Sn){const za=Ae.get(kn);if(za)return za}const ta=Tt(vt),ca=new(W())({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});ta.length&&ca.addSchema(ta,void 0,void 0,!0);const Wa=ca.compile(vt);return Sn||Ae.set(kn,Wa),Wa}function Tt(vt){if(typeof vt!="object")return[];const De=new Set;vt.$id&&De.add(vt.$id);const Ut=new Array,Sn=[vt];for(;Sn.length;){const kn=Sn.pop();for(const ta of Dt(kn))if(!De.has(ta)){De.add(ta);const ca=Xe.find(Wa=>Wa.$id===ta);ca&&(Ut.push(ca),Sn.push(ca))}}return Ut}function*Dt(vt){const De=[vt];for(;De.length;){const Ut=De.pop();if(typeof Ut=="object"&&Ut)for(const[Sn,kn]of Object.entries(Ut))Sn==="$ref"&&typeof kn=="string"?yield kn.split("#")[0]:De.push(kn)}}function $e(vt){const De=pt(vt||nt);return Ut=>{if(De(Ut)===!0)return Ut;throw St(De.errors)}}function ot(vt){const De=pt(vt);return Ut=>{var Sn;if(De(Ut)===!0)return Ut;const ta=(Sn=De.errors)==null?void 0:Sn.filter(ca=>["/kind","/apiVersion"].includes(ca.instancePath));if(ta!=null&&ta.length&&ta.every(ca=>ca.keyword==="enum"))return!1;throw St(De.errors)}}function Bt(vt){const De=pt(vt||st);return Ut=>{if(De(Ut)===!0)return Ut;throw St(De.errors)}}class _e{static isValidApiVersion(De){return X.isValidPrefixAndOrSuffix(De,"/",X.isValidDnsSubdomain,Ut=>Ut.length>=1&&Ut.length<=63&&/^[a-z0-9A-Z]+$/.test(Ut))}static isValidKind(De){return typeof De=="string"&&De.length>=1&&De.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(De)}static isValidObjectName(De){return typeof De=="string"&&De.length>=1&&De.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(De)}static isValidNamespace(De){return X.isValidDnsLabel(De)}static isValidLabelKey(De){return X.isValidPrefixAndOrSuffix(De,"/",X.isValidDnsSubdomain,_e.isValidObjectName)}static isValidLabelValue(De){return De===""||_e.isValidObjectName(De)}static isValidAnnotationKey(De){return X.isValidPrefixAndOrSuffix(De,"/",X.isValidDnsSubdomain,_e.isValidObjectName)}static isValidAnnotationValue(De){return typeof De=="string"}}const Je={isValidApiVersion:_e.isValidApiVersion,isValidKind:_e.isValidKind,isValidEntityName:_e.isValidObjectName,isValidNamespace:_e.isValidNamespace,isValidLabelKey:_e.isValidLabelKey,isValidLabelValue:_e.isValidLabelValue,isValidAnnotationKey:_e.isValidAnnotationKey,isValidAnnotationValue:_e.isValidAnnotationValue,isValidTag:vt=>typeof vt=="string"&&vt.length>=1&&vt.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(vt)};function Ee(vt={}){return{...Je,...vt}}var it=Object.defineProperty,at=(vt,De,Ut)=>De in vt?it(vt,De,{enumerable:!0,configurable:!0,writable:!0,value:Ut}):vt[De]=Ut,Pt=(vt,De,Ut)=>(at(vt,typeof De!="symbol"?De+"":De,Ut),Ut);class Nt{constructor(De=Ee()){Pt(this,"validators"),this.validators=De}async enforce(De){var Ut,Sn,kn,ta,ca,Wa,za;function Aa(f,c,y){if(c==null)throw new Error(`${f} must have a value`);let ee;try{ee=y(c)}catch(ke){throw new Error(`${f} could not be validated, ${ke}`)}if(!ee){let ke;switch(y.name){case"isValidLabelValue":case"isValidObjectName":ke="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":ke="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":ke="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":ke="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":ke="a string";break;case"isValidKind":ke="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":ke="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":ke="a non empty string";break;default:ke=void 0;break}const Ot=ke?` expected ${ke} but found "${c}".`:"";throw new Error(`"${f}" is not valid;${Ot} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function Ia(f,c,y){return c===void 0||Aa(f,c,y)}Aa("apiVersion",De.apiVersion,this.validators.isValidApiVersion),Aa("kind",De.kind,this.validators.isValidKind),Aa("metadata.name",De.metadata.name,this.validators.isValidEntityName),Ia("metadata.namespace",De.metadata.namespace,this.validators.isValidNamespace);for(const[f,c]of Object.entries((Ut=De.metadata.labels)!=null?Ut:[]))Aa(`labels.${f}`,f,this.validators.isValidLabelKey),Aa(`labels.${f}`,c,this.validators.isValidLabelValue);for(const[f,c]of Object.entries((Sn=De.metadata.annotations)!=null?Sn:[]))Aa(`annotations.${f}`,f,this.validators.isValidAnnotationKey),Aa(`annotations.${f}`,c,this.validators.isValidAnnotationValue);const La=(kn=De.metadata.tags)!=null?kn:[];for(let f=0;f<La.length;++f)Aa(`tags.${f}`,La[f],this.validators.isValidTag);const nr=(ta=De.metadata.links)!=null?ta:[];for(let f=0;f<nr.length;++f)Aa(`links.${f}.url`,(ca=nr[f])==null?void 0:ca.url,X.isValidUrl),Ia(`links.${f}.title`,(Wa=nr[f])==null?void 0:Wa.title,X.isNonEmptyString),Ia(`links.${f}.icon`,(za=nr[f])==null?void 0:za.icon,_e.isValidObjectName);return De}}var on=Object.defineProperty,Ze=(vt,De,Ut)=>De in vt?on(vt,De,{enumerable:!0,configurable:!0,writable:!0,value:Ut}):vt[De]=Ut,He=(vt,De,Ut)=>(Ze(vt,typeof De!="symbol"?De+"":De,Ut),Ut);const ve=null;class Ie{constructor(De=ve){He(this,"knownFields"),this.knownFields=De}async enforce(De){for(const Ut of Object.keys(De))if(!this.knownFields.includes(Ut))throw new Error(`Unknown field ${Ut}`);return De}}var lt=Object.defineProperty,$t=(vt,De,Ut)=>De in vt?lt(vt,De,{enumerable:!0,configurable:!0,writable:!0,value:Ut}):vt[De]=Ut,j=(vt,De,Ut)=>($t(vt,typeof De!="symbol"?De+"":De,Ut),Ut);class he{constructor(){j(this,"validate")}async enforce(De){if(!this.validate){const kn=new Ajv({allowUnionTypes:!0});this.validate=kn.addSchema([fe,Me],void 0,void 0,!0).compile(st)}if(this.validate(De)===!0)return De;const[Sn]=this.validate.errors||[];throw Sn?new Error(`Malformed envelope, ${Sn.instancePath||"<root>"} ${Sn.message}`):new Error("Malformed envelope, Unknown error")}}class ze{constructor(De){this.policies=De}async enforce(De){let Ut=De;for(const Sn of this.policies){const kn=await Sn.enforce(Ut);if(!kn)throw new Error(`Policy ${Sn.constructor.name} did not return a result`);Ut=kn}return Ut}}class ht{constructor(De){this.policies=De}async enforce(De){for(const Ut of this.policies){const Sn=await Ut.enforce(De);if(Sn)return Sn}throw new Error("The entity did not match any known policy")}}const sn={allOf(vt){return new ze(vt)},oneOf(vt){return new ht(vt)}};var Qt="http://json-schema.org/draft-07/schema",x="ApiV1alpha1",Y="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",Ye=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],Et=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc","trpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],zt={$schema:Qt,$id:x,description:Y,examples:Ye,allOf:Et};function Ft(vt){let De;return{async check(Ut){return De||(De=ot(vt)),De(Ut)===Ut}}}const gn=Ft(zt);var cn="http://json-schema.org/draft-07/schema",An="ComponentV1alpha1",Fe='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',qe=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],At=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],tn={$schema:cn,$id:An,description:Fe,examples:qe,allOf:At};const ln=Ft(tn);var dn="http://json-schema.org/draft-07/schema",un="DomainV1alpha1",wn="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",Wn=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],Gn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],sa={$schema:dn,$id:un,description:wn,examples:Wn,allOf:Gn};const Cn=Ft(sa);var ea="http://json-schema.org/draft-07/schema",la="GroupV1alpha1",ra="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",fa=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],Pa=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],ia={$schema:ea,$id:la,description:ra,examples:fa,allOf:Pa};const Ra=Ft(ia);var ue="http://json-schema.org/draft-07/schema",Qe="LocationV1alpha1",yt="A location is a marker that references other places to look for catalog data.",K=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],$=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],T={$schema:ue,$id:Qe,description:yt,examples:K,allOf:$};const F=Ft(T),V="ownedBy",Ce="ownerOf",Re="consumesApi",pe="apiConsumedBy",Ne="providesApi",tt="apiProvidedBy",_t="dependsOn",Ht="dependencyOf",en="parentOf",Xt="childOf",mn="memberOf",_n="hasMember",hn="partOf",En="hasPart";var bn="http://json-schema.org/draft-07/schema",Ln="ResourceV1alpha1",qn="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",Vn=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],xn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],Bn={$schema:bn,$id:Ln,description:qn,examples:Vn,allOf:xn};const $n=Ft(Bn);var yn="http://json-schema.org/draft-07/schema",Dn="SystemV1alpha1",pa="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",ga=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],Ma=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],Fa={$schema:yn,$id:Dn,description:pa,examples:ga,allOf:Ma};const Ga=Ft(Fa);var er="http://json-schema.org/draft-07/schema",Ba="UserV1alpha1",Va="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",Ha=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],Ka=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],Ja={$schema:er,$id:Ba,description:Va,examples:Ha,allOf:Ka};const sr=Ft(Ja),dr="backstage.io/managed-by-location",Za="backstage.io/managed-by-origin-location",Hn="backstage.io/source-location",Ea=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function Ua(vt){if(typeof vt!="string")throw new TypeError(`Unable to parse location ref '${vt}', unexpected argument ${typeof vt}`);const De=vt.indexOf(":");if(De<0)throw new TypeError(`Unable to parse location ref '${vt}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const Ut=vt.substring(0,De).trim(),Sn=vt.substring(De+1).trim();if(!Ut||!Sn)throw new TypeError(`Unable to parse location ref '${vt}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(Ut==="http"||Ut==="https")throw new TypeError(`Invalid location ref '${vt}', please prefix it with 'url:', e.g. 'url:${vt}'`);if(Ea.test(Sn))throw new TypeError(`Invalid location ref '${vt}', target is a javascript: URL`);return{type:Ut,target:Sn}}function tr(vt){const{type:De,target:Ut}=vt;if(De){if(!Ut)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");if(Ea.test(Ut))throw new TypeError(`Invalid location ref '${De}:${Ut}', target is a javascript: URL`);return`${De}:${Ut}`}function Ya(vt){var De,Ut,Sn,kn,ta;const ca=(ta=(Ut=(De=vt.metadata)==null?void 0:De.annotations)==null?void 0:Ut[Hn])!=null?ta:(kn=(Sn=vt.metadata)==null?void 0:Sn.annotations)==null?void 0:kn[dr];if(!ca)throw new Error(`Entity '${be(vt)}' is missing location`);return Ua(ca)}},53907:(Rn,kt,e)=>{"use strict";e.d(kt,{CX:()=>Pa,WY:()=>Ut,uC:()=>ea,xP:()=>Wn,C4:()=>sa,KN:()=>Ce,gr:()=>tt,II:()=>Bn,wQ:()=>Ao,Td:()=>$t,aq:()=>he,eE:()=>sn,_i:()=>At,gN:()=>Ra,YM:()=>Ba,sn:()=>Ye,$_:()=>un,Jv:()=>_t,pM:()=>F,CJ:()=>dr,jJ:()=>hn,bg:()=>Zo});var r=e(2784),m=e(13980),u=e.n(m),W=e(18473),A=e(82394),o=e.n(A),U=e(57032),We=e(30705),we=e(30195),a=e(9850),te=e.n(a),q=e(12782),D=e.n(q);const Z=null;function Le(g,n){let s,E=!1;const M={};try{s=n!=null&&n.key?g.getConfig(n.key):g;for(const Ue of Z){const ft=s.getOptionalNumber(Ue);ft!==void 0&&(M[Ue]=ft,E=!0)}}catch(Ue){throw new InputError(`Failed to read duration from config, ${Ue}`)}try{if(!E){const ft=Z.map(bt=>`'${bt}'`).join(", ");throw new Error(`Needs one or more of ${ft}`)}const Ue=s.keys().filter(ft=>!Z.includes(ft));if(Ue.length){const ft=Ue.length===1?"property":"properties",bt=Ue.map(nn=>`'${nn}'`).join(", "),jt=Z.map(nn=>`'${nn}'`).join(", ");throw new Error(`Unknown ${ft} ${bt}; expected one or more of ${jt}`)}}catch(Ue){let ft="Failed to read duration from config";throw n!=null&&n.key&&(ft+=` at '${n.key}'`),new InputError(`${ft}, ${Ue}`)}return M}var ie=Object.defineProperty,re=(g,n,s)=>n in g?ie(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,Q=(g,n,s)=>(re(g,typeof n!="symbol"?n+"":n,s),s);const H=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function S(g){return typeof g=="object"&&g!==null&&!Array.isArray(g)}function l(g){if(g===null)return"null";if(Array.isArray(g))return"array";const n=typeof g;return n==="number"&&isNaN(g)?"nan":n==="string"&&g===""?"empty-string":n}const b={type(g,n,s,E){return`Invalid type in config for key '${g}' in '${n}', got ${s}, wanted ${E}`},missing(g){return`Missing required config value at '${g}'`},convert(g,n,s){return`Unable to convert config value for key '${g}' in '${n}' to a ${s}`}};class h{constructor(n,s="mock-config",E,M=""){this.data=n,this.context=s,this.fallback=E,this.prefix=M,Q(this,"filteredKeys"),Q(this,"notifiedFilteredKeys",new Set)}static fromConfigs(n){return n.length===0?new h(void 0):n.reduce((s,{data:E,context:M,filteredKeys:Ue,deprecatedKeys:ft})=>{const bt=new h(E,M,s);if(bt.filteredKeys=Ue,ft)for(const{key:jt,description:nn}of ft)console.warn(`The configuration key '${jt}' of ${M} is deprecated and may be removed soon. ${nn||""}`);return bt},void 0)}has(n){var s,E;return this.readValue(n)!==void 0?!0:(E=(s=this.fallback)==null?void 0:s.has(n))!=null?E:!1}keys(){var n,s;const E=this.data?Object.keys(this.data):[],M=(s=(n=this.fallback)==null?void 0:n.keys())!=null?s:[];return[...new Set([...E,...M])]}get(n){const s=this.getOptional(n);if(s===void 0)throw new Error(b.missing(this.fullKey(n!=null?n:"")));return s}getOptional(n){var s,E;const M=te()(this.readValue(n)),Ue=(s=this.fallback)==null?void 0:s.getOptional(n);return M===void 0?Ue:Ue===void 0?M:D()({},{value:Ue},{value:M},(ft,bt)=>!S(bt)||!S(ft)?bt:void 0).value}getConfig(n){const s=this.getOptionalConfig(n);if(s===void 0)throw new Error(b.missing(this.fullKey(n)));return s}getOptionalConfig(n){var s;const E=this.readValue(n),M=(s=this.fallback)==null?void 0:s.getOptionalConfig(n);if(S(E))return this.copy(E,n,M);if(E!==void 0)throw new TypeError(b.type(this.fullKey(n),this.context,l(E),"object"));return M}getConfigArray(n){const s=this.getOptionalConfigArray(n);if(s===void 0)throw new Error(b.missing(this.fullKey(n)));return s}getOptionalConfigArray(n){var s;const E=this.readConfigValue(n,M=>{if(!Array.isArray(M))return{expected:"object-array"};for(const[Ue,ft]of M.entries())if(!S(ft))return{expected:"object-array",value:ft,key:`${n}[${Ue}]`};return!0});if(E)return E.map((M,Ue)=>this.copy(M,`${n}[${Ue}]`))}getNumber(n){const s=this.getOptionalNumber(n);if(s===void 0)throw new Error(b.missing(this.fullKey(n)));return s}getOptionalNumber(n){const s=this.readConfigValue(n,M=>typeof M=="number"||typeof M=="string"||{expected:"number"});if(typeof s=="number"||s===void 0)return s;const E=Number(s);if(!Number.isFinite(E))throw new Error(b.convert(this.fullKey(n),this.context,"number"));return E}getBoolean(n){const s=this.getOptionalBoolean(n);if(s===void 0)throw new Error(b.missing(this.fullKey(n)));return s}getOptionalBoolean(n){const s=this.readConfigValue(n,M=>typeof M=="boolean"||typeof M=="number"||typeof M=="string"||{expected:"boolean"});if(typeof s=="boolean"||s===void 0)return s;const E=String(s).trim();if(/^(?:y|yes|true|1|on)$/i.test(E))return!0;if(/^(?:n|no|false|0|off)$/i.test(E))return!1;throw new Error(b.convert(this.fullKey(n),this.context,"boolean"))}getString(n){const s=this.getOptionalString(n);if(s===void 0)throw new Error(b.missing(this.fullKey(n)));return s}getOptionalString(n){return this.readConfigValue(n,s=>typeof s=="string"&&s!==""||{expected:"string"})}getStringArray(n){const s=this.getOptionalStringArray(n);if(s===void 0)throw new Error(b.missing(this.fullKey(n)));return s}getOptionalStringArray(n){return this.readConfigValue(n,s=>{if(!Array.isArray(s))return{expected:"string-array"};for(const[E,M]of s.entries())if(typeof M!="string"||M==="")return{expected:"string-array",value:M,key:`${n}[${E}]`};return!0})}fullKey(n){return`${this.prefix}${this.prefix?".":""}${n}`}copy(n,s,E){const M=new h(n,this.context,E,this.fullKey(s));return M.filteredKeys=this.filteredKeys,M}readConfigValue(n,s){var E,M;const Ue=this.readValue(n);if(Ue===void 0)return(M=this.fallback)==null?void 0:M.readConfigValue(n,s);const ft=s(Ue);if(ft!==!0){const{key:bt=n,value:jt=Ue,expected:nn}=ft;throw new TypeError(b.type(this.fullKey(bt),this.context,l(jt),nn))}return Ue}readValue(n){const s=n?n.split("."):[];for(const M of s)if(!H.test(M))throw new TypeError(`Invalid config key '${n}'`);if(this.data===void 0)return;let E=this.data;for(const[M,Ue]of s.entries())if(S(E))E=E[Ue];else if(E!==void 0){const ft=this.fullKey(s.slice(0,M).join("."));throw new TypeError(b.type(ft,this.context,l(E),"object"))}return E}}var C=e(73557),p=e(16060),be=e(64279),ge=e(83487),ye=e(34519),ne=e.n(ye),oe=e(72164),X=e(24991),xe=Object.defineProperty,It=(g,n,s)=>n in g?xe(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,P=(g,n,s)=>(It(g,typeof n!="symbol"?n+"":n,s),s);class Jt{constructor(...n){P(this,"holders"),this.holders=n}get(n){for(const s of this.holders){const E=s.get(n);if(E)return E}}}const me=(0,W.CT)("api-context"),Lt=g=>{var n;const{apis:s,children:E}=g,M=(n=(0,r.useContext)(me))==null?void 0:n.atVersion(1),Ue=M?new Jt(s,M):s;return r.createElement(me.Provider,{value:(0,W.EI)({1:Ue}),children:E})};Lt.propTypes={apis:u().shape({get:u().func.isRequired}).isRequired,children:u().node};var Ct=Object.defineProperty,je=(g,n,s)=>n in g?Ct(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,nt=(g,n,s)=>(je(g,typeof n!="symbol"?n+"":n,s),s);class Te{constructor(n){this.factories=n,nt(this,"apis",new Map)}static validateFactories(n,s){for(const E of s){const M=[E],Ue=new Set;for(;M.length;){const ft=M.shift(),bt=n.get(ft);if(bt)for(const jt of Object.values(bt.deps)){if(jt.id===E.id)throw new Error(`Circular dependency of api factory for ${E}`);Ue.has(jt)||(Ue.add(jt),M.push(jt))}}}}get(n){return this.load(n)}load(n,s=[]){const E=this.apis.get(n.id);if(E)return E;const M=this.factories.get(n);if(!M)return;if(s.includes(M.api))throw new Error(`Circular dependency of api factory for ${M.api}`);const Ue=this.loadDeps(n,M.deps,[...s,M.api]),ft=M.factory(Ue);return this.apis.set(n.id,ft),ft}loadDeps(n,s,E){const M={};for(const Ue in s)if(s.hasOwnProperty(Ue)){const ft=s[Ue],bt=this.load(ft,E);if(!bt)throw new Error(`No API factory available for dependency ${ft} of dependent ${n}`);M[Ue]=bt}return M}}var gt=Object.defineProperty,de=(g,n,s)=>n in g?gt(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,G=(g,n,s)=>(de(g,typeof n!="symbol"?n+"":n,s),s),Pe=(g=>(g[g.default=10]="default",g[g.app=50]="app",g[g.static=100]="static",g))(Pe||{});class ce{constructor(){G(this,"factories",new Map)}register(n,s){const E=Pe[n],M=this.factories.get(s.api.id);return M&&M.priority>=E?!1:(this.factories.set(s.api.id,{priority:E,factory:s}),!0)}get(n){const s=this.factories.get(n.id);if(s)return s.factory}getAllApis(){const n=new Set;for(const{factory:s}of this.factories.values())n.add(s.api);return n}}function le(g){return new Promise((n,s)=>{const E=g.width||500,M=g.height||700,Ue=window.screen.width/2-E/2,ft=window.screen.height/2-M/2,bt=window.open(g.url,g.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${E},height=${M},top=${ft},left=${Ue}`);let jt="";if(!bt||typeof bt.closed=="undefined"||bt.closed){const In=new Error("Failed to open auth popup.");In.name="PopupRejectedError",s(In);return}const nn=In=>{if(In.source!==bt||In.origin!==g.origin)return;const{data:da}=In;if(da.type==="config_info"){jt=da.targetOrigin;return}if(da.type!=="authorization_response")return;const aa=da;if("error"in aa){const ua=new Error(aa.error.message);ua.name=aa.error.name,s(ua)}else n(aa.response);Zn()},jn=setInterval(()=>{if(bt.closed){const In=`Login failed, ${jt&&jt!==window.location.origin?`Incorrect app origin, expected ${jt}`:"popup was closed"}`,da=new Error(In);da.name="PopupClosedError",s(da),Zn()}},100);function Zn(){window.removeEventListener("message",nn),clearInterval(jn)}window.addEventListener("message",nn)})}var Be=Object.defineProperty,st=(g,n,s)=>n in g?Be(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,Kt=(g,n,s)=>(st(g,typeof n!="symbol"?n+"":n,s),s);let ct=!1;function Zt(g){return[...g].join(" ")}class O{constructor(n){Kt(this,"discoveryApi"),Kt(this,"environment"),Kt(this,"provider"),Kt(this,"joinScopesFunc"),Kt(this,"authRequester"),Kt(this,"sessionTransform"),Kt(this,"enableExperimentalRedirectFlow"),Kt(this,"popupOptions");var s;const{configApi:E,discoveryApi:M,environment:Ue,provider:ft,joinScopes:bt=Zt,oauthRequestApi:jt,sessionTransform:nn=Zn=>Zn,popupOptions:jn}=n;!ct&&!E&&(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),ct=!0),this.enableExperimentalRedirectFlow=E&&(s=E.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?s:!1,this.authRequester=jt.createAuthRequester({provider:ft,onAuthRequest:async Zn=>this.enableExperimentalRedirectFlow?this.executeRedirect(Zn):this.showPopup(Zn)}),this.discoveryApi=M,this.environment=Ue,this.provider=ft,this.joinScopesFunc=bt,this.sessionTransform=nn,this.popupOptions=jn}async createSession(n){return n.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(n.scopes):this.showPopup(n.scopes):this.authRequester(n.scopes)}async refreshSession(n){const s=await fetch(await this.buildUrl("/refresh",{optional:!0,...n&&{scope:this.joinScopesFunc(n)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(M=>{throw new Error(`Auth refresh request failed, ${M}`)});if(!s.ok){const M=new Error(`Auth refresh request failed, ${s.statusText}`);throw M.status=s.status,M}const E=await s.json();if(E.error){const M=new Error(E.error.message);throw E.error.name&&(M.name=E.error.name),M}return await this.sessionTransform(E)}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(s=>{throw new Error(`Logout request failed, ${s}`)});if(!n.ok){const s=new Error(`Logout request failed, ${n.statusText}`);throw s.status=n.status,s}}async showPopup(n){var s,E,M,Ue,ft,bt,jt,nn;const jn=this.joinScopesFunc(n),Zn=await this.buildUrl("/start",{scope:jn,origin:window.location.origin,flow:"popup"}),In=(E=(s=this.popupOptions)==null?void 0:s.size)!=null&&E.fullscreen?window.screen.width:((Ue=(M=this.popupOptions)==null?void 0:M.size)==null?void 0:Ue.width)||450,da=(bt=(ft=this.popupOptions)==null?void 0:ft.size)!=null&&bt.fullscreen?window.screen.height:((nn=(jt=this.popupOptions)==null?void 0:jt.size)==null?void 0:nn.height)||730,aa=await le({url:Zn,name:`${this.provider.title} Login`,origin:new URL(Zn).origin,width:In,height:da});return await this.sessionTransform(aa)}async executeRedirect(n){const s=this.joinScopesFunc(n);return window.location.href=await this.buildUrl("/start",{scope:s,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(n,s){const E=await this.discoveryApi.getBaseUrl("auth"),M=this.buildQueryString({...s,env:this.environment});return`${E}/${this.provider.id}${n}${M}`}buildQueryString(n){if(!n)return"";const s=Object.entries(n).map(([E,M])=>{if(typeof M=="string")return`${encodeURIComponent(E)}=${encodeURIComponent(M)}`;if(M)return encodeURIComponent(E)}).filter(Boolean).join("&");return s?`?${s}`:""}}var B=Object.defineProperty,w=(g,n,s)=>n in g?B(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,L=(g,n,s)=>(w(g,typeof n!="symbol"?n+"":n,s),s);class se{constructor(n){L(this,"discoveryApi"),L(this,"environment"),L(this,"provider");const{discoveryApi:s,environment:E,provider:M}=n;this.discoveryApi=s,this.environment=E,this.provider=M}async createSession(){const n=await this.buildUrl("/start"),s=await le({url:n,name:`${this.provider.title} Login`,origin:new URL(n).origin,width:450,height:730});return{...s,id:s.profile.email}}async refreshSession(){}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(s=>{throw new Error(`Logout request failed, ${s}`)});if(!n.ok){const s=new Error(`Logout request failed, ${n.statusText}`);throw s.status=n.status,s}}async buildUrl(n){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${n}?env=${this.environment}`}}function Me(g,n){for(const s of n)if(!g.has(s))return!1;return!0}class rt{constructor(n){this.options=n}sessionExistsAndHasScope(n,s){if(!n)return!1;if(!s||this.options.sessionScopes===void 0)return!0;const E=this.options.sessionScopes(n);return Me(E,s)}getExtendedScope(n,s){const E=new Set(this.options.defaultScopes);if(n&&this.options.sessionScopes!==void 0){const M=this.options.sessionScopes(n);for(const Ue of M)E.add(Ue)}if(s)for(const M of s)E.add(M);return E}}var xt=Object.defineProperty,ut=(g,n,s)=>n in g?xt(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,et=(g,n,s)=>(ut(g,typeof n!="symbol"?n+"":n,s),s);class Wt{constructor(){et(this,"isClosed",!1),et(this,"terminatingError"),et(this,"observable",new(o())(n=>this.isClosed?(this.terminatingError?n.error(this.terminatingError):n.complete(),()=>{}):(this.subscribers.add(n),()=>{this.subscribers.delete(n)}))),et(this,"subscribers",new Set)}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(s=>s.next(n))}error(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(s=>s.error(n))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,s,E){const M=typeof n=="function"?{next:n,error:s,complete:E}:n;return this.observable.subscribe(M)}}class fe{constructor(n){et(this,"isClosed"),et(this,"currentValue"),et(this,"terminatingError"),et(this,"observable"),et(this,"subscribers",new Set),this.isClosed=!1,this.currentValue=n,this.terminatingError=void 0,this.observable=new(o())(s=>this.isClosed?(this.terminatingError?s.error(this.terminatingError):s.complete(),()=>{}):(s.next(this.currentValue),this.subscribers.add(s),()=>{this.subscribers.delete(s)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=n,this.subscribers.forEach(s=>s.next(n))}error(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(s=>s.error(n))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,s,E){const M=typeof n=="function"?{next:n,error:s,complete:E}:n;return this.observable.subscribe(M)}}var Ae=Object.defineProperty,Xe=(g,n,s)=>n in g?Ae(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,St=(g,n,s)=>(Xe(g,typeof n!="symbol"?n+"":n,s),s);class pt{constructor(){St(this,"subject",new fe(U.S.SignedOut)),St(this,"signedIn",!1)}setIsSignedIn(n){this.signedIn!==n&&(this.signedIn=n,this.subject.next(this.signedIn?U.S.SignedIn:U.S.SignedOut))}sessionState$(){return this.subject}}var Tt=Object.defineProperty,Dt=(g,n,s)=>n in g?Tt(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,$e=(g,n,s)=>(Dt(g,typeof n!="symbol"?n+"":n,s),s);class ot{constructor(n){$e(this,"connector"),$e(this,"helper"),$e(this,"sessionScopesFunc"),$e(this,"sessionShouldRefreshFunc"),$e(this,"stateTracker",new pt),$e(this,"refreshPromise"),$e(this,"currentSession");const{connector:s,defaultScopes:E=new Set,sessionScopes:M,sessionShouldRefresh:Ue}=n;this.connector=s,this.sessionScopesFunc=M,this.sessionShouldRefreshFunc=Ue,this.helper=new rt({sessionScopes:M,defaultScopes:E})}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const E=await this.collapsedSessionRefresh(n.scopes),M=this.sessionScopesFunc(this.currentSession),Ue=this.sessionScopesFunc(E);return Me(Ue,M)&&(this.currentSession=E),E}catch(E){if(n.optional)return;throw E}}if(!this.currentSession&&!n.instantPopup)try{const s=await this.collapsedSessionRefresh(n.scopes);return this.currentSession=s,this.getSession(n)}catch{}if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(n){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession(this.helper.getExtendedScope(this.currentSession,n));try{const s=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),s}finally{delete this.refreshPromise}}}var Bt=Object.defineProperty,_e=(g,n,s)=>n in g?Bt(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,Je=(g,n,s)=>(_e(g,typeof n!="symbol"?n+"":n,s),s);class Ee{constructor(n){Je(this,"connector"),Je(this,"helper"),Je(this,"stateTracker",new pt),Je(this,"currentSession");const{connector:s,defaultScopes:E=new Set,sessionScopes:M}=n;this.connector=s,this.helper=new rt({sessionScopes:M,defaultScopes:E})}setSession(n){this.currentSession=n,this.stateTracker.setIsSignedIn(Boolean(n))}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes))return this.currentSession;if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}var it=Object.defineProperty,at=(g,n,s)=>n in g?it(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,Pt=(g,n,s)=>(at(g,typeof n!="symbol"?n+"":n,s),s);class Nt{constructor(n){Pt(this,"manager"),Pt(this,"storageKey"),Pt(this,"schema"),Pt(this,"sessionShouldRefreshFunc"),Pt(this,"helper");const{manager:s,storageKey:E,schema:M,sessionScopes:Ue,sessionShouldRefresh:ft=()=>!1}=n;this.manager=s,this.storageKey=E,this.schema=M,this.sessionShouldRefreshFunc=ft,this.helper=new rt({sessionScopes:Ue,defaultScopes:new Set})}setSession(n){this.manager.setSession(n),this.saveSession(n)}async getSession(n){const{scopes:s}=n,E=this.loadSession();if(this.helper.sessionExistsAndHasScope(E,s)&&!this.sessionShouldRefreshFunc(E))return this.manager.setSession(E),E;const M=await this.manager.getSession(n);return this.saveSession(M),M}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const n=localStorage.getItem(this.storageKey);if(n){const s=JSON.parse(n,(E,M)=>(M==null?void 0:M.__type)==="Set"?new Set(M.__value):M);try{return this.schema.parse(s)}catch(E){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${E}`),E}}return}catch{localStorage.removeItem(this.storageKey);return}}saveSession(n){if(n===void 0){localStorage.removeItem(this.storageKey);return}try{this.schema.parse(n)}catch(s){console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${s}`);return}localStorage.setItem(this.storageKey,JSON.stringify(n,(s,E)=>E instanceof Set?{__type:"Set",__value:Array.from(E)}:E))}}var on=Object.defineProperty,Ze=(g,n,s)=>n in g?on(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,He=(g,n,s)=>(Ze(g,typeof n!="symbol"?n+"":n,s),s);const ve={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class Ie{constructor(n){He(this,"sessionManager"),He(this,"scopeTransform"),this.sessionManager=n.sessionManager,this.scopeTransform=n.scopeTransform}static create(n){const{configApi:s,discoveryApi:E,environment:M="development",provider:Ue=ve,oauthRequestApi:ft,defaultScopes:bt=[],scopeTransform:jt=In=>In,popupOptions:nn}=n,jn=new O({configApi:s,discoveryApi:E,environment:M,provider:Ue,oauthRequestApi:ft,sessionTransform({backstageIdentity:In,...da}){var aa;const ua={...da,providerInfo:{idToken:da.providerInfo.idToken,accessToken:da.providerInfo.accessToken,scopes:Ie.normalizeScopes(jt,da.providerInfo.scope),expiresAt:da.providerInfo.expiresInSeconds?new Date(Date.now()+da.providerInfo.expiresInSeconds*1e3):void 0}};if(In){const ja=(aa=In.expiresInSeconds)!=null?aa:da.providerInfo.expiresInSeconds;ua.backstageIdentity={token:In.token,identity:In.identity,expiresAt:ja?new Date(Date.now()+ja*1e3):void 0}}return ua},popupOptions:nn}),Zn=new ot({connector:jn,defaultScopes:new Set(bt),sessionScopes:In=>In.providerInfo.scopes,sessionShouldRefresh:In=>{var da,aa;let ua=1/0;return(da=In.providerInfo)!=null&&da.expiresAt&&(ua=Math.min(ua,(In.providerInfo.expiresAt.getTime()-Date.now())/1e3)),(aa=In.backstageIdentity)!=null&&aa.expiresAt&&(ua=Math.min(ua,(In.backstageIdentity.expiresAt.getTime()-Date.now())/1e3)),ua<60*5}});return new Ie({sessionManager:Zn,scopeTransform:jt})}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(n,s){var E;const M=Ie.normalizeScopes(this.scopeTransform,n),Ue=await this.sessionManager.getSession({...s,scopes:M});return(E=Ue==null?void 0:Ue.providerInfo.accessToken)!=null?E:""}async getIdToken(n={}){var s;const E=await this.sessionManager.getSession({...n,scopes:new Set(["openid"])});return(s=E==null?void 0:E.providerInfo.idToken)!=null?s:""}async getBackstageIdentity(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.backstageIdentity}async getProfile(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.profile}static normalizeScopes(n,s){if(!s)return new Set;const E=Array.isArray(s)?s:s.split(/[\s|,]/).filter(Boolean);return new Set(n(E))}}const lt={id:"github",title:"GitHub",icon:()=>null};class $t{static create(n){const{configApi:s,discoveryApi:E,environment:M="development",provider:Ue=lt,oauthRequestApi:ft,defaultScopes:bt=["read:user"]}=n;return Ie.create({configApi:s,discoveryApi:E,oauthRequestApi:ft,provider:Ue,environment:M,defaultScopes:bt})}}const j={id:"gitlab",title:"GitLab",icon:()=>null};class he{static create(n){const{configApi:s,discoveryApi:E,environment:M="development",provider:Ue=j,oauthRequestApi:ft,defaultScopes:bt=["read_user"]}=n;return Ie.create({configApi:s,discoveryApi:E,oauthRequestApi:ft,provider:Ue,environment:M,defaultScopes:bt})}}const ze={id:"google",title:"Google",icon:()=>null},ht="https://www.googleapis.com/auth/";class sn{static create(n){const{configApi:s,discoveryApi:E,oauthRequestApi:M,environment:Ue="development",provider:ft=ze,defaultScopes:bt=["openid",`${ht}userinfo.email`,`${ht}userinfo.profile`]}=n;return Ie.create({configApi:s,discoveryApi:E,oauthRequestApi:M,provider:ft,environment:Ue,defaultScopes:bt,scopeTransform(jt){return jt.map(nn=>nn==="openid"?nn:nn==="profile"||nn==="email"?`${ht}userinfo.${nn}`:nn.startsWith(ht)?nn:`${ht}${nn}`)}})}}const Qt={id:"okta",title:"Okta",icon:()=>null},x=new Set(["openid","profile","email","phone","address","groups","offline_access"]),Y="okta.";class Ye{static create(n){const{configApi:s,discoveryApi:E,environment:M="development",provider:Ue=Qt,oauthRequestApi:ft,defaultScopes:bt=["openid","email","profile","offline_access"]}=n;return Ie.create({configApi:s,discoveryApi:E,oauthRequestApi:ft,provider:Ue,environment:M,defaultScopes:bt,scopeTransform(jt){return jt.map(nn=>x.has(nn)||nn.startsWith(Y)?nn:`${Y}${nn}`)}})}}const Et=we.z.object({profile:we.z.object({email:we.z.string().optional(),displayName:we.z.string().optional(),picture:we.z.string().optional()}),backstageIdentity:we.z.object({token:we.z.string(),identity:we.z.object({type:we.z.literal("user"),userEntityRef:we.z.string(),ownershipEntityRefs:we.z.array(we.z.string())})})}),zt={id:"saml",title:"SAML",icon:()=>null};class Ft{constructor(n){this.sessionManager=n}static create(n){const{discoveryApi:s,environment:E="development",provider:M=zt}=n,Ue=new se({discoveryApi:s,environment:E,provider:M}),ft=new Ee({connector:Ue}),bt=new Nt({manager:ft,storageKey:`${M.id}Session`,schema:Et});return new Ft(bt)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.backstageIdentity}async getProfile(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.profile}}var gn=Object.defineProperty,cn=(g,n,s)=>n in g?gn(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,An=(g,n,s)=>(cn(g,typeof n!="symbol"?n+"":n,s),s);const Fe={id:"microsoft",title:"Microsoft",icon:()=>null},qe=class xr{constructor(n){An(this,"oauth2"),An(this,"configApi"),An(this,"environment"),An(this,"provider"),An(this,"oauthRequestApi"),An(this,"discoveryApi"),An(this,"scopeTransform");const{configApi:s,environment:E="development",provider:M=Fe,oauthRequestApi:Ue,discoveryApi:ft,defaultScopes:bt=["openid","offline_access","profile","email","User.Read"],scopeTransform:jt=nn=>nn.concat("offline_access")}=n;this.configApi=s,this.environment=E,this.provider=M,this.oauthRequestApi=Ue,this.discoveryApi=ft,this.scopeTransform=jt,this.oauth2={[xr.MicrosoftGraphID]:Ie.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform,defaultScopes:bt})}}static create(n){return new xr(n)}microsoftGraph(){return this.oauth2[xr.MicrosoftGraphID]}static resourceForScopes(n){var s;const E=[...new Set(n.split(" ").map(xr.resourceForScope).filter(Ue=>Ue!=="openid"))];if(E.length>1)return Promise.reject(new Error(`Requested access token with scopes from multiple Azure resources: ${E.join(", ")}. Access tokens can only have a single audience.`));const M=(s=E[0])!=null?s:xr.MicrosoftGraphID;return Promise.resolve(M)}static resourceForScope(n){var s;const E=(s=n.match(/^(?<resourceURI>.*)\/(?<scp>[^\/]*)$/))==null?void 0:s.groups;if(E){const{resourceURI:M}=E;return M.replace(/^api:\/\//,"")}switch(n){case"email":case"openid":case"offline_access":case"profile":return"openid";default:return xr.MicrosoftGraphID}}async getAccessToken(n,s){const E=n===void 0?xr.MicrosoftGraphID:await xr.resourceForScopes(Array.isArray(n)?n.join(" "):n);return E in this.oauth2||(this.oauth2[E]=Ie.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform})),this.oauth2[E].getAccessToken(n,s)}getIdToken(n){return this.microsoftGraph().getIdToken(n)}getProfile(n){return this.microsoftGraph().getProfile(n)}getBackstageIdentity(n){return this.microsoftGraph().getBackstageIdentity(n)}signIn(){return this.microsoftGraph().signIn()}signOut(){return this.microsoftGraph().signOut()}sessionState$(){return this.microsoftGraph().sessionState$()}};An(qe,"MicrosoftGraphID","00000003-0000-0000-c000-000000000000");let At=qe;const tn={id:"onelogin",title:"onelogin",icon:()=>null},ln=new Set(["openid","profile","email","phone","address","groups","offline_access"]),dn="onelogin.";class un{static create(n){const{configApi:s,discoveryApi:E,environment:M="development",provider:Ue=tn,oauthRequestApi:ft}=n;return Ie.create({configApi:s,discoveryApi:E,oauthRequestApi:ft,provider:Ue,environment:M,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(bt){return bt.map(jt=>ln.has(jt)||jt.startsWith(dn)?jt:`${dn}${jt}`)}})}}const wn={id:"bitbucket",title:"Bitbucket",icon:()=>null};class Wn{static create(n){const{configApi:s,discoveryApi:E,environment:M="development",provider:Ue=wn,oauthRequestApi:ft,defaultScopes:bt=["team"]}=n;return Ie.create({configApi:s,discoveryApi:E,oauthRequestApi:ft,provider:Ue,environment:M,defaultScopes:bt})}}const Gn={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class sa{static create(n){const{configApi:s,discoveryApi:E,environment:M="development",provider:Ue=Gn,oauthRequestApi:ft,defaultScopes:bt=["PROJECT_ADMIN"]}=n;return Ie.create({configApi:s,discoveryApi:E,oauthRequestApi:ft,provider:Ue,environment:M,defaultScopes:bt})}}const Cn={id:"atlassian",title:"Atlassian",icon:()=>null};class ea{static create(n){const{configApi:s,discoveryApi:E,environment:M="development",provider:Ue=Cn,oauthRequestApi:ft}=n;return Ie.create({configApi:s,discoveryApi:E,oauthRequestApi:ft,provider:Ue,environment:M})}}var la=Object.defineProperty,ra=(g,n,s)=>n in g?la(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,fa=(g,n,s)=>(ra(g,typeof n!="symbol"?n+"":n,s),s);class Pa{constructor(){fa(this,"subject",new Wt)}post(n){this.subject.next(n)}alert$(){return this.subject}}class ia{constructor(n){this.actualApis=n}static fromApis(n){return new ia(n)}captureEvent(n){this.actualApis.forEach(s=>{try{s.captureEvent(n)}catch{}})}}class Ra{captureEvent(n){}}var ue=Object.defineProperty,Qe=(g,n,s)=>n in g?ue(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,yt=(g,n,s)=>(Qe(g,typeof n!="symbol"?n+"":n,s),s);const K="theme";class ${constructor(n){this.themes=n,yt(this,"activeThemeId"),yt(this,"subject",new fe(void 0))}static createWithStorage(n){var s;const E=new $(n);if(!window.localStorage)return E;const M=(s=window.localStorage.getItem(K))!=null?s:void 0;return E.setActiveThemeId(M),E.activeThemeId$().subscribe(Ue=>{Ue?window.localStorage.setItem(K,Ue):window.localStorage.removeItem(K)}),window.addEventListener("storage",Ue=>{var ft;if(Ue.key===K){const bt=(ft=localStorage.getItem(K))!=null?ft:void 0;E.setActiveThemeId(bt)}}),E}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(n){this.activeThemeId=n,this.subject.next(n)}}const T="Invalid discovery URL pattern,";class F{constructor(n){this.parts=n}static compile(n){const s=n.split(/\{\{\s*pluginId\s*\}\}/),E=s.join("pluginId");let M;try{M=new URL(E)}catch{throw new Error(`${T} URL '${E}' is invalid`)}if(M.hash)throw new Error(`${T} URL must not have a hash`);if(M.search)throw new Error(`${T} URL must not have a query`);if(E.endsWith("/"))throw new Error(`${T} URL must not end with a slash`);return new F(s)}async getBaseUrl(n){return this.parts.join(encodeURIComponent(n))}}class V{constructor(n,s){this.endpoints=n,this.defaultEndpoint=s}static fromConfig(n,s){var E,M;const Ue=(E=s==null?void 0:s.pathPattern)!=null?E:"/api/{{ pluginId }}",ft=n.getString("backend.baseUrl"),bt=(M=n.getOptionalConfigArray("discovery.endpoints"))==null?void 0:M.flatMap(jt=>{const nn=typeof jt.get("target")=="object"?jt.getString("target.external"):jt.getString("target"),jn=F.compile(nn);return jt.getStringArray("plugins").map(Zn=>[Zn,jn])});return new V(new Map(bt),F.compile(`${ft}${Ue}`))}async getBaseUrl(n){const s=this.endpoints.get(n);return s?s.getBaseUrl(n):this.defaultEndpoint.getBaseUrl(n)}}class Ce{constructor(n,s){this.alertApi=n,this.errorApi=s}post(n,s){return s!=null&&s.hidden||this.alertApi.post({message:n.message,severity:"error"}),this.errorApi.post(n,s)}error$(){return this.errorApi.error$()}}var Re=Object.defineProperty,pe=(g,n,s)=>n in g?Re(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,Ne=(g,n,s)=>(pe(g,typeof n!="symbol"?n+"":n,s),s);class tt{constructor(){Ne(this,"subject",new Wt)}post(n,s){this.subject.next({error:n,context:s})}error$(){return this.subject}}class _t{static forward(n,s){window.addEventListener("unhandledrejection",E=>{n.post(E.reason,s)})}}var Ht=Object.defineProperty,en=(g,n,s)=>n in g?Ht(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,Xt=(g,n,s)=>(en(g,typeof n!="symbol"?n+"":n,s),s);function mn(g){if(g.length<3)throw new Error(`The '${g}' feature flag must have a minimum length of three characters.`);if(g.length>150)throw new Error(`The '${g}' feature flag must not exceed 150 characters.`);if(!g.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${g}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class _n{constructor(){Xt(this,"registeredFeatureFlags",[]),Xt(this,"flags")}registerFlag(n){mn(n.name),this.registeredFeatureFlags.push(n)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(n){return this.flags||(this.flags=this.load()),this.flags.get(n)===U.F.Active}save(n){this.flags||(this.flags=this.load()),n.merge||this.flags.clear();for(const[E,M]of Object.entries(n.states))this.flags.set(E,M);const s=Array.from(this.flags.entries()).filter(([,E])=>E===U.F.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(s)))}load(){try{const n=window.localStorage.getItem("featureFlags");if(!n)return new Map;const s=JSON.parse(n);if(typeof s!="object"||s===null||Array.isArray(s))return new Map;const E=Object.entries(s).filter(([M,Ue])=>(mn(M),Ue===U.F.Active));return new Map(E)}catch{return new Map}}}function hn(g){var n;let s=g.baseImplementation||e.g.fetch;const E=[(n=g.middleware)!=null?n:[]].flat().reverse();for(const M of E)s=M.apply(s);return{fetch:s}}class En{constructor(n,s,E,M){this.identityApi=n,this.allowUrl=s,this.headerName=E,this.headerValue=M}static create(n){var s,E;const M=bn(n),Ue=((s=n.header)==null?void 0:s.name)||"authorization",ft=((E=n.header)==null?void 0:E.value)||(bt=>`Bearer ${bt}`);return new En(n.identityApi,M,Ue,ft)}apply(n){return async(s,E)=>{const M=new Request(s,E),{token:Ue}=await this.identityApi.getCredentials();return M.headers.get(this.headerName)||typeof Ue!="string"||!Ue||!this.allowUrl(M.url)?n(s,E):(M.headers.set(this.headerName,this.headerValue(Ue)),n(M))}}}function bn(g){return g.allowUrl?g.allowUrl:g.urlPrefixAllowlist?Ln(g.urlPrefixAllowlist):g.config?Ln([g.config.getString("backend.baseUrl")]):()=>!1}function Ln(g){const n=g.map(s=>s.replace(/\/$/,""));return s=>n.some(E=>s===E||s.startsWith(`${E}/`))}function qn(g,n){return!n||n==="/"?g:`${g.replace(/\/$/,"")}/${n.replace(/^\//,"")}`}class Vn{constructor(n){this.discoveryApi=n}apply(n){return async(s,E)=>{const M=new Request(s,E),Ue="plugin://";if(!M.url.startsWith(Ue))return n(s,E);const{hostname:ft,pathname:bt,search:jt,hash:nn,username:jn,password:Zn}=new URL(`http://${M.url.substring(Ue.length)}`);let In=await this.discoveryApi.getBaseUrl(ft);if(jn||Zn){const aa=new URL(In),ua=`${jn}${Zn?`:${Zn}`:""}@`;In=`${aa.protocol}//${ua}${aa.host}${aa.pathname}`}const da=`${qn(In,bt)}${jt}${nn}`;return n(da,typeof s=="string"||xn(s)?E:s)}}}function xn(g){return typeof g=="object"&&(g==null?void 0:g.constructor)===URL}class Bn{static resolvePluginProtocol(n){return new Vn(n.discoveryApi)}static injectIdentityAuth(n){return En.create(n)}constructor(){}}var $n=Object.defineProperty,yn=(g,n,s)=>n in g?$n(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,Dn=(g,n,s)=>(yn(g,typeof n!="symbol"?n+"":n,s),s);function pa(g,n){for(const s of n)if(!g.has(s))return!1;return!0}function ga(g,...n){const s=new Set(g);for(const E of n)for(const M of E)s.add(M);return s}class Ma{constructor(){Dn(this,"requests",[]),Dn(this,"subject",new fe(this.getCurrentPending()))}request(n){return new Promise((s,E)=>{this.requests.push({scopes:n,resolve:s,reject:E}),this.subject.next(this.getCurrentPending())})}resolve(n,s){this.requests=this.requests.filter(E=>pa(n,E.scopes)?(E.resolve(s),!1):!0),this.subject.next(this.getCurrentPending())}reject(n){this.requests.forEach(s=>s.reject(n)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const n=this.requests.length===0?void 0:this.requests.slice(1).reduce((s,E)=>ga(s,E.scopes),this.requests[0].scopes);return{scopes:n,resolve:s=>{n&&this.resolve(n,s)},reject:s=>{n&&this.reject(s)}}}}var Fa=Object.defineProperty,Ga=(g,n,s)=>n in g?Fa(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,er=(g,n,s)=>(Ga(g,typeof n!="symbol"?n+"":n,s),s);class Ba{constructor(){er(this,"subject",new fe([])),er(this,"currentRequests",[]),er(this,"handlerCount",0)}createAuthRequester(n){const s=new Ma,E=this.handlerCount;return this.handlerCount++,s.pending().subscribe({next:M=>{const Ue=this.currentRequests.slice(),ft=this.makeAuthRequest(M,n);ft?Ue[E]=ft:delete Ue[E],this.currentRequests=Ue,this.subject.next(Ue.filter(Boolean))}}),M=>s.request(M)}makeAuthRequest(n,s){const{scopes:E}=n;if(E)return{provider:s.provider,trigger:async()=>{const M=await s.onAuthRequest(E);n.resolve(M)},reject:()=>{const M=new Error("Login failed, rejected by user");M.name="RejectedError",n.reject(M)}}}authRequest$(){return this.subject}}var Va=Object.defineProperty,Ha=(g,n,s)=>n in g?Va(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,Ka=(g,n,s)=>(Ha(g,typeof n!="symbol"?n+"":n,s),s);const Ja=new Map,sr=class co{constructor(n,s){this.namespace=n,this.errorApi=s,Ka(this,"subscribers",new Set),Ka(this,"observable",new(o())(E=>(this.subscribers.add(E),()=>{this.subscribers.delete(E)})))}static create(n){var s;return new co((s=n.namespace)!=null?s:"",n.errorApi)}static addStorageEventListener(){window.addEventListener("storage",n=>{var s;for(const[E,M]of Ja.entries())(s=n.key)!=null&&s.startsWith(E)&&M.handleStorageChange(n.key)})}get(n){return this.snapshot(n).value}snapshot(n){let s,E="absent";try{const M=localStorage.getItem(this.getKeyName(n));M&&(s=JSON.parse(M,(Ue,ft)=>(typeof ft=="object"&&ft!==null&&Object.freeze(ft),ft)),E="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${n}`))}return{key:n,value:s,presence:E}}forBucket(n){const s=`${this.namespace}/${n}`;return Ja.has(s)||Ja.set(s,new co(s,this.errorApi)),Ja.get(s)}async set(n,s){localStorage.setItem(this.getKeyName(n),JSON.stringify(s)),this.notifyChanges(n)}async remove(n){localStorage.removeItem(this.getKeyName(n)),this.notifyChanges(n)}observe$(n){return co.hasSubscribed||(co.addStorageEventListener(),co.hasSubscribed=!0),this.observable.filter(({key:s})=>s===n)}handleStorageChange(n){if(!(n!=null&&n.startsWith(this.namespace)))return;const s=n==null?void 0:n.slice(`${this.namespace}/`.length);s.includes("/")||this.notifyChanges(decodeURIComponent(s))}getKeyName(n){return`${this.namespace}/${encodeURIComponent(n)}`}notifyChanges(n){const s=this.snapshot(n);for(const E of this.subscribers)E.next(s)}};Ka(sr,"hasSubscribed",!1);let dr=sr;const Za=(0,r.createContext)(void 0);function Hn(){const[g]=(0,C.is)(r.createElement(C.AW,{index:!0,element:r.createElement("div",null)}));return!g.index}const Ea=(g,n)=>{try{const s=(0,p.fp)(n,{pathname:g}),E=s==null?void 0:s.filter(jt=>{var nn;return((nn=jt==null?void 0:jt.route.routeRefs)==null?void 0:nn.size)>0}).pop(),M=E==null?void 0:E.route;if(!M||M.path===""&&g!=="/")return;let Ue;M.routeRefs.size===1&&(Ue=M.routeRefs.values().next().value);let ft;M.plugins.size===1&&(ft=M.plugins.values().next().value);const bt=Object.entries((E==null?void 0:E.params)||{}).reduce((jt,[nn,jn])=>(jn!==void 0&&nn!=="*"&&(jt[nn]=jn),jt),{});return{extension:"App",pluginId:(ft==null?void 0:ft.getId())||"root",...Ue?{routeRef:Ue.id}:{},_routeNodeType:M.element,params:bt}}catch{return}},Ua=({pathname:g,search:n,hash:s,attributes:E})=>{const M=(0,We.z$)();return(0,r.useEffect)(()=>{M.captureEvent("navigate",`${g}${n}${s}`,{attributes:E})},[M,g,n,s,E]),null},tr=({routeObjects:g})=>{const{pathname:n,search:s,hash:E}=(0,C.TH)(),{params:M,...Ue}=Ea(n,g)||{params:{}};return r.createElement(We.fC,{attributes:Ue},r.createElement(Ua,{pathname:n,search:s,hash:E,attributes:M}))};function Ya(g){return Hn()?vt(g):""}function vt(g){var n;let{pathname:s}=new URL((n=g.getOptionalString("app.baseUrl"))!=null?n:"/","http://sample.dev");return s=s.replace(/\/*$/,""),s}function De({component:g,appIdentityProxy:n,children:s}){const[E,M]=(0,r.useState)(),Ue=(0,U.u)(U.p),ft=vt(Ue);return E?(n.setTarget(E,{signOutTargetUrl:ft||"/"}),r.createElement(r.Fragment,null,s)):r.createElement(g,{onSignInSuccess:M})}function Ut(g){const{Router:n,SignInPage:s}=(0,We.qD)().getComponents(),E=(0,U.u)(U.p),M=vt(E),Ue=`${M}/*`,ft=(0,r.useContext)(Za);if(!ft)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:bt,appIdentityProxy:jt}=ft;return s?Hn()?r.createElement(n,null,r.createElement(tr,{routeObjects:bt}),r.createElement(De,{component:s,appIdentityProxy:jt},r.createElement(C.Z5,null,r.createElement(C.AW,{path:Ue,element:r.createElement(r.Fragment,null,g.children)})))):r.createElement(n,{basename:M},r.createElement(tr,{routeObjects:bt}),r.createElement(De,{component:s,appIdentityProxy:jt},g.children)):(jt.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:M||"/"}),Hn()?r.createElement(n,null,r.createElement(tr,{routeObjects:bt}),r.createElement(C.Z5,null,r.createElement(C.AW,{path:Ue,element:r.createElement(r.Fragment,null,g.children)}))):r.createElement(n,{basename:M},r.createElement(tr,{routeObjects:bt}),g.children))}(0,We.R5)(Ut,"core.type","AppRouter");function Sn(g){const n={};for(const E in g.collectors)g.collectors.hasOwnProperty(E)&&(n[E]=g.collectors[E]());const s=[{node:r.Children.toArray(g.root),parent:void 0,contexts:{}}];for(;s.length!==0;){const{node:E,parent:M,contexts:Ue}=s.shift();r.Children.forEach(E,ft=>{if(!(0,r.isValidElement)(ft))return;const bt={};for(const jt in n)if(n.hasOwnProperty(jt)){const nn=n[jt];bt[jt]=nn.visit(nn.accumulator,ft,M,Ue[jt])}for(const jt of g.discoverers){const nn=jt(ft);nn&&s.push({node:nn,parent:ft,contexts:bt})}})}return Object.fromEntries(Object.entries(n).map(([E,M])=>[E,M.accumulator]))}function kn(g,n){return()=>({accumulator:g(),visit:n})}function ta(g){var n;return(n=g.props)==null?void 0:n.children}function ca(g){var n,s,E;if((n=g.props)!=null&&n.path&&((s=g.props)!=null&&s.element))return(E=g.props)==null?void 0:E.element}const Wa=kn(()=>new Set,(g,n)=>{const s=(0,We.IY)(n,"core.plugin");s&&g.add(s)}),za=g=>{const{children:n}=g,s=(0,U.u)(U.f),E="with"in g?s.isActive(g.with):!s.isActive(g.without);return r.createElement(r.Fragment,null,E?n:null)};(0,We.R5)(za,"core.featureFlagged",!0);const Aa={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set,plugins:new Set};function Ia(g){var n,s;const E=g;return E!=null&&E.type?(s=(n=E.type.displayName)!=null?n:E.type.name)!=null?s:String(E.type):String(E)}const La=g=>{const n=new Set;return g&&n.add(g),n};function nr(g,n=new Array){return r.Children.forEach(g,s=>{if(!(0,r.isValidElement)(s))return;const E=(0,We.IY)(s,"core.mountPoint");if(E){const M=(0,We.IY)(s,"core.plugin");n.push({routeRef:E,plugin:M})}nr(s.props.children,n)}),n}const f=kn(()=>({paths:new Map,parents:new Map,objects:new Array}),(g,n,s,E)=>{var M,Ue,ft,bt,jt,nn,jn;if(E!=null&&E.isElementAncestor)return E;if((s==null?void 0:s.props.element)===n)return{...E,isElementAncestor:!0};const Zn=(M=n.props)==null?void 0:M.path,In=(0,We.IY)(n,"core.mountPoint");if(In&&Zn)throw new Error(`Path property may not be set directly on a routable extension "${Ia(n)}"`);const da=(ft=(Ue=E==null?void 0:E.obj)==null?void 0:Ue.children)!=null?ft:g.objects;if(Zn!==void 0){if(typeof Zn!="string")throw new Error(`Element path must be a string at "${Ia(n)}"`);const aa=Zn.startsWith("/")?Zn.slice(1):Zn,ua=n.props.element;if((0,We.IY)(n,"core.gatherMountPoints")){if(ua)throw new Error(`Mount point gatherers may not have an element prop "${Ia(n)}"`);const ja={path:aa,element:"gathered",routeRefs:new Set,caseSensitive:Boolean((bt=n.props)==null?void 0:bt.caseSensitive),children:[Aa],plugins:new Set};return da.push(ja),{obj:ja,gatherPath:aa,routeRef:E==null?void 0:E.routeRef,gatherRouteRef:E==null?void 0:E.routeRef}}if(ua){const[ja,...va]=nr(ua);if(va.length>0)throw new Error(`Route element with path "${Zn}" may not contain multiple routable extensions`);if(!ja)return E;const{routeRef:cr,plugin:Wr}=ja,Oo={path:aa,element:"mounted",routeRefs:new Set([cr]),caseSensitive:Boolean((jt=n.props)==null?void 0:jt.caseSensitive),children:[Aa],plugins:La(Wr)};return da.push(Oo),g.paths.set(cr,aa),g.parents.set(cr,E==null?void 0:E.routeRef),{obj:Oo,routeRef:cr!=null?cr:E==null?void 0:E.routeRef,gatherPath:aa,gatherRouteRef:E==null?void 0:E.gatherRouteRef}}}if(In){if((E==null?void 0:E.gatherPath)===void 0)throw new Error(`Routable extension "${Ia(n)}" with mount point "${In}" must be assigned a path`);(nn=E==null?void 0:E.obj)==null||nn.routeRefs.add(In);const aa=(0,We.IY)(n,"core.plugin");return aa&&((jn=E==null?void 0:E.obj)==null||jn.plugins.add(aa)),g.paths.set(In,E.gatherPath),g.parents.set(In,E==null?void 0:E.gatherRouteRef),{...E,routeRef:In}}return E}),c=kn(()=>({paths:new Map,parents:new Map,objects:new Array}),(g,n,s,E)=>{var M,Ue,ft,bt,jt;if((s==null?void 0:s.props.element)===n)return E;let nn=E==null?void 0:E.obj,jn=E==null?void 0:E.routeRef,Zn=E==null?void 0:E.sticky;const In=(M=n.props)==null?void 0:M.path,da=(Ue=nn==null?void 0:nn.children)!=null?Ue:g.objects,aa=Boolean((ft=n.props)==null?void 0:ft.caseSensitive);let ua=E==null?void 0:E.path;if((0,We.IY)(n,"core.gatherMountPoints")){if(!In)throw new Error("Mount point gatherer must have a path");ua=In}const ja=(bt=n.props)==null?void 0:bt.element;let va=(0,We.IY)(n,"core.mountPoint");if(!va&&(0,r.isValidElement)(ja)&&(va=(0,We.IY)(ja,"core.mountPoint")),va){let Wr=In;if(ua&&(Wr?ua=void 0:Wr=ua),!Wr)throw new Error("Mounted routable extension must have a path");g.paths.set(va,Wr),jn&&Zn?(g.parents.set(va,jn),In&&(jn=va,Zn=!1)):(g.parents.set(va,jn),jn=va),In?(nn={caseSensitive:aa,path:In,element:"mounted",routeRefs:new Set([va]),children:[Aa],plugins:La((0,We.IY)(n.props.element,"core.plugin"))},da.push(nn)):nn==null||nn.routeRefs.add(va)}if((0,We.IY)(n,"core.gatherMountPoints")&&(Zn=!0),(0,We.IY)(n,"core.gatherMountPoints")){if(!In)throw new Error("Mount point gatherer must have a path");va||(nn={caseSensitive:aa,path:In,element:"gathered",routeRefs:new Set,children:[Aa],plugins:((jt=E==null?void 0:E.obj)==null?void 0:jt.plugins)||new Set},da.push(nn))}return{obj:nn,path:ua,routeRef:jn,sticky:Zn}}),y=kn(()=>new Set,(g,n)=>{if(n.type===za){const s=n.props;g.add("with"in s?s.with:s.without)}}),ee=(0,W.uW)("route-ref-type",()=>Symbol("route-ref-type"));function ke(g){return g[ee]==="absolute"}function Ot(g){return g[ee]==="sub"}function Gt(g){return g[ee]==="external"}function rn(...g){const n=g.join("/").replace(/\/\/+/g,"/");return n!=="/"&&n.endsWith("/")?n.slice(0,-1):n}function Tn(g,n,s){let E,M="";if(ke(g))E=g;else if(Ot(g))E=g.parent,M=g.path;else if(Gt(g)){const bt=s.get(g);if(!bt)return[void 0,""];if(ke(bt))E=bt;else if(Ot(bt))E=bt.parent,M=bt.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${bt}`)}else throw g[ee]?new Error(`Unknown or invalid route ref type, ${g[ee]}`):new Error(`Unknown object passed to useRouteRef, got ${g}`);if(!E)return[void 0,""];const Ue=n.get(E);if(Ue===void 0)return[void 0,""];const ft=rn(Ue,M);return[E,ft]}function Nn(g,n,s,E,M){var Ue;const ft=(Ue=(0,p.fp)(M,n))!=null?Ue:[],bt=Array();let jt=-1;for(let Zn=g;Zn&&(jt=ft.findIndex(In=>In.route.routeRefs.has(Zn)),jt===-1);Zn=E.get(Zn))bt.unshift(Zn);bt.length===0&&(jt-=1);const nn=jt===-1?"":ft[jt].pathname,jn=bt.slice(0,-1).map(Zn=>{const In=s.get(Zn);if(In===void 0)throw new Error(`No path for ${Zn}`);if(In.includes(":"))throw new Error(`Cannot route to ${g} with parent ${Zn} as it has parameters`);return In});return`${rn(nn,...jn)}/`}class Jn{constructor(n,s,E,M,Ue){this.routePaths=n,this.routeParents=s,this.routeObjects=E,this.routeBindings=M,this.appBasePath=Ue}resolve(n,s){const[E,M]=Tn(n,this.routePaths,this.routeBindings);if(!E)return;let Ue;typeof s=="string"?Ue=this.trimPath(s):s.pathname?Ue={...s,pathname:this.trimPath(s.pathname)}:Ue=s;const ft=this.appBasePath+Nn(E,Ue,this.routePaths,this.routeParents,this.routeObjects);return(...[jt])=>{const nn=jt&&ne()(jt,jn=>typeof jn=="string"?jn.replaceAll(/[&?#;\/]/g,Zn=>encodeURIComponent(Zn)):jn);return rn(ft,(0,p.Gn)(M,nn))}}trimPath(n){return n&&(n.startsWith(this.appBasePath)?n.slice(this.appBasePath.length):n)}}const Sa=(0,W.CT)("routing-context"),_a=({routePaths:g,routeParents:n,routeObjects:s,routeBindings:E,basePath:M="",children:Ue})=>{const ft=new Jn(g,n,s,E,M),bt=(0,W.EI)({1:ft});return r.createElement(Sa.Provider,{value:bt},Ue)};function Qa(g,n){const s=new Set(n.values());s.delete(void 0);for(const E of n.keys()){if(s.has(E))continue;let M=E,Ue="";for(;M;){const bt=g.get(M);if(bt===void 0)throw new Error(`No path for ${M}`);Ue=rn(bt,Ue),M=n.get(M)}const ft=Ue.match(/:(\w+)/g);if(ft){for(let bt=0;bt<ft.length;bt++)for(let jt=bt+1;jt<ft.length;jt++)if(ft[jt]===ft[bt])throw new Error(`Parameter ${ft[jt]} is duplicated in path ${Ue}`)}}}function ar(g,n){for(const s of n)if(s.externalRoutes){for(const[E,M]of Object.entries(s.externalRoutes))if(!M.optional&&!g.has(M))throw new Error(`External route '${E}' of the '${s.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const uo=(0,W.CT)("app-context"),Fr=({appContext:g,children:n})=>{const s=(0,W.EI)({1:g});return r.createElement(uo.Provider,{value:s,children:n})};var Hr=Object.defineProperty,mo=(g,n,s)=>n in g?Hr(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,Br=(g,n,s)=>(mo(g,typeof n!="symbol"?n+"":n,s),s);function Kr(g){return new Error(`Tried to access IdentityApi ${g} before app was loaded`)}function zr(g){console.warn(`WARNING: Call to ${g} is deprecated and will break in the future`)}class Jr{constructor(){Br(this,"target"),Br(this,"waitForTarget"),Br(this,"resolveTarget",()=>{}),Br(this,"signOutTargetUrl","/"),this.waitForTarget=new Promise(n=>{this.resolveTarget=n})}setTarget(n,s){this.target=n,this.signOutTargetUrl=s.signOutTargetUrl,this.resolveTarget(n)}getUserId(){if(!this.target)throw Kr("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return zr("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw Kr("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return zr("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(n=>n.getProfileInfo())}async getBackstageIdentity(){const n=await this.waitForTarget.then(s=>s.getBackstageIdentity());return n.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${n.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),n}async getCredentials(){return this.waitForTarget.then(n=>n.getCredentials())}async getIdToken(){return this.waitForTarget.then(n=>{if(!n.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return zr("getIdToken"),n.getIdToken()})}async signOut(){await this.waitForTarget.then(n=>n.signOut()),window.location.href=this.signOutTargetUrl}}function pr(g,n,s){if(g!==void 0){const M=s.find(Ue=>Ue.id===g);if(M)return M}if(n){const M=s.find(Ue=>Ue.variant==="dark");if(M)return M}const E=s.find(M=>M.variant==="light");return E||s[0]}const po=()=>{const g=(0,r.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[n,s]=(0,r.useState)(g.matches);return(0,r.useEffect)(()=>{const E=M=>{s(M.matches)};return g.addListener(E),()=>{g.removeListener(E)}},[g]),n};function jr({children:g}){const n=(0,U.u)(U.n),s=(0,oe.Z)(n.activeThemeId$(),n.getActiveThemeId()),E=Boolean(window.matchMedia)?po():!1,M=pr(s,E,n.getInstalledThemes());if(!M)throw new Error("App has no themes");return r.createElement(M.Provider,{children:g})}const Ur=async()=>Yr();function Yr(g=/*__APP_INJECTED_CONFIG_MARKER__*/"[{\"context\":\"app\",\"deprecatedKeys\":[],\"data\":{\"auth\":{\"environment\":\"production\",\"providers\":{\"google\":{},\"github\":{}}},\"catalog\":{\"import\":{\"entityFilename\":\"catalog-info.yaml\",\"pullRequestBranchName\":\"backstage-integration\"}},\"app\":{\"title\":\"Stone Backstage\",\"baseUrl\":\"https://backstage.stone.tech\",\"support\":{\"url\":\"https://github.com/stone-payments/backstage/issues\",\"items\":[{\"title\":\"Documentação\",\"icon\":\"docs\",\"links\":[{\"url\":\"https://backstage.stone.tech/docs/stone/System/backstage\",\"title\":\"Nossa Documentação\"},{\"url\":\"https://backstage.stone.tech/docs/stone/System/backstage/getting-started/\",\"title\":\"Primeiros Passos\"}]},{\"title\":\"Slack\",\"icon\":\"chat\",\"links\":[{\"url\":\"https://stonepgto.slack.com/archives/C040BQ940KC\",\"title\":\"Canal #backstage\"},{\"url\":\"https://stonepgto.slack.com/archives/C040BQ940KC\",\"title\":\"Grupo \\\"@backstage_help\\\"\"}]},{\"title\":\"Issues\",\"icon\":\"github\",\"links\":[{\"url\":\"https://github.com/backstage/backstage/issues\",\"title\":\"GitHub Issues\"}]}]},\"datadogRum\":{\"applicationId\":\"895e6aff-8d23-4736-9cc3-c7b8a72ef752\",\"clientToken\":\"pub49803a68a289d1b4c0c00cc3f2703863\",\"env\":\"prd\"},\"analytics\":{\"ga4\":{\"measurementId\":\"G-CTQQEWE3G7\",\"identity\":\"required\"}}},\"organization\":{\"name\":\"Stone\"},\"permission\":{\"enabled\":true},\"backend\":{\"baseUrl\":\"https://backstage.stone.tech\"},\"integrations\":{\"github\":[{\"host\":\"github.com\"}]},\"grafana\":{\"domain\":\"https://grafana.stone.tech/tools-prd\",\"unifiedAlerting\":true},\"scorecards\":{\"jsonDataUrl\":\"https://backstage.stone.tech/api/proxy/scores/\",\"fetchAllEntities\":true,\"colorCombinations\":\"score-failure                #5a0000 #f1bdbd\\nscore-almost-failure         #6c4e17 #fdbb8d\\nscore-partial                #6c4e17 #f1c87e\\nscore-almost-success         #3c733c #c3e7cc\\nscore-success                #0f4a0f #bfedca\\nscore-unknown                #555555 #CCCCCC\\n\"},\"oculus\":{\"templateUrl\":\"/create/templates/stone/oculus\",\"grafanaDashboards\":{\"prBuildId\":\"ac6730c3-b1bb-4f9b-8169-37c70829b6e5\",\"doraId\":\"qNo8_0M4z\"},\"info\":{\"feedbackFormUrl\":\"https://docs.google.com/forms/d/e/1FAIpQLSeYLUkydfFhlDGzS3tGxBvFCVLfHAJzzK8UtK-rKwp0LVu-0w/viewform\",\"documentationUrl\":\"https://backstage.stone.tech/docs/stone/system/oculus/\",\"faqUrl\":\"https://backstage.stone.tech/docs/stone/system/oculus/faq_suporte/\",\"supportChannel\":\"https://stonepgto.slack.com/archives/C05V9P5BL8L\"}},\"opsgenie\":{\"domain\":\"https://pagarme.app.opsgenie.com/\"},\"techdocs\":{\"builder\":\"local\"}}}]"/*__INJECTED_END__*/){const n=[{context:"auth.main.yaml",data:{auth:{environment:"production",providers:{google:{},github:{}}}}},{context:"azure-devops.yaml",data:{}},{context:"catalog.main.yaml",data:{catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}}}},{context:"core.yaml",data:{app:{title:"Stone Backstage",baseUrl:"https://backstage.stone.tech",support:{url:"https://github.com/stone-payments/backstage/issues",items:[{title:"Documenta\xE7\xE3o",icon:"docs",links:[{url:"https://backstage.stone.tech/docs/stone/System/backstage",title:"Nossa Documenta\xE7\xE3o"},{url:"https://backstage.stone.tech/docs/stone/System/backstage/getting-started/",title:"Primeiros Passos"}]},{title:"Slack",icon:"chat",links:[{url:"https://stonepgto.slack.com/archives/C040BQ940KC",title:"Canal #backstage"},{url:"https://stonepgto.slack.com/archives/C040BQ940KC",title:'Grupo "@backstage_help"'}]},{title:"Issues",icon:"github",links:[{url:"https://github.com/backstage/backstage/issues",title:"GitHub Issues"}]}]}},organization:{name:"Stone"},permission:{enabled:!0},backend:{baseUrl:"https://backstage.stone.tech"}}},{context:"datadog-rum.yaml",data:{app:{datadogRum:{applicationId:"895e6aff-8d23-4736-9cc3-c7b8a72ef752",clientToken:"pub49803a68a289d1b4c0c00cc3f2703863",env:"prd"}}}},{context:"fp-control-layer-api.yaml",data:{}},{context:"ga.yaml",data:{app:{analytics:{ga4:{measurementId:"G-CTQQEWE3G7",identity:"required"}}}}},{context:"github-integration.with-app.yaml",data:{integrations:{github:[{host:"github.com"}]}}},{context:"grafana.yaml",data:{grafana:{domain:"https://grafana.stone.tech/tools-prd",unifiedAlerting:!0}}},{context:"integration-worker.yaml",data:{}},{context:"karavela-api.yaml",data:{}},{context:"maturity-score.yaml",data:{scorecards:{jsonDataUrl:"https://backstage.stone.tech/api/proxy/scores/",fetchAllEntities:!0,colorCombinations:`score-failure                #5a0000 #f1bdbd
score-almost-failure         #6c4e17 #fdbb8d
score-partial                #6c4e17 #f1c87e
score-almost-success         #3c733c #c3e7cc
score-success                #0f4a0f #bfedca
score-unknown                #555555 #CCCCCC
`}}},{context:"oculus.yaml",data:{oculus:{templateUrl:"/create/templates/stone/oculus",grafanaDashboards:{prBuildId:"ac6730c3-b1bb-4f9b-8169-37c70829b6e5",doraId:"qNo8_0M4z"},info:{feedbackFormUrl:"https://docs.google.com/forms/d/e/1FAIpQLSeYLUkydfFhlDGzS3tGxBvFCVLfHAJzzK8UtK-rKwp0LVu-0w/viewform",documentationUrl:"https://backstage.stone.tech/docs/stone/system/oculus/",faqUrl:"https://backstage.stone.tech/docs/stone/system/oculus/faq_suporte/",supportChannel:"https://stonepgto.slack.com/archives/C05V9P5BL8L"}}}},{context:"opsgenie.yaml",data:{opsgenie:{domain:"https://pagarme.app.opsgenie.com/"}}},{context:"sonarqube.yaml",data:{}},{context:"techdocs.yaml",data:{techdocs:{builder:"local"}}}];if(!n)throw new Error("No static configuration provided");if(!Array.isArray(n))throw new Error("Static configuration has invalid format");const s=n.slice();if(g!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const M=JSON.parse(g);Array.isArray(M)?s.push(...M):s.push({data:M,context:"env"})}catch(M){throw new Error(`Failed to load runtime configuration, ${M}`)}const E=window.__APP_CONFIG__;return E&&s.push({context:"window",data:E}),s}var Gr=Object.defineProperty,Sr=(g,n,s)=>n in g?Gr(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,Tr=(g,n,s)=>(Sr(g,typeof n!="symbol"?n+"":n,s),s);class go{constructor(){Tr(this,"apis",[])}add(n,s){return this.apis.push([n.id,s]),s}build(){return new Ar(new Map(this.apis))}}class Ar{constructor(n){this.apis=n}static builder(){return new go}static from(n){return new Ar(new Map(n.map(([s,E])=>[s.id,E])))}static with(n,s){return new Ar(new Map([[n.id,s]]))}with(n,s){return new Ar(new Map([...this.apis,[n.id,s]]))}get(n){return this.apis.get(n.id)}}function Qr(g){const n=new Map;return g&&g({bind:(E,M)=>{for(const[Ue,ft]of Object.entries(M)){const bt=E[Ue];if(!bt)throw new Error(`Key ${Ue} is not an existing external route`);if(!ft&&!bt.optional)throw new Error(`External route ${Ue} is required but was undefined`);ft&&n.set(bt,ft)}}}),n}var Xr=(g,n,s)=>{if(!n.has(g))throw TypeError("Cannot "+s)},mr=(g,n,s)=>(Xr(g,n,"read from private field"),s?s.call(g):n.get(g)),gr=(g,n,s)=>{if(n.has(g))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(g):n.set(g,s)},$r=(g,n,s,E)=>(Xr(g,n,"write to private field"),E?E.call(g,s):n.set(g,s),s),Or,hr,Dr;const Ir="language",rr="en",ho=class Xo{constructor(n,s){gr(this,Or,void 0),gr(this,hr,void 0),gr(this,Dr,void 0),$r(this,Or,n),$r(this,hr,s),$r(this,Dr,new fe({language:mr(this,hr)}))}static create(n){var s,E;const M=(s=n==null?void 0:n.availableLanguages)!=null?s:[rr];if(M.length!==new Set(M).size)throw new Error(`Supported languages may not contain duplicates, got '${M.join("', '")}'`);if(!M.includes(rr))throw new Error(`Supported languages must include '${rr}'`);const Ue=(E=n==null?void 0:n.defaultLanguage)!=null?E:rr;if(!M.includes(Ue))throw new Error(`Initial language must be one of the supported languages, got '${Ue}'`);return new Xo(M,Ue)}static createWithStorage(n){const s=Xo.create(n);if(!window.localStorage)return s;const E=window.localStorage.getItem(Ir),{languages:M}=s.getAvailableLanguages();return E&&M.includes(E)&&s.setLanguage(E),s.language$().subscribe(({language:Ue})=>{Ue!==window.localStorage.getItem(Ir)&&window.localStorage.setItem(Ir,Ue)}),window.addEventListener("storage",Ue=>{var ft;if(Ue.key===Ir){const bt=(ft=localStorage.getItem(Ir))!=null?ft:void 0;bt&&s.setLanguage(bt)}}),s}getAvailableLanguages(){return{languages:mr(this,Or).slice()}}setLanguage(n){const s=n!=null?n:rr;if(s!==mr(this,hr)){if(s&&!mr(this,Or).includes(s))throw new Error(`Failed to change language to '${s}', available languages are '${mr(this,Or).join("', '")}'`);$r(this,hr,s),mr(this,Dr).next({language:s})}}getLanguage(){return{language:mr(this,hr)}}language$(){return mr(this,Dr)}};Or=new WeakMap,hr=new WeakMap,Dr=new WeakMap;let fo=ho;function Eo(g){const n=g;if(n.$$type!=="@backstage/TranslationResource")throw new Error(`Invalid translation resource, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation resource, bad version '${n.version}'`);return n}function qr(g){const n=g;if(n.$$type!=="@backstage/TranslationRef")throw new Error(`Invalid translation ref, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation ref, bad version '${n.version}'`);return n}var eo=(g,n,s)=>{if(!n.has(g))throw TypeError("Cannot "+s)},ha=(g,n,s)=>(eo(g,n,"read from private field"),s?s.call(g):n.get(g)),Xa=(g,n,s)=>{if(n.has(g))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(g):n.set(g,s)},Zr=(g,n,s,E)=>(eo(g,n,"write to private field"),E?E.call(g,s):n.set(g,s),s),lr=(g,n,s)=>(eo(g,n,"access private method"),s),fr,Vr,_,I,N,J,Se,Ve,dt,mt,wt,qt,Vt,pn,Pn,vn;function Mn(g){return Object.fromEntries(Object.entries(g).filter(n=>n[1]!==null))}class Fn{constructor(n){this.onLoad=n,Xa(this,I),Xa(this,fr,new Set),Xa(this,Vr,new Map),Xa(this,_,new Map)}addTranslationResource(n){const s=Eo(n);for(const E of s.resources){const M=lr(this,I,N).call(this,E.language,s.id);ha(this,_).has(M)||ha(this,_).set(M,E.loader)}}needsLoading(n,s){const E=lr(this,I,N).call(this,n,s);return ha(this,_).get(E)?!ha(this,fr).has(E):!1}async load(n,s){const E=lr(this,I,N).call(this,n,s),M=ha(this,_).get(E);if(!M||ha(this,fr).has(E))return;const Ue=ha(this,Vr).get(E);if(Ue){await Ue;return}const ft=M().then(bt=>{this.onLoad({language:n,namespace:s,messages:bt.messages}),ha(this,fr).add(E)},bt=>{throw ha(this,fr).add(E),bt});ha(this,Vr).set(E,ft),await ft}}fr=new WeakMap,Vr=new WeakMap,_=new WeakMap,I=new WeakSet,N=function(g,n){return`${g}/${n}`};const On=class ji{constructor(n,s,E){Xa(this,wt),Xa(this,Vt),Xa(this,Pn),Xa(this,J,void 0),Xa(this,Se,void 0),Xa(this,Ve,void 0),Xa(this,dt,new Set),Xa(this,mt,new Set),Zr(this,J,n),Zr(this,Se,s),Zr(this,Ve,E)}static create(n){const{languages:s}=n.languageApi.getAvailableLanguages(),E=(0,X.Fs)({fallbackLng:rr,supportedLngs:s,interpolation:{escapeValue:!1},ns:[],defaultNS:!1,fallbackNS:!1,initImmediate:!1});if(E.init(),!E.isInitialized)throw new Error("i18next was unexpectedly not initialized");const{language:M}=n.languageApi.getLanguage();M!==rr&&E.changeLanguage(M);const Ue=new Fn(jt=>{E.addResourceBundle(jt.language,jt.namespace,Mn(jt.messages),!1,!0)}),ft=(n==null?void 0:n.resources)||[];for(let jt=ft.length-1;jt>=0;jt--){const nn=ft[jt];nn.$$type==="@backstage/TranslationResource"?Ue.addTranslationResource(nn):nn.$$type==="@backstage/TranslationMessages"&&E.addResourceBundle(rr,nn.id,Mn(nn.messages),!0,!1)}const bt=new ji(E,Ue,n.languageApi.getLanguage().language);return n.languageApi.language$().subscribe(({language:jt})=>{var nn;lr(nn=bt,wt,qt).call(nn,jt)}),bt}getTranslation(n){const s=qr(n);return lr(this,Pn,vn).call(this,s),lr(this,Vt,pn).call(this,s)}translation$(n){const s=qr(n);return lr(this,Pn,vn).call(this,s),new(o())(E=>{let M={};const Ue=()=>{M={};const bt=M;ha(this,Se).load(ha(this,Ve),s.id).then(()=>{if(bt===M){const jt=lr(this,Vt,pn).call(this,s);jt.ready&&E.next(jt)}},jt=>{bt===M&&E.error(Array.isArray(jt)?jt[0]:jt)})},ft=()=>{const bt=lr(this,Vt,pn).call(this,s);bt.ready?E.next(bt):Ue()};return ha(this,Se).needsLoading(ha(this,Ve),s.id)&&Ue(),ha(this,mt).add(ft),()=>{ha(this,mt).delete(ft)}})}};J=new WeakMap,Se=new WeakMap,Ve=new WeakMap,dt=new WeakMap,mt=new WeakMap,wt=new WeakSet,qt=function(g){ha(this,Ve)!==g&&(Zr(this,Ve,g),ha(this,J).changeLanguage(g),ha(this,mt).forEach(n=>n()))},Vt=new WeakSet,pn=function(g){return ha(this,Se).needsLoading(ha(this,Ve),g.id)?{ready:!1}:{ready:!0,t:ha(this,J).getFixedT(null,g.id)}},Pn=new WeakSet,vn=function(g){if(ha(this,dt).has(g.id))return;ha(this,dt).add(g.id);const n=g.getDefaultMessages();ha(this,J).addResourceBundle(rr,g.id,n,!0,!1);const s=g.getDefaultResource();s&&ha(this,Se).addTranslationResource(s)};let oa=On;function ba(g){const n=new URL(g);return n.protocol=document.location.protocol,n.hostname=document.location.hostname,n.port=document.location.port,n.toString().replace(/\/$/,"")}function Kn(g){const n=h.fromConfigs(g),s=n.getOptionalString("app.baseUrl"),E=n.getOptionalString("backend.baseUrl");let M=g,Ue,ft;if(s&&E){const bt=new URL(s).origin,jt=new URL(E).origin;if(bt===jt){const nn=ba(E);E!==nn&&(Ue=nn)}}if(s){const bt=ba(s);s!==bt&&(ft=bt)}return(ft||Ue)&&(M=M.concat({data:{app:ft&&{baseUrl:ft},backend:Ue&&{baseUrl:Ue}},context:"relative-resolver"})),M}var zn=Object.defineProperty,Yn=(g,n,s)=>n in g?zn(g,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[n]=s,na=(g,n,s)=>(Yn(g,typeof n!="symbol"?n+"":n,s),s),ma=(g,n,s)=>{if(!n.has(g))throw TypeError("Cannot "+s)},Ta=(g,n,s)=>(ma(g,n,"read from private field"),s?s.call(g):n.get(g)),Ca=(g,n,s)=>{if(n.has(g))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(g):n.set(g,s)},Da=(g,n,s,E)=>(ma(g,n,"write to private field"),E?E.call(g,s):n.set(g,s),s),Er;function to(g,n,s){var E;const M=Boolean(g),Ue=(0,be.default)(g||(()=>Promise.resolve([])));let ft;if(M&&Ue.loading){const{Progress:nn}=n;ft=r.createElement(nn,null)}else if(Ue.error){const{BootErrorPage:nn}=n;ft=r.createElement(nn,{step:"load-config",error:Ue.error})}const{ThemeProvider:bt=jr}=n;return ft?{node:r.createElement(Lt,{apis:Ar.with(U.n,s)},r.createElement(bt,null,ft))}:{api:h.fromConfigs((E=Ue.value)!=null&&E.length?Kn(Ue.value):[])}}class $o{constructor(n){this.app=n}getPlugins(){return this.app.getPlugins()}getSystemIcon(n){return this.app.getSystemIcon(n)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class ei{constructor(n){na(this,"apiHolder"),na(this,"configApi"),na(this,"apis"),na(this,"icons"),na(this,"plugins"),na(this,"featureFlags"),na(this,"components"),na(this,"themes"),na(this,"configLoader"),na(this,"defaultApis"),na(this,"bindRoutes"),na(this,"appLanguageApi"),na(this,"translationResources"),na(this,"appIdentityProxy",new Jr),na(this,"apiFactoryRegistry"),Ca(this,Er,!1);var s,E,M,Ue,ft,bt,jt,nn,jn;this.apis=(s=n.apis)!=null?s:[],this.icons=n.icons,this.plugins=new Set((E=n.plugins)!=null?E:[]),this.featureFlags=(M=n.featureFlags)!=null?M:[],this.components=n.components,this.themes=n.themes,this.configLoader=(Ue=n.configLoader)!=null?Ue:Ur,this.defaultApis=(ft=n.defaultApis)!=null?ft:[],this.bindRoutes=n.bindRoutes,this.apiFactoryRegistry=new ce,this.appLanguageApi=fo.createWithStorage({defaultLanguage:(bt=n.__experimentalTranslations)==null?void 0:bt.defaultLanguage,availableLanguages:(jt=n.__experimentalTranslations)==null?void 0:jt.availableLanguages}),this.translationResources=(jn=(nn=n.__experimentalTranslations)==null?void 0:nn.resources)!=null?jn:[]}getPlugins(){return Array.from(this.plugins)}getSystemIcon(n){return this.icons[n]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(n){const s=this.getProvider();return()=>r.createElement(s,null,n)}getProvider(){if(Ta(this,Er))throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");Da(this,Er,!0);const n=new $o(this);let s=!1;return({children:M})=>{const Ue=(0,r.useRef)(!0),ft=(0,r.useMemo)(()=>$.createWithStorage(this.themes),[]),{routing:bt,featureFlags:jt,routeBindings:nn}=(0,r.useMemo)(()=>{const aa=Hn();aa&&console.warn(`
DEPRECATION WARNING: React Router Beta is deprecated and support for it will be removed in a future release.
                     Please migrate to use React Router v6 stable.
                     See https://backstage.io/docs/tutorials/react-router-stable-migration
`);const ua=Sn({root:M,discoverers:[ta,ca],collectors:{routing:aa?c:f,collectedPlugins:Wa,featureFlags:y}});return ua.collectedPlugins.forEach(ja=>this.plugins.add(ja)),this.verifyPlugins(this.plugins),this.getApiHolder(),{...ua,routeBindings:Qr(this.bindRoutes)}},[M]);s||(s=!0,Qa(bt.paths,bt.parents),ar(nn,this.plugins));const jn=to(this.configLoader,this.components,ft),Zn="api"in jn;if(Zn){const{api:aa}=jn;this.configApi=aa}if("node"in jn)return jn.node;if(Zn&&Ue.current){Ue.current=!1;const aa=this.getApiHolder().get(U.f);if(aa){for(const va of this.featureFlags)aa.registerFlag({...va,pluginId:""});for(const va of this.plugins.values())if("getFeatureFlags"in va)for(const cr of va.getFeatureFlags())aa.registerFlag({name:cr.name,pluginId:va.getId()});else for(const cr of va.output())cr.type==="feature-flag"&&aa.registerFlag({name:cr.name,pluginId:va.getId()});const ua=aa.getRegisteredFlags(),ja=new Set(ua.map(va=>va.name));for(const va of jt)ja.has(va)||aa.registerFlag({name:va,pluginId:""})}}const{ThemeProvider:In=jr,Progress:da}=this.components;return r.createElement(Lt,{apis:this.getApiHolder()},r.createElement(Fr,{appContext:n},r.createElement(In,null,r.createElement(_a,{routePaths:bt.paths,routeParents:bt.parents,routeObjects:bt.objects,routeBindings:nn,basePath:Ya(jn.api)},r.createElement(Za.Provider,{value:{routeObjects:bt.objects,appIdentityProxy:this.appIdentityProxy}},r.createElement(r.Suspense,{fallback:r.createElement(da,null)},M))))))}}getRouter(){return Ut}getApiHolder(){if(this.apiHolder){for(const n of this.plugins)for(const s of n.getApis())this.apiFactoryRegistry.get(s.api)||this.apiFactoryRegistry.register("default",s);return Te.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:U.n,deps:{},factory:()=>$.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:U.p,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:U.t,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("static",{api:ge.IB,deps:{},factory:()=>this.appLanguageApi}),this.apiFactoryRegistry.register("default",{api:ge.op,deps:{languageApi:ge.IB},factory:({languageApi:n})=>oa.create({languageApi:n,resources:this.translationResources})}),this.apiFactoryRegistry.register("default",{api:U.f,deps:{},factory:()=>new _n});for(const n of this.defaultApis)this.apiFactoryRegistry.register("default",n);for(const n of this.plugins)for(const s of n.getApis())if(!this.apiFactoryRegistry.register("default",s))throw new Error(`Plugin ${n.getId()} tried to register duplicate or forbidden API factory for ${s.api}`);for(const n of this.apis)if(!this.apiFactoryRegistry.register("app",n))throw new Error(`Duplicate or forbidden API factory for ${n.api} in app`);return Te.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new Te(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(n){const s=new Set;for(const E of n){const M=E.getId();if(s.has(M))throw new Error(`Duplicate plugin found '${M}'`);s.add(M)}}}Er=new WeakMap;function Zo(g){return new ei(g)}let Po=!1;const Ao=g=>{const n=(0,We.qD)(),{NotFoundErrorPage:s}=n.getComponents(),E=(0,r.useMemo)(()=>Hn(),[]),Ue=[...(0,We.vJ)(g.children,ft=>ft.getElements().flatMap(bt=>{var jt;let nn=bt.props.path;if(nn==="")return[];nn=(jt=nn==null?void 0:nn.replace(/\/\*$/,""))!=null?jt:"/";let jn=E?bt:bt.props.element;return!E&&!jn&&(jn=bt,Po||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),Po=!0)),[{path:nn,element:jn,children:bt.props.children?[{path:nn==="/"?"/":"*",element:bt.props.children}]:void 0}]}).sort((bt,jt)=>jt.path.localeCompare(bt.path)).map(bt=>({...bt,path:bt.path==="/"?"/":`${bt.path}/*`}))),{path:"*",element:r.createElement(s,null)}];return(0,C.V$)(Ue)};(0,We.R5)(Ao,"core.type","FlatRoutes")},49558:(Rn,kt,e)=>{"use strict";e.d(kt,{in:()=>bn,qE:()=>Ga,Oo:()=>vi,hB:()=>pc,db:()=>ms,kB:()=>ps,Oi:()=>vt,VY:()=>So,yW:()=>Ei,bj:()=>Ya,XF:()=>De,mn:()=>Ot,NX:()=>Ut,SX:()=>rn,zG:()=>gs,ub:()=>Sa,SV:()=>Kn,mf:()=>Gs,yu:()=>gr,rc:()=>$o,fy:()=>hs,BF:()=>fs,h4:()=>Mo,M6:()=>lr,i9:()=>Ul,aR:()=>ci,rJ:()=>ma,Oh:()=>kl,hu:()=>Wi,Fw:()=>dt,rU:()=>Hn,Qj:()=>Ua,nU:()=>wt,SA:()=>jr,J3:()=>Pn,Or:()=>Mn,T3:()=>Lo,g9:()=>Kl,Ex:()=>Fn,Gk:()=>Or,tn:()=>ui,Ph:()=>E,YE:()=>ll,v7:()=>$i,Hz:()=>Ko,R6:()=>Ui,tR:()=>il,oz:()=>Al,BV:()=>Cl,k2:()=>xi,BT:()=>dl,FW:()=>lc,dh:()=>Vi,vK:()=>cr,Kq:()=>ja,wA:()=>Wr,VC:()=>Oo,Pd:()=>va,xT:()=>ls,uw:()=>Ts,qt:()=>Cs,oZ:()=>dc,iA:()=>fi,tB:()=>Es,GB:()=>Qr,sidebarConfig:()=>wr,r0:()=>zo,mZ:()=>vo,Pf:()=>Do});var r=e(57032),m=e(30705),u=e(61837),W=e(37265),A=e(90436),o=e(87685),U=e(99688),We=e(19928),we=e.n(We),a=e(2784),te=e(27429),q=e(77277),D=e(8629),Z=e(49429),Le=e(38724),ie=e(79249),re=e(43434),Q=e(79692),H=e(60364),S=e(41128),l=e(15459),b=e(12420),h=e(76600),C=e(41547),p=e(86689),be=e(72779),ge=e.n(be),ye=e(76635),ne=e(73557),oe=e(39857),X=e(16060),xe=e(95544),It=e(56553),P=e(26639),Jt=e(39595),me=e(80030),Lt=e(19353),Ct=e(95074),je=e(41156),nt=e(88188),Te=e(70367),gt=e(11105),de=e(97963),G=e(46506),Pe=e.n(G),ce=e(54073),le=e.n(ce),Be=e(10368),st=e(76985),Kt=e(78068),ct=e(19574),Zt=e.n(ct),O=e(72164),B=e(93657),w=e(60905);const L=e.p+"static/missingAnnotation.67f79e98..svg",se=e.p+"static/noInformation.4b426325..svg",Me=e.p+"static/createComponent.975d1e1e..svg",rt=e.p+"static/noBuild.1715fa71..svg";var xt=e(11776),ut=e(38402),et=e(49378),Wt=e(27616),fe=e(8284),Ae=e(70660),Xe=e(91750),St=e(38016),pt=e(6466),Tt=e(41779),Dt=e(85256),$e=e(28316),ot=e(35292),Bt=e(48049),_e=e(51209),Je=e(3806),Ee=e(32272),it=e(15277),at=e.n(it),Pt=e(58985),Nt=e(89586),on=e(67358),Ze=e(94339),He=e(14503),ve=e(24579),Ie=e(32552),lt=e(27597),$t=e(47968),j=e(21324),he=e(7089),ze=e(42494),ht=e(74603),sn=e(56939),Qt=e(12231),x=e(73698),Y=e(72379),Ye=e(74600),Et=e.n(Ye),zt=e(37390),Ft=e(97485),gn=e(15584),cn=e(89571),An=e(86136),Fe=e(50758),qe=e(79784),At=e(37794),tn=e.n(At),ln=e(80079),dn=e(18671),un=e(6487),wn=e(99152),Wn=e(67222),Gn=e(21070),sa=e(90324),Cn=e(98281),ea=e(33375),la=e(44233),ra=e(27604),fa=e(36444),Pa=e(37971),ia=e(59709),Ra=e(17373),ue=e(3702),Qe=e(93111),yt=e(4614),K=e(44311);const $=e.p+"static/mic-drop.fe3ef4d0..svg";var T=e(16173),F=e(50023),V=e(4190),Ce=e(44882),Re=e(18473),pe=e(57998),Ne=e(83543),tt=e(59797),_t=e(26739),Ht=e(86619),en=e(98989),Xt=e(30195),mn=e(63955),_n=e(74828),hn=e(45455),En=e.n(hn);function bn(t){const[i,d]=(0,a.useState)([]),v=(0,r.u)(r.l),{anchorOrigin:R={vertical:"top",horizontal:"center"},transientTimeoutMs:k}=t,ae=k!=null?k:5e3;(0,a.useEffect)(()=>{const Ge=v.alert$().subscribe(Rt=>d(Mt=>Mt.concat(Rt)));return()=>{Ge.unsubscribe()}},[v]);const[Oe]=i;if((0,a.useEffect)(()=>{if(Oe&&Oe.display==="transient"){const Ge=setTimeout(()=>{d(Rt=>{const Mt=Rt.filter(an=>an!==Oe);return Mt.length===Rt.length?Rt:Mt})},ae);return()=>clearTimeout(Ge)}},[Oe,ae]),i.length===0)return null;const Ke=()=>{d(Ge=>Ge.filter(Rt=>Rt!==Oe))};return a.createElement(W.Z,{open:!0,anchorOrigin:R},a.createElement(U.Z,{action:a.createElement(u.Z,{color:"inherit",size:"small",onClick:Ke,"data-testid":"error-button-close"},a.createElement(o.Z,null)),severity:Oe.severity},a.createElement(A.Z,{component:"span"},String(Oe.message),i.length>1&&a.createElement("em",null,` (${i.length-1} older ${we()("message",i.length-1)})`))))}const Ln="@backstage/autologout:lastSeenOnline",qn=({enableEffect:t,autologoutIsEnabled:i,idleTimeoutSeconds:d,lastSeenOnlineStore:v,identityApi:R})=>{useEffect(()=>{if(i&&t){const k=v.get();if(k){const Oe=Math.ceil(new Date().getTime()/1e3),Ke=Math.ceil(k.getTime()/1e3);Oe-Ke>d&&R.signOut()}v.save(new Date)}else v.delete()},[i,t,R,d,v])},Vn=t=>{const{idleTimer:i,setOpen:d,open:v,promptTimeoutMillis:R,remainingTime:k,setRemainingTime:ae}=t;useEffect(()=>{const Rt=setInterval(()=>{ae(Math.ceil(i.getRemainingTime()))},500);return()=>{clearInterval(Rt)}},[i,ae]);const Oe=()=>{d(!1),i.activate()},Ge=Math.max(k-R/1e3,0)>1?"seconds":"second";return React.createElement(Dialog,{open:v,"data-testid":"inactivity-prompt-dialog"},React.createElement(DialogTitle,null,"Logging out due to inactivity"),React.createElement(DialogContent,null,React.createElement(DialogContentText,null,"You are about to be disconnected in"," ",React.createElement("b",null,Math.ceil(k/1e3)," ",Ge),". Are you still there?")),React.createElement(DialogActions,null,React.createElement(Button$1,{onClick:Oe,color:"secondary",variant:"contained",size:"small"},"Yes! Don't log me out")))};class xn{constructor(i){this.key=i}save(i){localStorage.setItem(this.key,i.toJSON())}delete(){localStorage.removeItem(this.key)}get(){const i=localStorage.getItem(this.key);return i!==null?new Date(Date.parse(i)):null}}const Bn=({idleTimeoutMinutes:t,events:i,useWorkerTimers:d,logoutIfDisconnected:v,promptBeforeIdleSeconds:R,promptOpen:k,setPromptOpen:ae,remainingTimeCountdown:Oe,setRemainingTimeCountdown:Ke,identityApi:Ge,lastSeenOnlineStore:Rt})=>{const Mt=R*1e3,an=Mt>0,Yt=async()=>{ae(!0),Ke(Mt)},fn=()=>{ae(!1),Ke(0),Ge.signOut()},Un=()=>{ae(!1),Ke(0)},Qn=(Na,or)=>{Rt.save(new Date)},ya=useIdleTimer({timeout:t*60*1e3,events:i,crossTab:!0,name:"autologout-timer",timers:d?workerTimers:void 0,onIdle:fn,onActive:an?Un:void 0,onAction:v?Qn:void 0,onPrompt:an?Yt:void 0,promptBeforeIdle:an?Mt:void 0,syncTimers:1e3});return React.createElement(React.Fragment,null,an&&React.createElement(Vn,{idleTimer:ya,open:k,setOpen:ae,remainingTime:Oe,setRemainingTime:Ke,promptTimeoutMillis:Mt}))},$n={enabled:!0,idleTimeoutMinutes:.5,promptBeforeIdleSeconds:10,useWorkerTimers:!0,logoutIfDisconnected:!0},yn=null,Dn=(t,i)=>{var d,v,R,k,ae,Oe,Ke,Ge,Rt,Mt;return{enabled:(v=(d=t.getOptionalBoolean("auth.autologout.enabled"))!=null?d:i.enabled)!=null?v:$n.enabled,idleTimeoutMinutes:(k=(R=t.getOptionalNumber("auth.autologout.idleTimeoutMinutes"))!=null?R:i.idleTimeoutMinutes)!=null?k:$n.idleTimeoutMinutes,promptBeforeIdleSeconds:(Oe=(ae=t.getOptionalNumber("auth.autologout.promptBeforeIdleSeconds"))!=null?ae:i.promptBeforeIdleSeconds)!=null?Oe:$n.promptBeforeIdleSeconds,useWorkerTimers:(Ge=(Ke=t.getOptionalBoolean("auth.autologout.useWorkerTimers"))!=null?Ke:i.useWorkerTimers)!=null?Ge:$n.useWorkerTimers,logoutIfDisconnected:(Mt=(Rt=t.getOptionalBoolean("auth.autologout.logoutIfDisconnected"))!=null?Rt:i.logoutIfDisconnected)!=null?Mt:$n.logoutIfDisconnected}},pa=t=>{const i=useApi(identityApiRef),d=useApi(configApiRef),[v,R]=useState(!1);useEffect(()=>{async function Un(Qn){(await Qn.getCredentials()).token?R(!0):R(!1)}Un(i)},[i]);const{enabled:k,idleTimeoutMinutes:ae,promptBeforeIdleSeconds:Oe,logoutIfDisconnected:Ke,useWorkerTimers:Ge}=useMemo(()=>Dn(d,t),[d,t]);useEffect(()=>{if(ae<.5)throw new Error("\u274C idleTimeoutMinutes property should be >= 0.5 minutes (30 seconds).");if(Oe<0)throw new Error("\u274C promptBeforeIdleSeconds property should be >= 0 seconds. Set to 0 to disable the prompt.");if(ae*60<=Oe)throw new Error("\u274C promptBeforeIdleSeconds should be smaller than idleTimeoutMinutes")},[ae,Oe]);const Rt=useMemo(()=>new xn(Ln),[]),[Mt,an]=useState(!1),[Yt,fn]=useState(0);return qn({enableEffect:Ke,autologoutIsEnabled:k&&v,idleTimeoutSeconds:ae*60,lastSeenOnlineStore:Rt,identityApi:i}),!k||!v?null:React.createElement(Bn,{idleTimeoutMinutes:ae,promptBeforeIdleSeconds:Oe,useWorkerTimers:Ge,events:yn,logoutIfDisconnected:Ke,promptOpen:Mt,setPromptOpen:an,remainingTimeCountdown:Yt,setRemainingTimeCountdown:fn,identityApi:i,lastSeenOnlineStore:Rt})};function ga(t){let i=0;for(let v=0;v<t.length;v++)i=t.charCodeAt(v)+((i<<5)-i);let d="#";for(let v=0;v<3;v++){const R=i>>v*8&255;d+=`00${R.toString(16)}`.slice(-2)}return d}function Ma(t){var i;const d=t.trim().split(" "),v=(i=d[0])!=null?i:"",R=d.length>1?d[d.length-1]:"";return v&&R?`${v.charAt(0)}${R.charAt(0)}`:v.charAt(0)}const Fa=(0,Q.Z)(t=>({avatar:{width:"4rem",height:"4rem",color:t.palette.common.white},avatarText:{fontWeight:t.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function Ga(t){const{displayName:i,picture:d,customStyles:v}=t,R=Fa();let k={...v};const ae={fontFamily:k.fontFamily,fontSize:k.fontSize,fontWeight:k.fontWeight};return d||(k={backgroundColor:ga(i||""),...v}),a.createElement(re.Z,{alt:i,src:d,className:R.avatar,style:k},i&&a.createElement(A.Z,{variant:"h6",component:"span",className:R.avatarText,style:ae},Ma(i)))}function er(){const[t]=(0,ne.is)(a.createElement(ne.AW,{index:!0,element:a.createElement("div",null)}));return!t.index}const Ba=(0,Q.Z)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),Va=t=>/^([a-z+.-]+):/.test(t),Ha=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,Ka=window.open;if(Ka&&!Ka.__backstage){const t=function(...d){const v=String(d[0]);if(Ha.test(v))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return Ka.apply(this,d)};t.__backstage=!0,window.open=t}const Ja=()=>{try{return(0,r.u)(r.p).getOptionalString("app.baseUrl")}catch{return}},sr=()=>{var t;const i="http://sample.dev",d=(t=Ja())!=null?t:"/",{pathname:v}=new URL(d,i);return(0,ye.trimEnd)(v,"/")},dr=t=>{let i=String(t);const d=sr(),v=Va(i),R=i.startsWith(d);return!v&&!R&&(i=d.concat(i)),i},Za=t=>{var i;return t instanceof Array?t.map(Za).join(" ").trim():typeof t=="object"&&t?Za((i=t==null?void 0:t.props)==null?void 0:i.children):["string","number"].includes(typeof t)?String(t):""},Hn=a.forwardRef(({onClick:t,noTrack:i,...d},v)=>{const R=Ba(),k=(0,m.z$)(),ae=er()?dr(d.to):d.to,Oe=Za(d.children)||ae,Ke=Va(ae),Ge=Ke&&!!/^https?:/.exec(ae);if(Ha.test(ae))throw new Error("Link component rejected javascript: URL as a security precaution");const Rt=Mt=>{t==null||t(Mt),i||k.captureEvent("click",Oe,{attributes:{to:ae}})};return Ke?a.createElement(p.Z,{...Ge?{target:"_blank",rel:"noopener"}:{},...d,...d["aria-label"]?{"aria-label":`${d["aria-label"]}, Opens in a new window`}:{},ref:v,href:ae,onClick:Rt,className:ge()(R.externalLink,d.className)},d.children,a.createElement(A.Z,{component:"span",className:R.visuallyHidden},", Opens in a new window")):a.createElement(p.Z,{...d,ref:v,component:oe.rU,to:ae,onClick:Rt})}),Ea=a.forwardRef((t,i)=>a.createElement(Hn,{ref:i,...t,color:"initial"})),Ua=a.forwardRef((t,i)=>a.createElement(q.Z,{ref:i,component:Ea,...t})),tr=null;function Ya(t){const{text:i,tooltipDelay:d=1e3,tooltipText:v="Text copied to clipboard","aria-label":R="Copy text"}=t,k=(0,r.u)(r.r),[ae,Oe]=(0,a.useState)(!1),[{error:Ke},Ge]=(0,Ct.Z)();(0,a.useEffect)(()=>{Ke&&k.post(Ke)},[Ke,k]);const Rt=Mt=>{Mt.stopPropagation(),Oe(!0),Ge(i)};return a.createElement(a.Fragment,null,a.createElement(me.ZP,{id:"copy-test-tooltip",title:v,placement:"top",leaveDelay:d,onClose:()=>Oe(!1),open:ae},a.createElement(u.Z,{onClick:Rt,"aria-label":R},a.createElement(Lt.Z,null))))}function vt(t){const{text:i,language:d,showLineNumbers:v=!1,highlightedNumbers:R,customStyle:k,showCopyCodeButton:ae=!1}=t,Oe=(0,H.Z)(),Ke=Oe.palette.type==="dark"?P.Z:Jt.Z,Ge=Oe.palette.type==="dark"?"#256bf3":"#e6ffed";return a.createElement(xe.Z,{position:"relative"},a.createElement(It.Z,{customStyle:k,language:d,style:Ke,showLineNumbers:v,wrapLines:!0,lineNumberStyle:{color:Oe.palette.textVerySubtle},lineProps:Rt=>R!=null&&R.includes(Rt)?{style:{backgroundColor:Ge}}:{}},i),ae&&a.createElement(xe.Z,{position:"absolute",top:0,right:0},a.createElement(Ya,{text:i})))}function De(t){const{title:i,to:d}=t,v=(0,je.Z)(R=>R.breakpoints.down("xs"));return d?v?a.createElement(u.Z,{component:oe.rU,color:"primary",title:i,size:"small",to:d},a.createElement(nt.Z,null)):a.createElement(q.Z,{component:oe.rU,variant:"contained",color:"primary",to:d},i):null}var Ut;(t=>{(i=>{i.TOP_BOTTOM="TB",i.BOTTOM_TOP="BT",i.LEFT_RIGHT="LR",i.RIGHT_LEFT="RL"})(t.Direction||(t.Direction={})),(i=>{i.UP_LEFT="UL",i.UP_RIGHT="UR",i.DOWN_LEFT="DL",i.DOWN_RIGHT="DR"})(t.Alignment||(t.Alignment={})),(i=>{i.NETWORK_SIMPLEX="network-simplex",i.TIGHT_TREE="tight-tree",i.LONGEST_PATH="longest-path"})(t.Ranker||(t.Ranker={})),(i=>{i.LEFT="l",i.RIGHT="r",i.CENTER="c"})(t.LabelPosition||(t.LabelPosition={}))})(Ut||(Ut={}));const Sn=(0,Q.Z)(t=>({node:{fill:t.palette.primary.light,stroke:t.palette.primary.light},text:{fill:t.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function kn({node:{id:t}}){const i=Sn(),[d,v]=a.useState(0),[R,k]=a.useState(0),ae=a.useRef(null);a.useLayoutEffect(()=>{if(ae.current){let{height:Rt,width:Mt}=ae.current.getBBox();Rt=Math.round(Rt),Mt=Math.round(Mt),(Rt!==R||Mt!==d)&&(v(Mt),k(Rt))}},[d,R]);const Oe=10,Ke=d+Oe*2,Ge=R+Oe*2;return a.createElement("g",null,a.createElement("rect",{className:i.node,width:Ke,height:Ge,rx:10}),a.createElement("text",{ref:ae,className:i.text,y:Ge/2,x:Ke/2,textAnchor:"middle",alignmentBaseline:"middle"},t))}const ta="arrow-marker",ca="node",Wa="edge",za="label",Aa=(0,Be.Z)(t=>({node:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),Ia=t=>a.createElement(kn,{...t});function La({render:t=Ia,setNode:i,node:d}){const{width:v,height:R,x:k=0,y:ae=0}=d,Oe=d,Ke=Aa(),Ge=a.useRef(null);return a.useLayoutEffect(()=>{if(Ge.current){let{height:Rt,width:Mt}=Ge.current.getBBox();Rt=Math.round(Rt),Mt=Math.round(Mt),(Rt!==R||Mt!==v)&&i(d.id,{...d,height:Rt,width:Mt})}},[d,v,R,i]),a.createElement("g",{ref:Ge,"data-testid":ca,className:Ke.node,transform:`translate(${k-v/2},${ae-R/2})`},t({node:Oe}))}const nr=(0,Be.Z)(t=>({text:{fill:t.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function f({edge:{label:t}}){const i=nr();return a.createElement("text",{className:i.text,textAnchor:"middle"},t)}const c=(0,Be.Z)(t=>({path:{strokeWidth:1,stroke:t.palette.textSubtle,fill:"none",transition:`${t.transitions.duration.shortest}ms`},label:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),y=t=>a.createElement(f,{...t});function ee({render:t=y,setEdge:i,id:d,edge:v,curve:R}){const{x:k=0,y:ae=0,width:Oe,height:Ke,points:Ge}=v,Rt=v,Mt=c(),an=a.useRef(null);a.useLayoutEffect(()=>{if(an.current){let{height:Un,width:Qn}=an.current.getBBox();Un=Math.round(Un),Qn=Math.round(Qn),(Un!==Ke||Qn!==Oe)&&i(d,{...v,height:Un,width:Qn})}},[v,Ke,Oe,i,d]);let Yt="";const fn=a.useMemo(()=>st.Z().x(Un=>Un.x).y(Un=>Un.y).curve(Kt[R]),[R]);if(Ge){const Un=Ge.filter(Qn=>Zt()(Qn.x)&&Zt()(Qn.y));Yt=fn(Un)||""}return a.createElement(a.Fragment,null,Yt&&a.createElement("path",{"data-testid":Wa,className:Mt.path,d:Yt}),Rt.label?a.createElement("g",{ref:an,"data-testid":za,className:Mt.label,transform:`translate(${k},${ae})`},t({edge:Rt})):null)}const ke="workspace";function Ot(t){var i,d;const{edges:v,nodes:R,renderNode:k,direction:ae=Ut.Direction.TOP_BOTTOM,align:Oe,nodeMargin:Ke=50,edgeMargin:Ge=10,rankMargin:Rt=50,paddingX:Mt=0,paddingY:an=0,acyclicer:Yt,ranker:fn=Ut.Ranker.NETWORK_SIMPLEX,labelPosition:Un=Ut.LabelPosition.RIGHT,labelOffset:Qn=10,edgeRanks:ya=1,edgeWeight:Na=1,renderLabel:or,defs:Xn,zoom:wa="enabled",curve:ka="curveMonotoneX",fit:ir="grow",...Rr}=t,ro=(0,de.Z)(),[yr,oo]=a.useState(100),[io,Bo]=a.useState(100),Oa=a.useRef(new(Pe()).graphlib.Graph),[so,_r]=a.useState(((i=Oa.current.graph())==null?void 0:i.width)||0),[Mr,yo]=a.useState(((d=Oa.current.graph())==null?void 0:d.height)||0),[_o,Nr]=a.useState([]),[kr,Qo]=a.useState([]),bo=Math.max(so,yr),lo=Math.max(Mr,io),gc=Math.min(Mr,io),hc=ir==="grow"?lo:gc,fc=a.useMemo(()=>le()($a=>{if(!$a)return;const qa=gt.Z($a),xa=gt.Z($a.getElementById(ke));function br(){qa.call(Te.sP().scaleExtent([1,1/0]).on("zoom",Lr=>{Lr.transform.x=Math.min(0,Math.max(Lr.transform.x,bo-bo*Lr.transform.k)),Lr.transform.y=Math.min(0,Math.max(Lr.transform.y,lo-lo*Lr.transform.k)),xa.attr("transform",Lr.transform)}))}wa==="enabled"?br():wa==="enable-on-click"&&qa.on("click",()=>br());const{width:Cr,height:Uo}=$a.getBoundingClientRect();yr!==Cr&&oo(Cr),io!==Uo&&Bo(Uo)},100),[io,yr,bo,lo,wa]),zi=a.useCallback(()=>{const $a=Oa.current.nodes(),qa=Oa.current.edges();$a.forEach(xa=>{R.some(Cr=>Cr.id===xa)||Oa.current.removeNode(xa)}),qa.forEach(xa=>{v.some(Cr=>Cr.from===xa.v&&Cr.to===xa.w)||Oa.current.removeEdge(xa.v,xa.w)}),R.forEach(xa=>{const br=Oa.current.nodes().find(Cr=>xa.id===Cr);if(br&&Oa.current.node(br)){const{width:Cr,height:Uo,x:Lr,y:yc}=Oa.current.node(br);Oa.current.setNode(br,{...xa,width:Cr,height:Uo,x:Lr,y:yc})}else Oa.current.setNode(xa.id,{...xa,width:0,height:0})}),v.forEach(xa=>{Oa.current.setEdge(xa.from,xa.to,{...xa,label:xa.label,width:0,height:0,labelpos:Un,labeloffset:Qn,weight:Na,minlen:ya})})},[v,R,Un,Qn,Na,ya]),Co=a.useMemo(()=>le()(()=>{Pe().layout(Oa.current);const{height:$a,width:qa}=Oa.current.graph(),xa=Math.max(0,$a||0),br=Math.max(0,qa||0);_r(br),yo(xa),Nr(Oa.current.nodes()),Qo(Oa.current.edges())},250,{leading:!0}),[]);a.useEffect(()=>(Oa.current.setGraph({rankdir:ae,align:Oe,nodesep:Ke,edgesep:Ge,ranksep:Rt,marginx:Mt,marginy:an,acyclicer:Yt,ranker:fn}),zi(),Co(),Co.cancel),[Yt,Oe,ae,Ge,Mt,an,Ke,Rt,fn,zi,Co]);function Ec($a,qa){return Oa.current.setNode($a,qa),Co(),Oa.current}function vc($a,qa){return Oa.current.setEdge($a,qa),Co(),Oa.current}return a.createElement("svg",{ref:fc,...Rr,width:"100%",height:hc,viewBox:`0 0 ${bo} ${lo}`},a.createElement("defs",null,a.createElement("marker",{id:ta,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},a.createElement("path",{fill:ro.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),Xn),a.createElement("g",{id:ke},a.createElement("svg",{width:so,height:Mr,y:lo/2-Mr/2,x:bo/2-so/2,viewBox:`0 0 ${so} ${Mr}`},kr.map($a=>{const qa=Oa.current.edge($a);return qa?a.createElement(ee,{key:`${$a.v}-${$a.w}`,id:$a,setEdge:vc,render:or,edge:qa,curve:ka}):null}),_o.map($a=>{const qa=Oa.current.node($a);return qa?a.createElement(La,{key:$a,setNode:Ec,render:k,node:qa}):null}))))}const Gt=(0,Q.Z)(t=>{var i,d;return{root:{padding:t.spacing(0),marginBottom:t.spacing(0),marginTop:t.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:t.spacing(6),marginTop:-t.spacing(3),zIndex:"unset"},icon:{fontSize:t.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap",color:t.palette.banner.text},message:{display:"flex",alignItems:"center","& a":{color:t.palette.banner.link}},button:{color:(i=t.palette.banner.closeButtonColor)!=null?i:"inherit"},info:{backgroundColor:t.palette.banner.info},error:{backgroundColor:t.palette.banner.error},warning:{backgroundColor:(d=t.palette.banner.warning)!=null?d:t.palette.banner.error}}},{name:"BackstageDismissableBanner"}),rn=t=>{var i;const{variant:d,message:v,id:R,fixed:k=!1}=t,ae=Gt(),Ke=(0,r.u)(r.x).forBucket("notifications"),Ge=(i=Ke.snapshot("dismissedBanners").value)!=null?i:[],[Rt,Mt]=(0,a.useState)(new Set(Ge)),an=(0,O.Z)(Ke.observe$("dismissedBanners"));(0,a.useEffect)(()=>{var fn;if(an!=null&&an.value){const Un=(fn=an==null?void 0:an.value)!=null?fn:[];Mt(new Set(Un))}},[an==null?void 0:an.value]);const Yt=()=>{Ke.set("dismissedBanners",[...Rt,R])};return a.createElement(W.Z,{anchorOrigin:k?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!Rt.has(R),classes:{root:ge()(ae.root,!k&&ae.topPosition)}},a.createElement(B.Z,{classes:{root:ge()(ae.content,ae[d]),message:ae.message},message:v,action:[a.createElement(u.Z,{key:"dismiss",title:"Permanently dismiss this message",className:ae.button,onClick:Yt},a.createElement(o.Z,{className:ae.icon}))]}))},Tn=(0,Q.Z)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),Nn=({missing:t})=>{const i=Tn();switch(t){case"field":return a.createElement("img",{src:L,className:i.generalImg,alt:"annotation is missing"});case"info":return a.createElement("img",{src:se,alt:"no Information",className:i.generalImg});case"content":return a.createElement("img",{src:Me,alt:"create Component",className:i.generalImg});case"data":return a.createElement("img",{src:rt,alt:"no Build",className:i.generalImg});default:return null}},Jn=(0,Q.Z)(t=>({root:{backgroundColor:t.palette.background.default,padding:t.spacing(2,0,0,0)},action:{marginTop:t.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function Sa(t){const{title:i,description:d,missing:v,action:R}=t,k=Jn();return a.createElement(w.Z,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:k.root,spacing:2},a.createElement(w.Z,{item:!0,xs:12,md:6},a.createElement(w.Z,{container:!0,direction:"column"},a.createElement(w.Z,{item:!0,xs:!0},a.createElement(A.Z,{variant:"h5"},i)),a.createElement(w.Z,{item:!0,xs:!0},a.createElement(A.Z,{variant:"body1"},d)),a.createElement(w.Z,{item:!0,xs:!0,className:k.action},R))),a.createElement(w.Z,{item:!0,xs:12,md:6,className:k.imageContainer},typeof v=="string"?a.createElement(Nn,{missing:v}):v.customImage))}const _a=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,Qa=/^.*ANNOTATION.*$/m,ar=_a.match(Qa)[0],uo=_a.split(`
`).findIndex(t=>Qa.test(t)),Fr=(0,Q.Z)(t=>({code:{borderRadius:6,margin:t.spacing(2,0),background:t.palette.type==="dark"?"#444":t.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function Hr(t){return Array.from(Array(t+1).keys(),i=>i+uo)}function mo(t){const i=t.map(d=>ar.replace("ANNOTATION",d)).join(`
`);return _a.replace(ar,i)}function Br(t){const i=t.length<=1;return React.createElement(React.Fragment,null,"The ",i?"annotation":"annotations"," ",t.map(d=>React.createElement("code",null,d)).reduce((d,v)=>React.createElement(React.Fragment,null,d,", ",v))," ",i?"is":"are"," missing. You need to add the"," ",i?"annotation":"annotations"," to your component if you want to enable this tool.")}function Kr(t){const{annotation:i,readMoreUrl:d}=t,v=Array.isArray(i)?i:[i],R=d||"https://backstage.io/docs/features/software-catalog/well-known-annotations",k=Fr();return React.createElement(Sa,{missing:"field",title:"Missing Annotation",description:Br(v),action:React.createElement(React.Fragment,null,React.createElement(Typography,{variant:"body1"},"Add the annotation to your component YAML as shown in the highlighted example below:"),React.createElement(Box,{className:k.code},React.createElement(vt,{text:mo(v),language:"yaml",showLineNumbers:!0,highlightedNumbers:Hr(v.length),customStyle:{background:"inherit",fontSize:"115%"}})),React.createElement(Button$1,{color:"primary",component:Hn,to:R},"Read more"))})}const zr=(0,Q.Z)(t=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${t.palette.border}`},"& th, & td":{border:`1px solid ${t.palette.border}`,padding:t.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:t.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:t.palette.background.paper},"& tr":{backgroundColor:t.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:t.palette.background.default},"& a":{color:t.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),Jr=(t,i)=>i?typeof i=="string"?t+i:a.Children.toArray(i.props.children).reduce(Jr,t):t,pr=({level:t,children:i})=>{const R=a.Children.toArray(i).reduce(Jr,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return a.createElement(`h${t}`,{id:R},i)},po={code:({inline:t,className:i,children:d,...v})=>{const R=String(d).replace(/\n+$/,""),k=/language-(\w+)/.exec(i||"");return!t&&k?a.createElement(vt,{language:k[1],text:R}):a.createElement("code",{className:i,...v},d)},h1:pr,h2:pr,h3:pr,h4:pr,h5:pr,h6:pr};function jr(t){const{content:i,dialect:d="gfm",linkTarget:v,transformLinkUri:R,transformImageUri:k,className:ae}=t,Oe=zr();return a.createElement(pt.D,{remarkPlugins:d==="gfm"?[Tt.Z]:[],className:`${Oe.markdown} ${ae}`,children:i,components:po,linkTarget:v,transformLinkUri:R,transformImageUri:k})}const Ur=(t,i)=>(i.palette.type==="light"?S._j:S.$n)(i.palette[t].light,.6),Yr=(t,i)=>(i.palette.type==="light"?S.$n:S._j)(i.palette[t].light,.9),Gr=(0,Q.Z)(t=>({root:{marginRight:t.spacing(1),fill:({severity:i})=>Ur(i,t)}})),Sr=({severity:t})=>{const i=Gr({severity:t});return a.createElement(Xe.Z,{classes:i})},Tr=({severity:t})=>{const i=Gr({severity:t});return a.createElement(St.Z,{classes:i})},go=(0,Q.Z)(t=>({panel:{backgroundColor:({severity:i})=>Yr(i,t),color:({severity:i})=>Ur(i,t),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:i})=>Ur(i,t),fontWeight:t.typography.fontWeightBold},markdownContent:{"& p":{display:"inline"}},message:{width:"100%",display:"block",color:({severity:i})=>Ur(i,t),backgroundColor:({severity:i})=>Yr(i,t)},details:{width:"100%",display:"block",color:t.palette.textContrast,backgroundColor:t.palette.background.default,border:`1px solid ${t.palette.border}`,padding:t.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),Ar=t=>t.charAt(0).toLocaleUpperCase("en-US")+t.slice(1);function Qr(t){const{severity:i="warning",title:d,titleFormat:v,message:R,children:k,defaultExpanded:ae}=t,Oe=go({severity:i}),Ke=Ar(i)+(d?`: ${d}`:"");return a.createElement(Wt.Z,{defaultExpanded:ae!=null?ae:!1,className:Oe.panel,role:"alert"},a.createElement(fe.Z,{expandIcon:a.createElement(Tr,{severity:i}),className:Oe.summary},a.createElement(Sr,{severity:i}),a.createElement(A.Z,{className:Oe.summaryText,variant:"subtitle1"},v==="markdown"?a.createElement(jr,{content:Ke,className:Oe.markdownContent}):Ke)),(R||k)&&a.createElement(Ae.Z,null,a.createElement(w.Z,{container:!0},R&&a.createElement(w.Z,{item:!0,xs:12},a.createElement(A.Z,{className:Oe.message,variant:"body1"},R)),k&&a.createElement(w.Z,{item:!0,xs:12,className:Oe.details},k))))}const Xr=(0,Q.Z)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageErrorPanel"}),mr=({error:t,message:i,stack:d,children:v})=>{const R=Xr();return a.createElement(xt.Z,{dense:!0},a.createElement(ut.Z,{alignItems:"flex-start"},a.createElement(et.Z,{classes:{secondary:R.text},primary:"Error",secondary:t}),a.createElement(Ya,{text:t})),a.createElement(ut.Z,{alignItems:"flex-start"},a.createElement(et.Z,{classes:{secondary:R.text},primary:"Message",secondary:i}),a.createElement(Ya,{text:i})),d&&a.createElement(ut.Z,{alignItems:"flex-start"},a.createElement(et.Z,{classes:{secondary:R.text},primary:"Stack Trace",secondary:d}),a.createElement(Ya,{text:d})),v)};function gr(t){const{title:i,error:d,defaultExpanded:v,titleFormat:R,children:k}=t;return a.createElement(Qr,{severity:"error",title:i!=null?i:d.message,defaultExpanded:v,titleFormat:R},a.createElement(mr,{error:d.name,message:d.message,stack:d.stack,children:k}))}const $r=(0,Q.Z)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function Or(t){var i;const{title:d,error:v,defaultExpanded:R}=t,k=$r();if(v.name!=="ResponseError")return a.createElement(gr,{title:d!=null?d:v.message,defaultExpanded:R,error:v});const{body:ae,cause:Oe}=v,{request:Ke,response:Ge}=ae,Rt=`${Ge.statusCode}: ${Oe.name}`,Mt=Ke&&`${Ke.method} ${Ke.url}`,an=Oe.message.replace(/\\n/g,`
`),Yt=(i=Oe.stack)==null?void 0:i.replace(/\\n/g,`
`),fn=JSON.stringify(ae,void 0,2);return a.createElement(gr,{title:d!=null?d:v.message,defaultExpanded:R,error:{name:Rt,message:an,stack:Yt}},Mt&&a.createElement(ut.Z,{alignItems:"flex-start"},a.createElement(et.Z,{classes:{secondary:k.text},primary:"Request",secondary:Ke?`${Mt}`:void 0}),a.createElement(Ya,{text:Mt})),a.createElement(a.Fragment,null,a.createElement(Dt.Z,{component:"li",className:k.divider}),a.createElement(ut.Z,{alignItems:"flex-start"},a.createElement(et.Z,{classes:{secondary:k.text},primary:"Full Error as JSON"})),a.createElement(vt,{language:"json",text:fn,showCopyCodeButton:!0})))}function hr(t){const i=document.createElement("div");return i.setAttribute("id",t),i}function Dr(t){document.body.insertBefore(t,document.body.lastElementChild.nextElementSibling)}function Ir(t){const i=useRef(null);useEffect(function(){const R=document.querySelector(`#${t}`),k=R||hr(t);return R||Dr(k),k.appendChild(i.current),function(){i.current.remove(),k.childNodes.length===-1&&k.remove()}},[t]);function d(){return i.current||(i.current=document.createElement("div")),i.current}return d()}const rr="core.calloutSeen";function ho(){const[t,i]=useState(()=>{const v=localStorage.getItem(rr);return v?JSON.parse(v):{}}),d=useCallback((v,R)=>{const k=localStorage.getItem(rr),Oe={...k?JSON.parse(k):{},[v]:R};i(Oe),localStorage.setItem(rr,JSON.stringify(Oe))},[]);return{states:t,setState:d}}function fo(t){const{states:i,setState:d}=ho(),v=useCallback(()=>{d(t,!0)},[d,t]);return{seen:i[t]===!0,markSeen:v}}function Eo(t){const{seen:i,markSeen:d}=fo(t);return{show:i===!1,hide:d}}const qr=(0,Q.Z)(t=>({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:`2px solid ${t.palette.common.white}`,zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:t.palette.common.white,zIndex:2003}}),{name:"BackstageFeatureCalloutCircular"});function eo(t){const{featureId:i,title:d,description:v,children:R}=t,{show:k,hide:ae}=Eo(i),Oe=Ir("core.callout"),Ke=useRef(null),[Ge,Rt]=useState(),Mt=qr(),an=useCallback(()=>{if(Ke.current){const Yt=Ke.current.getBoundingClientRect(),fn=Math.max(Yt.width,Yt.height),Un=800,Qn=Yt.x-(fn-Yt.width)/2-Un,ya=Yt.y-(fn-Yt.height)/2-Un,Na=fn+2*Un,or=450,Xn=Yt.x+Yt.width/2-or,wa=Yt.y-(fn-Yt.height)/2+fn+20;Rt({dotLeft:Qn,dotTop:ya,dotSize:Na,borderWidth:Un,textTop:wa,textLeft:Xn,textWidth:or})}},[]);return useEffect(()=>(window.addEventListener("resize",an),window.addEventListener("scroll",an),()=>{window.removeEventListener("resize",an),window.removeEventListener("scroll",an)}),[an]),useLayoutEffect(an,[Ke.current,an]),k?React.createElement(React.Fragment,null,React.createElement(Box,{className:Mt.featureWrapper,ref:Ke},R),createPortal(React.createElement(Box,{className:Mt.backdrop},React.createElement(ClickAwayListener,{onClickAway:ae},React.createElement(React.Fragment,null,React.createElement(Box,{className:Mt.dot,"data-testid":"dot",style:{left:Ge==null?void 0:Ge.dotLeft,top:Ge==null?void 0:Ge.dotTop,width:Ge==null?void 0:Ge.dotSize,height:Ge==null?void 0:Ge.dotSize,borderWidth:Ge==null?void 0:Ge.borderWidth},onClick:ae,onKeyDown:ae,role:"button",tabIndex:0},React.createElement(Box,{className:Mt.pulseCircle})),React.createElement(Box,{className:Mt.text,"data-testid":"text",style:{left:Ge==null?void 0:Ge.textLeft,top:Ge==null?void 0:Ge.textTop,width:Ge==null?void 0:Ge.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},d),React.createElement(Typography,null,v))))),Oe)):React.createElement(React.Fragment,null,R)}const ha=(0,Q.Z)(t=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:t.palette.text.secondary,cursor:"default"},primary:{color:t.palette.primary.main},secondary:{color:t.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function Xa({color:t="primary",disabled:i=!1,href:d="#",icon:v=a.createElement(ot.Z,null),label:R,onClick:k,title:ae}){const Oe=ha();return i?a.createElement(xe.Z,{title:ae,className:ge()(Oe.link,Oe.disabled)},v,a.createElement(A.Z,{variant:"caption",component:"span",className:Oe.label},R)):a.createElement(Hn,{title:ae,className:ge()(Oe.link,Oe[t]),to:d,onClick:k},v,a.createElement(A.Z,{variant:"caption",component:"span",className:Oe.label},R))}const Zr=(0,Q.Z)(t=>({links:{margin:t.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:t.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function lr(t){const{links:i}=t,d=Zr();return a.createElement("nav",{className:d.links},i.map((v,R)=>a.createElement(Xa,{key:R+1,...v})))}const fr=t=>{const i=t==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${i}) 0%,
    hsla(0, 0%, ${i}, 0.987) 8.1%,
    hsla(0, 0%, ${i}, 0.951) 15.5%,
    hsla(0, 0%, ${i}, 0.896) 22.5%,
    hsla(0, 0%, ${i}, 0.825) 29%,
    hsla(0, 0%, ${i}, 0.741) 35.3%,
    hsla(0, 0%, ${i}, 0.648) 41.2%,
    hsla(0, 0%, ${i}, 0.55) 47.1%,
    hsla(0, 0%, ${i}, 0.45) 52.9%,
    hsla(0, 0%, ${i}, 0.352) 58.8%,
    hsla(0, 0%, ${i}, 0.259) 64.7%,
    hsla(0, 0%, ${i}, 0.175) 71%,
    hsla(0, 0%, ${i}, 0.104) 77.5%,
    hsla(0, 0%, ${i}, 0.049) 84.5%,
    hsla(0, 0%, ${i}, 0.013) 91.9%,
    hsla(0, 0%, ${i}, 0) 100%
  `},Vr=100,_=10,I=(0,Q.Z)(t=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:Vr,height:`calc(100% + ${_}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-_,background:`linear-gradient(90deg, ${fr(t.palette.type)})`},fadeRight:{right:-_,background:`linear-gradient(270deg, ${fr(t.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-t.spacing(2)},buttonRight:{right:-t.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function N(t){const[[i,d],v]=React.useState([0,0]);return React.useLayoutEffect(()=>{const R=t.current;if(!R){v([0,0]);return}const k=()=>{const ae=R.scrollLeft,Oe=R.scrollWidth-R.offsetWidth-R.scrollLeft;v([ae,Oe])};return k(),R.addEventListener("scroll",k),window.addEventListener("resize",k),()=>{R.removeEventListener("scroll",k),window.removeEventListener("resize",k)}},[t]),[i,d]}function J(t,i,d){const[v,R]=React.useState(0);return React.useLayoutEffect(()=>{if(v===0)return;const k=window.performance.now(),ae=requestAnimationFrame(Oe=>{if(!t.current)return;const Ke=Oe-k,Ge=Math.abs(v)*Ke/i,Mt=Math.max(d,Ge)*Math.sign(v);t.current.scrollBy({left:Mt});const an=v-Mt;Math.sign(v)!==Math.sign(an)?R(0):R(an)});return()=>cancelAnimationFrame(ae)},[t,v,i,d]),R}function Se(t){const{scrollStep:i=100,scrollSpeed:d=50,minScrollDistance:v=5,children:R,...k}=t,ae=I(t),Oe=React.useRef(),[Ke,Ge]=N(Oe),Rt=J(Oe,d,v),Mt=an=>{Oe.current&&Rt(an?i:-i)};return React.createElement(Box,{...k,className:ae.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:ae.container,ref:Oe},R),React.createElement(Box,{className:classNames(ae.fade,ae.fadeLeft,{[ae.fadeHidden]:Ke===0})}),React.createElement(Box,{className:classNames(ae.fade,ae.fadeRight,{[ae.fadeHidden]:Ge===0})}),Ke>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>Mt(!1),className:classNames(ae.button,ae.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),Ge>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>Mt(!0),className:classNames(ae.button,ae.buttonRight,{})},React.createElement(ChevronRight,null)))}const Ve=(0,Q.Z)(t=>({alpha:{color:t.palette.common.white,fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}}),{name:"BackstageLifecycle"});function dt(t){const i=Ve(t),{shorthand:d,alpha:v}=t;return d?a.createElement(A.Z,{component:"span",className:i[v?"alpha":"beta"],style:{fontSize:"120%"}},v?a.createElement(a.Fragment,null,"\u03B1"):a.createElement(a.Fragment,null,"\u03B2")):a.createElement(A.Z,{component:"span",className:i[v?"alpha":"beta"]},v?"Alpha":"Beta")}const mt=(0,a.lazy)(()=>Promise.all([e.e(7996),e.e(3951),e.e(3130)]).then(e.bind(e,13130)).then(t=>({default:t.RealLogViewer})));function wt(t){const{Progress:i}=(0,m.qD)().getComponents();return a.createElement(a.Suspense,{fallback:a.createElement(i,null)},a.createElement(mt,{...t}))}const qt=(0,Q.Z)(t=>({root:{paddingLeft:t.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),Vt=({request:t,busy:i,setBusy:d})=>{const v=qt(),[R,k]=(0,a.useState)(),ae=async()=>{d(!0);try{await t.trigger()}catch(Ke){k((0,Ee.VZ)(Ke)?Ke.message:"An unspecified error occurred")}finally{d(!1)}},Oe=t.provider.icon;return a.createElement(ut.Z,{disabled:i,classes:{root:v.root}},a.createElement(Je.Z,null,a.createElement(Oe,{fontSize:"large"})),a.createElement(et.Z,{primary:t.provider.title,secondary:R&&a.createElement(A.Z,{color:"error"},R)}),a.createElement(q.Z,{color:"primary",variant:"contained",onClick:ae},"Log in"))},pn=(0,Q.Z)(t=>({dialog:{paddingTop:t.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:t.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:t.spacing(2,0)}}),{name:"OAuthRequestDialog"});function Pn(t){var i;const d=pn(),[v,R]=(0,a.useState)(!1),k=(0,r.u)(r.v),Oe=(i=(0,r.u)(r.p).getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?i:!1,Ke=(0,O.Z)((0,a.useMemo)(()=>k.authRequest$(),[k]),[]),Ge=()=>{Ke.forEach(Rt=>Rt.reject())};return a.createElement(D.Z,{open:Boolean(Ke.length),fullWidth:!0,maxWidth:"xs",classes:{paper:d.dialog},"aria-labelledby":"oauth-req-dialog-title"},a.createElement("main",null,a.createElement(ie.Z,{classes:{root:d.title},id:"oauth-req-dialog-title"},a.createElement(A.Z,{className:d.titleHeading,variant:"h1",variantMapping:{h1:"span"}},"Login Required"),Oe?a.createElement(A.Z,null,"This will trigger a http redirect to OAuth Login."):null),a.createElement(Le.Z,{dividers:!0,classes:{root:d.contentList}},a.createElement(xt.Z,null,Ke.map(Rt=>a.createElement(Vt,{key:Rt.provider.title,request:Rt,busy:v,setBusy:R}))))),a.createElement(Z.Z,{classes:{root:d.actionButtons}},a.createElement(q.Z,{onClick:Ge},"Reject All")))}const vn=(0,Q.Z)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function Mn(t){var i;const[d,v]=(0,a.useState)(!1),R=(0,Pt.t)(),k=vn(),ae=Oe=>{R()&&v(Oe)};return a.createElement(me.ZP,{title:(i=t.title)!=null?i:t.text||"",placement:t.placement,disableHoverListener:!d},a.createElement(at(),{text:t.text,line:t.line,onToggled:ae,containerClassName:k.container}))}function Fn(t){const i=(0,H.Z)(),[d,v]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{const R=setTimeout(()=>v(!0),i.transitions.duration.short);return()=>clearTimeout(R)},[i.transitions.duration.short]),d?a.createElement(on.Z,{...t,"data-testid":"progress"}):a.createElement(xe.Z,{display:"none"})}const On=(0,Q.Z)(t=>({root:{maxWidth:"fit-content",padding:t.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:t.palette.textSubtle},arrow:{color:t.palette.textSubtle}}),{name:"BackstageBottomLink"});function oa(t){const{link:i,title:d,onClick:v}=t,R=On();return a.createElement(xe.Z,null,a.createElement(Dt.Z,null),a.createElement(Hn,{to:i,onClick:v,underline:"none"},a.createElement(xe.Z,{display:"flex",alignItems:"center",className:R.root},a.createElement(xe.Z,{className:R.boxTitle,fontWeight:"fontWeightBold",m:1},a.createElement(A.Z,null,a.createElement("strong",null,d))),a.createElement(lt.Z,{className:R.arrow}))))}const ba=t=>{const{slackChannel:i}=t;if(i){if(typeof i=="string")return a.createElement(A.Z,null,"Please contact ",i," for help.");if(!i.href)return a.createElement(A.Z,null,"Please contact ",i.name," for help.")}else return null;return a.createElement(Ua,{to:i.href,variant:"contained"},i.name)},Kn=class extends a.Component{constructor(i){super(i),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(i,d){console.error(`ErrorBoundary, error: ${i}, info: ${d}`),this.setState({error:i,errorInfo:d})}render(){const{slackChannel:i,children:d}=this.props,{error:v}=this.state;return v?a.createElement(gr,{title:"Something Went Wrong",error:v},a.createElement(ba,{slackChannel:i})):d}},zn=(0,Q.Z)(t=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:t.spacing(2,2,2,2.5)},headerTitle:{fontWeight:t.typography.fontWeightBold},headerSubheader:{paddingTop:t.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),Yn=(0,l.Z)(t=>({root:{display:"inline-block",padding:t.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(He.Z),na={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function ma(t){const{title:i,subheader:d,divider:v=!0,deepLink:R,slackChannel:k,errorBoundaryProps:ae,variant:Oe,children:Ke,headerStyle:Ge,headerProps:Rt,icon:Mt,action:an,actionsClassName:Yt,actions:fn,cardClassName:Un,actionsTopRight:Qn,className:ya,noPadding:Na,titleTypographyProps:or}=t,Xn=zn();let wa={},ka={};Oe&&Oe.split(/[\s]+/g).forEach(yr=>{wa={...wa,...na.card[yr]},ka={...ka,...na.cardContent[yr]}});const ir=()=>!d&&!Mt?null:a.createElement("div",{className:Xn.headerSubheader,"data-testid":"info-card-subheader"},d&&a.createElement("div",{className:Xn.subheader},d),Mt),Rr=ae||(k?{slackChannel:k}:{});return a.createElement(Ze.Z,{style:wa,className:ya},a.createElement(Kn,{...Rr},i&&a.createElement(Ie.Z,{classes:{root:Xn.header,title:Xn.headerTitle,subheader:Xn.headerSubheader,avatar:Xn.headerAvatar,action:Xn.headerAction,content:Xn.headerContent},title:i,subheader:ir(),action:an,style:{...Ge},titleTypographyProps:or,...Rt}),Qn&&a.createElement(Yn,null,Qn),v&&a.createElement(Dt.Z,null),a.createElement(ve.Z,{className:ge()(Un,{[Xn.noPadding]:Na}),style:ka},Ke),fn&&a.createElement(He.Z,{className:Yt},fn),R&&a.createElement(oa,{...R})))}const Ta=(0,Q.Z)(t=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:t.typography.pxToRem(45),fontWeight:t.typography.fontWeightBold,color:t.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),Ca={fractional:!0,inverse:!1,unit:"%",max:100},Da=({palette:t,value:i,inverse:d,max:v})=>{if(isNaN(i))return"#ddd";const R=v||Ca.max,k=d?R-i:i;return k<R/3?t.status.error:k<R*(2/3)?t.status.warning:t.status.ok};function Er(t){const[i,d]=(0,a.useState)(null),{getColor:v=Da}=t,R=Ta(t),{palette:k}=(0,H.Z)(),{value:ae,fractional:Oe,inverse:Ke,unit:Ge,max:Rt,description:Mt}={...Ca,...t},an=Oe?Math.round(ae*Rt):ae,Yt=Rt!==100?Math.round(ae):an,[fn,Un]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{const Qn=i,ya=()=>Un(!0),Na=()=>Un(!1);return Qn&&Mt?(Qn.addEventListener("mouseenter",ya),Qn.addEventListener("mouseleave",Na),()=>{Qn.removeEventListener("mouseenter",ya),Qn.removeEventListener("mouseleave",Na)}):()=>{Un(!1)}},[Mt,i]),a.createElement(xe.Z,{ref:d,className:R.root},a.createElement($t.Cd,{strokeLinecap:"butt",percent:an,strokeWidth:12,trailWidth:12,strokeColor:v({palette:k,value:Yt,inverse:Ke,max:Rt}),className:R.circle}),Mt&&fn?a.createElement(xe.Z,{className:R.description},Mt):a.createElement(xe.Z,{className:R.overlay},isNaN(ae)?"N/A":`${Yt}${Ge}`))}const to=(0,Q.Z)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function $o(t){const i=to(t),{title:d,subheader:v,progress:R,inverse:k,deepLink:ae,description:Oe,icon:Ke,variant:Ge,getColor:Rt}=t,Mt={inverse:k,description:Oe,getColor:Rt,value:R};return a.createElement(xe.Z,{className:i.root},a.createElement(ma,{title:d,subheader:v,deepLink:ae,variant:Ge,icon:Ke},a.createElement(Er,{...Mt})))}function ei(t){const{value:i,getColor:d=Da,width:v="thick"}=t,{palette:R}=useTheme();if(isNaN(i))return null;let k=Math.round(i*100*100)/100;k>100&&(k=100);const ae=v==="thick"?4:1,Oe=d({palette:R,value:k,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${k}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:k,strokeWidth:ae,trailWidth:ae,strokeColor:Oe})))}const Zo=(0,Q.Z)(t=>(0,b.Z)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none"}}),{name:"BackstageClosedDropdown"}),Po=()=>{const t=Zo();return a.createElement(Y.Z,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"#616161"}))},Ao=(0,Q.Z)(t=>(0,b.Z)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none"}}),{name:"BackstageOpenedDropdown"}),g=()=>{const t=Ao();return a.createElement(Y.Z,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"#616161"}))},n=(0,l.Z)(t=>(0,b.Z)({root:{"label + &":{marginTop:t.spacing(3)},"&.Mui-focused > div[role=button]":{borderColor:t.palette.primary.main}},input:{borderRadius:t.shape.borderRadius,position:"relative",backgroundColor:t.palette.background.paper,border:"1px solid #ced4da",fontSize:t.typography.body1.fontSize,padding:t.spacing(1.25,3.25,1.25,1.5),transition:t.transitions.create(["border-color","box-shadow"]),fontFamily:"Helvetica Neue","&:focus":{background:t.palette.background.paper,borderRadius:t.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(ht.Z),s=(0,Q.Z)(t=>(0,b.Z)({formControl:{margin:t.spacing(1,0),maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function E(t){const{multiple:i,items:d,label:v,placeholder:R,selected:k,onChange:ae,triggerReset:Oe,native:Ke=!1,disabled:Ge=!1,margin:Rt}=t,Mt=s(),[an,Yt]=(0,a.useState)(k||(i?[]:"")),[fn,Un]=(0,a.useState)(!1);(0,a.useEffect)(()=>{Yt(i?[]:"")},[Oe,i]),(0,a.useEffect)(()=>{Yt(k||(i?[]:""))},[k,i]);const Qn=Xn=>{Yt(Xn.target.value),ae(Xn.target.value)},ya=Xn=>{if(Ge){Xn.preventDefault();return}Un(wa=>i&&!(Xn.target instanceof HTMLElement)?!0:!wa)},Na=()=>{Un(!1)},or=Xn=>()=>{const wa=an.filter(ka=>ka!==Xn);Yt(wa),ae(wa)};return a.createElement(xe.Z,{className:Mt.root},a.createElement(ze.Z,{className:Mt.formControl},a.createElement(sn.Z,{className:Mt.formLabel},v),a.createElement(x.Z,{"aria-label":v,value:an,native:Ke,disabled:Ge,"data-testid":"select",displayEmpty:!0,multiple:i,margin:Rt,onChange:Qn,open:fn,onOpen:ya,onClose:Na,input:a.createElement(n,null),label:v,renderValue:Xn=>{var wa;return i&&an.length!==0?a.createElement(xe.Z,{className:Mt.chips},Xn.map(ka=>{const ir=d.find(Rr=>Rr.value===ka);return ir?a.createElement(he.Z,{key:ir==null?void 0:ir.value,label:ir==null?void 0:ir.label,clickable:!0,onDelete:or(ka),className:Mt.chip}):!1})):a.createElement(A.Z,null,an.length===0?R||"":(wa=d.find(ka=>ka.value===Xn))==null?void 0:wa.label)},IconComponent:()=>fn?a.createElement(g,null):a.createElement(Po,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},R&&!i&&a.createElement(Qt.Z,{value:[]},R),Ke?d&&d.map(Xn=>a.createElement("option",{value:Xn.value,key:Xn.value},Xn.label)):d&&d.map(Xn=>a.createElement(Qt.Z,{key:Xn.value,value:Xn.value},i&&a.createElement(j.Z,{color:"primary",checked:an.includes(Xn.value)||!1,className:Mt.checkbox}),Xn.label)))))}const M=()=>{},Ue=a.createContext({stepperLength:0,stepIndex:0,setStepIndex:M,stepHistory:[],setStepHistory:M,onStepChange:M});function ft(t){const{children:i,elevated:d,onStepChange:v,activeStep:R=0}=t,[k,ae]=useState(R),[Oe,Ke]=useState([0]);useEffect(()=>{ae(R)},[R]);const Ge=[];let Rt;return Children.forEach(i,Mt=>{isValidElement(Mt)&&(Mt.props.end?Rt=Mt:Ge.push(Mt))}),React.createElement(React.Fragment,null,React.createElement(Ue.Provider,{value:{stepIndex:k,setStepIndex:ae,stepHistory:Oe,setStepHistory:Ke,onStepChange:v,stepperLength:Children.count(i)}},React.createElement(MuiStepper,{activeStep:k,orientation:"vertical",elevation:d?2:0},Ge)),k>=Children.count(i)-1&&Rt)}const bt=(0,Q.Z)(t=>({root:{marginTop:t.spacing(3),"& button":{marginRight:t.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),jt=({text:t,handleClick:i})=>React.createElement(Button$1,{onClick:i},t||"Reset"),nn=({text:t,handleClick:i,disabled:d,last:v,stepIndex:R})=>React.createElement(Button$1,{variant:"contained",color:"primary",disabled:d,"data-testid":`nextButton-${R}`,onClick:i},t||(v?"Finish":"Next")),jn=({text:t,handleClick:i,disabled:d,stepIndex:v})=>React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:d,"data-testid":`skipButton-${v}`,onClick:i},t||"Skip"),Zn=({text:t,handleClick:i,disabled:d,stepIndex:v})=>React.createElement(Button$1,{onClick:i,"data-testid":`backButton-${v}`,disabled:d},t||"Back"),In=({actions:t={},children:i})=>{const d=bt(),{stepperLength:v,stepIndex:R,setStepIndex:k,stepHistory:ae,setStepHistory:Oe,onStepChange:Ke}=useContext(Ue),Ge=(Yt,fn)=>{fn&&fn(),Ke&&Ke(R,Yt),k(Yt)},Rt=()=>{const Yt=t.nextStep?t.nextStep(R,v-1):R+1;Ge(Yt,t.onNext),Oe([...ae,Yt])},Mt=()=>{ae.pop(),Ge(ae[ae.length-1],t.onBack),Oe([...ae])},an=()=>{Ge(0,t.onRestart),Oe([0])};return React.createElement(Box,{className:d.root},[void 0,!0].includes(t.showBack)&&R!==0&&React.createElement(Zn,{text:t.backText,handleClick:Mt,disabled:R===0,stepIndex:R}),t.showSkip&&React.createElement(jn,{text:t.skipText,handleClick:Rt,disabled:!!v&&R>=v||!!t.canSkip&&!t.canSkip(),stepIndex:R}),[void 0,!0].includes(t.showNext)&&React.createElement(nn,{text:t.nextText,handleClick:Rt,disabled:!!v&&R>=v||!!t.canNext&&!t.canNext(),stepIndex:R}),t.showRestart&&R!==0&&React.createElement(jt,{text:t.restartText,handleClick:an,stepIndex:R}),i)},da=(0,Q.Z)(t=>({end:{padding:t.spacing(3)}}),{name:"SimpleStepperStep"});function aa(t){const{title:i,children:d,end:v,actions:R,...k}=t,ae=da();return v?React.createElement(Box,{className:ae.end},React.createElement(Typography,{variant:"h6"},i),d,React.createElement(In,{actions:{...R||{},showNext:!1}})):React.createElement(MuiStep,{...k},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},i)),React.createElement(StepContent,null,d,React.createElement(In,{actions:R})))}const ua=(0,Q.Z)(t=>({status:{fontWeight:t.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:t.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:t.palette.status.ok}},warning:{"&::before":{backgroundColor:t.palette.status.warning}},error:{"&::before":{backgroundColor:t.palette.status.error}},pending:{"&::before":{backgroundColor:t.palette.status.pending}},running:{"&::before":{backgroundColor:t.palette.status.running}},aborted:{"&::before":{backgroundColor:t.palette.status.aborted}}}),{name:"BackstageStatus"});function ja(t){const i=ua(t);return a.createElement(A.Z,{component:"span",className:ge()(i.status,i.ok),"aria-label":"Status ok","aria-hidden":"true",...t})}function va(t){const i=ua(t);return a.createElement(A.Z,{component:"span",className:ge()(i.status,i.warning),"aria-label":"Status warning","aria-hidden":"true",...t})}function cr(t){const i=ua(t);return a.createElement(A.Z,{component:"span",className:ge()(i.status,i.error),"aria-label":"Status error","aria-hidden":"true",...t})}function Wr(t){const i=ua(t);return a.createElement(A.Z,{component:"span",className:ge()(i.status,i.pending),"aria-label":"Status pending","aria-hidden":"true",...t})}function Oo(t){const i=ua(t);return a.createElement(A.Z,{component:"span",className:ge()(i.status,i.running),"aria-label":"Status running","aria-hidden":"true",...t})}function Vi(t){const i=ua(t);return a.createElement(A.Z,{component:"span",className:ge()(i.status,i.aborted),"aria-label":"Status aborted","aria-hidden":"true",...t})}const Hi=t=>(0,b.Z)({root:{fontWeight:t.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:t.spacing(4),border:"0",verticalAlign:"top"}}),Ji={root:{border:"0",verticalAlign:"top"}},Yi=t=>(0,b.Z)({root:{margin:t.spacing(0,0,-1,0)}}),Qi=t=>(0,b.Z)({root:{padding:t.spacing(0,0,1,0)},random:{}}),Xi=(0,l.Z)(Hi,{name:"BackstageMetadataTableTitleCell"})(gn.Z),qi=(0,l.Z)(Ji,{name:"BackstageMetadataTableCell"})(gn.Z),es=({dense:t,children:i})=>a.createElement(zt.Z,{size:t?"small":"medium"},a.createElement(Ft.Z,null,i)),ts=({title:t,children:i,...d})=>a.createElement(cn.Z,null,t&&a.createElement(Xi,null,t),a.createElement(qi,{colSpan:t?1:2,...d},i)),ti=(0,l.Z)(Yi,{name:"BackstageMetadataTableList"})(({classes:t,children:i})=>a.createElement(xt.Z,{disablePadding:!0,className:t.root},i)),ni=(0,l.Z)(Qi,{name:"BackstageMetadataTableListItem"})(({classes:t,children:i})=>a.createElement(ut.Z,{className:t.root},i)),ai=(0,b.Z)({root:{margin:"0 0",listStyleType:"none"}}),ns=t=>(0,b.Z)({root:{...ai.root,paddingLeft:t.spacing(1)}}),ri=(0,l.Z)(ai,{name:"BackstageStructuredMetadataTableList"})(({classes:t,children:i})=>a.createElement(ti,{classes:t},i)),oi=(0,l.Z)(ns,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:t,children:i})=>a.createElement(ti,{classes:t},i));function as(t,i,d){const v=t.map((R,k)=>a.createElement(ni,{key:k},Wo(R,i,d)));return d?a.createElement(oi,null,v):a.createElement(ri,null,v)}function rs(t,i,d){const v=Object.keys(t).map(R=>{const k=Wo(t[R],i,!0);return a.createElement(ni,{key:R},a.createElement(A.Z,{variant:"body2",component:"span"},`${i.titleFormat(R)}: `),k)});return d?a.createElement(oi,null,v):a.createElement(ri,null,v)}function Wo(t,i,d){return a.isValidElement(t)?a.createElement(a.Fragment,null,t):t!==null&&typeof t=="object"&&!Array.isArray(t)?rs(t,i,d):Array.isArray(t)?as(t,i,d):typeof t=="boolean"?a.createElement(a.Fragment,null,t?"\u2705":"\u274C"):a.createElement(A.Z,{variant:"body2",component:"span"},t)}const os=({value:t,options:i})=>a.createElement(a.Fragment,null,Wo(t,i,!1)),is=({title:t,value:i,options:d})=>a.createElement(ts,{title:d.titleFormat(t)},a.createElement(os,{value:i,options:d}));function ss(t,i){return Object.keys(t).map(d=>a.createElement(is,{key:d,title:d,value:t[d],options:i}))}function ls(t){const{metadata:i,dense:d=!0,options:v={}}=t,R=ss(i,{titleFormat:Et(),...v});return a.createElement(es,{dense:d},R)}function cs(t){return qs.stringify(t,{strictNullHandling:!0})}function ii(t){return qs.parse(t,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function si(t,i){return ii(t)[i]}function us(t,i,d){const v={...ii(t),[i]:d};return cs(v)}function _c(t,i=250){const[d,v]=useSearchParams(),R=d.toString(),[k,ae]=useState(si(R,t));return useEffect(()=>{const Oe=si(R,t);ae(Ke=>isEqual(Oe,Ke)?Ke:Oe)},[R,ae,t]),useDebouncedEffect(()=>{const Oe=us(R,t,k);R!==Oe&&v(Oe,{replace:!0})},[v,k,R,t],i),[k,ae]}const ds={url:"https://github.com/backstage/backstage/issues",items:[{title:"Support Not Configured",icon:"warning",links:[{title:"Add `app.support` config key",url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]};function li(){const i=(0,r.b)().get(r.p),d=i==null?void 0:i.getOptionalConfig("app.support");return d?{url:d.getString("url"),items:d.getConfigArray("items").flatMap(v=>{var R;return{title:v.getString("title"),icon:v.getOptionalString("icon"),links:((R=v.getOptionalConfigArray("links"))!=null?R:[]).flatMap(k=>({url:k.getString("url"),title:k.getString("title")}))}})}:ds}function vr(t,i){const v=(0,m.qD)().getSystemIcon(t);return v?a.createElement(v,{...i}):a.createElement(ln.Z,{...i})}function bc(t){return vr("brokenImage",t)}function ms(t){return vr("catalog",t)}function ps(t){return vr("chat",t)}function Cc(t){return vr("dashboard",t)}function gs(t){return vr("docs",t)}function Pc(t){return vr("email",t)}function hs(t){return vr("github",t)}function fs(t){return vr("group",t)}function Ro(t){return vr("help",t)}function Es(t){return vr("user",t)}function Ac(t){return vr("warning",t)}const vs=(0,Q.Z)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),ys=({icon:t})=>{var i;const d=(0,m.qD)(),v=t&&(i=d.getSystemIcon(t))!=null?i:Ro;return a.createElement(v,null)},_s=({link:t})=>{var i;return a.createElement(Hn,{to:t.url},(i=t.title)!=null?i:t.url)},bs=({item:t})=>{var i;return a.createElement(Qt.Z,null,a.createElement(An.Z,null,a.createElement(ys,{icon:t.icon})),a.createElement(et.Z,{primary:t.title,secondary:(i=t.links)==null?void 0:i.reduce((d,v,R)=>[...d,R>0&&a.createElement("br",{key:R}),a.createElement(_s,{link:v,key:v.url})],[])}))};function Cs(t){const{title:i,items:d,children:v}=t,{items:R}=li(),[k,ae]=(0,a.useState)(!1),[Oe,Ke]=(0,a.useState)(null),Ge=vs(),Rt=(0,je.Z)(Yt=>Yt.breakpoints.down("sm")),Mt=Yt=>{Ke(Yt.currentTarget),ae(!0)},an=()=>{ae(!1)};return a.createElement(a.Fragment,null,a.createElement(xe.Z,{display:"flex",ml:1},Rt?a.createElement(u.Z,{color:"primary",size:"small",onClick:Mt,"data-testid":"support-button","aria-label":"Support"},a.createElement(Ro,null)):a.createElement(q.Z,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:Mt,startIcon:a.createElement(Ro,null)},"Support")),a.createElement(qe.ZP,{"data-testid":"support-button-popover",open:k,anchorEl:Oe,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:an},a.createElement(Fe.Z,{className:Ge.popoverList,autoFocusItem:Boolean(Oe)},i&&a.createElement(Qt.Z,{alignItems:"flex-start",className:Ge.menuItem},a.createElement(A.Z,{variant:"subtitle1"},i)),a.Children.map(v,(Yt,fn)=>a.createElement(Qt.Z,{alignItems:"flex-start",key:`child-${fn}`,className:Ge.menuItem},Yt)),(d!=null?d:R).map((Yt,fn)=>a.createElement(bs,{item:Yt,key:`item-${fn}`}))),a.createElement(Z.Z,null,a.createElement(q.Z,{color:"primary",onClick:an,"aria-label":"Close"},"Close"))))}const Ps=(0,Q.Z)(t=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:t.spacing(3),paddingBottom:t.spacing(3),paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function So(t){const{className:i,stretch:d,noPadding:v,children:R,...k}=t,ae=Ps();return a.createElement("article",{...k,className:ge()(ae.root,i,{[ae.stretch]:d,[ae.noPadding]:v})},R)}const As=(0,Q.Z)(t=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:t.palette.background.paper,paddingLeft:t.spacing(3),minWidth:0},defaultTab:{...t.typography.caption,padding:t.spacing(3,3),textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,color:t.palette.text.secondary},selected:{color:t.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:t.palette.background.default,color:t.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function ci(t){const{tabs:i,onChange:d,selectedIndex:v}=t,[R,k]=(0,a.useState)(v!=null?v:0),ae=As(),Oe=(0,a.useCallback)((Ke,Ge)=>{v===void 0&&k(Ge),d&&d(Ge)},[v,d]);return(0,a.useEffect)(()=>{v!==void 0&&k(v)},[v]),a.createElement(xe.Z,{className:ae.tabsWrapper},a.createElement(wn.Z,{indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:Oe,value:R},i.map((Ke,Ge)=>a.createElement(un.Z,{...Ke.tabProps,"data-testid":`header-tab-${Ge}`,label:Ke.label,key:Ke.id,value:Ge,className:ae.defaultTab,classes:{selected:ae.selected,root:ae.tabRoot}}))))}function Os(t){var i,d,v,R,k;const ae=(0,ne.UO)(),Ke=t.map(({path:Yt,children:fn})=>({caseSensitive:!1,path:`${Yt}/*`,element:fn})).sort((Yt,fn)=>fn.path.replace(/\/\*$/,"").localeCompare(Yt.path.replace(/\/\*$/,""))),Ge=(d=(0,ne.V$)(Ke))!=null?d:(i=t[0])==null?void 0:i.children;let Rt=(v=ae["*"])!=null?v:"";Rt.startsWith("/")||(Rt=`/${Rt}`);const[Mt]=(R=(0,X.fp)(Ke,Rt))!=null?R:[],an=Mt?t.findIndex(Yt=>`${Yt.path}/*`===Mt.route.path):0;return{index:an===-1?0:an,element:Ge,route:(k=t[an])!=null?k:t[0]}}function ui(t){const{routes:i}=t,d=(0,ne.s0)(),{index:v,route:R,element:k}=Os(i),ae=(0,a.useMemo)(()=>i.map(Ke=>({id:Ke.path,label:Ke.title,tabProps:Ke.tabProps})),[i]),Oe=Ke=>{let{path:Ge}=i[Ke];Ge=Ge.replace(/\/\*$/,""),Ge=Ge.replace(/^\//,""),d(Ge)};return a.createElement(a.Fragment,null,a.createElement(ci,{tabs:ae,selectedIndex:v,onChange:Oe}),a.createElement(So,null,a.createElement(dn.q,{title:R==null?void 0:R.title}),k))}const No=()=>null;(0,m.R5)(No,"core.gatherMountPoints",!0);function di(t){const i=a.createElement(No,{path:"",title:""},a.createElement("div",null)).type;return a.Children.toArray(t).flatMap(d=>{if(!(0,a.isValidElement)(d))return[];if(d.type===a.Fragment)return di(d.props.children);if(d.type!==i)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:v,title:R,children:k,tabProps:ae}=d.props;return[{path:v,title:R,children:k,tabProps:ae}]})}function Rs(t){const i=di(t.children);return a.createElement(ui,{routes:i})}Rs.Route=No;const Ss=(0,Q.Z)(t=>({value:{marginBottom:t.spacing(.75)},subvalue:{color:t.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function Ts(t){const{value:i,subvalue:d}=t,v=Ss();return a.createElement(a.Fragment,null,a.createElement(xe.Z,{className:v.value},i),a.createElement(xe.Z,{className:v.subvalue},d))}const Ds=(0,Q.Z)(t=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:t.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:t.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${t.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:t.spacing(2)}}}),{name:"BackstageTableFilters"}),Is=t=>{var i;const d=Ds(),{onChangeFilters:v}=t,[R,k]=(0,a.useState)({...t.selectedFilters}),[ae,Oe]=(0,a.useState)(!1),Ke=()=>{k({}),Oe(Ge=>!Ge)};return(0,a.useEffect)(()=>{v(R)},[R,v]),a.createElement(xe.Z,{className:d.root},a.createElement(xe.Z,{className:d.header},a.createElement(xe.Z,{className:d.value},"Filters"),a.createElement(q.Z,{color:"primary",onClick:Ke},"Clear all")),a.createElement(xe.Z,{className:d.filters},((i=t.filters)==null?void 0:i.length)&&t.filters.map(Ge=>a.createElement(E,{triggerReset:ae,key:Ge.element.label,...Ge.element,selected:R[Ge.element.label],onChange:Rt=>k({...R,[Ge.element.label]:Rt})}))))};function ws(t){return a.createElement("tbody",{"data-testid":"loading-indicator"},a.createElement("tr",null,a.createElement("td",{colSpan:t.colSpan},a.createElement(xe.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",minHeight:"15rem"}},a.createElement(yt.Z,{size:"5rem"})))))}const mi={Add:(0,a.forwardRef)((t,i)=>a.createElement(Gn.Z,{...t,ref:i})),Check:(0,a.forwardRef)((t,i)=>a.createElement(Cn.Z,{...t,ref:i})),Clear:(0,a.forwardRef)((t,i)=>a.createElement(ea.Z,{...t,ref:i})),Delete:(0,a.forwardRef)((t,i)=>a.createElement(la.Z,{...t,ref:i})),DetailPanel:(0,a.forwardRef)((t,i)=>a.createElement(_e.Z,{...t,ref:i})),Edit:(0,a.forwardRef)((t,i)=>a.createElement(ra.Z,{...t,ref:i})),Export:(0,a.forwardRef)((t,i)=>a.createElement(ue.Z,{...t,ref:i})),Filter:(0,a.forwardRef)((t,i)=>a.createElement(fa.Z,{...t,ref:i})),FirstPage:(0,a.forwardRef)((t,i)=>a.createElement(Pa.Z,{...t,ref:i})),LastPage:(0,a.forwardRef)((t,i)=>a.createElement(ia.Z,{...t,ref:i})),NextPage:(0,a.forwardRef)((t,i)=>a.createElement(_e.Z,{...t,ref:i})),PreviousPage:(0,a.forwardRef)((t,i)=>a.createElement(Bt.Z,{...t,ref:i})),ResetSearch:(0,a.forwardRef)((t,i)=>a.createElement(ea.Z,{...t,ref:i})),Search:(0,a.forwardRef)((t,i)=>a.createElement(fa.Z,{...t,ref:i})),SortArrow:(0,a.forwardRef)((t,i)=>a.createElement(sa.Z,{...t,ref:i})),ThirdStateCheck:(0,a.forwardRef)((t,i)=>a.createElement(Ra.Z,{...t,ref:i})),ViewColumn:(0,a.forwardRef)((t,i)=>a.createElement(Qe.Z,{...t,ref:i}))};function pi(t,i){const d=i.split(".");let v=t[d[0]];for(let R=1;R<d.length;++R){if(v===void 0)return v;const k=d[R];v=v[k]}return v}const Ms=(0,l.Z)(t=>({header:{padding:t.spacing(1,2,1,2.5),borderTop:`1px solid ${t.palette.grey.A100}`,borderBottom:`1px solid ${t.palette.grey.A100}`,fontWeight:t.typography.fontWeightBold,position:"static",wordBreak:"normal"}}),{name:"BackstageTableHeader"})(Wn.W$),gi=(0,l.Z)(t=>({root:{padding:t.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:t.typography.fontWeightBold}},searchField:{paddingRight:t.spacing(2)}}),{name:"BackstageTableToolbar"})(Wn.UW),Ls=(0,Q.Z)(t=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:t.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),xs=(0,Q.Z)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function Bs(t,i){return t.map(d=>{var v;const R=(v=d.headerStyle)!=null?v:{};let k=d.cellStyle||{};if(d.highlight)if(R.color=i.palette.textContrast,typeof k=="object")k.fontWeight=i.typography.fontWeightBold;else{const ae=k;k=(Oe,Ke,Ge)=>({...ae(Oe,Ke,Ge),fontWeight:i.typography.fontWeightBold})}return{...d,headerStyle:R,cellStyle:k}})}function Us(t,i){return(0,ye.transform)(t,(d,v,R)=>{(0,ye.isEqual)(v,i[R])||(d[R]=v)})}const hi={search:"",filtersOpen:!1,filters:{}};function $s(t){const{toolbarRef:i,setSearch:d,hasFilters:v,selectedFiltersLength:R,toggleFilters:k}=t,ae=Ls(),Oe=(0,a.useCallback)(Ke=>{t.onSearchChanged(Ke),d(Ke)},[t,d]);return v?a.createElement(xe.Z,{className:ae.root},a.createElement(xe.Z,{className:ae.root},a.createElement(u.Z,{onClick:k,"aria-label":"filter list"},a.createElement(fa.Z,null)),a.createElement(A.Z,{className:ae.title},"Filters (",R,")")),a.createElement(gi,{...t,ref:i,onSearchChanged:Oe})):a.createElement(gi,{...t,ref:i,onSearchChanged:Oe})}function fi(t){const{data:i,columns:d,emptyContent:v,options:R,title:k,subtitle:ae,localization:Oe,filters:Ke,initialState:Ge,onStateChange:Rt,components:Mt,isLoading:an,...Yt}=t,fn=xs(),Un=(0,H.Z)(),Qn={...hi,...Ge},[ya,Na]=(0,a.useState)(Qn.filtersOpen),or=(0,a.useCallback)(()=>Na(_r=>!_r),[Na]),[Xn,wa]=(0,a.useState)(Qn.filters),[ka,ir]=(0,a.useState)(Qn.search);(0,a.useEffect)(()=>{if(Rt){const _r=Us({search:ka,filtersOpen:ya,filters:Xn},hi);Rt(_r)}},[ka,ya,Xn,Rt]);const Rr=(0,a.useCallback)(_r=>{var Mr;return(Mr=d.find(yo=>yo.title===_r))==null?void 0:Mr.field},[d]),ro=(0,a.useMemo)(()=>{if(typeof i=="function"||!Xn)return i;const _r=Object.values(Xn);return i&&_r.flat().length?i.filter(yo=>!!Object.entries(Xn).filter(([,_o])=>!!_o.length).every(([_o,Nr])=>{const kr=pi(yo,Rr(_o));return Array.isArray(kr)&&Array.isArray(Nr)?kr.some(Qo=>Nr.includes(Qo)):Array.isArray(kr)?kr.includes(Nr):Array.isArray(Nr)?Nr.includes(kr):kr===Nr})):i},[i,Xn,Rr]),yr=Object.values(Xn).flat().length,oo=!!(Ke!=null&&Ke.length),io=(0,a.useCallback)(_r=>a.createElement($s,{setSearch:ir,hasFilters:oo,selectedFiltersLength:yr,toggleFilters:or,..._r}),[or,oo,yr,ir]),Bo=typeof i!="function"&&i.length===0,Oa=d.length,so=(0,a.useMemo)(()=>Zs({hasNoRows:Bo,emptyContent:v,columnCount:Oa,loading:an}),[Bo,v,Oa,an]);return a.createElement(xe.Z,{className:fn.root},ya&&i&&typeof i!="function"&&(Ke==null?void 0:Ke.length)&&a.createElement(Is,{filters:Ws(Ke,i,d),selectedFilters:Xn,onChangeFilters:wa}),a.createElement(Wn.ZP,{components:{Header:Ms,Body:so,Toolbar:io,...Mt},options:{headerStyle:{textTransform:"uppercase"},...R},columns:Bs(d,Un),icons:mi,title:a.createElement(a.Fragment,null,a.createElement(A.Z,{variant:"h5",component:"h2"},k),ae&&a.createElement(A.Z,{color:"textSecondary",variant:"body1"},ae)),data:ro,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"},...Oe},...Yt}))}fi.icons=Object.freeze(mi);function Zs({columnCount:t,emptyContent:i,hasNoRows:d,loading:v}){return R=>v?a.createElement(ws,{colSpan:t}):i&&d?a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{colSpan:t},i))):a.createElement(Wn.os,{...R})}function Ws(t,i,d){const v=k=>{const ae=new Set,Oe=Ke=>{Ke!=null&&ae.add(Ke)};return i&&i.forEach(Ke=>{var Ge;const Rt=pi(Ke,(Ge=d.find(Mt=>Mt.title===k))==null?void 0:Ge.field);Array.isArray(Rt)?Rt.forEach(Oe):Oe(Rt)}),ae},R=k=>({placeholder:"All results",label:k.column,multiple:k.type==="multiple-select",items:[...v(k.column)].sort().map(ae=>({label:ae,value:ae}))});return t.map(k=>({type:k.type,element:R(k)}))}function Ns(t,i){const d=t[t.length-1];if(d)return d>=.9?i.palette.status.ok:d>=.5?i.palette.status.warning:i.palette.status.error}function Oc(t){var i;const d=useTheme();return t.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...t},t.title&&React.createElement("title",null,t.title),React.createElement(SparklinesLine,{color:(i=t.color)!=null?i:Ns(t.data,d)})):null}const ks=t=>(0,Q.Z)(i=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:i.spacing(2),textAlign:t.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:i.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),Fs=({title:t="Unknown page",className:i})=>a.createElement(A.Z,{variant:"h4",component:"h2",className:i,"data-testid":"header-title"},t);function Ei(t){const{description:i,title:d,titleComponent:v=void 0,children:R,textAlign:k="left"}=t,ae=ks({textAlign:k})(),Oe=v||a.createElement(Fs,{title:d,className:ae.title});return a.createElement(a.Fragment,null,a.createElement(dn.q,{title:d}),a.createElement(xe.Z,{className:ae.container},a.createElement(xe.Z,{className:ae.leftItemsBox},Oe,i&&a.createElement(A.Z,{className:ae.description,variant:"body2"},i)),a.createElement(xe.Z,{className:ae.rightItemsBox},R)))}const Ks=(0,Q.Z)(t=>({micDrop:{maxWidth:"60%",bottom:t.spacing(2),right:t.spacing(2),[t.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:t.spacing(10,"auto",4)}}}),{name:"BackstageErrorPageMicDrop"}),zs=()=>{const t=Ks();return a.createElement("img",{src:$,className:t.micDrop,alt:"Girl dropping mic from her hands"})},js=(0,Q.Z)(t=>({container:{padding:t.spacing(8),[t.breakpoints.down("xs")]:{padding:t.spacing(2)}},title:{paddingBottom:t.spacing(5),[t.breakpoints.down("xs")]:{paddingBottom:t.spacing(4),fontSize:t.typography.h3.fontSize}},subtitle:{color:t.palette.textSubtle}}),{name:"BackstageErrorPage"});function Gs(t){const{status:i,statusMessage:d,additionalInfo:v,supportUrl:R}=t,k=js(),ae=(0,ne.s0)(),Oe=li();return a.createElement(w.Z,{container:!0,spacing:0,className:k.container},a.createElement(w.Z,{item:!0,xs:12,sm:8,md:4},a.createElement(A.Z,{"data-testid":"error",variant:"body1",className:k.subtitle},"ERROR ",i,": ",d),a.createElement(A.Z,{variant:"body1",className:k.subtitle},v),a.createElement(A.Z,{variant:"h2",className:k.title},"Looks like someone dropped the mic!"),a.createElement(A.Z,{variant:"h6"},a.createElement(Hn,{to:"#","data-testid":"go-back-link",onClick:()=>ae(-1)},"Go back"),"... or please"," ",a.createElement(Hn,{to:R||Oe.url},"contact support")," if you think this is a bug.")),a.createElement(zs,null))}const Vs=(0,l.Z)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(A.Z),ko=(0,l.Z)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(xe.Z);function vi(t){const{children:i,...d}=t,[v,R]=a.useState(null),k=a.Children.toArray(i),[ae,Oe,...Ke]=k,Ge=Ke.length?Ke.pop():k[k.length-1],Rt=k.length>3,Mt=fn=>{R(fn.currentTarget)},an=()=>{R(null)},Yt=Boolean(v);return a.createElement(a.Fragment,null,a.createElement(T.Z,{"aria-label":"breadcrumb",...d},k.length>1&&a.createElement(ko,{clone:!0},ae),k.length>2&&a.createElement(ko,{clone:!0},Oe),Rt&&a.createElement(Vs,{onClick:Mt},"..."),a.createElement(xe.Z,{style:{fontStyle:"italic"}},Ge)),a.createElement(qe.ZP,{open:Yt,anchorEl:v,onClose:an,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},a.createElement(xt.Z,null,Ke.map((fn,Un)=>a.createElement(ut.Z,{key:Un,button:!0},a.createElement(ko,{clone:!0},fn))))))}const To=72,yi=24,_i=18,wr={drawerWidthClosed:To,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:To,iconSize:To-yi*2,iconPadding:yi,selectedIndicatorWidth:3,userBadgePadding:_i,userBadgeDiameter:To-_i*2,mobileSidebarHeight:56},Hs=t=>({...wr,...t,iconContainerWidth:wr.drawerWidthClosed,iconSize:wr.drawerWidthClosed-wr.iconPadding*2,userBadgeDiameter:wr.drawerWidthClosed-wr.userBadgePadding*2}),bi={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:wr.defaultOpenDelayMs+200},Js=t=>({...bi,...t}),Ys="@backstage/core/sidebar-intro-dismissed",ur=(0,a.createContext)({sidebarConfig:wr,submenuConfig:bi}),Fo=(0,a.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),Ci={isOpen:!1,setOpen:()=>{}},Pi=(0,a.createContext)(Ci),Ai=(0,Re.CT)("sidebar-open-state-context");function Oi(t){const{children:i,value:d}=t;return a.createElement(Pi.Provider,{value:d},a.createElement(Ai.Provider,{value:(0,Re.EI)({1:d})},i))}const vo=()=>{const t=(0,a.useContext)(Ai),i=(0,a.useContext)(Pi);if(t===void 0)return i||Ci;const d=t.atVersion(1);if(d===void 0)throw new Error("No context found for version 1.");return d},Ri=(0,a.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),Si={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},Ti=(0,a.createContext)(Si),Di=(0,Re.CT)("sidebar-pin-state-context");function Qs(t){const{children:i,value:d}=t;return a.createElement(Ti.Provider,{value:d},a.createElement(Di.Provider,{value:(0,Re.EI)({1:d})},i))}const Do=()=>{const t=(0,a.useContext)(Di),i=(0,a.useContext)(Ti);if(t===void 0)return i||Si;const d=t.atVersion(1);if(d===void 0)throw new Error("No context found for version 1.");return d},Xs=(0,Q.Z)(t=>({root:{flexGrow:0,margin:t.spacing(0,2),color:t.palette.navigation.color},selected:i=>({color:`${t.palette.navigation.selectedColor}!important`,borderTop:`solid ${i.sidebarConfig.selectedIndicatorWidth}px ${t.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),el=t=>{const{to:i,label:d,icon:v,value:R}=t,{sidebarConfig:k}=(0,a.useContext)(ur),ae=Xs({sidebarConfig:k}),Oe=(0,ne.TH)(),{selectedMenuItemIndex:Ke,setSelectedMenuItemIndex:Ge}=(0,a.useContext)(Ri),Rt=(an,Yt)=>{Ge(Yt===Ke?-1:Yt)},Mt=R===Ke&&Ke>=0||R!==Ke&&!(Ke>=0)&&i===Oe.pathname;return a.createElement(pe.Z,{"aria-label":d,label:d,icon:v,component:Hn,to:i||Oe.pathname,onChange:Rt,value:R,selected:Mt,classes:ae})},Ko=t=>{const{children:i,to:d,label:v,icon:R,value:k}=t,{isMobile:ae}=Do();return ae?a.createElement(el,{to:d,label:v,icon:R,value:k}):a.createElement(a.Fragment,null,i)},Ii=(0,Q.Z)(t=>({root:{position:"fixed",backgroundColor:t.palette.navigation.background,color:t.palette.navigation.color,bottom:0,left:0,right:0,zIndex:t.zIndex.snackbar,borderTop:"1px solid #383838","@media print":{display:"none"}},overlay:i=>({background:t.palette.navigation.background,width:"100%",bottom:`${i.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${i.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:t.palette.navigation.color,alignItems:"center",justifyContent:"space-between",padding:t.spacing(2,3)},overlayHeaderClose:{color:t.palette.navigation.color},marginMobileSidebar:i=>({marginBottom:`${i.sidebarConfig.mobileSidebarHeight}px`})})),tl=t=>(0,ye.orderBy)(t,({props:{priority:i}})=>Number.isInteger(i)?i:-1,"desc"),nl=a.createElement(Ko).type,al=({children:t,label:i="Menu",open:d,onClose:v})=>{const{sidebarConfig:R}=(0,a.useContext)(ur),k=Ii({sidebarConfig:R});return a.createElement(V.ZP,{anchor:"bottom",open:d,onClose:v,ModalProps:{BackdropProps:{classes:{root:k.marginMobileSidebar}}},classes:{root:k.marginMobileSidebar,paperAnchorBottom:k.overlay}},a.createElement(xe.Z,{className:k.overlayHeader},a.createElement(A.Z,{variant:"h3"},i),a.createElement(u.Z,{onClick:v,classes:{root:k.overlayHeaderClose}},a.createElement(o.Z,null))),a.createElement(xe.Z,{component:"nav"},t))},rl=t=>{const{sidebarConfig:i}=(0,a.useContext)(ur),{children:d}=t,v=Ii({sidebarConfig:i}),R=(0,ne.TH)(),[k,ae]=(0,a.useState)(-1);(0,a.useEffect)(()=>{ae(-1)},[R.pathname]);let Oe=(0,m.vJ)(d,Ge=>Ge.getElements().filter(Rt=>Rt.type===nl));if(d)Oe.length?Oe=tl(Oe):Oe.push(a.createElement(Ko,{key:"default_menu",icon:a.createElement(Ce.Z,null)},d));else return null;const Ke=k>=0&&!Oe[k].props.to;return a.createElement(Oi,{value:{isOpen:!0,setOpen:()=>{}}},a.createElement(Ri.Provider,{value:{selectedMenuItemIndex:k,setSelectedMenuItemIndex:ae}},a.createElement(al,{label:Oe[k]&&Oe[k].props.label,open:Ke,onClose:()=>ae(-1)},Oe[k]&&Oe[k].props.children),a.createElement(F.Z,{className:v.root,"data-testid":"mobile-sidebar-root",component:"nav"},Oe)))},wi={getSidebarPinState(){let t;try{t=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!t},setSidebarPinState(t){return window.localStorage.setItem("sidebarPinState",JSON.stringify(t))}},ol=(0,Q.Z)(t=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[t.breakpoints.up("sm")]:{paddingLeft:i=>i.isPinned?i.sidebarConfig.drawerWidthOpen:i.sidebarConfig.drawerWidthClosed},[t.breakpoints.down("xs")]:{paddingBottom:i=>i.sidebarConfig.mobileSidebarHeight},"@media print":{padding:"0px !important"}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),Mi=(0,a.createContext)({content:{contentRef:void 0}});function il(t){const[i,d]=(0,a.useState)(()=>wi.getSidebarPinState()),{sidebarConfig:v}=(0,a.useContext)(ur),R=(0,a.useRef)(null),k=(0,a.useMemo)(()=>({content:{contentRef:R}}),[R]);(0,a.useEffect)(()=>{wi.setSidebarPinState(i)},[i]);const ae=(0,je.Z)(Ge=>Ge.breakpoints.down("xs"),{noSsr:!0}),Oe=()=>d(!i),Ke=ol({isPinned:i,sidebarConfig:v});return a.createElement(Qs,{value:{isPinned:i,toggleSidebarPinState:Oe,isMobile:ae}},a.createElement(Mi.Provider,{value:k},a.createElement(xe.Z,{className:Ke.root},t.children)))}function zo(){const{content:t}=(0,a.useContext)(Mi);return{focusContent:(0,a.useCallback)(()=>{var d,v;(v=(d=t==null?void 0:t.contentRef)==null?void 0:d.current)==null||v.focus()},[t]),contentRef:t==null?void 0:t.contentRef}}const Li=(0,Q.Z)(t=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:t.zIndex.appBar,background:t.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"@media print":{display:"none"}},drawerWidth:i=>({width:i.sidebarConfig.drawerWidthClosed}),drawerOpen:i=>({width:i.sidebarConfig.drawerWidthOpen,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),sl=t=>{const{sidebarConfig:i}=(0,a.useContext)(ur),{openDelayMs:d=i.defaultOpenDelayMs,closeDelayMs:v=i.defaultCloseDelayMs,disableExpandOnHover:R,children:k}=t,ae=Li({sidebarConfig:i}),Oe=(0,je.Z)(ya=>ya.breakpoints.down("md"),{noSsr:!0}),[Ke,Ge]=(0,a.useState)(0),Rt=(0,a.useRef)(),{isPinned:Mt,toggleSidebarPinState:an}=Do(),Yt=()=>{Mt||R||(Rt.current&&(clearTimeout(Rt.current),Rt.current=void 0),Ke!==2&&!Oe&&(Rt.current=window.setTimeout(()=>{Rt.current=void 0,Ge(2)},d),Ge(1)))},fn=()=>{Mt||R||(Rt.current&&(clearTimeout(Rt.current),Rt.current=void 0),Ke===1?Ge(0):Ke===2&&(Rt.current=window.setTimeout(()=>{Rt.current=void 0,Ge(0)},v)))},Un=Ke===2&&!Oe||Mt,Qn=ya=>{ya?(Ge(2),an()):(Ge(0),an())};return a.createElement("nav",{style:{},"aria-label":"sidebar nav"},a.createElement(cl,null),a.createElement(Oi,{value:{isOpen:Un,setOpen:Qn}},a.createElement(xe.Z,{className:ae.root,"data-testid":"sidebar-root",onMouseEnter:R?()=>{}:Yt,onFocus:R?()=>{}:Yt,onMouseLeave:R?()=>{}:fn,onBlur:R?()=>{}:fn},a.createElement(xe.Z,{className:ge()(ae.drawer,ae.drawerWidth,{[ae.drawerOpen]:Un})},k))))},ll=t=>{var i,d;const v=Hs((i=t.sidebarOptions)!=null?i:{}),R=Js((d=t.submenuOptions)!=null?d:{}),{children:k,disableExpandOnHover:ae,openDelayMs:Oe,closeDelayMs:Ke}=t,{isMobile:Ge}=Do();return Ge?a.createElement(rl,null,k):a.createElement(ur.Provider,{value:{sidebarConfig:v,submenuConfig:R}},a.createElement(sl,{openDelayMs:Oe,closeDelayMs:Ke,disableExpandOnHover:ae},k))};function cl(){const{sidebarConfig:t}=(0,a.useContext)(ur),{focusContent:i,contentRef:d}=zo(),v=Li({sidebarConfig:t});return d!=null&&d.current?a.createElement(q.Z,{onClick:i,variant:"contained",className:ge()(v.visuallyHidden)},"Skip to content"):null}function Io(t,i,d=!1){const v=new URLSearchParams(i.search).toString(),R=tn().parse(v),k=new URLSearchParams(t.search).toString(),ae=tn().parse(k),Oe=d?ye.isEqual:ye.isMatch;return(0,ye.isEqual)(i.pathname,t.pathname)&&Oe(ae,R)}const ul=(0,Q.Z)(t=>{var i,d;return{item:{height:48,width:"100%","&:hover":{background:((i=t.palette.navigation.navItem)==null?void 0:i.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:t.palette.navigation.color,padding:t.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:t.palette.common.white},label:{margin:t.spacing(1.75),marginLeft:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((d=t.palette.navigation.navItem)==null?void 0:d.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor}},textContent:{color:t.palette.navigation.color,paddingLeft:t.spacing(4),paddingRight:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),dl=t=>{const{title:i,subtitle:d,to:v,icon:R,dropdownItems:k,exact:ae}=t,Oe=ul(),{setIsHoveredOn:Ke}=(0,a.useContext)(Fo),Ge=()=>{Ke(!1)},Rt=(0,ne.WU)(v!=null?v:""),Mt=(0,ne.TH)();let an=Io(Mt,Rt,ae);const[Yt,fn]=(0,a.useState)(!1),Un=()=>{fn(!Yt)};return k!==void 0?(k.some(Qn=>{const ya=(0,X.i3)(Qn.to);return an=Io(Mt,ya,ae),an}),a.createElement(xe.Z,{className:Oe.itemContainer},a.createElement(me.ZP,{title:i,enterDelay:500,enterNextDelay:500},a.createElement(q.Z,{role:"button",onClick:Un,onTouchStart:Qn=>Qn.stopPropagation(),className:ge()(Oe.item,an?Oe.selected:void 0)},R&&a.createElement(R,{fontSize:"small"}),a.createElement(A.Z,{variant:"subtitle1",component:"span",className:Oe.label},i,a.createElement("br",null),d&&a.createElement(A.Z,{variant:"caption",component:"span",className:Oe.subtitle},d)),Yt?a.createElement(tt.Z,{className:Oe.dropdownArrow}):a.createElement(Ne.Z,{className:Oe.dropdownArrow}))),k&&Yt&&a.createElement(xe.Z,{className:Oe.dropdown},k.map((Qn,ya)=>a.createElement(me.ZP,{key:ya,title:Qn.title,enterDelay:500,enterNextDelay:500},a.createElement(Hn,{to:Qn.to,underline:"none",className:Oe.dropdownItem,onClick:Ge,onTouchStart:Na=>Na.stopPropagation()},a.createElement(A.Z,{component:"span",className:Oe.textContent},Qn.title))))))):a.createElement(xe.Z,{className:Oe.itemContainer},a.createElement(me.ZP,{title:i,enterDelay:500,enterNextDelay:500},a.createElement(Hn,{to:v,underline:"none",className:ge()(Oe.item,an?Oe.selected:void 0),onClick:Ge,onTouchStart:Qn=>Qn.stopPropagation()},R&&a.createElement(R,{fontSize:"small"}),a.createElement(A.Z,{variant:"subtitle1",component:"span",className:Oe.label},i,a.createElement("br",null),d&&a.createElement(A.Z,{variant:"caption",component:"span",className:Oe.subtitle},d)))))},ml=(0,Q.Z)(t=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:t.spacing(7)+1},drawer:i=>{var d,v;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[t.breakpoints.up("sm")]:{marginLeft:i.left,transition:t.transitions.create("margin-left",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(v=(d=t.palette.navigation.submenu)==null?void 0:d.background)!=null?v:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:i.submenuConfig.drawerWidthClosed,transitionDelay:`${i.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:i=>({width:i.submenuConfig.drawerWidthOpen,[t.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:t.spacing(3),left:0,top:0}}),title:{fontSize:t.typography.h5.fontSize,fontWeight:t.typography.fontWeightMedium,color:t.palette.common.white,padding:t.spacing(2.5),[t.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),xi=t=>{const{isOpen:i}=vo(),{sidebarConfig:d,submenuConfig:v}=(0,a.useContext)(ur),R=i?d.drawerWidthOpen:d.drawerWidthClosed,k=ml({left:R,submenuConfig:v}),{isHoveredOn:ae}=(0,a.useContext)(Fo),[Oe,Ke]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{Ke(ae)},[ae]),a.createElement(xe.Z,{className:ge()(k.drawer,{[k.drawerOpen]:Oe})},a.createElement(A.Z,{variant:"h5",component:"span",className:k.title},t.title),t.children)},pl=(0,Q.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),gl=()=>{const t=pl();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},hl=(0,Q.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),fl=()=>{const t=hl();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},El=t=>(0,Q.Z)(i=>{var d,v,R,k;return{root:{color:i.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:t.drawerWidthClosed,justifyContent:"center"},open:{[i.breakpoints.up("sm")]:{width:t.drawerWidthOpen}},highlightable:{"&:hover":{background:(v=(d=i.palette.navigation.navItem)==null?void 0:d.hoverBackground)!=null?v:"#404040"}},highlighted:{background:(k=(R=i.palette.navigation.navItem)==null?void 0:R.hoverBackground)!=null?k:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:t.iconContainerWidth,marginRight:-i.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:i.typography.fontWeightBold,fontSize:i.typography.fontSize},searchFieldHTMLInput:{padding:i.spacing(2,0,2)},searchContainer:{width:t.drawerWidthOpen-t.iconContainerWidth},secondaryAction:{width:i.spacing(6),textAlign:"center",marginRight:i.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:i.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${t.selectedIndicatorWidth}px ${i.palette.navigation.indicator}`,color:i.palette.navigation.selectedColor},"&$closed":{width:t.drawerWidthClosed},"& $closedItemIcon":{paddingRight:t.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-t.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function wo(t){return(0,a.useMemo)(()=>El(t),[t])()}const vl=(t,i)=>(0,m.vJ)(t.props.children,d=>{let v=!1;return d.getElements().forEach(({props:{to:R,dropdownItems:k}})=>{if(!v){if(k!=null&&k.length){k.forEach(({to:ae})=>v=v||Io(i,(0,X.i3)(ae)));return}R&&(v=Io(i,(0,X.i3)(R)))}}),v},[i.pathname]);function jo(t){return t.to===void 0}const yl=a.createElement(xi).type,_l=a.forwardRef(function({to:i,end:d,style:v,className:R,activeStyle:k,caseSensitive:ae,activeClassName:Oe="active","aria-current":Ke="page",...Ge},Rt){let{pathname:Mt}=(0,ne.TH)(),{pathname:an}=(0,ne.WU)(i);ae||(Mt=Mt.toLocaleLowerCase("en-US"),an=an.toLocaleLowerCase("en-US"));let Yt=Mt===an;!Yt&&!d&&(Yt=Mt.startsWith(`${an}/`));const fn=Yt?Ke:void 0;return a.createElement(oe.rU,{...Ge,to:i,ref:Rt,"aria-current":fn,style:{...v,...Yt?k:void 0},className:ge()([typeof R!="function"?R:void 0,Yt?Oe:void 0])})}),Bi=(0,a.forwardRef)((t,i)=>{const{icon:d,text:v,hasNotifications:R=!1,hasSubmenu:k=!1,disableHighlight:ae=!1,onClick:Oe,noTrack:Ke,children:Ge,className:Rt,...Mt}=t,{sidebarConfig:an}=(0,a.useContext)(ur),Yt=wo(an),{isOpen:fn}=vo(),Un=!fn&&k?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},Qn=a.createElement(xe.Z,{style:Un},a.createElement(d,{fontSize:"small"}),!fn&&k?a.createElement(en.Z,{fontSize:"small"}):a.createElement(a.Fragment,null)),ya=a.createElement(_t.Z,{color:"secondary",variant:"dot",overlap:"circular",invisible:!R,className:ge()({[Yt.closedItemIcon]:!fn})},Qn),Na=a.createElement(a.Fragment,null,a.createElement(xe.Z,{"data-testid":"login-button",className:Yt.iconContainer},ya),v&&a.createElement(A.Z,{variant:"subtitle2",component:"span",className:Yt.label},v),a.createElement("div",{className:Yt.secondaryAction},Ge)),or=fn?Na:ya,Xn={onClick:Oe,className:ge()(Rt,Yt.root,fn?Yt.open:Yt.closed,jo(t)&&Yt.buttonItem,{[Yt.highlightable]:!ae})},wa=(0,m.z$)(),{pathname:ka}=(0,ne.WU)(!jo(t)&&t.to?t.to:""),ir=(0,a.useCallback)(Rr=>{if(!Ke){const ro="click",yr=v!=null?v:"Sidebar Item",oo=ka?{attributes:{to:ka}}:void 0;wa.captureEvent(ro,yr,oo)}Oe==null||Oe(Rr)},[wa,v,ka,Ke,Oe]);return jo(t)?a.createElement(q.Z,{role:"button","aria-label":v,...Xn,ref:i,onClick:ir},or):a.createElement(_l,{...Xn,activeClassName:Yt.selected,to:t.to?t.to:"",ref:i,"aria-label":v||t.to,...Mt,onClick:ir},or)}),bl=({children:t,...i})=>{const{sidebarConfig:d}=(0,a.useContext)(ur),v=wo(d),[R,k]=(0,a.useState)(!1),ae=(0,ne.TH)(),Oe=vl(t,ae),Ke=(0,je.Z)(an=>an.breakpoints.down("sm")),Ge=()=>{k(!0)},Rt=()=>{k(!1)},Mt=()=>Ke?R?a.createElement(tt.Z,{fontSize:"small",className:v.submenuArrow}):a.createElement(Ne.Z,{fontSize:"small",className:v.submenuArrow}):!R&&a.createElement(en.Z,{fontSize:"small",className:v.submenuArrow});return a.createElement(Fo.Provider,{value:{isHoveredOn:R,setIsHoveredOn:k}},a.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:Rt,onTouchStart:R?Rt:Ge,onMouseEnter:Ge,className:ge()(R&&v.highlighted)},a.createElement(Bi,{hasSubmenu:!0,className:Oe?v.selected:"",...i},Mt()),R&&t))},Ui=(0,a.forwardRef)((t,i)=>{const[d]=(0,m.vJ)(t.children,v=>v.getElements().filter(R=>R.type===yl));return d?a.createElement(bl,{...t},d):a.createElement(Bi,{...t,ref:i})});function Rc(t){const{sidebarConfig:i}=useContext(ur),[d,v]=useState(""),R=wo(i),k=t.icon?t.icon:SearchIcon,ae=()=>{t.onSearch(d),v("")},Oe=Mt=>{Mt.key==="Enter"&&(Mt.preventDefault(),ae())},Ke=Mt=>{v(Mt.target.value)},Ge=Mt=>{Mt.preventDefault(),Mt.stopPropagation()},Rt=Mt=>{ae(),Mt.preventDefault()};return React.createElement(Box,{className:R.searchRoot},React.createElement(Ui,{icon:k,to:t.to,onClick:Rt,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:d,onClick:Ge,onChange:Ke,onKeyDown:Oe,className:R.searchContainer,InputProps:{disableUnderline:!0,className:R.searchField},inputProps:{className:R.searchFieldHTMLInput}})))}const Cl=(0,h.Z)("div")({flex:1},{name:"BackstageSidebarSpace"}),Sc=(0,h.Z)("div")({height:8},{name:"BackstageSidebarSpacer"}),$i=(0,h.Z)("hr")(({theme:t})=>({height:1,width:"100%",background:"#383838",border:"none",margin:t.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),Pl=t=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:t.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:t.palette.text.secondary,borderRadius:"5px"}}),Al=(0,h.Z)("div")(({theme:t})=>{const i=Pl(t);return{flex:"0 1 auto",overflowX:"hidden",width:"calc(100% - 5px)",minHeight:"48px",overflowY:"hidden","@media (hover: none)":i,"&:hover":i}}),Tc=()=>{const{sidebarConfig:t}=useContext(ur),i=wo(t),{isOpen:d,setOpen:v}=vo();if(useMediaQuery(ae=>ae.breakpoints.down("md"),{noSsr:!0}))return null;const k=()=>{v(!d)};return React.createElement(Button$1,{role:"button",onClick:k,className:i.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:i.arrows},d?React.createElement(gl,null):React.createElement(fl,null)))},Ol=(0,Q.Z)(t=>({introCard:i=>({color:"#b5b5b5",fontSize:12,width:i.sidebarConfig.drawerWidthOpen,marginTop:t.spacing(2.25),marginBottom:t.spacing(1.5),paddingLeft:i.sidebarConfig.iconPadding,paddingRight:i.sidebarConfig.iconPadding}),introDismiss:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:t.spacing(1.5)},introDismissLink:{color:"#dddddd",display:"flex",alignItems:"center",marginBottom:t.spacing(.5),"&:hover":{color:t.palette.linkHover,transition:t.transitions.create("color",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest})}},introDismissText:{fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:1},introDismissIcon:{width:18,height:18,marginRight:t.spacing(1.5)}}),{name:"BackstageSidebarIntro"});function Rl(t){const{sidebarConfig:i}=useContext(ur),d=Ol({sidebarConfig:i}),{text:v,onClose:R}=t,k=()=>R();return React.createElement(Box,{className:d.introCard},React.createElement(Typography,{variant:"subtitle2"},v),React.createElement(Box,{className:d.introDismiss},React.createElement(IconButton,{onClick:k,className:d.introDismissLink},React.createElement(CloseIcon,{className:d.introDismissIcon}),React.createElement(Typography,{component:"span",className:d.introDismissText},"Dismiss"))))}const Zi=t=>{const{text:i,onDismiss:d}=t,[v,R]=useState(!1),k=()=>{R(!0)};return React.createElement(Collapse,{in:!v,onExited:d},React.createElement(Rl,{text:i,onClose:k}))},Sl=null,Tl="And your recently viewed plugins will pop up here!";function Dc(t){const{isOpen:i}=vo(),d={starredItemsDismissed:!1,recentlyViewedItemsDismissed:!1},{value:v,set:R}=useLocalStorageValue(Ys),{starredItemsDismissed:k,recentlyViewedItemsDismissed:ae}=v!=null?v:{},Oe=()=>{R(Ge=>({...d,...Ge,starredItemsDismissed:!0}))},Ke=()=>{R(Ge=>({...d,...Ge,recentlyViewedItemsDismissed:!0}))};return i?React.createElement(React.Fragment,null,!k&&React.createElement(React.Fragment,null,React.createElement(Zi,{text:Sl,onDismiss:Oe}),React.createElement($i,null)),!ae&&React.createElement(Zi,{text:Tl,onDismiss:Ke})):null}const Dl=(0,Q.Z)(t=>({header:{gridArea:"pageHeader",padding:t.spacing(3),width:"100%",boxShadow:t.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:t.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[t.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:t.page.fontColor,wordBreak:"break-word",fontSize:t.typography.h3.fontSize,marginBottom:0},subtitle:{color:t.page.fontColor,opacity:.8,display:"inline-block",marginTop:t.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:t.spacing(1),color:t.page.fontColor},breadcrumb:{color:t.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-t.spacing(.3),marginBottom:t.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-t.spacing(.3),marginBottom:t.spacing(.3)}}),{name:"BackstageHeader"}),Il=({type:t,typeLink:i,classes:d,pageTitle:v})=>t?i?a.createElement(vi,{className:d.breadcrumb},a.createElement(Hn,{to:i},t),a.createElement(A.Z,null,v)):a.createElement(A.Z,{className:d.type},t):null,wl=({pageTitle:t,classes:i,tooltip:d})=>{const{contentRef:v}=zo(),R=a.createElement(A.Z,{ref:v,tabIndex:-1,className:i.title,variant:"h1"},t);return d?a.createElement(me.ZP,{title:d,placement:"top-start"},R):R},Ml=({classes:t,subtitle:i})=>i?typeof i!="string"?a.createElement(a.Fragment,null,i):a.createElement(A.Z,{className:t.subtitle,variant:"subtitle2",component:"span"},i):null;function Mo(t){const{children:i,pageTitleOverride:d,style:v,subtitle:R,title:k,tooltip:ae,type:Oe,typeLink:Ke}=t,Ge=Dl(),Mt=(0,r.u)(r.p).getOptionalString("app.title")||"Backstage",an=d||k,Yt=k||d,fn=`${an} | %s | ${Mt}`,Un=`${an} | ${Mt}`;return a.createElement(a.Fragment,null,a.createElement(dn.q,{titleTemplate:fn,defaultTitle:Un}),a.createElement("header",{style:v,className:Ge.header},a.createElement(xe.Z,{className:Ge.leftItemsBox},a.createElement(Il,{classes:Ge,type:Oe,typeLink:Ke,pageTitle:Yt}),a.createElement(wl,{classes:Ge,pageTitle:Yt,tooltip:ae}),a.createElement(Ml,{classes:Ge,subtitle:R})),a.createElement(w.Z,{container:!0,className:Ge.rightItemsBox,spacing:4},i)))}const Ll=({label:t,secondaryLabel:i,icon:d,disabled:v=!1,onClick:R})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:v,button:!0,onClick:k=>{R&&R(k)}},d&&React.createElement(ListItemIcon,null,d),React.createElement(ListItemText,{primary:t,secondary:i})));function Ic(t){const{palette:{common:{white:i}}}=useTheme(),{actionItems:d}=t,[v,R]=React.useState(!1),k=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>R(!0),"data-testid":"header-action-menu",ref:k,style:{color:i,height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:v,anchorEl:k.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>R(!1)},React.createElement(List,null,d.map((ae,Oe)=>React.createElement(Ll,{key:`header-action-menu-${Oe}`,...ae})))))}const xl=(0,Q.Z)(t=>({root:{textAlign:"left"},label:{color:t.page.fontColor,fontWeight:t.typography.fontWeightBold,letterSpacing:0,fontSize:t.typography.fontSize,marginBottom:t.spacing(1)/2,lineHeight:1},value:{color:(0,S.Fq)(t.page.fontColor,.8),fontSize:t.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),Bl=({value:t,className:i,typographyRootComponent:d})=>a.createElement(A.Z,{component:d!=null?d:typeof t=="string"?"p":"span",className:i},t);function Ul(t){const{label:i,value:d,url:v,contentTypograpyRootComponent:R}=t,k=xl(),ae=a.createElement(Bl,{className:k.value,value:d||"<Unknown>",typographyRootComponent:R});return a.createElement(w.Z,{item:!0},a.createElement(A.Z,{component:"span",className:k.root},a.createElement(A.Z,{className:k.label},i),v?a.createElement(Hn,{to:v},ae):ae))}const $l=t=>(0,b.Z)({root:{color:t.palette.common.white,padding:t.spacing(2,2,3),backgroundImage:t.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),Zl=(0,Q.Z)($l,{name:"BackstageItemCardHeader"});function Wi(t){const{title:i,subtitle:d,children:v}=t,R=Zl(t);return a.createElement(xe.Z,{className:R.root},d&&a.createElement(A.Z,{variant:"subtitle2",component:"h3"},d),i&&a.createElement(A.Z,{variant:"h6",component:"h4"},i),v)}function wc(t){const{description:i,tags:d,title:v,type:R,subtitle:k,label:ae,onClick:Oe,href:Ke}=t;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(Wi,{title:v,subtitle:k||R})),React.createElement(CardContent,null,d!=null&&d.length?React.createElement(Box,null,d.map((Ge,Rt)=>React.createElement(Chip,{size:"small",label:Ge,key:Rt}))):null,i),React.createElement(CardActions,null,!Ke&&React.createElement(Ua,{to:"#",onClick:Oe,color:"primary"},ae),Ke&&React.createElement(Ua,{to:Ke,color:"primary"},ae)))}const Wl=t=>(0,b.Z)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:t.spacing(2)}}),Nl=(0,Q.Z)(Wl,{name:"BackstageItemCardGrid"});function kl(t){const{children:i,...d}=t,v=Nl(d);return a.createElement(xe.Z,{className:v.root,...d},i)}const Fl=(0,Q.Z)(t=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[t.breakpoints.down("xs")]:{height:"100%"},"@media print":{display:"block",height:"auto",overflowY:"inherit"}}}),{name:"BackstagePage"});function Lo(t){const{themeId:i,children:d}=t,v=Fl();return a.createElement(C.Z,{theme:R=>({...R,page:R.getPageTheme({themeId:i})})},a.createElement("main",{className:v.root},d))}function Kl(t){const{themeId:i,children:d,...v}=t;return a.createElement(Lo,{themeId:i},a.createElement(Mo,{...v}),d)}const zl=Xt.z.object({providerInfo:Xt.z.object({}).catchall(Xt.z.unknown()).optional(),profile:Xt.z.object({email:Xt.z.string().optional(),displayName:Xt.z.string().optional(),picture:Xt.z.string().optional()}),backstageIdentity:Xt.z.object({token:Xt.z.string(),identity:Xt.z.object({type:Xt.z.literal("user"),userEntityRef:Xt.z.string(),ownershipEntityRefs:Xt.z.array(Xt.z.string())})})});var jl=Object.defineProperty,Gl=(t,i,d)=>i in t?jl(t,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):t[i]=d,Go=(t,i,d)=>(Gl(t,typeof i!="symbol"?i+"":i,d),d);const Ni={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function Vl(t){const i=new Date(Date.now()+Ni.defaultTokenExpiryMillis);if(!t)return i;const[d,v,R]=t.split("."),k=JSON.parse(window.atob(v));return typeof k.exp!="number"?i:new Date(k.exp*1e3-Ni.tokenExpiryMarginMillis)}class Hl{constructor(i){Go(this,"options"),Go(this,"abortController"),Go(this,"state"),this.options=i,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:i}=this.getSessionSync(),d=i.identity.userEntityRef,v=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(d);if(!v)throw new TypeError(`Invalid user entity reference "${d}"`);return v[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const i=this.state.type==="active"?this.state.session:void 0,d=this.fetchSession().then(v=>(this.state={type:"active",session:v,expiresAt:Vl(v.backstageIdentity.token)},v),v=>{throw this.state={type:"failed",error:v},v});return this.state={type:"fetching",promise:d,previous:i},d}async fetchSession(){const i=await this.options.discoveryApi.getBaseUrl("auth"),d=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,v=new Headers(d);v.set("X-Requested-With","XMLHttpRequest");const R=await fetch(`${i}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:v,credentials:"include"});if(!R.ok)throw await ResponseError.fromResponse(R);return zl.parse(await R.json())}}const Mc=t=>{const i=useApi(discoveryApiRef),[{status:d,error:v},{execute:R}]=useAsync(async()=>{const k=new Hl({provider:t.provider,discoveryApi:i,headers:t.headers});await k.start(),t.onSignInSuccess(k)});return useMountEffect(R),d==="loading"?React.createElement(Fn,null):v?React.createElement(gr,{title:"You do not appear to be signed in. Please try reloading the browser page.",error:v}):null};class Vo{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const i="user:default/guest";return{type:"user",userEntityRef:i,ownershipEntityRefs:[i]}}async getCredentials(){return{}}async signOut(){}}function Jl(t){const[i,d,v]=t.split(".");return JSON.parse(window.atob(d))}class Ho{constructor(i){this.result=i}getUserId(){return this.result.userId}static fromResult(i){return new Ho(i)}async getIdToken(){var i,d;return(d=(i=this.result).getIdToken)==null?void 0:d.call(i)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const i=await this.getIdToken();if(!i){const R=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:R,ownershipEntityRefs:[R]}}const{sub:d,ent:v}=Jl(i);return{type:"user",userEntityRef:d,ownershipEntityRefs:v!=null?v:[]}}async getCredentials(){var i,d;return{token:await((d=(i=this.result).getIdToken)==null?void 0:d.call(i))}}async signOut(){var i,d;return(d=(i=this.result).signOut)==null?void 0:d.call(i)}}var Yl=Object.defineProperty,Ql=(t,i,d)=>i in t?Yl(t,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):t[i]=d,Xl=(t,i,d)=>(Ql(t,typeof i!="symbol"?i+"":i,d),d);class no{constructor(i,d,v){this.identity=i,this.authApi=d,this.profile=v,Xl(this,"profilePromise")}static createGuest(){return new Vo}static fromLegacy(i){return Ho.fromResult(i)}static create(i){return new no(i.identity,i.authApi,i.profile)}getUserId(){const i=this.identity.userEntityRef,d=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(i);if(!d)throw new TypeError(`Invalid user entity reference "${i}"`);return d[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(i){throw this.profilePromise=void 0,i}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const Jo=(0,Q.Z)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),xo=({children:t})=>{const i=Jo();return a.createElement(w.Z,{component:"li",item:!0,classes:i},t)},ql={Component:({config:t,onSignInStarted:i,onSignInSuccess:d,onSignInFailure:v})=>{const{apiRef:R,title:k,message:ae}=t,Oe=(0,r.u)(R),Ke=(0,r.u)(r.r),Ge=async()=>{try{i();const Rt=await Oe.getBackstageIdentity({instantPopup:!0});if(!Rt)throw v(),new Error(`The ${k} provider is not configured to support sign-in`);const Mt=await Oe.getProfile();d(no.create({identity:Rt.identity,profile:Mt,authApi:Oe}))}catch(Rt){v(),Ke.post(new Ee.SP("Login failed",Rt))}};return a.createElement(xo,null,a.createElement(ma,{variant:"fullHeight",title:k,actions:a.createElement(q.Z,{color:"primary",variant:"outlined",onClick:Ge},"Sign In")},a.createElement(A.Z,{variant:"body1"},ae)))},loader:async(t,i)=>{const d=t.get(i),v=await d.getBackstageIdentity({optional:!0});if(!v)return;const R=await d.getProfile();return no.create({identity:v.identity,profile:R,authApi:d})}},ec={Component:({onSignInStarted:t,onSignInSuccess:i})=>a.createElement(xo,null,a.createElement(ma,{title:"Guest",variant:"fullHeight",actions:a.createElement(q.Z,{color:"primary",variant:"outlined",onClick:()=>{t(),i(new Vo)}},"Enter")},a.createElement(A.Z,{variant:"body1"},"Enter as a Guest User.",a.createElement("br",null),"You will not have a verified identity,",a.createElement("br",null),"meaning some features might be unavailable."))),loader:async()=>new Vo},tc=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,nc=(0,Q.Z)(t=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:t.spacing(2)}}),{name:"BackstageCustomProvider"}),ki=t=>{const{ref:i,...d}=t;return{inputRef:i,...d}},ac={Component:({onSignInStarted:t,onSignInSuccess:i})=>{const d=nc(),{register:v,handleSubmit:R,formState:k}=(0,mn.cI)({mode:"onChange"}),{errors:ae}=k,Oe=({userId:Ke,idToken:Ge})=>{t(),i(no.fromLegacy({userId:Ke,getIdToken:Ge!==void 0?async()=>Ge:void 0,profile:{email:`${Ke}@example.com`}}))};return a.createElement(xo,null,a.createElement(ma,{title:"Custom User",variant:"fullHeight"},a.createElement(A.Z,{variant:"body1"},"Enter your own User ID and credentials.",a.createElement("br",null),"This selection will not be stored."),a.createElement("form",{className:d.form,onSubmit:R(Oe)},a.createElement(ze.Z,null,a.createElement(Ht.Z,{...ki(v("userId",{required:!0})),label:"User ID",margin:"normal",error:Boolean(ae.userId)}),ae.userId&&a.createElement(_n.Z,{error:!0},ae.userId.message)),a.createElement(ze.Z,null,a.createElement(Ht.Z,{...ki(v("idToken",{required:!1,validate:Ke=>!Ke||tc.test(Ke)||"Token is not a valid OpenID Connect JWT Token"})),label:"ID Token (optional)",margin:"normal",autoComplete:"off",error:Boolean(ae.idToken)}),ae.idToken&&a.createElement(_n.Z,{error:!0},ae.idToken.message)),a.createElement(q.Z,{type:"submit",color:"primary",variant:"outlined",className:d.button,disabled:!(k!=null&&k.isDirty)||!En()(ae)},"Continue"))))},loader:async()=>{}};class Yo{constructor(i){this.config=i}static from(i){return new Yo(i)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const ao="@backstage/core:SignInPage:provider",Fi={guest:ec,custom:ac,common:ql};function Ki(t,i){if(t in i)throw new Error(`"${t}" ID is duplicated. IDs of identity providers have to be unique.`)}function rc(t){return t.reduce((d,v)=>{if(typeof v=="string")return Ki(v,d),d[v]={components:Fi[v],id:v},d;const{id:R}=v;return Ki(R,d),d[R]={components:Fi.common,id:R,config:v},d},{})}const oc=(t,i)=>{const d=(0,r.u)(r.r),v=(0,r.b)(),[R,k]=(0,a.useState)(!0),ae=(0,a.useCallback)(Ke=>{i(Yo.from({identityApi:Ke,signOut:async()=>{var Ge;localStorage.removeItem(ao),await((Ge=Ke.signOut)==null?void 0:Ge.call(Ke))}}))},[i]);(0,a.useLayoutEffect)(()=>{var Ke;if(!R)return;const Ge=localStorage.getItem(ao);if(Ge===null){k(!1);return}const Rt=t[Ge];if(!Rt){k(!1);return}let Mt=!1;return Rt.components.loader(v,(Ke=Rt.config)==null?void 0:Ke.apiRef).then(an=>{if(Mt){localStorage.removeItem(ao);return}an?ae(an):k(!1)}).catch(an=>{localStorage.removeItem(ao),!Mt&&(d.post(an),k(!1))}),()=>{Mt=!0}},[R,d,i,v,t,ae]);const Oe=(0,a.useMemo)(()=>Object.keys(t).map(Ke=>{const Ge=t[Ke],{Component:Rt}=Ge.components,Mt=fn=>{ae(fn)},an=()=>{var fn;localStorage.setItem(ao,((fn=Ge==null?void 0:Ge.config)==null?void 0:fn.id)||Ge.id)},Yt=()=>{localStorage.removeItem(ao)};return a.createElement(Rt,{key:Ge.id,config:Ge.config,onSignInStarted:an,onSignInSuccess:Mt,onSignInFailure:Yt})}),[t,ae]);return[R,Oe]},ic=({onSignInSuccess:t,providers:i=[],title:d,align:v="left"})=>{const R=(0,r.u)(r.p),k=Jo(),ae=rc(i),[Oe,Ke]=oc(ae,t);return Oe?a.createElement(Fn,null):a.createElement(Lo,{themeId:"home"},a.createElement(Mo,{title:R.getString("app.title")}),a.createElement(So,null,d&&a.createElement(Ei,{title:d,textAlign:v}),a.createElement(w.Z,{container:!0,justifyContent:v==="center"?v:"flex-start",spacing:2,component:"ul",classes:k},Ke)))},sc=({provider:t,auto:i,onSignInSuccess:d})=>{const v=Jo(),R=(0,r.u)(t.apiRef),k=(0,r.u)(r.p),[ae,Oe]=(0,a.useState)(),[Ke,Ge]=(0,a.useState)(!1),Rt=async({checkExisting:Mt,showPopup:an})=>{try{let Yt;if(Mt&&(Yt=await R.getBackstageIdentity({optional:!0})),!Yt&&(an||i)&&(Ge(!0),Yt=await R.getBackstageIdentity({instantPopup:!0}),!Yt))throw new Error(`The ${t.title} provider is not configured to support sign-in`);if(!Yt){Ge(!0);return}const fn=await R.getProfile();d(no.create({identity:Yt.identity,authApi:R,profile:fn}))}catch(Yt){Oe(Yt),Ge(!0)}};return(0,Nt.n)(()=>Rt({checkExisting:!0})),Ke?a.createElement(Lo,{themeId:"home"},a.createElement(Mo,{title:k.getString("app.title")}),a.createElement(So,null,a.createElement(w.Z,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:v},a.createElement(xo,null,a.createElement(ma,{variant:"fullHeight",title:t.title,actions:a.createElement(q.Z,{color:"primary",variant:"outlined",onClick:()=>{Rt({showPopup:!0})}},"Sign In")},a.createElement(A.Z,{variant:"body1"},t.message),ae&&ae.name!=="PopupRejectedError"&&a.createElement(A.Z,{variant:"body1",color:"error"},ae.message)))))):a.createElement(Fn,null)};function lc(t){return"provider"in t?a.createElement(sc,{...t}):a.createElement(ic,{...t})}const cc=(0,Q.Z)(t=>({root:{padding:t.spacing(0,2,0,2.5),minHeight:t.spacing(3)},indicator:{backgroundColor:t.palette.info.main,height:t.spacing(.3)}}),{name:"BackstageTabbedCard"}),uc=(0,l.Z)(t=>({root:{padding:t.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:t.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(Ie.Z);function dc(t){const{slackChannel:i,errorBoundaryProps:d,children:v,title:R,deepLink:k,value:ae,onChange:Oe}=t,Ke=cc(),[Ge,Rt]=(0,a.useState)(0),Mt=Oe||((fn,Un)=>Rt(Un));let an;ae?a.Children.map(v,fn=>{a.isValidElement(fn)&&(fn==null?void 0:fn.props.value)===ae&&(an=fn==null?void 0:fn.props.children)}):a.Children.map(v,(fn,Un)=>{a.isValidElement(fn)&&Un===Ge&&(an=fn==null?void 0:fn.props.children)});const Yt=d||(i?{slackChannel:i}:{});return a.createElement(Ze.Z,null,a.createElement(Kn,{...Yt},R&&a.createElement(uc,{title:R}),a.createElement(wn.Z,{classes:Ke,value:ae||Ge,onChange:Mt},v),a.createElement(Dt.Z,null),a.createElement(ve.Z,null,an),k&&a.createElement(oa,{...k})))}const mc=(0,Q.Z)(t=>({root:{minWidth:t.spacing(6),minHeight:t.spacing(3),margin:t.spacing(0,2,0,0),padding:t.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:t.palette.text.primary}},selected:{fontWeight:t.typography.fontWeightBold}}),{name:"BackstageCardTab"});function pc(t){const{children:i,...d}=t,v=mc();return a.createElement(un.Z,{disableRipple:!0,classes:v,...d})}},83487:(Rn,kt,e)=>{"use strict";e.d(kt,{FB:()=>re,IB:()=>H,iH:()=>l,op:()=>Q});var r=e(2784),m=e(57032);function u(b){return{$$type:"@backstage/TranslationMessages",id:b.ref.id,full:Boolean(b.full),messages:b.messages}}function W(b){return{$$type:"@backstage/TranslationResource",version:"v1",id:b.ref.id,resources:Object.entries(b.translations).map(([h,C])=>({language:h,loader:()=>C().then(p=>{const be=p.default;return{messages:(be==null?void 0:be.$$type)==="@backstage/TranslationMessages"?be.messages:be}})}))}}var A=Object.defineProperty,o=(b,h,C)=>h in b?A(b,h,{enumerable:!0,configurable:!0,writable:!0,value:C}):b[h]=C,U=(b,h,C)=>(o(b,typeof h!="symbol"?h+"":h,C),C),We=(b,h,C)=>{if(!h.has(b))throw TypeError("Cannot "+C)},we=(b,h,C)=>(We(b,h,"read from private field"),C?C.call(b):h.get(b)),a=(b,h,C)=>{if(h.has(b))throw TypeError("Cannot add the same private member more than once");h instanceof WeakSet?h.add(b):h.set(b,C)},te=(b,h,C,p)=>(We(b,h,"write to private field"),p?p.call(b,C):h.set(b,C),C),q,D,Z;function Le(b){const h=new Array;function C(p,be){for(const[ge,ye]of Object.entries(p))typeof ye=="string"?h.push([be+ge,ye]):C(ye,`${be}${ge}.`)}return C(b,""),Object.fromEntries(h)}class ie{constructor(h){a(this,q,void 0),a(this,D,void 0),a(this,Z,void 0),U(this,"$$type","@backstage/TranslationRef"),U(this,"version","v1"),te(this,q,h.id),te(this,D,Le(h.messages))}get id(){return we(this,q)}get T(){throw new Error("Not implemented")}getDefaultMessages(){return we(this,D)}setDefaultResource(h){te(this,Z,h)}getDefaultResource(){return we(this,Z)}toString(){return`TranslationRef{id=${this.id}}`}}q=new WeakMap,D=new WeakMap,Z=new WeakMap;function re(b){const h=new ie(b);return b.translations&&h.setDefaultResource(W({ref:h,translations:b.translations})),h}const Q=(0,m.c)({id:"core.translation"}),H=(0,m.c)({id:"core.applanguage"}),S=new WeakSet,l=b=>{const h=(0,m.u)(m.r),C=(0,m.u)(Q),[p,be]=(0,r.useState)(()=>C.getTranslation(b)),ge=(0,r.useMemo)(()=>C.translation$(b),[C,b]),ye=(0,r.useCallback)(oe=>{if(!S.has(b)){const X=`Failed to load translation resource '${b.id}'; caused by ${oe}`;console.error(X),h.post(new Error(X)),S.add(b)}},[h,b]);(0,r.useEffect)(()=>{const oe=ge.subscribe({next(X){X.ready&&be(X)},error(X){ye(X)}});return()=>{oe.unsubscribe()}},[ge,ye]);const ne=(0,r.useRef)(!0);if((0,r.useEffect)(()=>{ne.current?ne.current=!1:be(C.getTranslation(b))},[C,b]),!p.ready)throw new Promise(oe=>{const X=ge.subscribe({next(xe){xe.ready&&(X.unsubscribe(),oe())},error(xe){X.unsubscribe(),ye(xe),oe()}})});return{t:p.t}}},57032:(Rn,kt,e)=>{"use strict";e.d(kt,{F:()=>C,S:()=>We,a:()=>H,b:()=>u,c:()=>U,d:()=>a,e:()=>q,f:()=>p,g:()=>we,h:()=>Z,i:()=>Le,j:()=>ie,k:()=>re,l:()=>Q,m:()=>D,n:()=>S,o:()=>te,p:()=>l,q:()=>b,r:()=>h,s:()=>be,t:()=>ge,u:()=>W,v:()=>ye,x:()=>ne});var r=e(2784),m=e(18473);function u(){const oe=(0,m.Vt)("api-context");if(!oe)throw new Error("API context is not available");const X=oe.atVersion(1);if(!X)throw new Error("ApiContext v1 not available");return X}function W(oe){const xe=u().get(oe);if(!xe)throw new Error(`No implementation available for ${oe}`);return xe}function A(oe){return function(xe){const It=Jt=>{const me=u(),Lt={};for(const Ct in oe)if(oe.hasOwnProperty(Ct)){const je=oe[Ct],nt=me.get(je);if(!nt)throw new Error(`No implementation available for ${je}`);Lt[Ct]=nt}return React.createElement(xe,{...Jt,...Lt})},P=xe.displayName||xe.name||"Component";return It.displayName=`withApis(${P})`,It}}class o{constructor(X){if(this.config=X,!X.id.split(".").flatMap(It=>It.split("-")).every(It=>It.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${X.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function U(oe){return new o(oe)}var We=(oe=>(oe.SignedIn="SignedIn",oe.SignedOut="SignedOut",oe))(We||{});const we=U({id:"core.auth.google"}),a=U({id:"core.auth.github"}),te=U({id:"core.auth.okta"}),q=U({id:"core.auth.gitlab"}),D=U({id:"core.auth.microsoft"}),Z=U({id:"core.auth.onelogin"}),Le=U({id:"core.auth.bitbucket"}),ie=U({id:"core.auth.bitbucket-server"}),re=U({id:"core.auth.atlassian"}),Q=U({id:"core.alert"}),H=U({id:"core.analytics"}),S=U({id:"core.apptheme"}),l=U({id:"core.config"}),b=U({id:"core.discovery"}),h=U({id:"core.error"});var C=(oe=>(oe[oe.None=0]="None",oe[oe.Active=1]="Active",oe))(C||{});const p=U({id:"core.featureflags"}),be=U({id:"core.fetch"}),ge=U({id:"core.identity"}),ye=U({id:"core.oauthrequest"}),ne=U({id:"core.storage"})},30705:(Rn,kt,e)=>{"use strict";e.d(kt,{CO:()=>ce,IY:()=>Q,NT:()=>p,Oi:()=>nt,P4:()=>Pe,R5:()=>re,Rz:()=>xe,YO:()=>le,fC:()=>U,ni:()=>We,qD:()=>Z,rx:()=>Zt,tg:()=>je,vJ:()=>Kt,x8:()=>Ct,z$:()=>D});var r=e(18473),m=e(2784),u=e(57032),W=e(73557);const A=(0,r.CT)("analytics-context"),o=()=>{const O=(0,m.useContext)(A);if(O===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const B=O.atVersion(1);if(B===void 0)throw new Error("No context found for version 1.");return B},U=O=>{const{attributes:B,children:w}=O,se={...o(),...B},Me=(0,r.EI)({1:se});return m.createElement(A.Provider,{value:Me},w)};function We(O,B){return"id"in O?{api:O,deps:{},factory:()=>B}:O}const we=(0,r.uW)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),a="_ROUTABLE-EXTENSION-RENDERED";class te{constructor(B,w={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=B,this.context=w,we.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{we.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...we.mostRecentGatheredNavigation,...we.mostRecentRoutableExtensionRender}),we.mostRecentGatheredNavigation=void 0,we.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),we.beforeUnloadRegistered=!0)}setContext(B){this.context=B}captureEvent(B,w,{value:L,attributes:se}={}){const{_routeNodeType:Me,...rt}=this.context;if(B===a){we.mostRecentGatheredNavigation&&(we.mostRecentRoutableExtensionRender={context:{...rt,extension:"App"}});return}if(we.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...we.mostRecentGatheredNavigation,...we.mostRecentRoutableExtensionRender})}catch(xt){console.warn("Error during analytics event capture. %o",xt)}we.mostRecentGatheredNavigation=void 0,we.mostRecentRoutableExtensionRender=void 0}if(B==="navigate"&&Me==="gathered"&&rt.pluginId==="root"){we.mostRecentGatheredNavigation={action:B,subject:w,value:L,attributes:se,context:rt};return}try{this.analyticsApi.captureEvent({action:B,subject:w,value:L,attributes:se,context:rt})}catch(xt){console.warn("Error during analytics event capture. %o",xt)}}}function q(){try{return(0,u.u)(u.a)}catch{return{captureEvent:()=>{}}}}function D(){const O=(0,m.useRef)(null),B=o(),w=q();function L(){return O.current===null&&(O.current=new te(w)),O.current}const se=L();return se.setContext(B),se}const Z=()=>{const O=(0,r.Vt)("app-context");if(!O)throw new Error("App context is not available");const B=O.atVersion(1);if(!B)throw new Error("AppContext v1 not available");return B},Le=(0,r.uW)("component-data-store",()=>new WeakMap),ie="__backstage_data";function re(O,B,w){var L;const se=O;let Me=(L=se[ie])!=null?L:Le.get(O);if(Me||(Me={map:new Map},Object.defineProperty(se,ie,{enumerable:!1,configurable:!0,writable:!1,value:Me}),Le.set(O,Me)),Me.map.has(B)){const rt=O.displayName||O.name;throw new Error(`Attempted to attach duplicate data "${B}" to component "${rt}"`)}Me.map.set(B,w)}function Q(O,B){var w;if(!O)return;const L=O.type;if(!L)return;const se=(w=L[ie])!=null?w:Le.get(L);if(se)return se.map.get(B)}const H=(0,r.uW)("route-ref-type",()=>Symbol("route-ref-type"));var S=Object.defineProperty,l=(O,B,w)=>B in O?S(O,B,{enumerable:!0,configurable:!0,writable:!0,value:w}):O[B]=w,b=(O,B,w)=>(l(O,typeof B!="symbol"?B+"":B,w),w),h;class C{constructor(B,w){this.id=B,this.params=w,b(this,h,"absolute")}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}h=H;function p(O){var B;return new C(O.id,(B=O.params)!=null?B:[])}var be=Object.defineProperty,ge=(O,B,w)=>B in O?be(O,B,{enumerable:!0,configurable:!0,writable:!0,value:w}):O[B]=w,ye=(O,B,w)=>(ge(O,typeof B!="symbol"?B+"":B,w),w),ne;const oe=/^\w+$/;class X{constructor(B,w,L,se){this.id=B,this.path=w,this.parent=L,this.params=se,ye(this,ne,"sub")}toString(){return`routeRef{type=sub,id=${this.id}}`}}ne=H;function xe(O){const{id:B,path:w,parent:L}=O,se=w.split("/").filter(xt=>xt.startsWith(":")).map(xt=>xt.substring(1)),Me=[...L.params,...se];if(L.params.some(xt=>se.includes(xt)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!w.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${w}'`);if(w.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${w}'`);for(const xt of se)if(!oe.test(xt))throw new Error(`SubRouteRef path has invalid param, got '${xt}'`);return new X(B,w,L,Me)}var It=Object.defineProperty,P=(O,B,w)=>B in O?It(O,B,{enumerable:!0,configurable:!0,writable:!0,value:w}):O[B]=w,Jt=(O,B,w)=>(P(O,typeof B!="symbol"?B+"":B,w),w),me;class Lt{constructor(B,w,L){this.id=B,this.params=w,this.optional=L,Jt(this,me,"external")}toString(){return`routeRef{type=external,id=${this.id}}`}}me=H;function Ct(O){var B;return new Lt(O.id,(B=O.params)!=null?B:[],Boolean(O.optional))}function je(O){const{pathname:B}=(0,W.TH)(),w=(0,r.Vt)("routing-context");if(!w)throw new Error("Routing context is not available");const L=w.atVersion(1),se=(0,m.useMemo)(()=>L&&L.resolve(O,{pathname:B}),[L,O,B]);if(!w)throw new Error("useRouteRef used outside of routing context");if(!L)throw new Error("RoutingContext v1 not available");const Me="optional"in O&&O.optional;if(!se&&!Me)throw new Error(`No path for ${O}`);return se}function nt(O){return(0,W.UO)()}var Te=Object.defineProperty,gt=(O,B,w)=>B in O?Te(O,B,{enumerable:!0,configurable:!0,writable:!0,value:w}):O[B]=w,de=(O,B,w)=>(gt(O,typeof B!="symbol"?B+"":B,w),w);class G extends m.Component{constructor(){super(...arguments),de(this,"state",{error:void 0}),de(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(B){return{error:B}}render(){const{error:B}=this.state,{app:w,plugin:L}=this.props,{ErrorBoundaryFallback:se}=w.getComponents();return B?m.createElement(se,{error:B,resetError:this.handleErrorReset,plugin:L}):this.props.children}}function Pe(O){const{component:B,mountPoint:w,name:L}=O;return le({component:{lazy:()=>B().then(se=>{const Me=xt=>{const ut=D();try{je(w)}catch(et){if(typeof et=="object"&&et!==null){const{message:Wt}=et;if(typeof Wt=="string"&&Wt.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${w} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw et}return(0,m.useEffect)(()=>{ut.captureEvent(a,"")},[ut]),m.createElement(se,{...xt})},rt=L||se.displayName||se.name||"LazyComponent";return Me.displayName=`RoutableExtension(${rt})`,Me},se=>rt=>{const xt=Z(),{BootErrorPage:ut}=xt.getComponents();return m.createElement(ut,{step:"load-chunk",error:se})})},data:{"core.mountPoint":w},name:L})}function ce(O){const{component:B,name:w}=O;return le({component:B,name:w})}function le(O){const{data:B={},name:w}=O;w||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let L;if("lazy"in O.component){const Me=O.component.lazy;L=(0,m.lazy)(()=>Me().then(rt=>({default:rt})))}else L=O.component.sync;const se=w||L.displayName||L.name||"Component";return{expose(Me){const rt=xt=>{const ut=Z(),{Progress:et}=ut.getComponents(),Wt=B==null?void 0:B["core.mountPoint"];return m.createElement(m.Suspense,{fallback:m.createElement(et,null)},m.createElement(G,{app:ut,plugin:Me},m.createElement(U,{attributes:{pluginId:Me.getId(),...w&&{extension:w},...Wt&&{routeRef:Wt.id}}},m.createElement(L,{...xt}))))};re(rt,"core.plugin",Me),re(rt,"core.extensionName",w);for(const[xt,ut]of Object.entries(B))re(rt,xt,ut);return rt.displayName=`Extension(${se})`,rt}}}function Be(O,B,w,L){return m.Children.toArray(O).flatMap(se=>{if(!(0,m.isValidElement)(se))return[];if(se.type===m.Fragment)return Be(se.props.children,B,w,L);if(Q(se,"core.featureFlagged")){const Me=se.props;return("with"in Me?B.isActive(Me.with):!B.isActive(Me.without))?Be(se.props.children,B,w,L):[]}if(w===void 0||w(se))return[se];if(L)throw new Error(L);return Be(se.props.children,B,w,L)})}class st{constructor(B,w){this.node=B,this.featureFlagsApi=w}selectByComponentData(B){const w=Be(this.node,this.featureFlagsApi,L=>Q(L,B.key)!==void 0,B.withStrictError);return new st(w,this.featureFlagsApi)}findComponentData(B){return Be(this.node,this.featureFlagsApi,L=>Q(L,B.key)!==void 0).map(L=>Q(L,B.key)).filter(L=>L!==void 0)}getElements(){return Be(this.node,this.featureFlagsApi)}}function Kt(O,B,w=[]){const L=(0,u.u)(u.f),se=new st(O,L);return(0,m.useMemo)(()=>B(se),[O,...w])}class ct{constructor(B){this.config=B}getId(){return this.config.id}getApis(){var B;return(B=this.config.apis)!=null?B:[]}getFeatureFlags(){var B,w;return(w=(B=this.config.featureFlags)==null?void 0:B.slice())!=null?w:[]}get routes(){var B;return(B=this.config.routes)!=null?B:{}}get externalRoutes(){var B;return(B=this.config.externalRoutes)!=null?B:{}}provide(B){return B.expose(this)}toString(){return`plugin{${this.config.id}}`}}function Zt(O){return new ct(O)}},32272:(Rn,kt,e)=>{"use strict";e.d(kt,{BD:()=>W,SP:()=>h,VL:()=>ye,VZ:()=>u,dR:()=>Q,nj:()=>l});var r=e(24852),m=e.n(r);function u(ne){if(typeof ne!="object"||ne===null||Array.isArray(ne))return!1;const oe=ne;return!(typeof oe.name!="string"||oe.name===""||typeof oe.message!="string")}function W(ne){if(typeof ne!="object"||ne===null||Array.isArray(ne))throw new Error(`Encountered invalid error, not an object, got '${ne}'`);const oe=ne;if(typeof oe.name!="string"||oe.name==="")throw new Error(`Encountered error object without a name, got '${ne}'`);if(typeof oe.message!="string")throw new Error(`Encountered error object without a message, got '${ne}'`)}function A(ne,oe){const xe={name:"Unknown",message:"<no reason given>",...serializeError$1(ne)};return oe!=null&&oe.includeStack||delete xe.stack,xe}function o(ne){const oe=(0,r.deserializeError)(ne);return ne.stack||(oe.stack=void 0),oe}function U(ne){if(u(ne)){const oe=String(ne);return oe!=="[object Object]"?oe:`${ne.name}: ${ne.message}`}return`unknown error '${ne}'`}var We=Object.defineProperty,we=(ne,oe,X)=>oe in ne?We(ne,oe,{enumerable:!0,configurable:!0,writable:!0,value:X}):ne[oe]=X,a=(ne,oe,X)=>(we(ne,typeof oe!="symbol"?oe+"":oe,X),X);class te extends Error{constructor(oe,X){var xe;let It=oe;if(X!==void 0){const P=U(X);It?It+=`; caused by ${P}`:It=`caused by ${P}`}super(It),a(this,"cause"),(xe=Error.captureStackTrace)==null||xe.call(Error,this,this.constructor),(!this.name||this.name==="Error")&&this.constructor.name!=="Error"&&(this.name=this.constructor.name),this.cause=u(X)?X:void 0}}var q=Object.defineProperty,D=(ne,oe,X)=>oe in ne?q(ne,oe,{enumerable:!0,configurable:!0,writable:!0,value:X}):ne[oe]=X,Z=(ne,oe,X)=>(D(ne,typeof oe!="symbol"?oe+"":oe,X),X);class Le extends null{constructor(){super(...arguments),Z(this,"name","InputError")}}class ie extends null{constructor(){super(...arguments),Z(this,"name","AuthenticationError")}}class re extends null{constructor(){super(...arguments),Z(this,"name","NotAllowedError")}}class Q extends te{constructor(){super(...arguments),Z(this,"name","NotFoundError")}}class H extends null{constructor(){super(...arguments),Z(this,"name","ConflictError")}}class S extends null{constructor(){super(...arguments),Z(this,"name","NotModifiedError")}}class l extends te{constructor(){super(...arguments),Z(this,"name","NotImplementedError")}}class b extends null{}class h extends te{constructor(oe,X){super(oe,X),this.name=u(X)?X.name:"Error"}}async function C(ne){var oe;try{const X=await ne.text();if(X){if((oe=ne.headers.get("content-type"))!=null&&oe.startsWith("application/json"))try{const xe=JSON.parse(X);if(xe.error&&xe.response)return xe}catch{}return{error:{name:"Error",message:`Request failed with status ${ne.status} ${ne.statusText}, ${X}`},response:{statusCode:ne.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${ne.status} ${ne.statusText}`},response:{statusCode:ne.status}}}var p=Object.defineProperty,be=(ne,oe,X)=>oe in ne?p(ne,oe,{enumerable:!0,configurable:!0,writable:!0,value:X}):ne[oe]=X,ge=(ne,oe,X)=>(be(ne,typeof oe!="symbol"?oe+"":oe,X),X);class ye extends Error{constructor(oe){super(oe.message),ge(this,"response"),ge(this,"body"),ge(this,"cause"),this.name="ResponseError",this.response=oe.response,this.body=oe.data,this.cause=oe.cause}static async fromResponse(oe){const X=await C(oe),xe=X.response.statusCode||oe.status,It=X.error.name||oe.statusText,P=`Request failed with ${xe} ${It}`,Jt=o(X.error);return new ye({message:P,response:oe,data:X,cause:Jt})}}},49462:(Rn,kt,e)=>{"use strict";e.d(kt,{Om:()=>o,ae:()=>H,nW:()=>l,q3:()=>S,zN:()=>Q});var r=e(57032),m=e(30705),u=e(1854),W=e(73250),A=e(2784);const o=(0,r.c)({id:"core.scmauth"});var U=(b,h,C)=>{if(!h.has(b))throw TypeError("Cannot "+C)},We=(b,h,C)=>(U(b,h,"read from private field"),C?C.call(b):h.get(b)),we=(b,h,C)=>{if(h.has(b))throw TypeError("Cannot add the same private member more than once");h instanceof WeakSet?h.add(b):h.set(b,C)},a=(b,h,C,p)=>(U(b,h,"write to private field"),p?p.call(b,C):h.set(b,C),C),te,q,D,Z,Le;class ie{constructor(h){we(this,te,void 0),a(this,te,h)}async getCredentials(h){const C=new URL(h.url),p=We(this,te).find(be=>be.isUrlSupported(C));if(!p)throw new Error(`No auth provider available for '${h.url}', see https://backstage.io/link?scm-auth`);return p.getCredentials(h)}}te=new WeakMap;const re=class Pr{constructor(h,C,p,be){we(this,q,void 0),we(this,D,void 0),we(this,Z,void 0),we(this,Le,void 0),a(this,q,C),a(this,D,p),a(this,Z,be),a(this,Le,h)}static createDefaultApiFactory(){return(0,m.ni)({api:o,deps:{github:r.d,gitlab:r.e,azure:r.m,bitbucket:r.i},factory:({github:h,gitlab:C,azure:p,bitbucket:be})=>Pr.merge(Pr.forGithub(h),Pr.forGitlab(C),Pr.forAzure(p),Pr.forBitbucket(be))})}static forAuthApi(h,C){return new Pr("generic",h,C.host,C.scopeMapping)}static forGithub(h,C){var p;const be=(p=C==null?void 0:C.host)!=null?p:"github.com";return new Pr("github",h,be,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(h,C){var p;const be=(p=C==null?void 0:C.host)!=null?p:"gitlab.com";return new Pr("gitlab",h,be,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(h,C){var p;const be=(p=C==null?void 0:C.host)!=null?p:"dev.azure.com";return new Pr("azure",h,be,{default:["vso.build","vso.code","vso.graph","vso.project","vso.profile"],repoWrite:["vso.code_manage"]})}static forBitbucket(h,C){var p;const be=(p=C==null?void 0:C.host)!=null?p:"bitbucket.org";return new Pr("bitbucket",h,be,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(...h){return new ie(h)}isUrlSupported(h){return h.host===We(this,D)}getAdditionalScopesForProvider(h){var C,p;return!(h!=null&&h.customScopes)||We(this,Le)==="generic"?[]:(p=(C=h.customScopes)==null?void 0:C[We(this,Le)])!=null?p:[]}async getCredentials(h){const{url:C,additionalScope:p,...be}=h,ge=We(this,Z).default.slice();p!=null&&p.repoWrite&&ge.push(...We(this,Z).repoWrite);const ye=this.getAdditionalScopesForProvider(p);ye.length&&ge.push(...ye);const ne=[...new Set(ge)],oe=await We(this,q).getAccessToken(ne,be);return{token:oe,headers:{Authorization:`Bearer ${oe}`}}}};q=new WeakMap,D=new WeakMap,Z=new WeakMap,Le=new WeakMap;let Q=re;class H{static fromConfig(h){return u.Lx.fromConfig(h)}}const S=(0,r.c)({id:"integration.scmintegrations"}),l=b=>{var h;const{type:C}=b,p=(0,m.qD)(),be=W.Z,ge=C&&(h=p.getSystemIcon(C))!=null?h:be;return A.createElement(ge,null)}},1854:(Rn,kt,e)=>{"use strict";e.d(kt,{BT:()=>$n,Lx:()=>nr,MY:()=>Ce,ah:()=>De});var r=e(82717),m=e.n(r),u=e(76635),W=e.n(u),A=e(96279),o=e.n(A),U=e(72872),We=e(89393),we=e(26228),a=e(48834).Buffer;function te(f){const c=new URL("http://example.com");return c.host=f,c.host===f}function q(f){try{return new URL(f),!0}catch{return!1}}function D(f,c){return{list(){return f},byUrl(y){try{const ee=typeof y=="string"?new URL(y):y;return f.find(ke=>c(ke)===ee.host)}catch{return}},byHost(y){return f.find(ee=>c(ee)===y)}}}function Z(f){const{url:c,base:y,lineNumber:ee}=f;try{return new URL(c),c}catch{}let ke;if(c.startsWith("/")){const{filepath:Ot}=m()(y);ke=new URL(y);const Gt=(0,u.trimEnd)(ke.pathname.substring(0,ke.pathname.length-Ot.length),"/");ke.pathname=`${Gt}${c}`}else ke=new URL(c,y);return ke.search=new URL(y).search,ee&&(ke.hash=`L${ee}`),ke.toString()}const Le="amazonaws.com";function ie(f){var c;const y=f.getOptionalString("endpoint"),ee=(c=f.getOptionalBoolean("s3ForcePathStyle"))!=null?c:!1;let ke,Ot;if(y){try{const Jn=new URL(y);ke=Jn.host,Ot=Jn.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${y}' is not a valid URL`)}if(Ot!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${y}'`)}else ke=Le;const Gt=f.getOptionalString("accessKeyId"),rn=f.getOptionalString("secretAccessKey"),Tn=f.getOptionalString("roleArn"),Nn=f.getOptionalString("externalId");return{host:ke,endpoint:y,s3ForcePathStyle:ee,accessKeyId:Gt,secretAccessKey:rn,roleArn:Tn,externalId:Nn}}function re(f){const c=f.map(ie);return c.some(y=>y.host===Le)||c.push({host:Le}),c}var Q=Object.defineProperty,H=(f,c,y)=>c in f?Q(f,c,{enumerable:!0,configurable:!0,writable:!0,value:y}):f[c]=y,S=(f,c,y)=>(H(f,typeof c!="symbol"?c+"":c,y),y);const l=class{constructor(c){this.integrationConfig=c}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){return Z(c)}resolveEditUrl(c){return c}};S(l,"factory",({config:f})=>{var c;const y=re((c=f.getOptionalConfigArray("integrations.awsS3"))!=null?c:[]);return D(y.map(ee=>new l(ee)),ee=>ee.config.host)});let b=l;var h=(f,c,y)=>{if(!c.has(f))throw TypeError("Cannot "+y)},C=(f,c,y)=>(h(f,c,"read from private field"),y?y.call(f):c.get(f)),p=(f,c,y)=>{if(c.has(f))throw TypeError("Cannot add the same private member more than once");c instanceof WeakSet?c.add(f):c.set(f,y)},be=(f,c,y,ee)=>(h(f,c,"write to private field"),ee?ee.call(f,y):c.set(f,y),y),ge,ye,ne,oe,X,xe,It;const P="GB",Jt=class Gi{constructor(c,y,ee,ke,Ot,Gt){p(this,ge,void 0),p(this,ye,void 0),p(this,ne,void 0),p(this,oe,void 0),p(this,X,void 0),p(this,xe,void 0),p(this,It,(...rn)=>{const Tn=new URL(C(this,ge));return Tn.pathname=rn.map(Nn=>encodeURIComponent(Nn)).join("/"),Tn}),be(this,ge,c),be(this,ye,y),be(this,ne,ee),be(this,oe,ke),be(this,X,Ot),be(this,xe,Gt)}static fromRepoUrl(c){var y;const ee=new URL(c);let ke,Ot,Gt;const rn=ee.pathname.split("/").map(Sa=>decodeURIComponent(Sa));if(rn[2]==="_git"?(ke=rn[1],Ot=Gt=rn[3]):rn[3]==="_git"?(ke=rn[1],Ot=rn[2],Gt=rn[4]):rn[4]==="_git"&&(ke=`${rn[1]}/${rn[2]}`,Ot=rn[3],Gt=rn[5]),!ke||!Ot||!Gt)throw new Error("Azure URL must point to a git repository");const Tn=(y=ee.searchParams.get("path"))!=null?y:void 0;let Nn;const Jn=ee.searchParams.get("version");if(Jn){if(Jn.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");Nn=Jn.slice(2)}return new Gi(ee.origin,ke,Ot,Gt,Tn,Nn)}toRepoUrl(){let c;return C(this,ne)===C(this,oe)?c=C(this,It).call(this,C(this,ye),"_git",C(this,oe)):c=C(this,It).call(this,C(this,ye),C(this,ne),"_git",C(this,oe)),C(this,X)&&c.searchParams.set("path",C(this,X)),C(this,xe)&&c.searchParams.set("version",P+C(this,xe)),c.toString()}toFileUrl(){if(!C(this,X))throw new Error("Azure URL must point to a specific path to be able to download a file");const c=C(this,It).call(this,C(this,ye),C(this,ne),"_apis","git","repositories",C(this,oe),"items");return c.searchParams.set("api-version","6.0"),c.searchParams.set("path",C(this,X)),C(this,xe)&&c.searchParams.set("version",C(this,xe)),c.toString()}toArchiveUrl(){const c=C(this,It).call(this,C(this,ye),C(this,ne),"_apis","git","repositories",C(this,oe),"items");return c.searchParams.set("recursionLevel","full"),c.searchParams.set("download","true"),c.searchParams.set("api-version","6.0"),C(this,X)&&c.searchParams.set("scopePath",C(this,X)),C(this,xe)&&c.searchParams.set("version",C(this,xe)),c.toString()}toCommitsUrl(){const c=C(this,It).call(this,C(this,ye),C(this,ne),"_apis","git","repositories",C(this,oe),"commits");return c.searchParams.set("api-version","6.0"),C(this,xe)&&c.searchParams.set("searchCriteria.itemVersion.version",C(this,xe)),c.toString()}getOwner(){return C(this,ye)}getProject(){return C(this,ne)}getRepo(){return C(this,oe)}getPath(){return C(this,X)}getRef(){return C(this,xe)}};ge=new WeakMap,ye=new WeakMap,ne=new WeakMap,oe=new WeakMap,X=new WeakMap,xe=new WeakMap,It=new WeakMap;let me=Jt;const Lt="dev.azure.com",Ct=["clientId","clientSecret","tenantId","personalAccessToken"],je=new Map([["ClientSecret",["clientId","clientSecret","tenantId"]],["ManagedIdentity",["clientId"]],["PersonalAccessToken",["personalAccessToken"]]]);function nt(f){for(const c of je.entries()){const[y,ee]=c,ke=Ct.filter(Ot=>!ee.includes(Ot));if(ee.every(Ot=>f[Ot]!==void 0)&&ke.every(Ot=>f[Ot]===void 0))return{kind:y,organizations:f.organizations,...ee.reduce((Ot,Gt)=>(Ot[Gt]=f[Gt],Ot),{})}}throw new Error("is not a valid credential")}function Te(f){var c,y,ee,ke;const Ot=(c=f.getOptionalString("host"))!=null?c:Lt;let Gt=(y=f.getOptionalConfigArray("credentials"))==null?void 0:y.map(Nn=>({organizations:Nn.getOptionalStringArray("organizations"),personalAccessToken:Nn.getOptionalString("personalAccessToken"),tenantId:Nn.getOptionalString("tenantId"),clientId:Nn.getOptionalString("clientId"),clientSecret:Nn.getOptionalString("clientSecret")}));const rn=f.getOptionalString("token");if(f.getOptional("credential")!==void 0&&f.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'credential' and 'credentials' cannot be used together. Use 'credentials' instead.");if(f.getOptional("token")!==void 0&&f.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'token' and 'credentials' cannot be used together. Use 'credentials' instead.");if(rn!==void 0){const Nn=[{personalAccessToken:rn}];Gt=(ee=Gt==null?void 0:Gt.concat(Nn))!=null?ee:Nn}if(f.getOptional("credential")!==void 0){const Nn=[{organizations:f.getOptionalStringArray("credential.organizations"),token:f.getOptionalString("credential.token"),tenantId:f.getOptionalString("credential.tenantId"),clientId:f.getOptionalString("credential.clientId"),clientSecret:f.getOptionalString("credential.clientSecret")}];Gt=(ke=Gt==null?void 0:Gt.concat(Nn))!=null?ke:Nn}if(!te(Ot))throw new Error(`Invalid Azure integration config, '${Ot}' is not a valid host`);let Tn;if(Gt!==void 0){const Nn=Gt==null?void 0:Gt.reduce((Jn,Sa,_a)=>{let Qa;try{nt(Sa)}catch(ar){Qa=ar.message}return Qa!==void 0&&Jn.push(`credential at position ${_a+1} ${Qa}`),Jn},Array.of()).concat(Object.entries(Gt.filter(Jn=>Jn.organizations!==void 0&&Jn.organizations.length>0).reduce((Jn,Sa,_a)=>{var Qa;return(Qa=Sa.organizations)==null||Qa.forEach(ar=>{Jn[ar]||(Jn[ar]=[]),Jn[ar].push(_a+1)}),Jn},{})).filter(([Jn,Sa])=>Sa.length>1).reduce((Jn,[Sa,_a])=>(Jn.push(`organization ${Sa} is specified multiple times in credentials at positions ${_a.slice(0,_a.length-1).join(", ")} and ${_a[_a.length-1]}`),Jn),Array.of()));if((Nn==null?void 0:Nn.length)>0)throw new Error(`Invalid Azure integration config for ${Ot}: ${Nn.join("; ")}`);if(Tn=Gt.map(Jn=>nt(Jn)),Tn.some(Jn=>Jn.kind!=="PersonalAccessToken")&&Ot!==Lt)throw new Error(`Invalid Azure integration config for ${Ot}, only personal access tokens can be used with hosts other than ${Lt}`);if(Tn.filter(Jn=>Jn.organizations===void 0||Jn.organizations.length===0).length>1)throw new Error(`Invalid Azure integration config for ${Ot}, you cannot specify multiple credentials without organizations`)}return{host:Ot,credentials:Tn}}function gt(f){const c=f.map(Te);return c.some(y=>y.host===Lt)||c.push({host:Lt}),c}var de=Object.defineProperty,G=(f,c,y)=>c in f?de(f,c,{enumerable:!0,configurable:!0,writable:!0,value:y}):f[c]=y,Pe=(f,c,y)=>(G(f,typeof c!="symbol"?c+"":c,y),y);const ce=class{constructor(c){this.integrationConfig=c}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){var y;const{url:ee,base:ke}=c;if(q(ee))return ee;try{const Ot=me.fromRepoUrl(ke),Gt=new URL(ke),rn=new URL(`https://a.com${(y=Ot.getPath())!=null?y:""}`),Tn=new URL(ee,rn).pathname;return Gt.searchParams.set("path",Tn),c.lineNumber&&(Gt.searchParams.set("line",String(c.lineNumber)),Gt.searchParams.set("lineEnd",String(c.lineNumber+1)),Gt.searchParams.set("lineStartColumn","1"),Gt.searchParams.set("lineEndColumn","1")),Gt.toString()}catch{return new URL(ee,ke).toString()}}resolveEditUrl(c){return c}};Pe(ce,"factory",({config:f})=>{var c;const y=gt((c=f.getOptionalConfigArray("integrations.azure"))!=null?c:[]);return D(y.map(ee=>new ce(ee)),ee=>ee.config.host)});let le=ce;function Be(f){return me.fromRepoUrl(f).toFileUrl()}function st(f){return me.fromRepoUrl(f).toArchiveUrl()}function Kt(f){return me.fromRepoUrl(f).toCommitsUrl()}var ct=Object.defineProperty,Zt=(f,c,y)=>c in f?ct(f,c,{enumerable:!0,configurable:!0,writable:!0,value:y}):f[c]=y,O=(f,c,y)=>(Zt(f,typeof c!="symbol"?c+"":c,y),y);const B=null;class w{constructor(c){this.credential=c,O(this,"azureDevOpsScope","499b84ac-1321-427f-aa17-267ca6975798/.default"),O(this,"cached")}static fromAzureDevOpsCredential(c){switch(c.kind){case"PersonalAccessToken":return w.fromPersonalAccessTokenCredential(c);case"ClientSecret":return w.fromTokenCredential(new ClientSecretCredential(c.tenantId,c.clientId,c.clientSecret));case"ManagedIdentity":return w.fromTokenCredential(new ManagedIdentityCredential(c.clientId));default:throw new Error(`Credential kind '${c.kind}' not supported`)}}static fromTokenCredential(c){return new w(c)}static fromPersonalAccessTokenCredential(c){return new w(c.personalAccessToken)}async getCredentials(){if(this.cached===void 0||this.cached.expiresAt!==void 0&&Date.now()>this.cached.expiresAt)if(typeof this.credential=="string")this.cached={headers:{Authorization:`Basic ${btoa(`:${this.credential}`)}`},type:"pat",token:this.credential};else{const c=await this.credential.getToken(this.azureDevOpsScope);if(!c)throw new Error("Failed to retrieve access token");this.cached={expiresAt:c.expiresOnTimestamp-B,headers:{Authorization:`Bearer ${c.token}`},type:"bearer",token:c.token}}return this.cached}}class L{constructor(c){this.providers=c}static fromIntegrations(c){const y=c.azure.list().reduce((ee,ke)=>{var Ot;return(Ot=ke.config.credentials)==null||Ot.forEach(Gt=>{var rn;if(Gt.organizations===void 0||Gt.organizations.length===0)ee.get(ke.config.host)===void 0&&ee.set(ke.config.host,w.fromAzureDevOpsCredential(Gt));else{const Tn=w.fromAzureDevOpsCredential(Gt);(rn=Gt.organizations)==null||rn.forEach(Nn=>{ee.set(`${ke.config.host}/${Nn}`,Tn)})}}),ke.config.host==="dev.azure.com"&&ee.get(ke.config.host)===void 0&&ee.set(ke.config.host,w.fromTokenCredential(new DefaultAzureCredential)),ee},new Map);return new L(y)}forAzureDevOpsServerOrganization(c){const y=c.pathname.split("/").filter(ee=>ee!=="");if(c.host!=="dev.azure.com"&&y.length>0){if(y[0]!=="tfs")return this.providers.get(`${c.host}/${y[0]}`);if(y[0]==="tfs"&&y.length>1)return this.providers.get(`${c.host}/${y[1]}`)}}forAzureDevOpsOrganization(c){const y=c.pathname.split("/").filter(ee=>ee!=="");if(c.host==="dev.azure.com"&&y.length>0)return this.providers.get(`${c.host}/${y[0]}`)}forHost(c){return this.providers.get(c.host)}async getCredentials(c){var y,ee;const ke=new URL(c.url),Ot=(ee=(y=this.forAzureDevOpsOrganization(ke))!=null?y:this.forAzureDevOpsServerOrganization(ke))!=null?ee:this.forHost(ke);if(Ot!==void 0)return Ot.getCredentials(c)}}async function se(f,c){var y;const ee=c?{...c}:{},ke=(y=f.credentials)==null?void 0:y.filter(Ot=>Ot.organizations===void 0||Ot.organizations.length===0)[0];if(ke){const Gt=await w.fromAzureDevOpsCredential(ke).getCredentials();return{headers:{...Gt==null?void 0:Gt.headers,...ee}}}return{headers:ee}}const Me="bitbucket.org",rt="https://api.bitbucket.org/2.0";function xt(f){var c;const y=(c=f.getOptionalString("host"))!=null?c:Me;let ee=f.getOptionalString("apiBaseUrl");const ke=f.getOptionalString("token"),Ot=f.getOptionalString("username"),Gt=f.getOptionalString("appPassword");if(!te(y))throw new Error(`Invalid Bitbucket integration config, '${y}' is not a valid host`);return ee?ee=(0,u.trimEnd)(ee,"/"):y===Me?ee=rt:ee=`https://${y}/rest/api/1.0`,{host:y,apiBaseUrl:ee,token:ke,username:Ot,appPassword:Gt}}function ut(f){const c=f.map(xt);return c.some(y=>y.host===Me)||c.push({host:Me,apiBaseUrl:rt}),c}var et=Object.defineProperty,Wt=(f,c,y)=>c in f?et(f,c,{enumerable:!0,configurable:!0,writable:!0,value:y}):f[c]=y,fe=(f,c,y)=>(Wt(f,typeof c!="symbol"?c+"":c,y),y);const Ae=class{constructor(c){this.integrationConfig=c}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const y=Z(c);if(!c.lineNumber)return y;const ee=new URL(y);return this.integrationConfig.host==="bitbucket.org"?ee.hash=`lines-${c.lineNumber}`:ee.hash=`${c.lineNumber}`,ee.toString()}resolveEditUrl(c){const y=m()(c),ee=new URL(c);return ee.searchParams.set("mode","edit"),ee.searchParams.set("spa","0"),ee.searchParams.set("at",y.ref),ee.toString()}};fe(Ae,"factory",({config:f})=>{var c,y,ee;const ke=ut((ee=f.getOptionalConfigArray("integrations.bitbucket"))!=null?ee:[...(c=f.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?c:[],...(y=f.getOptionalConfigArray("integrations.bitbucketServer"))!=null?y:[]]);return D(ke.map(Ot=>new Ae(Ot)),Ot=>Ot.config.host)});let Xe=Ae;async function St(f,c){const{name:y,owner:ee,resource:ke}=parseGitUrl(f),Ot=ke==="bitbucket.org";let Gt=Ot?`${c.apiBaseUrl}/repositories/${ee}/${y}`:`${c.apiBaseUrl}/projects/${ee}/repos/${y}/default-branch`,rn=await fetch(Gt,Dt(c));if(rn.status===404&&!Ot&&(Gt=`${c.apiBaseUrl}/projects/${ee}/repos/${y}/branches/default`,rn=await fetch(Gt,Dt(c))),!rn.ok){const Nn=`Failed to retrieve default branch from ${Gt}, ${rn.status} ${rn.statusText}`;throw new Error(Nn)}let Tn;if(Ot)Tn=(await rn.json()).mainbranch.name;else{const{displayId:Nn}=await rn.json();Tn=Nn}if(!Tn)throw new Error(`Failed to read default branch from ${Gt}. Response ${rn.status} ${rn.json()}`);return Tn}async function pt(f,c){const{name:y,owner:ee,ref:ke,protocol:Ot,resource:Gt,filepath:rn}=parseGitUrl(f),Tn=Gt==="bitbucket.org";let Nn=ke;Nn||(Nn=await St(f,c));const Jn=rn?`&path=${encodeURIComponent(decodeURIComponent(rn))}`:"";return Tn?`${Ot}://${Gt}/${ee}/${y}/get/${Nn}.tar.gz`:`${c.apiBaseUrl}/projects/${ee}/repos/${y}/archive?format=tgz&at=${Nn}&prefix=${ee}-${y}${Jn}`}function Tt(f,c){try{const{owner:y,name:ee,ref:ke,filepathtype:Ot,filepath:Gt}=parseGitUrl(f);if(!y||!ee||Ot!=="browse"&&Ot!=="raw"&&Ot!=="src")throw new Error("Invalid Bitbucket URL or file path");const rn=Gt.replace(/^\//,"");if(c.host==="bitbucket.org"){if(!ke)throw new Error("Invalid Bitbucket URL or file path");return`${c.apiBaseUrl}/repositories/${y}/${ee}/src/${ke}/${rn}`}return`${c.apiBaseUrl}/projects/${y}/repos/${ee}/raw/${rn}?at=${ke}`}catch(y){throw new Error(`Incorrect URL: ${f}, ${y}`)}}function Dt(f){const c={};if(f.token)c.Authorization=`Bearer ${f.token}`;else if(f.username&&f.appPassword){const y=a.from(`${f.username}:${f.appPassword}`,"utf8");c.Authorization=`Basic ${y.toString("base64")}`}return{headers:c}}const $e="bitbucket.org",ot="https://api.bitbucket.org/2.0";function Bt(f){const c=$e,y=ot,ee=f.getString("username"),ke=f.getString("appPassword");return{host:c,apiBaseUrl:y,username:ee,appPassword:ke}}function _e(f){const c=f.map(Bt);return c.length===0&&c.push({host:$e,apiBaseUrl:ot}),c}var Je=Object.defineProperty,Ee=(f,c,y)=>c in f?Je(f,c,{enumerable:!0,configurable:!0,writable:!0,value:y}):f[c]=y,it=(f,c,y)=>(Ee(f,typeof c!="symbol"?c+"":c,y),y);const at=class{constructor(c){this.integrationConfig=c}get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const y=Z(c);if(c.lineNumber){const ee=new URL(y);return ee.hash=`lines-${c.lineNumber}`,ee.toString()}return y}resolveEditUrl(c){const y=m()(c),ee=new URL(c);return ee.searchParams.set("mode","edit"),ee.searchParams.set("at",y.ref),ee.toString()}};it(at,"factory",({config:f})=>{var c;const y=_e((c=f.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?c:[]);return D(y.map(ee=>new at(ee)),ee=>ee.config.host)});let Pt=at;async function Nt(f,c){const{name:y,owner:ee}=parseGitUrl(f),ke=`${c.apiBaseUrl}/repositories/${ee}/${y}`,Ot=await fetch(ke,He(c));if(!Ot.ok){const Tn=`Failed to retrieve default branch from ${ke}, ${Ot.status} ${Ot.statusText}`;throw new Error(Tn)}const rn=(await Ot.json()).mainbranch.name;if(!rn)throw new Error(`Failed to read default branch from ${ke}. Response ${Ot.status} ${Ot.json()}`);return rn}async function on(f,c){const{name:y,owner:ee,ref:ke,protocol:Ot,resource:Gt}=parseGitUrl(f);let rn=ke;return rn||(rn=await Nt(f,c)),`${Ot}://${Gt}/${ee}/${y}/get/${rn}.tar.gz`}function Ze(f,c){try{const{owner:y,name:ee,ref:ke,filepathtype:Ot,filepath:Gt}=parseGitUrl(f);if(!y||!ee||Ot!=="src"&&Ot!=="raw")throw new Error("Invalid Bitbucket Cloud URL or file path");const rn=Gt.replace(/^\//,"");if(!ke)throw new Error("Invalid Bitbucket Cloud URL or file path");return`${c.apiBaseUrl}/repositories/${y}/${ee}/src/${ke}/${rn}`}catch(y){throw new Error(`Incorrect URL: ${f}, ${y}`)}}function He(f){const c={};if(f.username&&f.appPassword){const y=a.from(`${f.username}:${f.appPassword}`,"utf8");c.Authorization=`Basic ${y.toString("base64")}`}return{headers:c}}function ve(f){const c=f.getString("host");let y=f.getOptionalString("apiBaseUrl");const ee=f.getOptionalString("token"),ke=f.getOptionalString("username"),Ot=f.getOptionalString("password");if(!te(c))throw new Error(`Invalid Bitbucket Server integration config, '${c}' is not a valid host`);return y?y=(0,u.trimEnd)(y,"/"):y=`https://${c}/rest/api/1.0`,{host:c,apiBaseUrl:y,token:ee,username:ke,password:Ot}}function Ie(f){return f.map(ve)}var lt=Object.defineProperty,$t=(f,c,y)=>c in f?lt(f,c,{enumerable:!0,configurable:!0,writable:!0,value:y}):f[c]=y,j=(f,c,y)=>($t(f,typeof c!="symbol"?c+"":c,y),y);const he=class{constructor(c){this.integrationConfig=c}get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const y=Z(c);if(c.lineNumber){const ee=new URL(y);return ee.hash=c.lineNumber.toString(),ee.toString()}return y}resolveEditUrl(c){return c.includes("?")?c.substring(0,c.indexOf("?")):c}};j(he,"factory",({config:f})=>{var c;const y=Ie((c=f.getOptionalConfigArray("integrations.bitbucketServer"))!=null?c:[]);return D(y.map(ee=>new he(ee)),ee=>ee.config.host)});let ze=he;async function ht(f,c){const{name:y,owner:ee}=parseGitUrl(f);let ke=`${c.apiBaseUrl}/projects/${ee}/repos/${y}/default-branch`,Ot=await fetch(ke,x(c));if(Ot.status===404&&(ke=`${c.apiBaseUrl}/projects/${ee}/repos/${y}/branches/default`,Ot=await fetch(ke,x(c))),!Ot.ok){const Tn=`Failed to retrieve default branch from ${ke}, ${Ot.status} ${Ot.statusText}`;throw new Error(Tn)}const{displayId:Gt}=await Ot.json(),rn=Gt;if(!rn)throw new Error(`Failed to read default branch from ${ke}. Response ${Ot.status} ${Ot.json()}`);return rn}async function sn(f,c){const{name:y,owner:ee,ref:ke,filepath:Ot}=parseGitUrl(f);let Gt=ke;Gt||(Gt=await ht(f,c));const rn=Ot?`&path=${encodeURIComponent(decodeURIComponent(Ot))}`:"";return`${c.apiBaseUrl}/projects/${ee}/repos/${y}/archive?format=tgz&at=${Gt}&prefix=${ee}-${y}${rn}`}function Qt(f,c){try{const{owner:y,name:ee,ref:ke,filepathtype:Ot,filepath:Gt}=parseGitUrl(f);if(!y||!ee||Ot!=="browse"&&Ot!=="raw"&&Ot!=="src")throw new Error("Invalid Bitbucket Server URL or file path");const rn=Gt.replace(/^\//,"");return`${c.apiBaseUrl}/projects/${y}/repos/${ee}/raw/${rn}?at=${ke}`}catch(y){throw new Error(`Incorrect URL: ${f}, ${y}`)}}function x(f){const c={};if(f.token)c.Authorization=`Bearer ${f.token}`;else if(f.username&&f.password){const y=a.from(`${f.username}:${f.password}`,"utf8");c.Authorization=`Basic ${y.toString("base64")}`}return{headers:c}}function Y(f){const c=f.getString("host");let y=f.getOptionalString("baseUrl"),ee=f.getOptionalString("cloneUrl"),ke=f.getOptionalString("gitilesBaseUrl");const Ot=f.getOptionalString("username"),Gt=f.getOptionalString("password");if(te(c)){if(y&&!q(y))throw new Error(`Invalid Gerrit integration config, '${y}' is not a valid baseUrl`);if(ee&&!q(ee))throw new Error(`Invalid Gerrit integration config, '${ee}' is not a valid cloneUrl`);if(ke&&!q(ke))throw new Error(`Invalid Gerrit integration config, '${ke}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${c}' is not a valid host`);return y?y=(0,u.trimEnd)(y,"/"):y=`https://${c}`,ke?ke=(0,u.trimEnd)(ke,"/"):ke=`https://${c}`,ee?ee=(0,u.trimEnd)(ee,"/"):ee=y,{host:c,baseUrl:y,cloneUrl:ee,gitilesBaseUrl:ke,username:Ot,password:Gt}}function Ye(f){return f.map(Y)}const Et=")]}'";function zt(f,c){const y=new URL(f.gitilesBaseUrl),ee=new URL(c),Ot=ee.pathname.substring(ee.pathname.startsWith("/a/")?2:0).replace(y.pathname,"").split("/").filter(Sa=>!!Sa),Gt=Ot.indexOf("+");if(Gt<=0)throw new Error(`Unable to parse project from url: ${c}`);const rn=(0,u.trimStart)(Ot.slice(0,Gt).join("/"),"/"),Tn=Ot.indexOf("heads");if(Tn<=0)throw new Error(`Unable to parse branch from url: ${c}`);const Nn=Ot[Tn+1],Jn=Ot.slice(Tn+2).join("/");return{branch:Nn,filePath:Jn===""?"/":Jn,project:rn}}function Ft(f,c,y,ee){return`${f.gitilesBaseUrl}/${c}/+/refs/heads/${y}/${(0,u.trimStart)(ee,"/")}`}function gn(f,c,y,ee){const ke=ee==="/"||ee===""?".tar.gz":`/${ee}.tar.gz`;return`${An(f)}/${c}/+archive/refs/heads/${y}${ke}`}function cn(f){return f.password?"/a/":"/"}function An(f){if(!f.baseUrl||!f.gitilesBaseUrl)throw new Error("Unexpected Gerrit config values. baseUrl or gitilesBaseUrl not set.");if(f.gitilesBaseUrl.startsWith(f.baseUrl))return f.gitilesBaseUrl.replace(f.baseUrl.concat("/"),f.baseUrl.concat(cn(f)));if(f.password)throw new Error("Since the baseUrl (Gerrit) is not part of the gitilesBaseUrl, an authentication URL could not be constructed.");return f.gitilesBaseUrl}function Fe(f,c){const{branch:y,project:ee}=zt(f,c);return`${f.baseUrl}${cn(f)}projects/${encodeURIComponent(ee)}/branches/${y}`}function qe(f,c){const{project:y}=zt(f,c);return`${f.cloneUrl}${cn(f)}${y}`}function At(f,c){const{branch:y,filePath:ee,project:ke}=zt(f,c);return`${f.baseUrl}${cn(f)}projects/${encodeURIComponent(ke)}/branches/${y}/files/${encodeURIComponent(ee)}/content`}function tn(f){return`${f.baseUrl}${cn(f)}projects/`}function ln(f){const c={};if(!f.password)return c;const y=a.from(`${f.username}:${f.password}`,"utf8");return c.Authorization=`Basic ${y.toString("base64")}`,{headers:c}}async function dn(f){const c=await f.text();if(c.startsWith(Et))try{return JSON.parse(c.slice(Et.length))}catch(y){throw new Error(`Invalid response from Gerrit: ${c.slice(0,10)} - ${y}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${c.slice(0,10)}`)}var un=Object.defineProperty,wn=(f,c,y)=>c in f?un(f,c,{enumerable:!0,configurable:!0,writable:!0,value:y}):f[c]=y,Wn=(f,c,y)=>(wn(f,typeof c!="symbol"?c+"":c,y),y);const Gn=class{constructor(c){this.integrationConfig=c}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){const{url:y,base:ee,lineNumber:ke}=c;let Ot;if(y.startsWith("/")){const{branch:Gt,project:rn}=zt(this.config,ee);return Ft(this.config,rn,Gt,y)}return y?Ot=new URL(y,ee):Ot=new URL(ee),ke&&(Ot.hash=ke.toString()),Ot.toString()}resolveEditUrl(c){return c}};Wn(Gn,"factory",({config:f})=>{var c;const y=Ye((c=f.getOptionalConfigArray("integrations.gerrit"))!=null?c:[]);return D(y.map(ee=>new Gn(ee)),ee=>ee.config.host)});let sa=Gn;function Cn(f){const c=f.getString("host");let y=f.getOptionalString("baseUrl");const ee=f.getOptionalString("username"),ke=f.getOptionalString("password");if(!te(c))throw new Error(`Invalid Gitea integration config, '${c}' is not a valid host`);return y?y=(0,u.trimEnd)(y,"/"):y=`https://${c}`,{host:c,baseUrl:y,username:ee,password:ke}}function ea(f,c){const y=ia(f,c);return`${y.url}/${y.owner}/${y.name}/_edit/${y.ref}/${y.path}`}function la(f,c){const y=ia(f,c);return`${y.url}/api/v1/repos/${y.owner}/${y.name}/contents/${y.path}?ref=${y.ref}`}function ra(f,c){const y=ia(f,c);return`${y.url}/api/v1/repos/${y.owner}/${y.name}/archive/${y.ref}.tar.gz`}function fa(f,c){const y=ia(f,c);return`${y.url}/api/v1/repos/${y.owner}/${y.name}/git/commits/${y.ref}`}function Pa(f){const c={},{username:y,password:ee}=f;return ee?(y?c.Authorization=`basic ${a.from(`${y}:${ee}`).toString("base64")}`:c.Authorization=`token ${ee}`,{headers:c}):c}function ia(f,c){var y;const ee=(y=f.baseUrl)!=null?y:`https://${f.host}`;try{const[ke,Ot,Gt,rn,Tn,Nn,...Jn]=c.replace(ee,"").split("/"),Sa=Jn.join("/").replace(/^\//,"");return{url:ee,owner:Ot,name:Gt,ref:Nn,path:Sa}}catch(ke){throw new Error(`Incorrect URL: ${c}, ${ke}`)}}var Ra=Object.defineProperty,ue=(f,c,y)=>c in f?Ra(f,c,{enumerable:!0,configurable:!0,writable:!0,value:y}):f[c]=y,Qe=(f,c,y)=>(ue(f,typeof c!="symbol"?c+"":c,y),y);const yt=class{constructor(c){this.config=c}get type(){return"gitea"}get title(){return this.config.host}resolveUrl(c){return Z(c)}resolveEditUrl(c){return ea(this.config,c)}};Qe(yt,"factory",({config:f})=>{var c;const ee=((c=f.getOptionalConfigArray("integrations.gitea"))!=null?c:[]).map(ke=>Cn(ke));return D(ee.map(ke=>new yt(ke)),ke=>ke.config.host)});let K=yt;const $="github.com",T="https://api.github.com",F="https://raw.githubusercontent.com";function V(f){var c,y;const ee=(c=f.getOptionalString("host"))!=null?c:$;let ke=f.getOptionalString("apiBaseUrl"),Ot=f.getOptionalString("rawBaseUrl");const Gt=f.getOptionalString("token"),rn=(y=f.getOptionalConfigArray("apps"))==null?void 0:y.map(Tn=>({appId:Tn.getNumber("appId"),clientId:Tn.getString("clientId"),clientSecret:Tn.getString("clientSecret"),webhookSecret:Tn.getString("webhookSecret"),privateKey:Tn.getString("privateKey"),allowedInstallationOwners:Tn.getOptionalStringArray("allowedInstallationOwners")}));if(!te(ee))throw new Error(`Invalid GitHub integration config, '${ee}' is not a valid host`);return ke?ke=(0,u.trimEnd)(ke,"/"):ee===$&&(ke=T),Ot?Ot=(0,u.trimEnd)(Ot,"/"):ee===$&&(Ot=F),{host:ee,apiBaseUrl:ke,rawBaseUrl:Ot,token:Gt,apps:rn}}function Ce(f){const c=f.map(V);return c.some(y=>y.host===$)||c.push({host:$,apiBaseUrl:T,rawBaseUrl:F}),c}function Re(f,c,y){try{const{owner:ee,name:ke,ref:Ot,filepathtype:Gt,filepath:rn}=parseGitUrl(f);if(!ee||!ke||!Ot||Gt!=="blob"&&Gt!=="raw"&&Gt!=="tree")throw new Error("Invalid GitHub URL or file path");const Tn=rn.replace(/^\//,"");return Ne(c,y)==="api"?`${c.apiBaseUrl}/repos/${ee}/${ke}/contents/${Tn}?ref=${Ot}`:`${c.rawBaseUrl}/${ee}/${ke}/${Ot}/${Tn}`}catch(ee){throw new Error(`Incorrect URL: ${f}, ${ee}`)}}function pe(f,c){const y={};return Ne(f,c)==="api"&&(y.Accept="application/vnd.github.v3.raw"),c.token&&(y.Authorization=`token ${c.token}`),{headers:y}}function Ne(f,c){return f.apiBaseUrl&&(c.token||!f.rawBaseUrl)?"api":"raw"}var tt=Object.defineProperty,_t=(f,c,y)=>c in f?tt(f,c,{enumerable:!0,configurable:!0,writable:!0,value:y}):f[c]=y,Ht=(f,c,y)=>(_t(f,typeof c!="symbol"?c+"":c,y),y);class en{constructor(){Ht(this,"tokenCache",new Map),Ht(this,"isExpired",c=>we.ou.local()>c)}async getOrCreateToken(c,y,ee){let ke=this.tokenCache.get(c);if((!ke||this.isExpired(ke.expiresAt))&&(ke=await ee(),ke.expiresAt=ke.expiresAt.minus({minutes:10}),this.tokenCache.set(c,ke)),!this.appliesToRepo(ke,y))throw new Error(`The Backstage GitHub application used in the ${c} organization does not have access to a repository with the name ${y}`);return{accessToken:ke.token}}appliesToRepo(c,y){return y===void 0?!0:c.repositories!==void 0?c.repositories.includes(y):!0}}const Xt={Accept:"application/vnd.github.machine-man-preview+json"};class mn{constructor(c,y){Ht(this,"appClient"),Ht(this,"baseUrl"),Ht(this,"baseAuthConfig"),Ht(this,"cache",new en),Ht(this,"allowedInstallationOwners"),this.allowedInstallationOwners=c.allowedInstallationOwners,this.baseUrl=y,this.baseAuthConfig={appId:c.appId,privateKey:c.privateKey.replace(/\\n/gm,`
`)},this.appClient=new We.v({baseUrl:y,headers:Xt,authStrategy:U.i,auth:this.baseAuthConfig})}async getInstallationCredentials(c,y){var ee;return this.allowedInstallationOwners&&!((ee=this.allowedInstallationOwners)!=null&&ee.includes(c))?{accessToken:void 0}:this.cache.getOrCreateToken(c,y,async()=>{var ke;const{installationId:Ot,suspended:Gt}=await this.getInstallationData(c);if(Gt)throw new Error(`The GitHub application for ${c} is suspended`);const rn=await this.appClient.apps.createInstallationAccessToken({installation_id:Ot,headers:Xt});let Tn;if(rn.data.repository_selection==="selected"){const Nn=new We.v({baseUrl:this.baseUrl,auth:rn.data.token}),Jn=await Nn.paginate(Nn.apps.listReposAccessibleToInstallation);Tn=((ke=Jn.repositories)!=null?ke:Jn).map(_a=>_a.name)}return{token:rn.data.token,expiresAt:we.ou.fromISO(rn.data.expires_at),repositories:Tn}})}getInstallations(){return this.appClient.paginate(this.appClient.apps.listInstallations)}async getInstallationData(c){const ee=(await this.getInstallations()).find(Ot=>{var Gt;return Ot.account&&"login"in Ot.account&&((Gt=Ot.account.login)==null?void 0:Gt.toLocaleLowerCase("en-US"))===c.toLocaleLowerCase("en-US")});if(ee)return{installationId:ee.id,suspended:Boolean(ee.suspended_by)};const ke=new Error(`No app installation found for ${c} in ${this.baseAuthConfig.appId}`);throw ke.name="NotFoundError",ke}}class _n{constructor(c){Ht(this,"apps");var y,ee;this.apps=(ee=(y=c.apps)==null?void 0:y.map(ke=>new mn(ke,c.apiBaseUrl)))!=null?ee:[]}async getAllInstallations(){return this.apps.length?(await Promise.all(this.apps.map(y=>y.getInstallations()))).flat():[]}async getAppToken(c,y){if(this.apps.length===0)return;const ee=await Promise.all(this.apps.map(rn=>rn.getInstallationCredentials(c,y).then(Tn=>({credentials:Tn,error:void 0}),Tn=>({credentials:void 0,error:Tn})))),ke=ee.find(rn=>{var Tn;return(Tn=rn.credentials)==null?void 0:Tn.accessToken});if(ke)return ke.credentials.accessToken;const Gt=ee.map(rn=>rn.error).find(rn=>(rn==null?void 0:rn.name)!=="NotFoundError");if(Gt)throw Gt}}const hn=class{constructor(c,y){this.githubAppCredentialsMux=c,this.token=y}async getCredentials(c){const y=m()(c.url),ee=y.owner||y.name,ke=y.owner?y.name:void 0;let Ot="app",Gt=await this.githubAppCredentialsMux.getAppToken(ee,ke);return Gt||(Ot="token",Gt=this.token),{headers:Gt?{Authorization:`Bearer ${Gt}`}:void 0,token:Gt,type:Ot}}};Ht(hn,"create",f=>new hn(new _n(f),f.token));let En=null;class bn{constructor(c){this.providers=c}static fromIntegrations(c){const y=new Map;return c.github.list().forEach(ee=>{const ke=En.create(ee.config);y.set(ee.config.host,ke)}),new bn(y)}async getCredentials(c){const y=new URL(c.url),ee=this.providers.get(y.host);if(!ee)throw new Error(`There is no GitHub integration that matches ${c.url}. Please add a configuration for an integration.`);return ee.getCredentials(c)}}var Ln=Object.defineProperty,qn=(f,c,y)=>c in f?Ln(f,c,{enumerable:!0,configurable:!0,writable:!0,value:y}):f[c]=y,Vn=(f,c,y)=>(qn(f,typeof c!="symbol"?c+"":c,y),y);const xn=class{constructor(c){this.integrationConfig=c}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){return $n(Z(c),"tree")}resolveEditUrl(c){return $n(c,"edit")}};Vn(xn,"factory",({config:f})=>{var c;const y=Ce((c=f.getOptionalConfigArray("integrations.github"))!=null?c:[]);return D(y.map(ee=>new xn(ee)),ee=>ee.config.host)});let Bn=xn;function $n(f,c){return f.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(y,ee,ke,Ot)=>`//${ee}/${ke}/${Ot}/${c}/`)}var yn=Object.defineProperty,Dn=(f,c,y)=>c in f?yn(f,c,{enumerable:!0,configurable:!0,writable:!0,value:y}):f[c]=y,pa=(f,c,y)=>(Dn(f,typeof c!="symbol"?c+"":c,y),y);const ga=null;class Ma extends Bn{constructor(c){super(c)}get config(){return super.config}}pa(Ma,"factory",Bn.factory);const Fa=null,Ga=null,er=null,Ba="gitlab.com",Va="https://gitlab.com/api/v4";function Ha(f){const c=f.getString("host");let y=f.getOptionalString("apiBaseUrl");const ee=f.getOptionalString("token");let ke=f.getOptionalString("baseUrl");if(y?y=(0,u.trimEnd)(y,"/"):c===Ba&&(y=Va),ke?ke=(0,u.trimEnd)(ke,"/"):ke=`https://${c}`,te(c)){if(!y||!q(y))throw new Error(`Invalid GitLab integration config, '${y}' is not a valid apiBaseUrl`);if(!q(ke))throw new Error(`Invalid GitLab integration config, '${ke}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${c}' is not a valid host`);return{host:c,token:ee,apiBaseUrl:y,baseUrl:ke}}function Ka(f){const c=f.map(Ha);return c.some(y=>y.host===Ba)||c.push({host:Ba,apiBaseUrl:Va,baseUrl:`https://${Ba}`}),c}function Ja(f){let c="";return f.host!==Ba&&(c=new URL(f.baseUrl).pathname),trimEnd(c,"/")}async function sr(f,c){const y=await Hn(f,c);return Za(f,y,c).toString()}function dr(f){const{token:c=""}=f;return{headers:{"PRIVATE-TOKEN":c}}}function Za(f,c,y){try{const ee=new URL(f),ke=ee.pathname.split("/blob/").slice(1).join("/blob/"),[Ot,...Gt]=ke.split("/"),rn=Ja(y);return ee.pathname=[...rn?[rn]:[],"api/v4/projects",c,"repository/files",encodeURIComponent(decodeURIComponent(Gt.join("/"))),"raw"].join("/"),ee.search=`?ref=${Ot}`,ee}catch(ee){throw new Error(`Incorrect url: ${f}, ${ee}`)}}async function Hn(f,c){const y=new URL(f);if(!y.pathname.includes("/blob/"))throw new Error("Please provide full path to yaml file from GitLab");try{let ee=y.pathname.split("/-/blob/")[0].split("/blob/")[0];const ke=Ja(c);ke&&(ee=ee.replace(ke,""));const Ot=new URL(`${y.origin}${ke}/api/v4/projects/${encodeURIComponent(ee.replace(/^\//,""))}`),Gt=await fetch(Ot.toString(),dr(c)),rn=await Gt.json();if(!Gt.ok)throw new Error(`GitLab Error '${rn.error}', ${rn.error_description}`);return Number(rn.id)}catch(ee){throw new Error(`Could not get GitLab project ID for: ${f}, ${ee}`)}}var Ea=Object.defineProperty,Ua=(f,c,y)=>c in f?Ea(f,c,{enumerable:!0,configurable:!0,writable:!0,value:y}):f[c]=y,tr=(f,c,y)=>(Ua(f,typeof c!="symbol"?c+"":c,y),y);const Ya=class{constructor(c){this.integrationConfig=c}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(c){return Z(c)}resolveEditUrl(c){return De(c,"edit")}};tr(Ya,"factory",({config:f})=>{var c;const y=Ka((c=f.getOptionalConfigArray("integrations.gitlab"))!=null?c:[]);return D(y.map(ee=>new Ya(ee)),ee=>ee.config.host)});let vt=Ya;function De(f,c){return f.replace(/\/\-\/(blob|tree|edit)\//,`/-/${c}/`)}var Ut=Object.defineProperty,Sn=(f,c,y)=>c in f?Ut(f,c,{enumerable:!0,configurable:!0,writable:!0,value:y}):f[c]=y,kn=(f,c,y)=>(Sn(f,typeof c!="symbol"?c+"":c,y),y);const ta=class{constructor(c){this.token=c}async getCredentials(c){return this.token?{headers:{Authorization:`Bearer ${this.token}`},token:this.token}:{}}};kn(ta,"create",f=>new ta(f.token));let ca=null;class Wa{constructor(c){this.providers=c}static fromIntegrations(c){const y=new Map;return c.gitlab.list().forEach(ee=>{const ke=ca.create(ee.config);y.set(ee.config.host,ke)}),new Wa(y)}async getCredentials(c){const y=new URL(c.url),ee=this.providers.get(y.host);if(!ee)throw new Error(`There is no GitLab integration that matches ${c.url}. Please add a configuration for an integration.`);return ee.getCredentials(c)}}function za(f){if(!f)return{};if(!f.has("clientEmail")&&!f.has("privateKey"))return{};const c=f.getString("privateKey").split("\\n").join(`
`);return{clientEmail:f.getString("clientEmail"),privateKey:c}}var Aa=Object.defineProperty,Ia=(f,c,y)=>c in f?Aa(f,c,{enumerable:!0,configurable:!0,writable:!0,value:y}):f[c]=y,La=(f,c,y)=>(Ia(f,typeof c!="symbol"?c+"":c,y),y);class nr{constructor(c){La(this,"byType"),this.byType=c}static fromConfig(c){return new nr({awsS3:b.factory({config:c}),azure:le.factory({config:c}),bitbucket:Xe.factory({config:c}),bitbucketCloud:Pt.factory({config:c}),bitbucketServer:ze.factory({config:c}),gerrit:sa.factory({config:c}),github:Bn.factory({config:c}),gitlab:vt.factory({config:c}),gitea:K.factory({config:c})})}get awsS3(){return this.byType.awsS3}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}list(){return Object.values(this.byType).flatMap(c=>c.list())}byUrl(c){let y=Object.values(this.byType).map(ee=>ee.byUrl(c)).filter(Boolean);if(y.length>1){const ee=y.filter(ke=>!(ke instanceof Xe));ee.length!==0&&(y=ee)}return y[0]}byHost(c){return Object.values(this.byType).map(y=>y.byHost(c)).find(Boolean)}resolveUrl(c){const y=this.byUrl(c.base);return y?y.resolveUrl(c):Z(c)}resolveEditUrl(c){const y=this.byUrl(c);return y?y.resolveEditUrl(c):c}}},4525:(Rn,kt,e)=>{"use strict";e.d(kt,{k:()=>we});var r=e(61877),m=Object.defineProperty,u=(a,te,q)=>te in a?m(a,te,{enumerable:!0,configurable:!0,writable:!0,value:q}):a[te]=q,W=(a,te,q)=>(u(a,typeof te!="symbol"?te+"":te,q),q);class A{constructor({defer:te=!1}){W(this,"queue"),this.queue=te?[]:void 0}setReady(){this.queue&&(this.queue.forEach(this.sendDeferred),this.queue=void 0)}event(te,q={}){const D={...te,...q};if(this.queue){this.queue.push({hitType:te.action,data:{...D,timestamp_micros:Date.now()*1e3}});return}r.ZP.event(te.action,D)}sendDeferred(te){r.ZP.event(te.hitType,{...te.data})}}var o=Object.defineProperty,U=(a,te,q)=>te in a?o(a,te,{enumerable:!0,configurable:!0,writable:!0,value:q}):a[te]=q,We=(a,te,q)=>(U(a,typeof te!="symbol"?te+"":te,q),q);class we{constructor(te){We(this,"customUserIdTransform"),We(this,"capture"),We(this,"contentGroupBy"),We(this,"allowedContexts"),We(this,"allowedAttributes");const{identity:q,measurementId:D,identityApi:Z,userIdTransform:Le="sha-256",testMode:ie,debug:re,enableSendPageView:Q,contentGroupBy:H,allowedContexts:S,allowedAttributes:l}=te;r.ZP.initialize(D,{testMode:ie,gaOptions:{debug_mode:re},gtagOptions:{debug_mode:re,send_page_view:Q}}),this.contentGroupBy=H,this.allowedAttributes=l,this.allowedContexts=S,this.capture=new A({defer:q==="required"}),this.customUserIdTransform=typeof Le=="function"?Le:void 0,q!=="disabled"&&Z&&this.setUserFrom(Z).then(()=>{})}static fromConfig(te,q={}){var D,Z,Le;const ie=te.getString("app.analytics.ga4.measurementId"),re=te.getOptionalString("app.analytics.ga4.identity")||"disabled",Q=(D=te.getOptionalBoolean("app.analytics.ga4.debug"))!=null?D:!1,H=(Z=te.getOptionalBoolean("app.analytics.ga4.enableSendPageView"))!=null?Z:!1,S=(Le=te.getOptionalBoolean("app.analytics.ga4.testMode"))!=null?Le:!1,l=te.getOptionalString("app.analytics.ga4.contentGrouping"),b=te.getOptionalStringArray("app.analytics.ga4.allowedContexts"),h=te.getOptionalStringArray("app.analytics.ga4.allowedAttributes");if(re==="required"&&!q.identityApi)throw new Error("Invalid config: identity API must be provided to deps when ga4.identity is required");return new we({...q,identity:re,measurementId:ie,testMode:S,debug:Q,enableSendPageView:H,contentGroupBy:l,allowedContexts:b,allowedAttributes:h})}captureEvent(te){const{context:q,action:D,subject:Z,value:Le,attributes:ie}=te,re=this.setEventParameters(q,ie);if(this.contentGroupBy&&(re.content_group=q[this.contentGroupBy]),D==="navigate"&&q.extension==="App"){this.capture.event({category:q.extension||"App",action:"page_view",label:Z,value:Le},re);return}D==="search"&&(re.search_term=Z),this.capture.event({category:q.extension||"App",action:D,label:Z,value:Le},re)}setEventParameters(te,q={}){var D,Z;const Le={},ie=((D=this.allowedContexts)==null?void 0:D.join(""))==="*"?Object.keys(te):this.allowedContexts;ie==null||ie.forEach(Q=>{te[Q]&&(Le[`c_${Q}`]=te[Q])});const re=((Z=this.allowedAttributes)==null?void 0:Z.join(""))==="*"?Object.keys(q):this.allowedAttributes;return re==null||re.forEach(Q=>{q[Q]&&(Le[`a_${Q}`]=q[Q])}),Le}async setUserFrom(te){const{userEntityRef:q}=await te.getBackstageIdentity(),D=await this.getPrivateUserId(q);r.ZP.set({user_id:D}),this.capture.setReady()}getPrivateUserId(te){return this.customUserIdTransform?this.customUserIdTransform(te):this.hash(te)}async hash(te){const q=await window.crypto.subtle.digest("sha-256",new TextEncoder().encode(te));return Array.from(new Uint8Array(q)).map(Z=>Z.toString(16).padStart(2,"0")).join("")}}},71900:(Rn,kt,e)=>{"use strict";e.d(kt,{Cy:()=>X,DC:()=>Me,OO:()=>ut,RE:()=>ye,XQ:()=>xt,Yq:()=>nt,ap:()=>Wt,bM:()=>Kt,cm:()=>Zt,d1:()=>L,fP:()=>ge,fe:()=>O,gC:()=>et,hK:()=>se,hs:()=>B,nE:()=>Te,x1:()=>rt,zJ:()=>w});var r=e(2784),m=e(73557),u=e(49558),W=e(30705),A=e(57032),o=e(33394),U=e(73495),We=e(78373),we=e(99688),a=e(13737),te=e(60364),q=e(90436),D=e(79692),Z=e(95544),Le=e(8629),ie=e(79249),re=e(38724),Q=e(99152),H=e(6487),S=e(49429),l=e(77277),b=e(34520),h=e(15933);const C=(0,W.NT)({id:"api-docs"}),p=(0,W.x8)({id:"register-component",optional:!0}),be=[o.C.columns.createTitleColumn({hidden:!0}),o.C.columns.createNameColumn({defaultKind:"API"}),o.C.columns.createSystemColumn(),o.C.columns.createOwnerColumn(),o.C.columns.createSpecTypeColumn(),o.C.columns.createSpecLifecycleColumn(),o.C.columns.createMetadataDescriptionColumn(),o.C.columns.createTagsColumn()],ge=fe=>{var Ae;const{initiallySelectedFilter:Xe="all",columns:St,actions:pt}=fe,Dt=`${(Ae=(0,A.u)(A.p).getOptionalString("organization.name"))!=null?Ae:"Backstage"} API Explorer`,$e=(0,W.tg)(p);return r.createElement(u.g9,{themeId:"apis",title:"APIs",subtitle:Dt,pageTitleOverride:"APIs"},r.createElement(u.VY,null,r.createElement(u.yW,{title:""},r.createElement(u.XF,{title:"Register Existing API",to:$e==null?void 0:$e()}),r.createElement(u.qt,null,"All your APIs")),r.createElement(U.UO,null,r.createElement(U._i,null,r.createElement(U._i.Filters,null,r.createElement(U.tW,{initialFilter:"api",hidden:!0}),r.createElement(U.sL,null),r.createElement(U.EW,{initialFilter:Xe}),r.createElement(U.dq,null),r.createElement(U.df,null),r.createElement(U.xE,null)),r.createElement(U._i.Content,null,r.createElement(o.C,{columns:St||be,actions:pt}))))))},ye=fe=>(0,m.pC)()||r.createElement(ge,{...fe}),ne=(0,A.c)({id:"plugin.api-docs.config"}),oe=fe=>r.createElement(u.Oi,{text:fe.definition,language:fe.language,showCopyCodeButton:!0}),X=()=>{var fe;const{entity:Ae}=(0,We.u)(),Xe=(0,A.u)(ne),{getApiDefinitionWidget:St}=Xe;if(!Ae)return r.createElement(we.Z,{severity:"error"},"Could not fetch the API");const pt=St(Ae),Tt=(fe=Ae.metadata.title)!=null?fe:Ae.metadata.name;return pt?r.createElement(u.oZ,{title:Tt},r.createElement(u.hB,{label:pt.title,key:"widget"},pt.component(Ae.spec.definition)),r.createElement(u.hB,{label:"Raw",key:"raw"},r.createElement(oe,{definition:Ae.spec.definition,language:pt.rawLanguage||Ae.spec.type}))):r.createElement(u.oZ,{title:Tt,children:[r.createElement(u.hB,{label:Ae.spec.type,key:"raw"},r.createElement(oe,{definition:Ae.spec.definition,language:Ae.spec.type}))]})},xe=r.lazy(()=>Promise.all([e.e(1978),e.e(7639),e.e(8847),e.e(4908)]).then(e.bind(e,24908)).then(fe=>({default:fe.AsyncApiDefinition}))),It=fe=>r.createElement(r.Suspense,{fallback:r.createElement(u.Ex,null)},r.createElement(xe,{...fe})),P=r.lazy(()=>e.e(4526).then(e.bind(e,64526)).then(fe=>({default:fe.GraphQlDefinition}))),Jt=fe=>r.createElement(r.Suspense,{fallback:r.createElement(u.Ex,null)},r.createElement(P,{...fe})),me=r.lazy(()=>Promise.all([e.e(1978),e.e(7639),e.e(1617)]).then(e.bind(e,21617)).then(fe=>({default:fe.OpenApiDefinition}))),Lt=fe=>r.createElement(r.Suspense,{fallback:r.createElement(u.Ex,null)},r.createElement(me,{...fe})),Ct=fe=>{const Ae=(0,te.Z)();return r.createElement(u.Oi,{customStyle:{backgroundColor:Ae.palette.background.default},text:fe.definition,language:"protobuf",showCopyCodeButton:!0})},je=fe=>{const{definition:Ae}=fe,Xe=(0,te.Z)();return r.createElement(u.Oi,{customStyle:{backgroundColor:Xe.palette.background.default},text:Ae,language:"typescript",showCopyCodeButton:!0})};function nt(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:fe=>r.createElement(Lt,{definition:fe})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:fe=>r.createElement(It,{definition:fe})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:fe=>r.createElement(Jt,{definition:fe})},{type:"grpc",title:"gRPC",component:fe=>r.createElement(Ct,{definition:fe})},{type:"trpc",title:"tRPC",component:fe=>r.createElement(je,{definition:fe})}]}const Te=fe=>{const{apiEntity:Ae}=fe,St=(0,A.u)(ne).getApiDefinitionWidget(Ae),pt=St?St.title:Ae.spec.type;return r.createElement(q.Z,{component:"span"},pt)},gt=(0,D.Z)(fe=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",height:"100%"},tabs:{borderRight:`1px solid ${fe.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"},title:{color:fe.palette.text.primary,wordBreak:"break-word",fontSize:fe.typography.h3.fontSize,marginBottom:0},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:fe.spacing(1),color:fe.palette.text.primary}}));function de(fe){const{children:Ae,value:Xe,index:St,...pt}=fe,Tt=gt();return r.createElement("div",{role:"tabpanel",hidden:Xe!==St,id:`vertical-tabpanel-${St}`,"aria-labelledby":`vertical-tab-${St}`,className:Tt.tabContents,...pt},Xe===St&&r.createElement(Z.Z,{pl:3,pr:3},Ae))}function G(fe){return{id:`vertical-tab-${fe}`,"aria-controls":`vertical-tabpanel-${fe}`}}function Pe(fe){var Ae,Xe,St;const{open:pt,entity:Tt,onClose:Dt}=fe,[$e,ot]=r.useState(0),Bt=gt();(0,r.useEffect)(()=>{ot(0)},[pt]);const Je=(0,A.u)(ne).getApiDefinitionWidget(Tt);let Ee=0,it=0;return r.createElement(Le.Z,{fullWidth:!0,maxWidth:"xl",open:pt,onClose:Dt,"aria-labelledby":"api-definition-dialog-title",PaperProps:{className:Bt.fullHeightDialog}},r.createElement(ie.Z,{id:"api-definition-dialog-title",disableTypography:!0},r.createElement(q.Z,{className:Bt.type},"API - ",(Ae=Je==null?void 0:Je.title)!=null?Ae:"Raw"),r.createElement(q.Z,{className:Bt.title,variant:"h1"},(Xe=Tt.metadata.title)!=null?Xe:Tt.metadata.name)),r.createElement(re.Z,{dividers:!0,className:Bt.root},r.createElement(Q.Z,{orientation:"vertical",variant:"scrollable",value:$e,onChange:(at,Pt)=>ot(Pt),"aria-label":"API definition options",className:Bt.tabs},Je?r.createElement(H.Z,{label:Je.title,...G(Ee++)}):null,r.createElement(H.Z,{label:"Raw",...G(Ee++)})),Je?r.createElement(de,{value:$e,index:it++},Je.component(Tt.spec.definition)):null,r.createElement(de,{value:$e,index:it++},r.createElement(oe,{definition:Tt.spec.definition,language:(St=Je==null?void 0:Je.rawLanguage)!=null?St:Tt.spec.type}))),r.createElement(S.Z,null,r.createElement(l.Z,{onClick:Dt,color:"primary"},"Close")))}function ce(){return{title:"Type",field:"spec.type",render:fe=>r.createElement(Te,{apiEntity:fe})}}const le=({apiEntity:fe})=>{const[Ae,Xe]=(0,r.useState)(!1);return r.createElement(r.Fragment,null,r.createElement(a.Z,{"aria-label":"Toggle API Definition Dialog",onClick:()=>Xe(!Ae)},r.createElement(h.Z,null)),r.createElement(Pe,{entity:fe,open:Ae,onClose:()=>Xe(!1)}))};function Be(){return{title:"API Definition",render:fe=>r.createElement(le,{apiEntity:fe})}}const st=[U.u3.columns.createEntityRefColumn({defaultKind:"API"}),U.u3.columns.createSystemColumn(),U.u3.columns.createOwnerColumn(),ce(),U.u3.columns.createSpecLifecycleColumn(),U.u3.columns.createMetadataDescriptionColumn(),Be()],Kt=fe=>{const{variant:Ae="gridItem",columns:Xe=st}=fe,{entity:St}=(0,We.u)(),{entities:pt,loading:Tt,error:Dt}=(0,U.eK)(St,{type:b.Dg});return Tt?r.createElement(u.rJ,{variant:Ae,title:"Consumed APIs"},r.createElement(u.Ex,null)):Dt||!pt?r.createElement(u.rJ,{variant:Ae,title:"Consumed APIs"},r.createElement(u.GB,{severity:"error",title:"Could not load APIs",message:r.createElement(u.Oi,{text:`${Dt}`,language:"text"})})):r.createElement(U.u3,{title:"Consumed APIs",variant:Ae,emptyContent:r.createElement("div",{style:{textAlign:"center"}},r.createElement(q.Z,{variant:"body1"},"This ",St.kind.toLocaleLowerCase("en-US")," does not consume any APIs."),r.createElement(q.Z,{variant:"body2"},r.createElement(u.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:Xe,entities:pt})},ct=[U.u3.columns.createEntityRefColumn({defaultKind:"API"}),U.u3.columns.createOwnerColumn(),ce(),U.u3.columns.createSpecLifecycleColumn(),U.u3.columns.createMetadataDescriptionColumn()],Zt=fe=>{const{variant:Ae="gridItem",columns:Xe=ct}=fe,{entity:St}=(0,We.u)(),{entities:pt,loading:Tt,error:Dt}=(0,U.eK)(St,{type:b.aS,kind:"API"});return Tt?r.createElement(u.rJ,{variant:Ae,title:"APIs"},r.createElement(u.Ex,null)):Dt||!pt?r.createElement(u.rJ,{variant:Ae,title:"APIs"},r.createElement(u.GB,{severity:"error",title:"Could not load APIs",message:r.createElement(u.Oi,{text:`${Dt}`,language:"text"})})):r.createElement(U.u3,{title:"APIs",variant:Ae,emptyContent:r.createElement("div",{style:{textAlign:"center"}},r.createElement(q.Z,{variant:"body1"},"This ",St.kind.toLocaleLowerCase("en-US")," does not contain any APIs."),r.createElement(q.Z,{variant:"body2"},r.createElement(u.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api"},"Learn how to change this."))),columns:Xe,entities:pt})},O=fe=>{const{variant:Ae="gridItem",columns:Xe=st}=fe,{entity:St}=(0,We.u)(),{entities:pt,loading:Tt,error:Dt}=(0,U.eK)(St,{type:b.M_});return Tt?r.createElement(u.rJ,{variant:Ae,title:"Provided APIs"},r.createElement(u.Ex,null)):Dt||!pt?r.createElement(u.rJ,{variant:Ae,title:"Provided APIs"},r.createElement(u.GB,{severity:"error",title:"Could not load APIs",message:r.createElement(u.Oi,{text:`${Dt}`,language:"text"})})):r.createElement(U.u3,{title:"Provided APIs",variant:Ae,emptyContent:r.createElement("div",{style:{textAlign:"center"}},r.createElement(q.Z,{variant:"body1"},"This ",St.kind.toLocaleLowerCase("en-US")," does not provide any APIs."),r.createElement(q.Z,{variant:"body2"},r.createElement(u.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:Xe,entities:pt})},B=fe=>{const{variant:Ae="gridItem"}=fe,{entity:Xe}=(0,We.u)(),{entities:St,loading:pt,error:Tt}=(0,U.eK)(Xe,{type:b.X9});return pt?r.createElement(u.rJ,{variant:Ae,title:"Consumers"},r.createElement(u.Ex,null)):Tt||!St?r.createElement(u.rJ,{variant:Ae,title:"Consumers"},r.createElement(u.GB,{severity:"error",title:"Could not load components",message:r.createElement(u.Oi,{text:`${Tt}`,language:"text"})})):r.createElement(U.u3,{title:"Consumers",variant:Ae,emptyContent:r.createElement("div",{style:{textAlign:"center"}},r.createElement(q.Z,{variant:"body1"},"No component consumes this API."),r.createElement(q.Z,{variant:"body2"},r.createElement(u.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:U.u3.componentEntityColumns,entities:St})},w=fe=>{const{variant:Ae="gridItem"}=fe,{entity:Xe}=(0,We.u)(),{entities:St,loading:pt,error:Tt}=(0,U.eK)(Xe,{type:b.Zj});return pt?r.createElement(u.rJ,{variant:Ae,title:"Providers"},r.createElement(u.Ex,null)):Tt||!St?r.createElement(u.rJ,{variant:Ae,title:"Providers"},r.createElement(u.GB,{severity:"error",title:"Could not load components",message:r.createElement(u.Oi,{text:`${Tt}`,language:"text"})})):r.createElement(U.u3,{title:"Providers",variant:Ae,emptyContent:r.createElement("div",{style:{textAlign:"center"}},r.createElement(q.Z,{variant:"body1"},"No component provides this API."),r.createElement(q.Z,{variant:"body2"},r.createElement(u.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:U.u3.componentEntityColumns,entities:St})},L=(0,W.rx)({id:"api-docs",routes:{root:C},apis:[(0,W.ni)({api:ne,deps:{},factory:()=>{const fe=nt();return{getApiDefinitionWidget:Ae=>fe.find(Xe=>Xe.type===Ae.spec.type)}}})],externalRoutes:{registerApi:p}}),se=L.provide((0,W.P4)({name:"ApiExplorerPage",component:()=>e.e(6868).then(e.bind(e,36868)).then(fe=>fe.ApiExplorerIndexPage),mountPoint:C})),Me=L.provide((0,W.CO)({name:"EntityApiDefinitionCard",component:{lazy:()=>e.e(3895).then(e.bind(e,53895)).then(fe=>fe.ApiDefinitionCard)}})),rt=L.provide((0,W.CO)({name:"EntityConsumedApisCard",component:{lazy:()=>e.e(8359).then(e.bind(e,68359)).then(fe=>fe.ConsumedApisCard)}})),xt=L.provide((0,W.CO)({name:"EntityConsumingComponentsCard",component:{lazy:()=>e.e(7771).then(e.bind(e,7771)).then(fe=>fe.ConsumingComponentsCard)}})),ut=L.provide((0,W.CO)({name:"EntityProvidedApisCard",component:{lazy:()=>e.e(8359).then(e.bind(e,68359)).then(fe=>fe.ProvidedApisCard)}})),et=L.provide((0,W.CO)({name:"EntityProvidingComponentsCard",component:{lazy:()=>e.e(7771).then(e.bind(e,7771)).then(fe=>fe.ProvidingComponentsCard)}})),Wt=L.provide((0,W.CO)({name:"EntityHasApisCard",component:{lazy:()=>e.e(8359).then(e.bind(e,68359)).then(fe=>fe.HasApisCard)}}))},7730:(Rn,kt,e)=>{"use strict";e.d(kt,{KB:()=>we,Kt:()=>U,Mi:()=>A,Ob:()=>te,Q:()=>r,_7:()=>We,hD:()=>m,lA:()=>a,mJ:()=>u,nm:()=>W,vC:()=>q});var r=(D=>(D[D.None=0]="None",D[D.Succeeded=2]="Succeeded",D[D.PartiallySucceeded=4]="PartiallySucceeded",D[D.Failed=8]="Failed",D[D.Canceled=32]="Canceled",D))(r||{}),m=(D=>(D[D.None=0]="None",D[D.InProgress=1]="InProgress",D[D.Completed=2]="Completed",D[D.Cancelling=4]="Cancelling",D[D.Postponed=8]="Postponed",D[D.NotStarted=32]="NotStarted",D[D.All=47]="All",D))(m||{}),u=(D=>(D[D.NotSet=0]="NotSet",D[D.Active=1]="Active",D[D.Abandoned=2]="Abandoned",D[D.Completed=3]="Completed",D[D.All=4]="All",D))(u||{}),W=(D=>(D[D.Queued=0]="Queued",D[D.Running=1]="Running",D[D.Approved=2]="Approved",D[D.Rejected=3]="Rejected",D[D.NotApplicable=4]="NotApplicable",D[D.Broken=5]="Broken",D))(W||{}),A=(D=>(D.Build="Build",D.Status="Status",D.MinimumReviewers="MinimumReviewers",D.Comments="Comments",D.RequiredReviewers="RequiredReviewers",D.MergeStrategy="MergeStrategy",D))(A||{}),o=(D=>(D.Build="0609b952-1397-4640-95ec-e00a01b2c241",D.Status="cbdc66da-9728-4af8-aada-9a5a32e4a226",D.MinimumReviewers="fa4e907d-c16b-4a4c-9dfa-4906e5d171dd",D.Comments="c6a1889d-b943-4856-b76f-9e46bb6b0df2",D.RequiredReviewers="fd2167ab-b0be-447a-8ec8-39368250530e",D.MergeStrategy="fa4e907d-c16b-4a4c-9dfa-4916e5d171ab",D))(o||{}),U=(D=>(D[D.Approved=10]="Approved",D[D.ApprovedWithSuggestions=5]="ApprovedWithSuggestions",D[D.NoVote=0]="NoVote",D[D.WaitingForAuthor=-5]="WaitingForAuthor",D[D.Rejected=-10]="Rejected",D))(U||{});const We="dev.azure.com/build-definition",we="dev.azure.com/host-org",a="dev.azure.com/project",te="dev.azure.com/project-repo",q=10},12510:(Rn,kt,e)=>{"use strict";e.d(kt,{A:()=>de,E:()=>je,F:()=>G,P:()=>$t,a:()=>P,f:()=>me});var r=e(30705),m=e(57032),u=e(32272),W=e(7730),A=e(2784),o=e(72379),U=e(94339),We=e(32552),we=e(24579),a=e(15459),te=e(27556),q=e(76600),D=e(90436),Z=e(49558),Le=e(26228),ie=e(75951),re=e.n(ie),Q=e(98977),H=e(79692),S=e(49166),l=e(81285),b=e(72493),h=e(64279),C=e(77446),p=e(70218);const be=(0,r.NT)({id:"azure-pull-request-dashboard"}),ge=(0,r.NT)({id:"azure-pipelines-entity-content"}),ye=(0,r.NT)({id:"azure-git-tags-entity-content"}),ne=(0,r.NT)({id:"azure-pull-requests-entity-content"});var oe=Object.defineProperty,X=(j,he,ze)=>he in j?oe(j,he,{enumerable:!0,configurable:!0,writable:!0,value:ze}):j[he]=ze,xe=(j,he,ze)=>(X(j,typeof he!="symbol"?he+"":he,ze),ze);class It{constructor(he){xe(this,"discoveryApi"),xe(this,"identityApi"),this.discoveryApi=he.discoveryApi,this.identityApi=he.identityApi}async getRepoBuilds(he,ze,ht,sn,Qt){const x=new URLSearchParams;Qt!=null&&Qt.top&&x.append("top",Qt.top.toString()),ht&&x.append("host",ht),sn&&x.append("org",sn);const Y=`repo-builds/${encodeURIComponent(he)}/${encodeURIComponent(ze)}?${x}`;return{items:await this.get(Y)}}async getGitTags(he,ze,ht,sn){const Qt=new URLSearchParams;ht&&Qt.append("host",ht),sn&&Qt.append("org",sn);const x=`git-tags/${encodeURIComponent(he)}/${encodeURIComponent(ze)}?${Qt}`;return{items:await this.get(x)}}async getPullRequests(he,ze,ht,sn,Qt){const x=new URLSearchParams;Qt!=null&&Qt.top&&x.append("top",Qt.top.toString()),Qt!=null&&Qt.status&&x.append("status",Qt.status.toString()),ht&&x.append("host",ht),sn&&x.append("org",sn);const Y=`pull-requests/${encodeURIComponent(he)}/${encodeURIComponent(ze)}?${x}`;return{items:await this.get(Y)}}getDashboardPullRequests(he){return this.get(`dashboard-pull-requests/${he}?top=100`)}getAllTeams(){return this.get("all-teams")}getUserTeamIds(he){return this.get(`users/${he}/team-ids`)}async getBuildRuns(he,ze,ht,sn,Qt,x){const Y=new URLSearchParams;if(ze&&Y.append("repoName",ze),sn&&Y.append("host",sn),Qt&&Y.append("org",Qt),ht){const zt=ht.split(",");if(zt.length>1){const Ft=[];for(const gn of zt){Y.set("definitionName",gn.trim()),x!=null&&x.top&&Y.set("top",x.top.toString());const cn=`builds/${encodeURIComponent(he)}?${Y}`,An=await this.get(cn);Ft.push(...An)}return{items:Ft}}Y.append("definitionName",ht.trim())}x!=null&&x.top&&Y.append("top",x.top.toString());const Ye=`builds/${encodeURIComponent(he)}?${Y}`;return{items:await this.get(Ye)}}async getReadme(he){const ze=new URLSearchParams;return he.host&&ze.append("host",he.host),he.org&&ze.append("org",he.org),await this.get(`readme/${encodeURIComponent(he.project)}/${encodeURIComponent(he.repo)}?${ze}`)}async get(he){const ze=`${await this.discoveryApi.getBaseUrl("azure-devops")}/`,ht=new URL(he,ze),{token:sn}=await this.identityApi.getCredentials(),Qt=await fetch(ht.toString(),{headers:sn?{Authorization:`Bearer ${sn}`}:{}});if(!Qt.ok)throw await u.VL.fromResponse(Qt);return Qt.json()}}const P=(0,m.c)({id:"plugin.azure-devops.service"}),Jt=j=>{var he;return Boolean((he=j.metadata.annotations)==null?void 0:he[AZURE_DEVOPS_REPO_ANNOTATION])},me=j=>{var he,ze,ht;return Boolean((he=j.metadata.annotations)==null?void 0:he[W.Ob])||Boolean((ze=j.metadata.annotations)==null?void 0:ze[W.lA])&&Boolean((ht=j.metadata.annotations)==null?void 0:ht[W._7])},Lt=(0,r.rx)({id:"azureDevOps",apis:[(0,r.ni)({api:P,deps:{discoveryApi:m.q,identityApi:m.t},factory:({discoveryApi:j,identityApi:he})=>new It({discoveryApi:j,identityApi:he})})]}),Ct=Lt.provide((0,r.P4)({name:"AzurePullRequestsPage",component:()=>e.e(7999).then(e.bind(e,7999)).then(j=>j.PullRequestsPage),mountPoint:be})),je=Lt.provide((0,r.P4)({name:"EntityAzurePipelinesContent",component:()=>e.e(6090).then(e.bind(e,96090)).then(j=>j.EntityPageAzurePipelines),mountPoint:ge})),nt=Lt.provide((0,r.P4)({name:"EntityAzureGitTagsContent",component:()=>e.e(2008).then(e.bind(e,12008)).then(j=>j.EntityPageAzureGitTags),mountPoint:ye})),Te=Lt.provide((0,r.P4)({name:"EntityAzurePullRequestsContent",component:()=>e.e(9423).then(e.bind(e,69423)).then(j=>j.EntityPageAzurePullRequests),mountPoint:ne})),gt=Lt.provide((0,r.CO)({name:"EntityAzureReadmeCard",component:{lazy:()=>e.e(4439).then(e.bind(e,94439)).then(j=>j.ReadmeCard)}})),de=j=>A.createElement(o.Z,{...j,viewBox:"0 0 512 512"},A.createElement("circle",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",cx:"128",cy:"416",r:"48"}),A.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M128 144v224M288 160l-64-64 64-64"}),A.createElement("circle",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",cx:"128",cy:"96",r:"48"}),A.createElement("circle",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",cx:"384",cy:"416",r:"48"}),A.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M240 96h84a60 60 0 0160 60v212"}));var G=(j=>(j.All="All",j.AssignedToUser="AssignedToUser",j.AssignedToCurrentUser="AssignedToCurrentUser",j.AssignedToTeam="AssignedToTeam",j.AssignedToTeams="AssignedToTeams",j.AssignedToCurrentUsersTeams="AssignedToCurrentUsersTeams",j.CreatedByUser="CreatedByUser",j.CreatedByCurrentUser="CreatedByCurrentUser",j.CreatedByTeam="CreatedByTeam",j.CreatedByTeams="CreatedByTeams",j.CreatedByCurrentUsersTeams="CreatedByCurrentUsersTeams",j))(G||{});function Pe(){return j=>!0}function ce(j,he){return new Set(j).has(he)}function le(j,he,ze=!1){return ze?ce(j.map(ht=>ht==null?void 0:ht.toLocaleLowerCase("en-US")),he==null?void 0:he.toLocaleLowerCase("en-US")):ce(j,he)}function Be(j,he){return j.toLocaleLowerCase("en-US")===he.toLocaleLowerCase("en-US")}function st(j){return he=>{var ze;const ht=(ze=he.reviewers)==null?void 0:ze.map(sn=>sn.id);return ht?le(ht,j.teamId,!0):!1}}function Kt(j){const he=j.teamIds;return ze=>he?he.some(ht=>st({type:G.AssignedToTeam,teamId:ht})(ze)):!1}function ct(j){const he=j.email;return ze=>{var ht;const sn=(ht=ze.reviewers)==null?void 0:ht.map(Qt=>Qt.uniqueName);return!he||!sn?!1:le(sn,he,!0)}}function Zt(j){return he=>{var ze,ht;const[sn,Qt]="teamId"in j?[(ze=he.createdBy)==null?void 0:ze.teamIds,j.teamId]:[(ht=he.createdBy)==null?void 0:ht.teamNames,j.teamName];return sn?le(sn,Qt,!0):!1}}function O(j){return he=>{if("teamNames"in j){const ht=j.teamNames;return ht?ht.some(sn=>Zt({type:G.CreatedByTeam,teamName:sn})(he)):!1}const ze=j.teamIds;return ze?ze.some(ht=>Zt({type:G.CreatedByTeam,teamId:ht})(he)):!1}}function B(j){const he=j.email;return ze=>{var ht;const sn=(ht=ze.createdBy)==null?void 0:ht.uniqueName;return!he||!sn?!1:Be(he,sn)}}function w(j){const he=ze=>{switch(ze.type){case G.AssignedToUser:case G.AssignedToCurrentUser:return ct(ze);case G.CreatedByUser:case G.CreatedByCurrentUser:return B(ze);case G.AssignedToTeam:return st(ze);case G.CreatedByTeam:return Zt(ze);case G.AssignedToTeams:case G.AssignedToCurrentUsersTeams:return Kt(ze);case G.CreatedByTeams:case G.CreatedByCurrentUsersTeams:return O(ze);case G.All:return Pe();default:return ht=>!1}};return Array.isArray(j)?j.length===1?he(j[0]):ze=>j.every(ht=>he(ht)(ze)):he(j)}function L(j){return j.voteStatus===W.Kt.NoVote?!!j.isRequired:!j.isContainer}function se(j,he){const ze=[];for(let ht=0;ht-ze.length<j.length;ht++){const sn=ht-ze.length,Qt=j[sn];he(Qt)&&(j.splice(sn,1),ze.push(Qt))}return ze}function Me(j,he){if(!j)return;const ze=[...j],ht=[];return he.forEach(({title:sn,filter:Qt,simplified:x})=>{const Y=se(ze,Qt);ht.push({title:sn,pullRequests:Y,simplified:x})}),ht}function rt(j,he){return j.map(ze=>{const ht=he(ze.filters);return{title:ze.title,filter:w(ht),simplified:ze.simplified}})}const xt=(0,H.Z)(j=>({root:he=>({color:he.hasAutoComplete?j.palette.success.main:j.palette.grey[400]})})),ut=j=>{const he=xt(j);return A.createElement(Q.Z,{className:he.root})},et=(0,a.Z)(j=>({root:{color:j.palette.info.main}}),{name:"PolicyRequiredIcon"})(b.Z),Wt=(0,a.Z)(j=>({root:{color:j.palette.error.main}}),{name:"PolicyIssueIcon"})(S.Z),fe=(0,a.Z)(j=>({root:{color:j.palette.info.main}}),{name:"PolicyInProgressIcon"})(l.Z);function Ae(j){switch(j.type){case W.Mi.Build:switch(j.status){case W.nm.Running:return A.createElement(fe,null);case W.nm.Rejected:return A.createElement(Wt,null);case W.nm.Queued:return A.createElement(et,null);default:return null}case W.Mi.MinimumReviewers:case W.Mi.RequiredReviewers:return A.createElement(et,null);case W.Mi.Status:case W.Mi.Comments:return A.createElement(Wt,null);default:return null}}const Xe=(0,q.Z)("div")({display:"flex",alignItems:"center",flexWrap:"wrap"}),St=({policy:j})=>A.createElement(Xe,null,Ae(j)," ",A.createElement(D.Z,{component:"span"},j.text)),pt=({policies:j,className:he})=>A.createElement("div",{className:he},j.map(ze=>A.createElement(St,{key:ze.id,policy:ze}))),Tt=({reviewer:j})=>A.createElement(Z.qE,{displayName:j.displayName,picture:j.imageUrl,customStyles:{width:"2.5rem",height:"2.5rem",fontSize:"1rem",border:"0.3rem solid silver"}}),Dt=(0,q.Z)("div")({"& > *":{marginTop:4,marginBottom:4}}),$e=({reviewers:j})=>A.createElement(Dt,null,j.filter(L).map(he=>A.createElement(Tt,{key:he.id,reviewer:he}))),ot=(0,H.Z)(j=>({card:{backgroundColor:j.palette.type==="dark"?j.palette.grey[700]:j.palette.common.white},cardHeaderSimplified:{paddingBottom:j.spacing(2)},cardHeaderAction:{display:"flex",alignSelf:"center",margin:0},content:{display:"flex",flexDirection:"row"},policies:{flex:1}}),{name:"PullRequestCard"}),Bt=({pullRequest:j,simplified:he})=>{var ze,ht,sn,Qt,x,Y;const Ye=A.createElement(Z.rU,{to:(ze=j.link)!=null?ze:"",title:j.description},j.title),Et=A.createElement(Z.rU,{to:(sn=(ht=j.repository)==null?void 0:ht.url)!=null?sn:"",color:"inherit"},(Qt=j.repository)==null?void 0:Qt.name),zt=j.creationDate?Le.ou.fromISO(j.creationDate).toRelative():void 0,Ft=A.createElement(D.Z,{component:"span"},Et," \xB7 ",zt),gn=A.createElement(Z.qE,{displayName:(x=j.createdBy)==null?void 0:x.displayName,picture:(Y=j.createdBy)==null?void 0:Y.imageUrl,customStyles:{width:"2.5rem",height:"2.5rem",fontSize:"1rem"}}),cn=ot();return A.createElement(U.Z,{classes:{root:cn.card},"data-pull-request-id":j.pullRequestId},A.createElement(We.Z,{avatar:gn,title:Ye,subheader:Ft,action:A.createElement(ut,{hasAutoComplete:j.hasAutoComplete}),classes:{...he&&{root:cn.cardHeaderSimplified},action:cn.cardHeaderAction}}),!he&&A.createElement(we.Z,{className:cn.content},j.policies&&A.createElement(pt,{policies:j.policies,className:cn.policies}),j.reviewers&&A.createElement($e,{reviewers:j.reviewers})))},_e=(0,a.Z)(j=>({root:{display:"flex",flexDirection:"column",flex:1,padding:j.spacing(2),backgroundColor:j.palette.type==="dark"?j.palette.grey[800]:j.palette.grey[300],height:"100%"}}))(te.Z),Je=(0,q.Z)("div")(({theme:j})=>({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:j.spacing(2)})),Ee=(0,q.Z)("div")(({theme:j})=>({display:"flex",flexDirection:"column","& > *":{marginBottom:j.spacing(2)},"& > :last-of-type":{marginBottom:0}})),it=({pullRequestGroup:j})=>{const he=A.createElement(Je,null,A.createElement(D.Z,{variant:"h5"},j.title)),ze=A.createElement(Ee,null,j.pullRequests.map(ht=>A.createElement(Bt,{key:ht.pullRequestId,pullRequest:ht,simplified:j.simplified})));return A.createElement(_e,null,he,ze)},at=(0,q.Z)("div")(({theme:j})=>({display:"flex",flexDirection:"row",justifyContent:"space-between","& > *":{marginRight:j.spacing(2)},"& > :last-of-type":{marginRight:0}})),Pt=({pullRequestGroups:j})=>A.createElement(at,null,j.map((he,ze)=>A.createElement(it,{key:ze,pullRequestGroup:he}))),Nt=1e4;function on(j,he=Nt){const ze=(0,m.u)(P),ht=(0,m.u)(m.r),sn=(0,A.useCallback)(async()=>{if(!j)return Promise.reject(new Error("Missing project name"));try{return await ze.getDashboardPullRequests(j)}catch(Et){return Et instanceof Error&&ht.post(Et),Promise.reject(Et)}},[j,ze,ht]),{value:Qt,loading:x,error:Y,retry:Ye}=(0,C.Z)(()=>sn(),[sn]);return(0,p.Z)(()=>Ye(),he),{pullRequests:Qt,loading:x,error:Y}}function Ze(){var j;const he=(0,m.u)(m.t);return(j=(0,h.default)(()=>he.getProfileInfo(),[he]).value)==null?void 0:j.email}function He(j){const he=(0,m.u)(P),{value:ze,loading:ht,error:sn}=(0,h.default)(()=>j?he.getUserTeamIds(j):Promise.resolve(void 0),[j,he]);return{teamIds:ze,loading:ht,error:sn}}function ve(){const j=Ze(),{teamIds:he}=He(j);return ze=>{for(const ht of ze)switch(ht.type){case G.AssignedToCurrentUser:case G.CreatedByCurrentUser:ht.email=j;break;case G.AssignedToCurrentUsersTeams:case G.CreatedByCurrentUsersTeams:ht.teamIds=he;break}return ze}}const Ie=({pullRequestGroups:j,loading:he,error:ze})=>he&&(!j||j.length<=0)?A.createElement(Z.Ex,null):ze?A.createElement(Z.Gk,{error:ze}):A.createElement(Pt,{pullRequestGroups:j!=null?j:[]}),lt=[{title:"Created by me",filters:[{type:G.CreatedByCurrentUser}],simplified:!1},{title:"Other PRs",filters:[{type:G.All}],simplified:!0}],$t=j=>{const{projectName:he,pollingInterval:ze,defaultColumnConfigs:ht}=j,{pullRequests:sn,loading:Qt,error:x}=on(he,ze),[Y]=(0,A.useState)(ht!=null?ht:lt),Ye=ve(),Et=rt(Y,Ye),zt=Me(sn,Et);return A.createElement(Z.T3,{themeId:"tool"},A.createElement(Z.h4,{title:"Azure Pull Requests"}),A.createElement(Z.VY,null,A.createElement(Ie,{pullRequestGroups:zt,loading:Qt,error:x})))}},75650:(Rn,kt,e)=>{"use strict";e.d(kt,{es:()=>o,j8:()=>A,x7:()=>W});var r=e(5083);const m="catalog-entity",u=(0,r.J$)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:m}),W=(0,r.J$)({name:"catalog.entity.create",attributes:{action:"create"}}),A=(0,r.J$)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:m}),o=(0,r.J$)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:m}),U=(0,r.J$)({name:"catalog.location.read",attributes:{action:"read"}}),We=(0,r.J$)({name:"catalog.location.create",attributes:{action:"create"}}),we=(0,r.J$)({name:"catalog.location.delete",attributes:{action:"delete"}}),a=[u,W,A,o,U,We,we]},98487:(Rn,kt,e)=>{"use strict";e.d(kt,{AZ:()=>It,Az:()=>P,Ho:()=>X,Nm:()=>C,_U:()=>oe,t0:()=>Jt,vw:()=>h});var r=e(34520),m=e(49558),u=e(30705),W=e(57032),A=e(79692),o=e(60364),U=e(4614),We=e(72779),we=e.n(We),a=e(2784),te=e(10368),q=e(73495),D=e(39412),Z=e(48760),Le=e(14162),ie=e.n(Le),re=e(69294);const Q=(0,te.Z)(me=>({text:{fill:me.palette.textContrast},secondary:{fill:me.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function H({edge:{relations:me}}){const Lt=Q();return a.createElement("text",{className:Lt.text,textAnchor:"middle"},me.map((Ct,je)=>a.createElement("tspan",{key:Ct,className:we()(je>0&&Lt.secondary)},je>0&&a.createElement("tspan",null," / "),Ct)))}function S({kind:me,...Lt}){var Ct;const nt=(Ct=(0,u.qD)().getSystemIcon(`kind:${me.toLocaleLowerCase("en-US")}`))!=null?Ct:D.Z;return a.createElement(nt,{...Lt})}const l=(0,A.Z)(me=>({node:{fill:me.palette.grey[300],stroke:me.palette.grey[300],"&.primary":{fill:me.palette.primary.light,stroke:me.palette.primary.light},"&.secondary":{fill:me.palette.secondary.light,stroke:me.palette.secondary.light}},text:{fill:me.palette.getContrastText(me.palette.grey[300]),"&.primary":{fill:me.palette.primary.contrastText},"&.secondary":{fill:me.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function b({node:{id:me,entity:Lt,color:Ct="default",focused:je,onClick:nt}}){const Te=l(),[gt,de]=(0,a.useState)(0),[G,Pe]=(0,a.useState)(0),ce=(0,a.useRef)(null);(0,a.useLayoutEffect)(()=>{if(ce.current){let{height:se,width:Me}=ce.current.getBBox();se=Math.round(se),Me=Math.round(Me),(se!==G||Me!==gt)&&(de(Me),Pe(se))}},[gt,G]);const{kind:le,metadata:{name:Be,namespace:st=r.zG,title:Kt}}=Lt,ct=10,Zt=G,O=le?Zt+ct:0,B=O+gt+ct*2,w=G+ct*2,L=Kt!=null?Kt:le&&Be&&st?(0,q.$3)({kind:le,name:Be,namespace:st}):me;return a.createElement("g",{onClick:nt,className:we()(nt&&Te.clickable)},a.createElement("rect",{className:we()(Te.node,Ct==="primary"&&"primary",Ct==="secondary"&&"secondary"),width:B,height:w,rx:10}),le&&a.createElement(S,{kind:le,y:ct,x:ct,width:Zt,height:Zt,className:we()(Te.text,je&&"focused",Ct==="primary"&&"primary",Ct==="secondary"&&"secondary")}),a.createElement("text",{ref:ce,className:we()(Te.text,je&&"focused",Ct==="primary"&&"primary",Ct==="secondary"&&"secondary"),y:w/2,x:O+(gt+ct*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},L))}const h=[[r.$1,r.S4],[r.Dg,r.X9],[r.Zj,r.M_],[r.aS,r.cz],[r._b,r.wP],[r.KS,r.hr],[r.nP,r.w$]];var C=(me=>(me.TOP_BOTTOM="TB",me.BOTTOM_TOP="BT",me.LEFT_RIGHT="LR",me.RIGHT_LEFT="RL",me))(C||{});const p=ie()(10);function be(){const me=(0,W.u)(q.Ah),Lt=(0,a.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[Ct,je]=(0,a.useState)({}),nt=(0,a.useCallback)(()=>{const{cachedEntities:ce,requestedEntities:le}=Lt.current,Be={};le.forEach(st=>{const Kt=ce.get(st);Kt&&(Be[st]=Kt)}),je(Be)},[Lt,je]),[Te,gt]=(0,re.default)(async()=>{const{requestedEntities:ce,outstandingEntities:le,cachedEntities:Be}=Lt.current;await Promise.all(Array.from(ce).map(st=>p(async()=>{if(Be.has(st))return;if(le.has(st)){await le.get(st);return}const Kt=me.getEntityByRef(st);le.set(st,Kt);try{const ct=await Kt;ct&&(Be.set(st,ct),nt())}finally{le.delete(st)}})))},[Lt,nt]),{loading:de,error:G}=Te,Pe=(0,a.useCallback)(ce=>{const le=new Set(ce),{requestedEntities:Be}=Lt.current;(le.size!==Be.size||Array.from(le).some(st=>!Be.has(st)))&&(Lt.current.requestedEntities=le,gt(),nt())},[Lt,gt,nt]);return{entities:Ct,loading:de,error:G,requestEntities:Pe}}function ge({rootEntityRefs:me,filter:{maxDepth:Lt=Number.POSITIVE_INFINITY,relations:Ct,kinds:je}={}}){const{entities:nt,loading:Te,error:gt,requestEntities:de}=be();return(0,a.useEffect)(()=>{const G=new Set([...me]),Pe=new Set;let ce=[...me],le=0;for(;ce.length>0&&(!isFinite(Lt)||le<Lt);){const Be=ce;for(ce=[];Be.length>0;){const st=Be.shift(),Kt=nt[st];if(Pe.add(st),Kt&&Kt.relations)for(const ct of Kt.relations)(!Ct||Ct.includes(ct.type))&&(!je||je.some(Zt=>ct.targetRef.startsWith(`${Zt.toLocaleLowerCase("en-US")}:`)))&&(Pe.has(ct.targetRef)||(ce.push(ct.targetRef),G.add(ct.targetRef)))}++le}de([...G])},[nt,me,Lt,Ct,je,de]),{entities:nt,loading:Te,error:gt}}function ye({rootEntityRefs:me,maxDepth:Lt=Number.POSITIVE_INFINITY,unidirectional:Ct=!0,mergeRelations:je=!0,kinds:nt,relations:Te,onNodeClick:gt,relationPairs:de=h}){const[G,Pe]=(0,a.useState)({}),{entities:ce,loading:le,error:Be}=ge({rootEntityRefs:me,filter:{maxDepth:Lt,kinds:nt,relations:Te}});return(0,Z.Z)(()=>{var st;if(!ce||Object.keys(ce).length===0){Pe({});return}const Kt=Object.entries(ce).map(([B,w])=>{const L=me.includes(B),se={id:B,entity:w,focused:L,color:L?"secondary":"primary",kind:w.kind,name:w.metadata.name,namespace:w.metadata.namespace||r.zG,title:w.metadata.title,spec:w.spec};return gt&&(se.onClick=Me=>gt(se,Me)),se}),ct=[],Zt=new Set,O=[...me];for(;O.length>0;){const B=O.pop(),w=ce[B];Zt.add(B),w&&((st=w==null?void 0:w.relations)==null||st.forEach(L=>{var se;if(ce[L.targetRef]&&!(Te&&!Te.includes(L.type))&&!(nt&&!nt.some(Me=>L.targetRef.startsWith(`${Me.toLocaleLowerCase("en-US")}:`)))){if(!Ct||!Zt.has(L.targetRef))if(je){const Me=(se=de.find(([xt,ut])=>xt===L.type||ut===L.type))!=null?se:[L.type],[rt]=Me;ct.push({from:rt===L.type?B:L.targetRef,to:rt===L.type?L.targetRef:B,relations:Me,label:"visible"})}else ct.push({from:B,to:L.targetRef,relations:[L.type],label:"visible"});Zt.has(L.targetRef)||(O.push(L.targetRef),Zt.add(L.targetRef))}}))}Pe({nodes:Kt,edges:ct})},100,[ce,me,nt,Te,Ct,je,gt,de]),{loading:le,error:Be,...G}}const ne=(0,A.Z)(me=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${me.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),oe=me=>{const{rootEntityNames:Lt,maxDepth:Ct=2,unidirectional:je=!0,mergeRelations:nt=!0,kinds:Te,relations:gt,direction:de=C.LEFT_RIGHT,onNodeClick:G,relationPairs:Pe=h,className:ce,zoom:le="enabled",renderNode:Be,renderLabel:st,curve:Kt}=me,ct=(0,o.Z)(),Zt=ne(),O=(0,a.useMemo)(()=>(Array.isArray(Lt)?Lt:[Lt]).map(rt=>(0,r.eE)(rt)),[Lt]),B=(0,W.u)(W.r),{loading:w,error:L,nodes:se,edges:Me}=ye({rootEntityRefs:O,maxDepth:Ct,unidirectional:je,mergeRelations:nt,kinds:Te,relations:gt,onNodeClick:G,relationPairs:Pe});return(0,a.useEffect)(()=>{L&&B.post(L)},[B,L]),a.createElement("div",{className:we()(Zt.container,ce)},w&&a.createElement(U.Z,{className:Zt.progress}),se&&Me&&a.createElement(m.mn,{nodes:se,edges:Me,renderNode:Be||b,renderLabel:st||H,direction:de,className:Zt.graph,paddingX:ct.spacing(4),paddingY:ct.spacing(4),labelPosition:m.NX.LabelPosition.RIGHT,labelOffset:ct.spacing(1),zoom:le,curve:Kt}))},X=(0,u.NT)({id:"catalog-graph"}),xe=(0,u.x8)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0}),It=(0,u.rx)({id:"catalog-graph",routes:{catalogGraph:X},externalRoutes:{catalogEntity:xe}}),P=It.provide((0,u.CO)({name:"EntityCatalogGraphCard",component:{lazy:()=>e.e(9842).then(e.bind(e,59842)).then(me=>me.CatalogGraphCard)}})),Jt=It.provide((0,u.P4)({name:"CatalogGraphPage",component:()=>e.e(1440).then(e.bind(e,71440)).then(me=>me.CatalogGraphPage),mountPoint:X}))},84241:(Rn,kt,e)=>{"use strict";e.d(kt,{a:()=>we,b:()=>re,d:()=>te,g:()=>q});var r=e(57032),m=e(30705),u=e(49462),W=e(73495),A=e(89393),o=e(49431),U=e(82717),We=e.n(U);const we=(0,r.c)({id:"plugin.catalog-import.service"}),a=(b,h)=>{const C=b.github.byUrl(h);if(!C)return;const{name:p,owner:be}=We()(h);return{repo:p,owner:be,githubIntegrationConfig:C.config}};function te(b){const{ref:h,...C}=b;return{inputRef:h,...C}}function q(b){var h;return(h=b.getOptionalString("catalog.import.entityFilename"))!=null?h:"catalog-info.yaml"}function D(b){var h;return(h=b.getOptionalString("catalog.import.pullRequestBranchName"))!=null?h:"backstage-integration"}var Z=Object.defineProperty,Le=(b,h,C)=>h in b?Z(b,h,{enumerable:!0,configurable:!0,writable:!0,value:C}):b[h]=C,ie=(b,h,C)=>(Le(b,typeof h!="symbol"?h+"":h,C),C);class re{constructor(h){ie(this,"discoveryApi"),ie(this,"identityApi"),ie(this,"scmAuthApi"),ie(this,"scmIntegrationsApi"),ie(this,"catalogApi"),ie(this,"configApi"),this.discoveryApi=h.discoveryApi,this.scmAuthApi=h.scmAuthApi,this.identityApi=h.identityApi,this.scmIntegrationsApi=h.scmIntegrationsApi,this.catalogApi=h.catalogApi,this.configApi=h.configApi}async analyzeUrl(h){var C;if(new URL(h).pathname.match(/\.ya?ml$/)||(C=new URL(h).searchParams.get("path"))!=null&&C.match(/.ya?ml$/)){const ge=await this.catalogApi.addLocation({type:"url",target:h,dryRun:!0});return{type:"locations",locations:[{exists:ge.exists,target:ge.location.target,entities:ge.entities.map(ye=>{var ne;return{kind:ye.kind,namespace:(ne=ye.metadata.namespace)!=null?ne:"default",name:ye.metadata.name}})}]}}if(!a(this.scmIntegrationsApi,h)){const ge=this.scmIntegrationsApi.byUrl(h),ye=q(this.configApi);throw ge?new Error(`The ${ge.title} integration only supports full URLs to ${ye} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${ye} file instead.`)}const be=await this.analyzeLocation({repo:h});if(be.existingEntityFiles.length>0){const ge=be.existingEntityFiles.reduce((ye,ne)=>{var oe;return ye[ne.location.target]={target:ne.location.target,exists:ne.isRegistered,entities:[...ne.location.target in ye?ye[ne.location.target].entities:[],{name:ne.entity.metadata.name,namespace:(oe=ne.entity.metadata.namespace)!=null?oe:"default",kind:ne.entity.kind}]},ye},{});return{type:"locations",locations:Object.values(ge)}}return{type:"repository",integrationType:"github",url:h,generatedEntities:be.generateEntities.map(ge=>ge.entity)}}async preparePullRequest(){var h;const C=(h=this.configApi.getOptionalString("app.title"))!=null?h:"Backstage",p=this.configApi.getString("app.baseUrl");return{title:`Add ${q(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${C} software catalog](${p}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`}}async submitPullRequest(h){const{repositoryUrl:C,fileContent:p,title:be,body:ge}=h,ye=a(this.scmIntegrationsApi,C);if(ye)return await this.submitGitHubPrToRepo({...ye,repositoryUrl:C,fileContent:p,title:be,body:ge});throw new Error("unimplemented!")}async analyzeLocation(h){const{token:C}=await this.identityApi.getCredentials(),p=await fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json",...C&&{Authorization:`Bearer ${C}`}},method:"POST",body:JSON.stringify({location:{type:"url",target:h.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(ge=>{throw new Error(`Failed to generate entity definitions, ${ge.message}`)});if(!p.ok)throw new Error(`Failed to generate entity definitions. Received http response ${p.status}: ${p.statusText}`);return await p.json()}async submitGitHubPrToRepo(h){const{owner:C,repo:p,title:be,body:ge,fileContent:ye,repositoryUrl:ne,githubIntegrationConfig:oe}=h,{token:X}=await this.scmAuthApi.getCredentials({url:ne,additionalScope:{repoWrite:!0}}),xe=new A.v({auth:X,baseUrl:oe.apiBaseUrl}),It=D(this.configApi),P=q(this.configApi),Jt=await xe.repos.get({owner:C,repo:p}).catch(Ct=>{throw new Error(Q("Couldn't fetch repo data",Ct))}),me=await xe.git.getRef({owner:C,repo:p,ref:`heads/${Jt.data.default_branch}`}).catch(Ct=>{throw new Error(Q("Couldn't fetch default branch data",Ct))});return await xe.git.createRef({owner:C,repo:p,ref:`refs/heads/${It}`,sha:me.data.object.sha}).catch(Ct=>{throw new Error(Q(`Couldn't create a new branch with name '${It}'`,Ct))}),await xe.repos.createOrUpdateFileContents({owner:C,repo:p,path:P,message:be,content:o.DS.encode(ye),branch:It}).catch(Ct=>{throw new Error(Q(`Couldn't create a commit with ${P} file added`,Ct))}),{link:(await xe.pulls.create({owner:C,repo:p,title:be,head:It,body:ge,base:Jt.data.default_branch}).catch(Ct=>{throw new Error(Q(`Couldn't create a pull request for ${It} branch`,Ct))})).data.html_url,location:`https://${oe.host}/${C}/${p}/blob/${Jt.data.default_branch}/${P}`}}}function Q(b,h){return`${b}, received http response status code ${h.status}: ${h.message}`}const H=(0,m.NT)({id:"catalog-import"}),l=(0,m.rx)({id:"catalog-import",apis:[(0,m.ni)({api:we,deps:{discoveryApi:r.q,scmAuthApi:u.Om,identityApi:r.t,scmIntegrationsApi:u.q3,catalogApi:W.Ah,configApi:r.p},factory:({discoveryApi:b,scmAuthApi:h,identityApi:C,scmIntegrationsApi:p,catalogApi:be,configApi:ge})=>new re({discoveryApi:b,scmAuthApi:h,scmIntegrationsApi:p,identityApi:C,catalogApi:be,configApi:ge})})],routes:{importPage:H}}).provide((0,m.P4)({name:"CatalogImportPage",component:()=>Promise.all([e.e(1673),e.e(2350)]).then(e.bind(e,22350)).then(b=>b.ImportPage),mountPoint:H}))},61068:(Rn,kt,e)=>{"use strict";e.d(kt,{N$:()=>he});var r=e(18473),m=e(2784),u=e(57032),W=e(30705),A=e(30195),o=e(29641);const U=(0,r.CT)("analytics-context"),We=()=>{const x=useContext(U);if(x===void 0)return{pluginId:"root",extensionId:"App"};const Y=x.atVersion(1);if(Y===void 0)throw new Error("No context found for version 1.");return Y},we=x=>{const{attributes:Y,children:Ye}=x,zt={...We(),...Y},Ft=createVersionedValueMap({1:zt});return React.createElement(U.Provider,{value:Ft},Ye)},a=(0,u.c)({id:"core.app-tree"}),te=(0,u.c)({id:"core.components"});function q(x){return(0,u.u)(te).getComponent(x)}const D=(0,u.c)({id:"core.analytics"}),Z=(0,r.uW)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),Le="_ROUTABLE-EXTENSION-RENDERED";class ie{constructor(Y,Ye={pluginId:"root",extensionId:"App"}){this.analyticsApi=Y,this.context=Ye,Z.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{Z.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...Z.mostRecentGatheredNavigation,...Z.mostRecentRoutableExtensionRender}),Z.mostRecentGatheredNavigation=void 0,Z.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),Z.beforeUnloadRegistered=!0)}setContext(Y){this.context=Y}captureEvent(Y,Ye,{value:Et,attributes:zt}={}){const Ft=this.context;if(Y===Le){Z.mostRecentGatheredNavigation&&(Z.mostRecentRoutableExtensionRender={context:{...Ft,extensionId:"App"}});return}if(Z.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...Z.mostRecentGatheredNavigation,...Z.mostRecentRoutableExtensionRender})}catch(gn){console.warn("Error during analytics event capture. %o",gn)}Z.mostRecentGatheredNavigation=void 0,Z.mostRecentRoutableExtensionRender=void 0}if(Y==="navigate"&&Ft.pluginId==="root"){Z.mostRecentGatheredNavigation={action:Y,subject:Ye,value:Et,attributes:zt,context:Ft};return}try{this.analyticsApi.captureEvent({action:Y,subject:Ye,value:Et,attributes:zt,context:Ft})}catch(gn){console.warn("Error during analytics event capture. %o",gn)}}}function re(){try{return useApi(D)}catch{return{captureEvent:()=>{}}}}function Q(){const x=useRef(null),Y=We(),Ye=re();function Et(){return x.current===null&&(x.current=new ie(Ye)),x.current}const zt=Et();return zt.setContext(Y),zt}function H(x){const{id:Y}=x;return{id:Y}}const S=H({id:"core.components.progress"}),l=H({id:"core.components.notFoundErrorPage"}),b=H({id:"core.components.errorBoundaryFallback"}),h={progress:S,notFoundErrorPage:l,errorBoundaryFallback:b};var C=Object.defineProperty,p=(x,Y,Ye)=>Y in x?C(x,Y,{enumerable:!0,configurable:!0,writable:!0,value:Ye}):x[Y]=Ye,be=(x,Y,Ye)=>(p(x,typeof Y!="symbol"?Y+"":Y,Ye),Ye);class ge extends m.Component{constructor(){super(...arguments),be(this,"state",{error:void 0}),be(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(Y){return{error:Y}}render(){const{error:Y}=this.state,{plugin:Ye,children:Et,Fallback:zt}=this.props;return Y?m.createElement(zt,{plugin:Ye,error:Y,resetError:this.handleErrorReset}):Et}}(0,r.uW)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1}));const ye="_ROUTABLE-EXTENSION-RENDERED",ne=x=>{const{disableTracking:Y,children:Ye}=x,Et=(0,W.z$)();return(0,m.useEffect)(()=>{Y||Et.captureEvent(ye,"")},[Et,Y]),m.createElement(m.Fragment,null,Ye)};function oe(x){var Y;const{node:Ye,routable:Et,children:zt}=x,Ft=Ye.spec.source,gn=q(h.progress),cn=q(h.errorBoundaryFallback),An={extensionId:Ye.spec.id,pluginId:(Y=Ye.spec.source)==null?void 0:Y.id};return m.createElement(m.Suspense,{fallback:m.createElement(gn,null)},m.createElement(ge,{plugin:Ft,Fallback:cn},m.createElement(W.fC,{attributes:An},m.createElement(ne,{disableTracking:!Et},zt))))}function X(x){return{id:x,$$type:"@backstage/ExtensionDataRef",config:{},optional(){return{...this,config:{...this.config,optional:!0}}}}}const xe={reactElement:X("core.reactElement"),routePath:X("core.routing.path"),routeRef:X("core.routing.ref")};function It(x){const Y=x;if(Y.$$type!=="@backstage/ExtensionDefinition")throw new Error(`Invalid extension definition instance, bad type '${Y.$$type}'`);if(Y.version!=="v1")throw new Error(`Invalid extension definition instance, bad version '${Y.version}'`);return Y}function P(x){var Y,Ye;return{$$type:"@backstage/ExtensionDefinition",version:"v1",kind:x.kind,namespace:x.namespace,name:x.name,attachTo:x.attachTo,disabled:(Y=x.disabled)!=null?Y:!1,inputs:(Ye=x.inputs)!=null?Ye:{},output:x.output,configSchema:x.configSchema,factory({inputs:Et,...zt}){return x.factory({inputs:Et,...zt})}}}function Jt(x,Y){return{$$type:"@backstage/ExtensionInput",extensionData:x,config:{singleton:Boolean(Y==null?void 0:Y.singleton),optional:Boolean(Y==null?void 0:Y.optional)}}}function me(x,Y){var Ye;const Et=It(x),{name:zt,kind:Ft,namespace:gn,...cn}=Et,An=(Ye=Et.namespace)!=null?Ye:Y==null?void 0:Y.namespace,Fe=zt&&An?`${An}/${zt}`:An||zt;if(!Fe)throw new Error(`Extension must declare an explicit namespace or name as it could not be resolved from context, kind=${Ft} namespace=${An} name=${zt}`);return{...cn,$$type:"@backstage/Extension",version:"v1",id:Ft?`${Ft}:${Fe}`:Fe}}function Lt(x){var Y,Ye,Et,zt;const Ft=((Y=x.extensions)!=null?Y:[]).map(cn=>me(cn,{namespace:x.id})),gn=Ft.map(cn=>cn.id);if(gn.length!==new Set(gn).size){const cn=Array.from(new Set(gn.filter((An,Fe)=>gn.indexOf(An)!==Fe)));throw new Error(`Plugin '${x.id}' provided duplicate extensions: ${cn.join(", ")}`)}return{$$type:"@backstage/BackstagePlugin",version:"v1",id:x.id,routes:(Ye=x.routes)!=null?Ye:{},externalRoutes:(Et=x.externalRoutes)!=null?Et:{},featureFlags:(zt=x.featureFlags)!=null?zt:[],extensions:Ft}}function Ct(x){var Y;return{$$type:"@backstage/ExtensionOverrides",version:"v1",extensions:x.extensions.map(Ye=>me(Ye)),featureFlags:(Y=x.featureFlags)!=null?Y:[]}}function je(x){const{factory:Y,configSchema:Ye,inputs:Et}=x,zt="api"in x?x.api:Y.api;return P({kind:"api",namespace:zt.id,attachTo:{id:"app",input:"apis"},inputs:Et,configSchema:Ye,output:{api:je.factoryDataRef},factory({config:Ft,inputs:gn}){return typeof Y=="function"?{api:Y({config:Ft,inputs:gn})}:{api:Y}}})}(x=>{x.factoryDataRef=X("core.api.factory")})(je||(je={}));function nt(x){const Y=x(A.z);return{parse:Ye=>{const Et=Y.safeParse(Ye);if(Et.success)return Et.data;throw new Error(Et.error.issues.map(Te).join("; "))},schema:(0,o.ZP)(Y)}}function Te(x){if(x.code==="invalid_union")return Te(x.unionErrors[0].issues[0]);let Y=x.message;return Y==="Required"&&(Y="Missing required value"),x.path.length&&(Y+=` at '${x.path.join(".")}'`),Y}function gt(x){var Y;const Ye="configSchema"in x?x.configSchema:nt(Et=>Et.object({path:Et.string().default(x.defaultPath)}));return P({kind:"page",namespace:x.namespace,name:x.name,attachTo:(Y=x.attachTo)!=null?Y:{id:"app/routes",input:"routes"},configSchema:Ye,inputs:x.inputs,disabled:x.disabled,output:{element:xe.reactElement,path:xe.routePath,routeRef:xe.routeRef.optional()},factory({config:Et,inputs:zt,node:Ft}){const gn=lazy(()=>x.loader({config:Et,inputs:zt}).then(cn=>({default:()=>cn})));return{path:Et.path,routeRef:x.routeRef,element:React.createElement(oe,{node:Ft,routable:!0},React.createElement(gn,null))}}})}function de(x){const{routeRef:Y,title:Ye,icon:Et,namespace:zt,name:Ft}=x;return P({namespace:zt,name:Ft,kind:"nav-item",attachTo:{id:"app/nav",input:"items"},configSchema:nt(gn=>gn.object({title:gn.string().default(Ye)})),output:{navTarget:de.targetDataRef},factory:({config:gn})=>({navTarget:{title:gn.title,icon:Et,routeRef:Y}})})}(x=>{x.targetDataRef=X("core.nav-item.target")})(de||(de={}));function G(x){const{logoIcon:Y,logoFull:Ye}=x;return P({kind:"nav-logo",name:x==null?void 0:x.name,namespace:x==null?void 0:x.namespace,attachTo:{id:"app/nav",input:"logos"},output:{logos:G.logoElementsDataRef},factory:()=>({logos:{logoIcon:Y,logoFull:Ye}})})}(x=>{x.logoElementsDataRef=X("core.nav-logo.logo-elements")})(G||(G={}));function Pe(x){var Y;return P({kind:"sign-in-page",namespace:x==null?void 0:x.namespace,name:x==null?void 0:x.name,attachTo:(Y=x.attachTo)!=null?Y:{id:"app/router",input:"signInPage"},configSchema:x.configSchema,inputs:x.inputs,disabled:x.disabled,output:{component:Pe.componentDataRef},factory({config:Ye,inputs:Et,node:zt}){const Ft=(0,m.lazy)(()=>x.loader({config:Ye,inputs:Et}).then(gn=>({default:gn})));return{component:gn=>m.createElement(oe,{node:zt,routable:!0},m.createElement(Ft,{...gn}))}}})}(x=>{x.componentDataRef=X("core.sign-in-page.component")})(Pe||(Pe={}));function ce(x){return P({kind:"theme",namespace:"app",name:x.id,attachTo:{id:"app",input:"themes"},output:{theme:ce.themeDataRef},factory:()=>({theme:x})})}(x=>{x.themeDataRef=X("core.theme.theme")})(ce||(ce={}));function le(x){return P({kind:"component",namespace:x.ref.id,name:x.name,attachTo:{id:"app",input:"components"},inputs:x.inputs,disabled:x.disabled,configSchema:x.configSchema,output:{component:le.componentDataRef},factory({config:Y,inputs:Ye,node:Et}){let zt;if("sync"in x.loader)zt=x.loader.sync({config:Y,inputs:Ye});else{const Ft=x.loader.lazy;zt=(0,m.lazy)(()=>Ft({config:Y,inputs:Ye}).then(gn=>({default:gn})))}return{component:{ref:x.ref,impl:Ft=>m.createElement(oe,{node:Et},m.createElement(zt,{...Ft}))}}}})}(x=>{x.componentDataRef=X("core.component.component")})(le||(le={}));function Be(x){return P({kind:"translation",namespace:x.resource.id,name:x.name,attachTo:{id:"app",input:"translations"},output:{resource:Be.translationDataRef},factory:()=>({resource:x.resource})})}(x=>{x.translationDataRef=X("core.translation.translation")})(Be||(Be={}));const st="eHgtF5hmbrXyiEvo";function Kt(x=Error){const{stack:Y}=new x(st);if(!Y)return"<unknown>";const Ye=Y.includes(st)?Y.indexOf(`
`)+1:0,Et=Y.indexOf(`
`,Y.indexOf(`
`,Ye)+1)+1,zt=Y.indexOf(`
`,Et),Ft=Y.substring(Et,zt).trim();return Ft?Ft.includes("(")?Ft.substring(Ft.indexOf("(")+1,Ft.indexOf(")")):Ft.includes("@")?Ft.substring(Ft.indexOf("@")+1):Ft:"unknown"}var ct=Object.defineProperty,Zt=(x,Y,Ye)=>Y in x?ct(x,Y,{enumerable:!0,configurable:!0,writable:!0,value:Ye}):x[Y]=Ye,O=(x,Y,Ye)=>(Zt(x,typeof Y!="symbol"?Y+"":Y,Ye),Ye),B=(x,Y,Ye)=>{if(!Y.has(x))throw TypeError("Cannot "+Ye)},w=(x,Y,Ye)=>(B(x,Y,"read from private field"),Ye?Ye.call(x):Y.get(x)),L=(x,Y,Ye)=>{if(Y.has(x))throw TypeError("Cannot add the same private member more than once");Y instanceof WeakSet?Y.add(x):Y.set(x,Ye)},se=(x,Y,Ye,Et)=>(B(x,Y,"write to private field"),Et?Et.call(x,Ye):Y.set(x,Ye),Ye),Me,rt,xt,ut,et;function Wt(x){const Y=x;if(Y.$$type!=="@backstage/RouteRef")throw new Error(`Invalid RouteRef, bad type '${Y.$$type}'`);return Y}class fe{constructor(Y=[],Ye){this.params=Y,L(this,ut),O(this,"$$type","@backstage/RouteRef"),O(this,"version","v1"),L(this,Me,void 0),L(this,rt,void 0),L(this,xt,void 0),se(this,rt,Y),se(this,xt,Ye)}getParams(){return w(this,rt)}getDescription(){return w(this,Me)?w(this,Me):`created at '${w(this,xt)}'`}setId(Y){if(!Y)throw new Error(`${w(this,ut,et)} id must be a non-empty string`);if(w(this,Me))throw new Error(`${w(this,ut,et)} was referenced twice as both '${w(this,Me)}' and '${Y}'`);se(this,Me,Y)}toString(){return`${w(this,ut,et)}{${this.getDescription()}}`}}Me=new WeakMap,rt=new WeakMap,xt=new WeakMap,ut=new WeakSet,et=function(){return this.$$type.slice(11)};function Ae(x){return new fe(x==null?void 0:x.params,Kt())}var Xe=Object.defineProperty,St=(x,Y,Ye)=>Y in x?Xe(x,Y,{enumerable:!0,configurable:!0,writable:!0,value:Ye}):x[Y]=Ye,pt=(x,Y,Ye)=>(St(x,typeof Y!="symbol"?Y+"":Y,Ye),Ye),Tt=(x,Y,Ye)=>{if(!Y.has(x))throw TypeError("Cannot "+Ye)},Dt=(x,Y,Ye)=>(Tt(x,Y,"read from private field"),Ye?Ye.call(x):Y.get(x)),$e=(x,Y,Ye)=>{if(Y.has(x))throw TypeError("Cannot add the same private member more than once");Y instanceof WeakSet?Y.add(x):Y.set(x,Ye)},ot=(x,Y,Ye,Et)=>(Tt(x,Y,"write to private field"),Et?Et.call(x,Ye):Y.set(x,Ye),Ye),Bt,_e;const Je=/^\w+$/;class Ee{constructor(Y,Ye,Et){this.path=Y,pt(this,"$$type","@backstage/SubRouteRef"),pt(this,"version","v1"),$e(this,Bt,void 0),$e(this,_e,void 0),ot(this,Bt,Ye),ot(this,_e,Et)}getParams(){return Dt(this,Bt)}getParent(){return Dt(this,_e)}getDescription(){const Y=Wt(Dt(this,_e));return`at ${this.path} with parent ${Y.getDescription()}`}toString(){return`SubRouteRef{${this.getDescription()}}`}}Bt=new WeakMap,_e=new WeakMap;function it(x){const{path:Y,parent:Ye}=x,zt=Wt(Ye).getParams(),Ft=Y.split("/").filter(An=>An.startsWith(":")).map(An=>An.substring(1)),gn=[...zt,...Ft];if(zt.some(An=>Ft.includes(An)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!Y.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${Y}'`);if(Y.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${Y}'`);for(const An of Ft)if(!Je.test(An))throw new Error(`SubRouteRef path has invalid param, got '${An}'`);return new Ee(Y,gn,Ye)}var at=Object.defineProperty,Pt=(x,Y,Ye)=>Y in x?at(x,Y,{enumerable:!0,configurable:!0,writable:!0,value:Ye}):x[Y]=Ye,Nt=(x,Y,Ye)=>(Pt(x,typeof Y!="symbol"?Y+"":Y,Ye),Ye);class on extends null{constructor(Y,Ye=[],Et){super(Ye,Et),this.optional=Y,this.params=Ye,Nt(this,"$$type","@backstage/ExternalRouteRef")}}function Ze(x){return new on(Boolean(x==null?void 0:x.optional),x==null?void 0:x.params,Kt())}function He(x){const{pathname:Y}=useLocation(),Ye=useVersionedContext("routing-context");if(!Ye)throw new Error("Routing context is not available");const Et=Ye.atVersion(1),zt=useMemo(()=>Et&&Et.resolve(x,{pathname:Y}),[Et,x,Y]);if(!Ye)throw new Error("useRouteRef used outside of routing context");if(!Et)throw new Error("RoutingContext v1 not available");const Ft="optional"in x&&x.optional;if(!zt&&!Ft)throw new Error(`No path for ${x}`);return zt}function ve(x){return useParams()}var Ie=e(34520),lt=e(56563),$t=e(78373);function j(x,Y){const Ye=new Set([...getEntityRelations(x,RELATION_MEMBER_OF,{kind:"group"}),...x?[getCompoundEntityRef(x)]:[]].map(stringifyEntityRef)),Et=getEntityRelations(Y,RELATION_OWNED_BY).map(stringifyEntityRef);for(const zt of Et)if(Ye.has(zt))return!0;return!1}function he(x){const{entity:Y,loading:Ye,error:Et}=(0,$t.a)(),{allowed:zt,loading:Ft,error:gn}=(0,lt.gI)({permission:x,resourceRef:Y?(0,Ie.eE)(Y):void 0});return Ye||Ft?{loading:!0,allowed:!1}:Et?{loading:!1,allowed:!1,error:Et}:{loading:!1,allowed:zt,error:gn}}const ze={entityContentTitle:X("catalog.entity-content-title"),entityFilterFunction:X("catalog.entity-filter-function"),entityFilterExpression:X("catalog.entity-filter-expression")};function ht(x){var Y,Ye;return createExtension({kind:"entity-card",namespace:x.namespace,name:x.name,attachTo:(Y=x.attachTo)!=null?Y:{id:"entity-content:catalog/overview",input:"cards"},disabled:(Ye=x.disabled)!=null?Ye:!0,output:{element:coreExtensionData.reactElement,filterFunction:ze.entityFilterFunction.optional(),filterExpression:ze.entityFilterExpression.optional()},inputs:x.inputs,configSchema:createSchemaFromZod(Et=>Et.object({filter:Et.string().optional()})),factory({config:Et,inputs:zt,node:Ft}){const gn=lazy(()=>x.loader({inputs:zt}).then(cn=>({default:()=>cn})));return{element:React.createElement(ExtensionBoundary,{node:Ft},React.createElement(gn,null)),...Qt({config:Et,options:x})}}})}function sn(x){var Y,Ye;return createExtension({kind:"entity-content",namespace:x.namespace,name:x.name,attachTo:(Y=x.attachTo)!=null?Y:{id:"page:catalog/entity",input:"contents"},disabled:(Ye=x.disabled)!=null?Ye:!0,output:{element:coreExtensionData.reactElement,path:coreExtensionData.routePath,routeRef:coreExtensionData.routeRef.optional(),title:ze.entityContentTitle,filterFunction:ze.entityFilterFunction.optional(),filterExpression:ze.entityFilterExpression.optional()},inputs:x.inputs,configSchema:createSchemaFromZod(Et=>Et.object({path:Et.string().default(x.defaultPath),title:Et.string().default(x.defaultTitle),filter:Et.string().optional()})),factory({config:Et,inputs:zt,node:Ft}){const gn=lazy(()=>x.loader({inputs:zt}).then(cn=>({default:()=>cn})));return{path:Et.path,title:Et.title,routeRef:x.routeRef,element:React.createElement(ExtensionBoundary,{node:Ft,routable:!0},React.createElement(gn,null)),...Qt({config:Et,options:x})}}})}function Qt(x){const{options:Y,config:Ye}=x;return Ye.filter?{filterExpression:Ye.filter}:typeof Y.filter=="string"?{filterExpression:Y.filter}:typeof Y.filter=="function"?{filterFunction:Y.filter}:{}}},78373:(Rn,kt,e)=>{"use strict";e.d(kt,{A:()=>U,a:()=>a,g:()=>A,u:()=>we});var r=e(34520),m=e(30705),u=e(18473),W=e(2784);function A(te,q,D){var Z;let Le=((Z=te==null?void 0:te.relations)==null?void 0:Z.filter(ie=>ie.type===q).map(ie=>(0,r.of)(ie.targetRef)))||[];return D!=null&&D.kind&&(Le=Le.filter(ie=>ie.kind.toLocaleLowerCase("en-US")===D.kind.toLocaleLowerCase("en-US"))),Le}const o=(0,u.CT)("entity-context"),U=te=>{const{children:q,entity:D,loading:Z,error:Le,refresh:ie}=te,re={entity:D,loading:Z,error:Le,refresh:ie};return W.createElement(o.Provider,{value:(0,u.EI)({1:re})},W.createElement(m.fC,{attributes:{...D?{entityRef:(0,r.eE)(D)}:void 0}},q))},We=te=>React.createElement(U,{entity:te.entity,loading:!Boolean(te.entity),error:void 0,refresh:void 0,children:te.children});function we(){const te=(0,u.Vt)("entity-context");if(!te)throw new Error("Entity context is not available");const q=te.atVersion(1);if(!q)throw new Error("EntityContext v1 not available");if(!q.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:q.entity}}function a(){const te=(0,u.Vt)("entity-context");if(!te)throw new Error("Entity context is not available");const q=te.atVersion(1);if(!q)throw new Error("EntityContext v1 not available");const{entity:D,loading:Z,error:Le,refresh:ie}=q;return{entity:D,loading:Z,error:Le,refresh:ie}}},73495:(Rn,kt,e)=>{"use strict";e.d(kt,{$3:()=>xn,Ah:()=>ht,CR:()=>Ce,CV:()=>un,EW:()=>rr,LH:()=>y,UO:()=>K,U_:()=>go,Uh:()=>T,XI:()=>sn,ZW:()=>Ne,_i:()=>At,co:()=>Ja,df:()=>Vn,dq:()=>Ha,dx:()=>Za,eK:()=>F,hd:()=>dr,n8:()=>Qt,nN:()=>ta,nl:()=>qr,p3:()=>zt,ph:()=>ha,pp:()=>mr,rI:()=>Ea,sC:()=>Sn,sL:()=>f,sk:()=>fr,tW:()=>en,u3:()=>Ia,wi:()=>sr,wp:()=>$,xE:()=>nr});var r=e(57032),m=e(30705),u=e(34520),W=e(72579),A=e.n(W),o=e(2784),U=e(82394),We=e.n(U),we=e(41156),a=e(60364),te=e(77277),q=e(4190),D=e(95544),Z=e(90436),Le=e(60905),ie=e(21324),re=e(5806),Q=e(79692),H=e(86619),S=e(80030),l=e(61837),b=e(94339),h=e(24579),C=e(7089),p=e(14503),be=e(15223),ge=e(42494),ye=e(29611),ne=e(50581),oe=e(15459),X=e(55999),xe=e(49378),It=e(54506),P=e(38402),Jt=e(86136),me=e(11776),Lt=e(9520),Ct=e(8629),je=e(79249),nt=e(38724),Te=e(99152),gt=e(6487),de=e(49429),G=e(85256),Pe=e(12231),ce=e(36444),le=e(49558),Be=e(78373),st=e(76635),Kt=e.n(st),ct=e(37794),Zt=e.n(ct),O=e(73557),B=e(69294),w=e(48760),L=e(90736),se=e(64279),Me=e(18149),rt=e.n(Me),xt=e(829),ut=e.n(xt),et=e(72164),Wt=e(38016),fe=e(88013),Ae=e(99688),Xe=e(19996),St=e(25505),pt=e(72779),Tt=e.n(pt),Dt=e(89586),$e=e(5270),ot=e(98685),Bt=e(62367),_e=e(18473),Je=e(58628),Ee=e(90409),it=e(99144),at=e(13384),Pt=e(33375),Nt=e(21853),on=e(11640),Ze=e(28347),He=e(39412),ve=e(27685),Ie=e(3440),lt=e.n(Ie),$t=e(10921),j=e(32272),he=e(47603),ze=e(38408);const ht=(0,r.c)({id:"plugin.catalog.service"}),sn=(0,r.c)({id:"plugin.catalog.entity-presentation"});function Qt(_,I){const{kind:N,namespace:J,name:Se,title:Ve,description:dt,displayName:mt,type:wt}=x(_),qt=(0,u.eE)({kind:N||"unknown",namespace:J||u.zG,name:Se||"unknown"}),Vt=Y({kind:N,namespace:J,name:Se,context:I}),pn=[mt,Ve,Vt].find(vn=>vn&&typeof vn=="string"),Pn=[pn!==qt?qt:void 0,wt,dt].filter(vn=>vn&&typeof vn=="string").join(" | ");return{entityRef:qt,primaryTitle:pn,secondaryTitle:Pn||void 0,Icon:void 0}}function x(_){if(typeof _=="string"){let I=_.indexOf(":");const N=_.indexOf("/");N!==-1&&N<I&&(I=-1);const J=I===-1?void 0:_.slice(0,I),Se=N===-1?void 0:_.slice(I+1,N),Ve=_.slice(Math.max(I+1,N+1));return{kind:J,namespace:Se,name:Ve}}if(typeof _=="object"&&_!==null){const I=[A()(_,"kind")].find(wt=>wt&&typeof wt=="string"),N=[A()(_,"metadata.namespace"),A()(_,"namespace")].find(wt=>wt&&typeof wt=="string"),J=[A()(_,"metadata.name"),A()(_,"name")].find(wt=>wt&&typeof wt=="string"),Se=[A()(_,"metadata.title")].find(wt=>wt&&typeof wt=="string"),Ve=[A()(_,"metadata.description")].find(wt=>wt&&typeof wt=="string"),dt=[A()(_,"spec.profile.displayName")].find(wt=>wt&&typeof wt=="string"),mt=[A()(_,"spec.type")].find(wt=>wt&&typeof wt=="string");return{kind:I,namespace:N,name:J,title:Se,description:Ve,displayName:dt,type:mt}}return{}}function Y(_){var I,N,J,Se,Ve;const dt=((I=_.kind)==null?void 0:I.toLocaleLowerCase("en-US"))||"unknown",mt=_.namespace||u.zG,wt=_.name||"unknown",qt=(J=(N=_.context)==null?void 0:N.defaultKind)==null?void 0:J.toLocaleLowerCase("en-US"),Vt=(Ve=(Se=_.context)==null?void 0:Se.defaultNamespace)==null?void 0:Ve.toLocaleLowerCase("en-US");let pn=wt;return(Vt&&mt.toLocaleLowerCase("en-US")!==Vt||mt!==u.zG)&&(pn=`${mt}/${pn}`),qt&&dt.toLocaleLowerCase("en-US")!==qt&&(pn=`${dt}:${pn}`),pn}function Ye(_,I,N){const[J,Se]=(0,o.useState)(_);return(0,o.useEffect)(()=>{Se(_);const Ve=I==null?void 0:I.subscribe({next:dt=>{Se(dt)},complete:()=>{Ve==null||Ve.unsubscribe()}});return()=>{Ve==null||Ve.unsubscribe()}},N),J}function Et(_,I){const J=(0,r.b)().get(sn),Se=[J,JSON.stringify(_),JSON.stringify(I||null)],Ve=(0,o.useMemo)(()=>J?J.forEntity(typeof _=="string"||"metadata"in _?_:(0,u.eE)(_),I):{snapshot:Qt(_,I)},Se);return Ye(Ve.snapshot,Ve.update$,[Ve])}const zt=(0,r.c)({id:"catalog-react.starred-entities"});var Ft=Object.defineProperty,gn=(_,I,N)=>I in _?Ft(_,I,{enumerable:!0,configurable:!0,writable:!0,value:N}):_[I]=N,cn=(_,I,N)=>(gn(_,typeof I!="symbol"?I+"":I,N),N);class An{constructor(){cn(this,"starredEntities",new Set),cn(this,"subscribers",new Set),cn(this,"observable",new ObservableImpl(I=>(I.next(new Set(this.starredEntities)),this.subscribers.add(I),()=>{this.subscribers.delete(I)})))}async toggleStarred(I){this.starredEntities.delete(I)||this.starredEntities.add(I);for(const N of this.subscribers)N.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const Fe=_=>{var I,N;const J=(0,we.Z)(mt=>{var wt,qt;return mt.breakpoints.down((qt=(wt=_.options)==null?void 0:wt.drawerBreakpoint)!=null?qt:"md")}),Se=(0,a.Z)(),[Ve,dt]=(0,o.useState)(!1);return J?o.createElement(o.Fragment,null,o.createElement(te.Z,{style:{marginTop:Se.spacing(1),marginLeft:Se.spacing(1)},onClick:()=>dt(!0),startIcon:o.createElement(ce.Z,null)},"Filters"),o.createElement(q.ZP,{open:Ve,onClose:()=>dt(!1),anchor:(N=(I=_.options)==null?void 0:I.drawerAnchor)!=null?N:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},o.createElement(D.Z,{m:2},o.createElement(Z.Z,{variant:"h6",component:"h2",style:{marginBottom:Se.spacing(1)}},"Filters"),_.children))):o.createElement(Le.Z,{item:!0,lg:2},_.children)},qe=_=>o.createElement(Le.Z,{item:!0,xs:12,lg:10},_.children),At=_=>o.createElement(Le.Z,{container:!0,style:{position:"relative"}},_.children);At.Filters=Fe,At.Content=qe;function tn(_){return _.reduce((I,N)=>({...I,...N.getCatalogFilters?N.getCatalogFilters():{}}),{})}function ln(_){const I={};return _.forEach(N=>{var J;N instanceof ea||N instanceof ra||N instanceof fa||N instanceof Pa||N instanceof ia||N instanceof ue||N instanceof la||N instanceof Ra||Object.assign(I,((J=N.getCatalogFilters)==null?void 0:J.call(N))||{})}),I}function dn(_){return I=>_.every(N=>!N.filterEntity||N.filterEntity(I))}function un(_,I){var N;const J=(N=_.metadata.annotations)==null?void 0:N[u.M6];if(J)try{const Se=(0,u.Ou)(J),Ve=I.byUrl(Se.target);return{locationTargetUrl:Se.target,integrationType:Ve==null?void 0:Ve.type}}catch{return}}var wn=Object.defineProperty,Wn=(_,I,N)=>I in _?wn(_,I,{enumerable:!0,configurable:!0,writable:!0,value:N}):_[I]=N,Gn=(_,I,N)=>(Wn(_,typeof I!="symbol"?I+"":I,N),N);class sa{constructor(I){this.value=I}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class Cn{constructor(I){this.value=I}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class ea{constructor(I){this.values=I}filterEntity(I){return this.values.every(N=>{var J;return((J=I.metadata.tags)!=null?J:[]).includes(N)})}getCatalogFilters(){return{"metadata.tags":this.values}}toQueryValue(){return this.values}}class la{constructor(I){this.value=I}filterEntity(I){const N=this.toUpperArray(this.value.split(/\s/)),J=this.toUpperArray([I.metadata.tags]),Se=this.toUpperArray([I.metadata.name,I.metadata.title]);for(const Ve of N)if(J.every(dt=>dt!==Ve)&&Se.every(dt=>!dt.includes(Ve)))return!1;return!0}toUpperArray(I){return I.flat().filter(N=>Boolean(N)).map(N=>N.toLocaleUpperCase("en-US"))}}class ra{constructor(I){Gn(this,"values"),this.values=I.reduce((N,J)=>{try{return N.push((0,u.eE)((0,u.of)(J,{defaultKind:"Group"}))),N}catch{return N}},[])}getCatalogFilters(){return{"relations.ownedBy":this.values}}filterEntity(I){return this.values.some(N=>(0,Be.g)(I,u.S4).some(J=>(0,u.eE)(J)===N))}toQueryValue(){return this.values}}class fa{constructor(I){this.values=I}getCatalogFilters(){return{"spec.lifecycle":this.values}}filterEntity(I){return this.values.some(N=>{var J;return((J=I.spec)==null?void 0:J.lifecycle)===N})}toQueryValue(){return this.values}}class Pa{constructor(I){this.values=I}getCatalogFilters(){return{"metadata.namespace":this.values}}filterEntity(I){return this.values.some(N=>I.metadata.namespace===N)}toQueryValue(){return this.values}}class ia{constructor(I,N){this.value=I,this.refs=N}static owned(I){return new ia("owned",I)}static all(){return new ia("all")}static starred(I){return new ia("starred",I)}getCatalogFilters(){var I,N,J;return this.value==="owned"?{"relations.ownedBy":(I=this.refs)!=null?I:[]}:this.value==="starred"?{"metadata.name":(J=(N=this.refs)==null?void 0:N.map(Se=>(0,u.of)(Se).name))!=null?J:[]}:{}}filterEntity(I){var N,J,Se,Ve;if(this.value==="starred")return(J=(N=this.refs)==null?void 0:N.includes((0,u.eE)(I)))!=null?J:!0;if(this.value==="owned"){const dt=(0,Be.g)(I,u.S4);return(Ve=(Se=this.refs)==null?void 0:Se.some(mt=>dt.some(wt=>(0,u.eE)(wt)===mt)))!=null?Ve:!1}return!0}toQueryValue(){return this.value}}class Ra{constructor(I,N,J){this.value=I,this.isOwnedEntity=N,this.isStarredEntity=J}filterEntity(I){switch(this.value){case"owned":return this.isOwnedEntity(I);case"starred":return this.isStarredEntity(I);default:return!0}}toQueryValue(){return this.value}}class ue{constructor(I){this.value=I}getCatalogFilters(){return this.value?{"metadata.annotations.backstage.io/orphan":String(this.value)}:{}}filterEntity(I){var N;const J=(N=I.metadata.annotations)==null?void 0:N["backstage.io/orphan"];return J!==void 0&&this.value.toString()===J}}class Qe{constructor(I){this.value=I}filterEntity(I){var N,J;const Se=((J=(N=I==null?void 0:I.status)==null?void 0:N.items)==null?void 0:J.length)>0;return Se!==void 0&&this.value===Se}}const yt=(0,o.createContext)(void 0),K=_=>{const I=(0,L.default)(),N=(0,r.u)(ht),[J,Se]=(0,o.useState)({}),Ve=(0,O.TH)(),dt=_.pagination===!0||typeof _.pagination=="object",mt=_.pagination&&typeof _.pagination=="object"&&typeof _.pagination.limit=="number"?_.pagination.limit:20,{queryParameters:wt,cursor:qt}=(0,o.useMemo)(()=>{var zn;const Yn=Zt().parse(Ve.search,{ignoreQueryPrefix:!0});return{queryParameters:(zn=Yn.filters)!=null?zn:{},cursor:typeof Yn.cursor=="string"?Yn.cursor:void 0}},[Ve]),[Vt,pn]=(0,o.useState)(qt),[Pn,vn]=(0,o.useState)(()=>({appliedFilters:{},entities:[],backendEntities:[],pageInfo:dt?{}:void 0})),[{loading:Mn,error:Fn},On]=(0,B.default)(async()=>{var zn;const Yn=(0,st.compact)(Object.values(J)),na=Object.keys(J).reduce((ma,Ta)=>{const Ca=J[Ta];return Ca!=null&&Ca.toQueryValue&&(ma[Ta]=Ca.toQueryValue()),ma},{});if(dt)if(Vt){if(Vt!==Pn.appliedCursor){const ma=dn(Yn),Ta=await N.queryEntities({cursor:Vt,limit:mt});vn({appliedFilters:J,appliedCursor:Vt,backendEntities:Ta.items,entities:Ta.items.filter(ma),pageInfo:Ta.pageInfo})}}else{const ma=dn(Yn),Ta=tn(Yn),Ca=tn((0,st.compact)(Object.values(Pn.appliedFilters)));if(!(0,st.isEqual)(Ca,Ta)){const Da=await N.queryEntities({filter:Ta,limit:mt,orderFields:[{field:"metadata.name",order:"asc"}]});vn({appliedFilters:J,backendEntities:Da.items,entities:Da.items.filter(ma),pageInfo:Da.pageInfo})}}else{const ma=dn(Yn),Ta=ln(Yn),Ca=ln((0,st.compact)(Object.values(Pn.appliedFilters)));if((0,st.isEqual)(Ca,Ta))vn({appliedFilters:J,backendEntities:Pn.backendEntities,entities:Pn.backendEntities.filter(ma)});else{const Da=await N.getEntities({filter:Ta});vn({appliedFilters:J,backendEntities:Da.items,entities:Da.items.filter(ma)})}}if(I()){const ma=Zt().parse(Ve.search,{ignoreQueryPrefix:!0}),Ta=Zt().stringify({...ma,filters:na,cursor:Vt},{addQueryPrefix:!0,arrayFormat:"repeat"}),Ca=`${window.location.pathname}${Ta}`;(zn=window.history)==null||zn.replaceState(null,document.title,Ca)}},[N,wt,J,Pn,Vt,dt],{loading:!0});(0,w.Z)(On,10,[J,Vt]);const oa=(0,o.useCallback)(zn=>{pn(void 0),Se(Yn=>{const na=typeof zn=="function"?zn(Yn):zn;return{...Yn,...na}})},[]),ba=(0,o.useMemo)(()=>{var zn,Yn;if(!dt)return;const na=(zn=Pn.pageInfo)==null?void 0:zn.prevCursor,ma=(Yn=Pn.pageInfo)==null?void 0:Yn.nextCursor;return{prev:na?()=>pn(na):void 0,next:ma?()=>pn(ma):void 0}},[dt,Pn.pageInfo]),Kn=(0,o.useMemo)(()=>({filters:Pn.appliedFilters,entities:Pn.entities,backendEntities:Pn.backendEntities,updateFilters:oa,queryParameters:wt,loading:Mn,error:Fn,pageInfo:ba}),[Pn,oa,wt,Mn,Fn,ba]);return o.createElement(yt.Provider,{value:Kn},_.children)};function $(){const _=(0,o.useContext)(yt);if(!_)throw new Error("useEntityList must be used within EntityListProvider");return _}function T(){var _;const I=(0,r.u)(ht),{filters:{kind:N,type:J},queryParameters:{type:Se},updateFilters:Ve}=$(),dt=(0,o.useMemo)(()=>[Se].flat().filter(Boolean),[Se]),[mt,wt]=(0,o.useState)(dt.length?dt:(_=J==null?void 0:J.getTypes())!=null?_:[]);(0,o.useEffect)(()=>{dt.length&&wt(dt)},[dt]);const[qt,Vt]=(0,o.useState)([]),pn=(0,o.useMemo)(()=>N==null?void 0:N.value,[N]),{error:Pn,loading:vn,value:Mn}=(0,se.default)(async()=>pn?await I.getEntityFacets({filter:{kind:pn},facets:["spec.type"]}).then(oa=>oa.facets["spec.type"]||[]):[],[pn,I]),Fn=(0,o.useRef)(Mn);return(0,o.useEffect)(()=>{const On=Fn.current;if(Fn.current=Mn,vn||!pn||On===Mn||!Mn)return;const oa=[...new Set(ut()(Mn,Kn=>-Kn.count).map(Kn=>Kn.value.toLocaleLowerCase("en-US")))];Vt(oa);const ba=mt.filter(Kn=>oa.includes(Kn));rt()(mt,ba)||wt(ba)},[vn,pn,mt,wt,Mn]),(0,o.useEffect)(()=>{Ve({type:mt.length?new Cn(mt):void 0})},[mt,Ve]),{loading:vn,error:Pn,availableTypes:qt,selectedTypes:mt,setSelectedTypes:wt}}function F(_,I){var N,J;const Se=(N=I==null?void 0:I.type)==null?void 0:N.toLocaleLowerCase("en-US"),Ve=(J=I==null?void 0:I.kind)==null?void 0:J.toLocaleLowerCase("en-US"),dt=(0,r.u)(ht),{loading:mt,value:wt,error:qt}=(0,se.default)(async()=>{var Vt;const pn=(Vt=_.relations)==null?void 0:Vt.filter(vn=>(!Se||vn.type.toLocaleLowerCase("en-US")===Se)&&(!Ve||(0,u.of)(vn.targetRef).kind===Ve));if(!(pn!=null&&pn.length))return[];const{items:Pn}=await dt.getEntitiesByRefs({entityRefs:pn.map(vn=>vn.targetRef)});return Pn.filter(vn=>Boolean(vn))},[_,Se,Ve]);return{entities:wt,loading:mt,error:qt}}function V(_){return typeof _=="string"?_:(0,u.eE)(_)}function Ce(){const _=(0,r.u)(zt),I=(0,et.Z)((0,o.useMemo)(()=>_.starredEntitie$(),[_]),new Set),N=(0,o.useCallback)(Se=>I.has(V(Se)),[I]),J=(0,o.useCallback)(Se=>_.toggleStarred(V(Se)).then(),[_]);return{starredEntities:I,toggleStarredEntity:J,isStarredEntity:N}}function Re(_){return typeof _=="string"?_:(0,u.eE)(_)}function pe(_){const I=(0,r.u)(zt),[N,J]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{const Ve=I.starredEntitie$().subscribe({next(dt){J(dt.has(Re(_)))}});return()=>{Ve.unsubscribe()}},[_,I]),{toggleStarredEntity:(0,o.useCallback)(()=>I.toggleStarred(Re(_)).then(),[_,I]),isStarredEntity:N}}function Ne(){const _=(0,r.u)(r.t),{loading:I,value:N}=(0,se.default)(async()=>{const{ownershipEntityRefs:Se}=await _.getBackstageIdentity();return Se},[]),J=(0,o.useMemo)(()=>{const Se=new Set(N!=null?N:[]);return Ve=>{const dt=(0,Be.g)(Ve,u.S4).map(u.eE);for(const mt of dt)if(Se.has(mt))return!0;return!1}},[N]);return{loading:I,isOwnedEntity:J}}function tt(){const _=(0,r.u)(ht),{error:I,loading:N,value:J}=(0,se.default)(async()=>await _.getEntityFacets({facets:["kind"]}).then(Ve=>{var dt;return((dt=Ve.facets.kind)==null?void 0:dt.map(mt=>mt.value).sort())||[]}),[_]);return{loading:N,error:I,allKinds:J!=null?J:[]}}function _t(_,I,N){let J=_;return I&&(J=J.filter(Ve=>I.some(dt=>dt.toLocaleLowerCase("en-US")===Ve.toLocaleLowerCase("en-US")))),N&&!_.some(Ve=>Ve.toLocaleLowerCase("en-US")===N.toLocaleLowerCase("en-US"))&&(J=J.concat([N])),J.sort().reduce((Ve,dt)=>(Ve[dt.toLocaleLowerCase("en-US")]=dt,Ve),{})}function Ht(_){var I,N;const{filters:J,queryParameters:{kind:Se},updateFilters:Ve}=$(),dt=(0,o.useMemo)(()=>[Se].flat()[0],[Se]),[mt,wt]=(0,o.useState)((N=dt!=null?dt:(I=J.kind)==null?void 0:I.value)!=null?N:_.initialFilter);(0,o.useEffect)(()=>{dt&&wt(dt)},[dt]),(0,o.useEffect)(()=>{var Pn,vn;(Pn=J.kind)!=null&&Pn.value&&wt((vn=J.kind)==null?void 0:vn.value)},[J.kind]),(0,o.useEffect)(()=>{Ve({kind:mt?new sa(mt):void 0})},[mt,Ve]);const{allKinds:qt,loading:Vt,error:pn}=tt();return{loading:Vt,error:pn,allKinds:qt!=null?qt:[],selectedKind:mt,setSelectedKind:wt}}const en=_=>{const{allowedKinds:I,hidden:N,initialFilter:J="component"}=_,Se=(0,r.u)(r.l),{error:Ve,allKinds:dt,selectedKind:mt,setSelectedKind:wt}=Ht({initialFilter:J});if((0,o.useEffect)(()=>{Ve&&Se.post({message:"Failed to load entity kinds",severity:"error"})},[Ve,Se]),Ve)return null;const qt=_t(dt,I,mt),Vt=Object.keys(qt).map(pn=>({value:pn,label:qt[pn]}));return N?null:o.createElement(D.Z,{pb:1,pt:1},o.createElement(le.Ph,{label:"Kind",items:Vt,selected:mt.toLocaleLowerCase("en-US"),onChange:pn=>wt(String(pn))}))},Xt=o.createElement(St.Z,{fontSize:"small"}),mn=o.createElement(Xe.Z,{fontSize:"small"});function _n({selected:_}){return o.createElement(ie.Z,{icon:Xt,checkedIcon:mn,checked:_})}const hn=(0,o.memo)(_=>{const{selected:I,value:N,availableOptions:J,showCounts:Se}=_,Ve=Se?`${N} (${J==null?void 0:J[N]})`:N;return o.createElement(re.Z,{control:o.createElement(_n,{selected:I}),label:Ve,onClick:dt=>dt.preventDefault()})}),En=(0,Q.Z)({input:{}},{name:"CatalogReactEntityAutocompletePickerInput"});function bn(_){const I=En();return o.createElement(H.Z,{variant:"outlined",..._,className:Tt()(I.input,_.className)})}function Ln(_){var I,N;const{label:J,name:Se,path:Ve,showCounts:dt,Filter:mt,InputProps:wt,initialSelectedOptions:qt=[]}=_,{updateFilters:Vt,filters:pn,queryParameters:{[Se]:Pn}}=$(),vn=(0,r.u)(ht),{value:Mn}=(0,se.default)(async()=>{var Yn;const na=Ve,{facets:ma}=await vn.getEntityFacets({facets:[na],filter:(Yn=pn.kind)==null?void 0:Yn.getCatalogFilters()});return Object.fromEntries(ma[na].map(({value:Ta,count:Ca})=>[Ta,Ca]))},[pn.kind]),Fn=(0,o.useMemo)(()=>[Pn].flat().filter(Boolean),[Pn]),[On,oa]=(0,o.useState)(Fn.length?Fn:(N=(I=pn[Se])==null?void 0:I.values)!=null?N:qt);(0,o.useEffect)(()=>{Fn.length&&oa(Fn)},[Fn]);const ba=Object.keys(Mn!=null?Mn:{}),Kn=On.length&&ba.length;(0,o.useEffect)(()=>{Vt({[Se]:Kn?new mt(On):void 0})},[Se,Kn,On,mt,Vt]);const zn=pn[Se];return zn&&typeof zn=="object"&&!("values"in zn)||!ba.length||ba.length<=1?null:o.createElement(D.Z,{pb:1,pt:1},o.createElement(Z.Z,{variant:"button",component:"label"},J,o.createElement(fe.ZP,{multiple:!0,disableCloseOnSelect:!0,options:ba,value:On,onChange:(Yn,na)=>oa(na),renderOption:(Yn,{selected:na})=>o.createElement(hn,{selected:na,value:Yn,availableOptions:Mn,showCounts:!!dt}),size:"small",popupIcon:o.createElement(Wt.Z,{"data-testid":`${String(Se)}-picker-expand`}),renderInput:Yn=>o.createElement(bn,{...Yn,...wt})})))}const qn=(0,Q.Z)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),Vn=_=>{const{initialFilter:I=[]}=_,N=qn();return o.createElement(Ln,{label:"Lifecycle",name:"lifecycles",path:"spec.lifecycle",Filter:fa,InputProps:{className:N.input},initialSelectedOptions:I})};function xn(_,I){const N=I==null?void 0:I.defaultKind;let J,Se,Ve;return"metadata"in _?(J=_.kind,Se=_.metadata.namespace,Ve=_.metadata.name):(J=_.kind,Se=_.namespace,Ve=_.name),(Se===void 0||Se==="")&&(Se=u.zG),(I==null?void 0:I.defaultNamespace)!==void 0?(I==null?void 0:I.defaultNamespace)===Se&&(Se=void 0):Se===u.zG&&(Se=void 0),J=J.toLocaleLowerCase("en-US"),J=N&&N.toLocaleLowerCase("en-US")===J?void 0:J,`${J?`${J}:`:""}${Se?`${Se}/`:""}${Ve}`}function Bn(_,I){for(const N of["spec.profile.displayName","metadata.title"]){const J=A()(_,N);if(J&&typeof J=="string")return J}return I}function $n({enabled:_}){const I=(0,r.u)(ht),[N]=(0,o.useState)(async()=>{if(!_)return[];const J="relations.ownedBy";return I.getEntityFacets({facets:[J]}).then(Se=>Se.facets[J].map(Ve=>Ve.value).map(Ve=>{const{kind:dt,name:mt,namespace:wt}=(0,u.of)(Ve);return{apiVersion:"backstage.io/v1beta1",kind:dt,metadata:{name:mt,namespace:wt}}}).sort((Ve,dt)=>(Ve.metadata.namespace||"").localeCompare(dt.metadata.namespace||"","en-US")||Ve.metadata.name.localeCompare(dt.metadata.name,"en-US")||Ve.kind.localeCompare(dt.kind,"en-US"))).catch(()=>[])});return(0,B.default)(async(J,Se)=>{var Ve;const dt=await N;if(!dt)return{items:[]};const mt=(Ve=Se==null?void 0:Se.limit)!=null?Ve:20,{text:wt,start:qt}=yn(J),Vt=dt.filter(Pn=>ga(wt,Pn)),pn=qt+mt;return{items:Vt.slice(0,pn),...pa({entities:Vt,limit:pn,payload:{text:wt,start:pn}})}},[N],{loading:!0,value:{items:[]}})}function yn(_){return Dn(_)&&_.cursor?JSON.parse(atob(_.cursor)):{text:_.text||"",start:0}}function Dn(_){return!!_.cursor}function pa({entities:_,limit:I,payload:N}){return _.length>I?{cursor:btoa(JSON.stringify(N))}:{}}function ga(_,I){var N;const J=_.trim();return I.kind.includes(J)||((N=I.metadata.namespace)==null?void 0:N.includes(J))||I.metadata.name.includes(J)}function Ma(){const _=(0,r.u)(ht);return(0,B.default)(async(I,N)=>{var J;const Se=I,Ve=I,dt=(J=N==null?void 0:N.limit)!=null?J:20;if(Ve.cursor){const wt=await _.queryEntities({cursor:Ve.cursor,limit:dt});return{cursor:wt.pageInfo.nextCursor,items:[...Ve.items,...wt.items]}}const mt=await _.queryEntities({fullTextFilter:{term:Se.text||"",fields:["metadata.name","kind","spec.profile.displayname","metadata.title"]},filter:{kind:["User","Group"]},orderFields:[{field:"metadata.name",order:"asc"}],limit:dt});return{cursor:mt.pageInfo.nextCursor,items:mt.items}},[],{loading:!0})}function Fa({mode:_,initialSelectedOwnersRefs:I}){const N=_==="owners-only",J=Ma(),Se=$n({enabled:N}),[Ve,dt]=N?Se:J;return[Ve,dt,Ga({enabled:!N,initialSelectedOwnersRefs:I})]}function Ga({enabled:_,initialSelectedOwnersRefs:I}){const N=(0,o.useRef)({}),J=(0,r.u)(ht),[,Se]=(0,B.default)(async()=>{(await J.getEntitiesByRefs({entityRefs:I})).items.forEach(dt=>{dt&&(N.current[(0,u.eE)(dt)]=dt)})},[]);return(0,Dt.n)(()=>{_&&I.length>0&&Se()}),{getEntity:Ve=>N.current[Ve],setEntity:Ve=>{N.current[(0,u.eE)(Ve)]=Ve}}}const er=(0,Q.Z)({input:{}},{name:"CatalogReactEntityOwnerPicker"}),Ba=o.createElement(St.Z,{fontSize:"small"}),Va=o.createElement(Xe.Z,{fontSize:"small"}),Ha=_=>{var I,N,J;const Se=er(),{mode:Ve="owners-only"}=_||{},{updateFilters:dt,filters:mt,queryParameters:{owners:wt}}=$(),[qt,Vt]=(0,o.useState)(""),pn=(0,o.useMemo)(()=>[wt].flat().filter(Boolean),[wt]),[Pn,vn]=(0,o.useState)(pn.length?pn:(N=(I=mt.owners)==null?void 0:I.values)!=null?N:[]),[{value:Mn,loading:Fn},On,oa]=Fa({mode:Ve,initialSelectedOwnersRefs:Pn});(0,$e.b)(()=>On({text:qt}),[qt,On],250);const ba=(Mn==null?void 0:Mn.items)||[];return(0,o.useEffect)(()=>{if(pn.length){const Kn=new ra(pn);vn(Kn.values)}},[pn]),(0,o.useEffect)(()=>{dt({owners:Pn.length?new ra(Pn):void 0})},[Pn,dt]),["user","group"].includes(((J=mt.kind)==null?void 0:J.value.toLocaleLowerCase("en-US"))||"")?null:o.createElement(D.Z,{pb:1,pt:1},o.createElement(Z.Z,{variant:"button",component:"label"},"Owner",o.createElement(fe.ZP,{multiple:!0,disableCloseOnSelect:!0,loading:Fn,options:ba,value:Pn,getOptionSelected:(Kn,zn)=>typeof zn=="string"?(0,u.eE)(Kn)===zn:Kn===zn,getOptionLabel:Kn=>{const zn=typeof Kn=="string"?oa.getEntity(Kn)||(0,u.of)(Kn,{defaultKind:"group",defaultNamespace:"default"}):Kn;return Bn(zn,xn(zn))},onChange:(Kn,zn)=>{Vt(""),vn(zn.map(Yn=>{const na=typeof Yn=="string"?Yn:(0,u.eE)(Yn);return typeof Yn!="string"&&oa.setEntity(Yn),na}))},filterOptions:Kn=>Kn,renderOption:(Kn,{selected:zn})=>{const Yn=Kn.kind.toLocaleLowerCase("en-US")==="group";return o.createElement(re.Z,{control:o.createElement(ie.Z,{icon:Ba,checkedIcon:Va,checked:zn}),onClick:na=>na.preventDefault(),label:o.createElement(D.Z,{display:"flex",flexWrap:"wrap",alignItems:"center"},Yn?o.createElement(Bt.Z,{fontSize:"small"}):o.createElement(ot.Z,{fontSize:"small"}),"\xA0",Bn(Kn,xn(Kn,{defaultKind:Kn.kind})))})},size:"small",popupIcon:o.createElement(Wt.Z,{"data-testid":"owner-picker-expand"}),renderInput:Kn=>o.createElement(H.Z,{...Kn,className:Se.input,onChange:zn=>{Vt(zn.currentTarget.value)},variant:"outlined"}),ListboxProps:{onScroll:Kn=>{const zn=Kn.currentTarget;Math.abs(zn.scrollHeight-zn.clientHeight-zn.scrollTop)<1&&(Mn!=null&&Mn.cursor)&&On({items:Mn.items,cursor:Mn.cursor})},"data-testid":"owner-picker-listbox"}})))},Ka=(0,Q.Z)(_=>({root:{display:"inline-flex",alignItems:"center"},icon:{marginRight:_.spacing(.5),color:_.palette.text.secondary,lineHeight:0}}),{name:"CatalogReactEntityDisplayName"}),Ja=_=>{const{entityRef:I,hideIcon:N,disableTooltip:J,defaultKind:Se,defaultNamespace:Ve}=_,dt=Ka(),{primaryTitle:mt,secondaryTitle:wt,Icon:qt}=Et(I,{defaultKind:Se,defaultNamespace:Ve});let Vt=o.createElement(o.Fragment,null,mt);return Vt=o.createElement(D.Z,{component:"span",className:dt.root},qt&&!N?o.createElement(D.Z,{component:"span",className:dt.icon},o.createElement(qt,{fontSize:"inherit"})):null,Vt),wt&&!J&&(Vt=o.createElement(S.ZP,{enterDelay:1500,title:wt},Vt)),Vt},sr=(0,_e.uW)("catalog:entity-route-ref",()=>(0,m.NT)({id:"catalog:entity",params:["namespace","kind","name"]}));function dr(_){var I,N;return{kind:_.kind.toLocaleLowerCase("en-US"),namespace:(N=(I=_.metadata.namespace)==null?void 0:I.toLocaleLowerCase("en-US"))!=null?N:u.zG,name:_.metadata.name}}const Za=(0,o.forwardRef)((_,I)=>{var N;const{entityRef:J,defaultKind:Se,defaultNamespace:Ve,title:dt,children:mt,hideIcon:wt,...qt}=_,Vt=Hn(_.entityRef),pn=(N=mt!=null?mt:dt)!=null?N:o.createElement(Ja,{entityRef:J,defaultKind:Se,defaultNamespace:Ve,hideIcon:wt});return o.createElement(le.rU,{...qt,ref:I,to:Vt},pn)});function Hn(_){var I;const N=(0,m.tg)(sr);let J,Se,Ve;if(typeof _=="string"){const mt=(0,u.of)(_);J=mt.kind,Se=mt.namespace,Ve=mt.name}else"metadata"in _?(J=_.kind,Se=_.metadata.namespace,Ve=_.metadata.name):(J=_.kind,Se=_.namespace,Ve=_.name);J=J.toLocaleLowerCase("en-US"),Se=(I=Se==null?void 0:Se.toLocaleLowerCase("en-US"))!=null?I:u.zG;const dt={kind:encodeURIComponent(J),namespace:encodeURIComponent(Se),name:encodeURIComponent(Ve)};return N(dt)}function Ea(_){const{entityRefs:I,hideIcons:N,...J}=_;return o.createElement(o.Fragment,null,I.map((Se,Ve)=>{const dt=typeof Se=="string"?Se:(0,u.eE)(Se);return o.createElement(o.Fragment,{key:`${Ve}.${dt}`},Ve>0&&", ",o.createElement(Za,{...J,entityRef:Se,hideIcon:N}))}))}const Ua=_=>{const I=(0,m.tg)(sr);return o.createElement(l.Z,{component:le.rU,"aria-label":"Show",title:"Show details",to:I((0,u.iB)(_.entity))},o.createElement(it.Z,null))},tr=_=>o.createElement(l.Z,{component:le.rU,"aria-label":"Email",title:`Email ${_.email}`,to:`mailto:${_.email}`},o.createElement(at.Z,null)),Ya=_=>{var I;const N=(I=_.entity.spec.profile)==null?void 0:I.email;return N?o.createElement(tr,{email:N}):null},vt=_=>{var I;const N=(I=_.entity.spec.profile)==null?void 0:I.email;return N?o.createElement(tr,{email:N}):null},De=(0,Q.Z)(()=>({popoverPaper:{width:"30em"},descriptionTypography:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}})),Ut=4,Sn=_=>{var I,N,J,Se;const{entityRef:Ve,children:dt,delayTime:mt=500}=_,wt=De(),qt=(0,r.b)(),Vt=(0,Ee.o_)({variant:"popover",popupId:"entity-peek-ahead"}),[pn,Pn]=(0,o.useState)(!1),vn=(0,o.useMemo)(()=>(0,st.debounce)(()=>Pn(!0),mt),[mt]),[{loading:Mn,error:Fn,value:On},oa]=(0,B.default)(async()=>{const Kn=qt.get(ht);if(Kn){const zn=await Kn.getEntityByRef(Ve);if(!zn)throw new Error(`${Ve} not found`);return zn}},[qt,Ve]),ba=()=>{Pn(!1),vn.cancel()};return(0,o.useEffect)(()=>{Vt.isOpen&&!On&&!Fn&&!Mn&&oa()},[Vt.isOpen,oa,On,Fn,Mn]),o.createElement(o.Fragment,null,o.createElement(Z.Z,{component:"span",onMouseEnter:vn},o.createElement(Z.Z,{component:"span","data-testid":"trigger",...(0,Ee.b8)(Vt)},dt)),pn&&o.createElement(Je.Z,{PaperProps:{className:wt.popoverPaper},...(0,Ee.ZW)(Vt),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onMouseLeave:ba},o.createElement(b.Z,null,o.createElement(h.Z,null,Fn&&o.createElement(le.Gk,{error:Fn}),Mn&&o.createElement(le.Ex,null),On&&o.createElement(o.Fragment,null,o.createElement(Z.Z,{color:"textSecondary"},On.metadata.namespace),o.createElement(Z.Z,{variant:"h5",component:"div"},On.metadata.name),o.createElement(Z.Z,{color:"textSecondary",gutterBottom:!0},On.kind),On.metadata.description&&o.createElement(Z.Z,{className:wt.descriptionTypography,paragraph:!0},On.metadata.description),o.createElement(Z.Z,null,(N=(I=On.spec)==null?void 0:I.type)==null?void 0:N.toString()),o.createElement(D.Z,{marginTop:"0.5em"},(On.metadata.tags||[]).slice(0,Ut).map(Kn=>o.createElement(C.Z,{key:Kn,size:"small",label:Kn})),((J=On.metadata.tags)==null?void 0:J.length)&&((Se=On.metadata.tags)==null?void 0:Se.length)>Ut&&o.createElement(S.ZP,{title:"Drill into the entity to see all of the tags."},o.createElement(C.Z,{key:"other-tags",size:"small",label:"..."}))))),!Fn&&On&&o.createElement(p.Z,null,o.createElement(o.Fragment,null,(0,u.U2)(On)&&o.createElement(vt,{entity:On}),(0,u.Dk)(On)&&o.createElement(Ya,{entity:On}),o.createElement(Ua,{entity:On}))))))},kn=(0,Q.Z)(_=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),ta=()=>{var _,I;const N=kn(),{filters:J,updateFilters:Se}=$(),[Ve,dt]=(0,o.useState)((I=(_=J.text)==null?void 0:_.value)!=null?I:"");return(0,w.Z)(()=>{Se({text:Ve.length?new la(Ve):void 0})},250,[Ve,Se]),o.createElement(be.Z,{className:N.searchToolbar},o.createElement(ge.Z,null,o.createElement(ye.Z,{"aria-label":"search",id:"input-with-icon-adornment",className:N.input,placeholder:"Search",autoComplete:"off",onChange:mt=>dt(mt.target.value),value:Ve,startAdornment:o.createElement(ne.Z,{position:"start"},o.createElement(Nt.Z,null)),endAdornment:o.createElement(ne.Z,{position:"end"},o.createElement(l.Z,{"aria-label":"clear search",onClick:()=>dt(""),edge:"end",disabled:Ve.length===0},o.createElement(Pt.Z,null)))})))},ca=Object.freeze({createEntityRefColumn(_){const{defaultKind:I}=_;function N(J){var Se;return((Se=J.metadata)==null?void 0:Se.title)||xn(J,{defaultKind:I})}return{title:"Name",highlight:!0,customFilterAndSearch(J,Se){return N(Se).includes(J)},customSort(J,Se){return N(J).localeCompare(N(Se))},render:J=>{var Se;return o.createElement(Za,{entityRef:J,defaultKind:I,title:(Se=J.metadata)==null?void 0:Se.title})}}},createEntityRelationColumn(_){const{title:I,relation:N,defaultKind:J,filter:Se}=_;function Ve(mt){return(0,Be.g)(mt,N,Se)}function dt(mt){return Ve(mt).map(wt=>xn(wt,{defaultKind:J})).join(", ")}return{title:I,customFilterAndSearch(mt,wt){return dt(wt).includes(mt)},customSort(mt,wt){return dt(mt).localeCompare(dt(wt))},render:mt=>o.createElement(Ea,{entityRefs:Ve(mt),defaultKind:J})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:u.S4,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:u.cz,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:u.cz,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:_=>o.createElement(le.Or,{text:_.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),Wa=[ca.createEntityRefColumn({defaultKind:"system"}),ca.createDomainColumn(),ca.createOwnerColumn(),ca.createMetadataDescriptionColumn()],za=[ca.createEntityRefColumn({defaultKind:"component"}),ca.createSystemColumn(),ca.createOwnerColumn(),ca.createSpecTypeColumn(),ca.createSpecLifecycleColumn(),ca.createMetadataDescriptionColumn()],Aa=(0,Q.Z)(_=>({empty:{padding:_.spacing(2),display:"flex",justifyContent:"center"}})),Ia=_=>{const{entities:I,title:N,emptyContent:J,variant:Se="gridItem",columns:Ve,tableOptions:dt={}}=_,mt=Aa(),wt={minWidth:"0",width:"100%"};return Se==="gridItem"&&(wt.height="calc(100% - 10px)"),o.createElement(le.iA,{columns:Ve,title:N,style:wt,emptyContent:J&&o.createElement("div",{className:mt.empty},J),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1,...dt},data:I})};Ia.columns=ca,Ia.systemEntityColumns=Wa,Ia.componentEntityColumns=za;const La=(0,Q.Z)({input:{}},{name:"CatalogReactEntityTagPicker"}),nr=_=>{const I=La();return o.createElement(Ln,{label:"Tags",name:"tags",path:"metadata.tags",Filter:ea,showCounts:_.showCounts,InputProps:{className:I.input}})},f=_=>{var I;const{hidden:N,initialFilter:J}=_,Se=(0,r.u)(r.l),{error:Ve,availableTypes:dt,selectedTypes:mt,setSelectedTypes:wt}=T();if((0,o.useEffect)(()=>{Ve&&Se.post({message:"Failed to load entity types",severity:"error"}),J&&wt([J])},[Ve,Se,J,wt]),dt.length===0||Ve)return null;const qt=[{value:"all",label:"all"},...dt.map(Vt=>({value:Vt,label:Vt}))];return N?null:o.createElement(D.Z,{pb:1,pt:1},o.createElement(le.Ph,{label:"Type",items:qt,selected:(I=qt.length>1?mt[0]:void 0)!=null?I:"all",onChange:Vt=>wt(Vt==="all"?[]:[String(Vt)])}))},c=(0,oe.Z)({root:{color:"#f3ba37"}})(on.Z),y=_=>{const{toggleStarredEntity:I,isStarredEntity:N}=pe(_.entity);return o.createElement(l.Z,{"aria-label":"favorite",color:"inherit",..._,onClick:()=>I()},o.createElement(S.ZP,{title:N?"Remove from favorites":"Add to favorites"},N?o.createElement(c,null):o.createElement(Ze.Z,null)))},ee=He.Z;function ke(_,I){if(_)return _.toLocaleLowerCase("en-US");if(I)try{return(0,u.of)(I).kind.toLocaleLowerCase("en-US")}catch{return}}function Ot(_,I){const N=(0,m.qD)(),J=ke(_,I);return J&&N.getSystemIcon(`kind:${J}`)||ee}function Gt(_){const{kind:I,entityRef:N,...J}=_,Se=Ot(I,N);return o.createElement(Se,{...J})}const rn=(0,Q.Z)(_=>({node:{fill:_.palette.grey[300],stroke:_.palette.grey[300],"&.primary":{fill:_.palette.primary.light,stroke:_.palette.primary.light},"&.secondary":{fill:_.palette.secondary.light,stroke:_.palette.secondary.light}},text:{fill:_.palette.getContrastText(_.palette.grey[300]),"&.primary":{fill:_.palette.primary.contrastText},"&.secondary":{fill:_.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function Tn(_){const I=(0,r.u)(ht),N=(0,u.eE)(_),{loading:J,error:Se,value:Ve}=(0,se.default)(async()=>{const dt=await I.getEntityAncestors({entityRef:N}),mt=new Array,wt=new Array;for(const qt of dt.items){const Vt=(0,u.eE)(qt.entity),pn=Vt===dt.rootEntityRef;mt.push({id:Vt,root:pn,...qt.entity});for(const Pn of qt.parentEntityRefs)wt.push({from:Vt,to:Pn})}return{nodes:mt,edges:wt}},[N]);return{loading:J,error:Se,nodes:(Ve==null?void 0:Ve.nodes)||[],edges:(Ve==null?void 0:Ve.edges)||[]}}function Nn({node:_}){const I=rn(),N=(0,O.s0)(),J=(0,m.tg)(sr),[Se,Ve]=(0,o.useState)(0),[dt,mt]=(0,o.useState)(0),wt=(0,o.useRef)(null);(0,o.useLayoutEffect)(()=>{if(wt.current){let{height:On,width:oa}=wt.current.getBBox();On=Math.round(On),oa=Math.round(oa),(On!==dt||oa!==Se)&&(Ve(oa),mt(On))}},[Se,dt]);const qt=10,Vt=dt,pn=Vt+qt,Pn=pn+Se+qt*2,vn=dt+qt*2,Mn=_.metadata.title||(_.kind&&_.metadata.name&&_.metadata.namespace?xn({kind:_.kind,name:_.metadata.name,namespace:_.metadata.namespace||""}):_.id),Fn=()=>{N(J({kind:_.kind,namespace:_.metadata.namespace||u.zG,name:_.metadata.name}))};return o.createElement("g",{onClick:Fn,className:I.clickable},o.createElement("rect",{className:Tt()(I.node,_.root?"secondary":"primary"),width:Pn,height:vn,rx:10}),o.createElement(Gt,{kind:_.kind,y:qt,x:qt,width:Vt,height:Vt,className:Tt()(I.text,_.root?"secondary":"primary")}),o.createElement("text",{ref:wt,className:Tt()(I.text,_.root?"secondary":"primary"),y:vn/2,x:pn+(Se+qt*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},Mn))}function Jn(_){const{loading:I,error:N,nodes:J,edges:Se}=Tn(_.entity);return I?o.createElement(le.Ex,null):N?o.createElement(le.Gk,{error:N}):o.createElement(o.Fragment,null,o.createElement(X.Z,{variant:"h2"},"Ancestry"),o.createElement(X.Z,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",o.createElement(le.rU,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),o.createElement(D.Z,{mt:4},o.createElement(le.mn,{nodes:J,edges:Se,renderNode:Nn,direction:le.NX.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const Sa=(0,Q.Z)(_=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:_.spacing(2)},helpIcon:{marginLeft:_.spacing(1),color:_.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function _a(_){const I=Sa();return o.createElement(xe.Z,{..._,primaryTypographyProps:{className:I.monospace},secondaryTypographyProps:{className:I.monospace}})}function Qa(_){const I=Sa();return o.createElement(It.Z,{className:I.monospace},_.children)}function ar(_){return o.createElement(D.Z,{mt:2},o.createElement(b.Z,{variant:"outlined"},o.createElement(h.Z,null,o.createElement(Z.Z,{variant:"h6",gutterBottom:!0},_.title,_.helpLink&&o.createElement(Hr,{to:_.helpLink})),_.children)))}function uo(_){if(_.match(/^url:https?:\/\//))return _.slice(4);if(_.match(/^https?:\/\//))return _}function Fr(_){const[I,N]=_.entry,J=uo(N);return o.createElement(P.Z,null,_.indent&&o.createElement(Jt.Z,null),o.createElement(_a,{primary:I,secondary:J?o.createElement(le.rU,{to:J},N):N}))}function Hr(_){const I=Sa();return o.createElement(le.rU,{to:_.to,className:I.helpIcon},o.createElement(ve.Z,{fontSize:"inherit"}))}const mo=(0,Q.Z)({root:{display:"flex",flexDirection:"column"}});function Br(_){var I,N;const J=(0,r.u)(ht),Se=(0,u.eE)(_),Ve=(I=_.metadata.annotations)==null?void 0:I[u.P1],dt=(N=_.metadata.annotations)==null?void 0:N[u.q1],{loading:mt,error:wt,value:qt}=(0,se.default)(async()=>!Ve&&!dt?[]:(await J.getEntities({filter:[...Ve?[{[`metadata.annotations.${u.P1}`]:Ve}]:[],...dt?[{[`metadata.annotations.${u.q1}`]:dt}]:[]]})).items,[Ve,dt]);return{loading:mt,error:wt,location:Ve,originLocation:dt,colocatedEntities:qt==null?void 0:qt.filter(Vt=>(0,u.eE)(Vt)!==Se)}}function Kr(_){return o.createElement(me.Z,{dense:!0},_.header&&o.createElement(Fr,{key:"header",entry:_.header}),_.entities.map(I=>o.createElement(P.Z,{key:(0,u.eE)(I)},o.createElement(Jt.Z,null,o.createElement(Gt,{kind:I.kind})),o.createElement(_a,{primary:o.createElement(Za,{entityRef:I})}))))}function zr(_){const{entity:I}=_,{loading:N,error:J,location:Se,originLocation:Ve,colocatedEntities:dt}=Br(I);if(N)return o.createElement(le.Ex,null);if(J)return o.createElement(le.Gk,{error:J});if(!Se&&!Ve)return o.createElement(Ae.Z,{severity:"warning"},"Entity had no location information.");if(!(dt!=null&&dt.length))return o.createElement(Ae.Z,{severity:"info"},"There were no other entities on this location.");if(Se===Ve)return o.createElement(Kr,{entities:dt});const mt=dt.filter(qt=>{var Vt;return((Vt=qt.metadata.annotations)==null?void 0:Vt[u.P1])===Se}),wt=dt.filter(qt=>{var Vt;return((Vt=qt.metadata.annotations)==null?void 0:Vt[u.q1])===Ve});return o.createElement(o.Fragment,null,mt.length>0&&o.createElement(Kr,{entities:mt,header:["At the same location",Se]}),wt.length>0&&o.createElement(Kr,{entities:wt,header:["At the same origin",Ve]}))}function Jr(_){const I=mo();return o.createElement(o.Fragment,null,o.createElement(X.Z,{variant:"h2"},"Colocated"),o.createElement(X.Z,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),o.createElement("div",{className:I.root},o.createElement(zr,{entity:_.entity})))}function pr(_){return Object.fromEntries([...Object.entries(_)].sort((I,N)=>I[0]<N[0]?-1:1))}function po(_){return o.createElement(o.Fragment,null,o.createElement(X.Z,{variant:"h2"},"Entity as JSON"),o.createElement(X.Z,null,"This is the raw entity data as received from the catalog, on JSON form."),o.createElement(X.Z,null,o.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},o.createElement(le.Oi,{text:JSON.stringify(pr(_.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const jr=(0,Q.Z)({root:{display:"flex",flexDirection:"column"}});function Ur(_){var I,N,J;const Se=jr(),{apiVersion:Ve,kind:dt,metadata:mt,spec:wt,relations:qt=[],status:Vt={}}=_.entity,pn=lt()(ut()(qt,vn=>vn.targetRef),"type"),Pn=(0,u.eE)(_.entity);return o.createElement(o.Fragment,null,o.createElement(X.Z,{variant:"h2"},"Overview"),o.createElement("div",{className:Se.root},o.createElement(ar,{title:"Identity"},o.createElement(me.Z,{dense:!0},o.createElement(P.Z,null,o.createElement(_a,{primary:"apiVersion",secondary:Ve})),o.createElement(P.Z,null,o.createElement(_a,{primary:"kind",secondary:dt})),(wt==null?void 0:wt.type)&&o.createElement(P.Z,null,o.createElement(_a,{primary:"spec.type",secondary:(I=wt.type)==null?void 0:I.toString()})),mt.uid&&o.createElement(P.Z,null,o.createElement(_a,{primary:"uid",secondary:mt.uid}),o.createElement(Lt.Z,null,o.createElement(le.bj,{text:mt.uid}))),mt.etag&&o.createElement(P.Z,null,o.createElement(_a,{primary:"etag",secondary:mt.etag}),o.createElement(Lt.Z,null,o.createElement(le.bj,{text:mt.etag}))),o.createElement(P.Z,null,o.createElement(_a,{primary:"entityRef",secondary:Pn}),o.createElement(Lt.Z,null,o.createElement(le.bj,{text:Pn}))))),o.createElement(ar,{title:"Metadata"},!!Object.keys(mt.annotations||{}).length&&o.createElement(me.Z,{dense:!0,subheader:o.createElement(Qa,null,"Annotations",o.createElement(Hr,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(mt.annotations).map(vn=>o.createElement(Fr,{key:vn[0],indent:!0,entry:vn}))),!!Object.keys(mt.labels||{}).length&&o.createElement(me.Z,{dense:!0,subheader:o.createElement(Qa,null,"Labels")},Object.entries(mt.labels).map(vn=>o.createElement(Fr,{key:vn[0],indent:!0,entry:vn}))),!!((N=mt.tags)!=null&&N.length)&&o.createElement(me.Z,{dense:!0,subheader:o.createElement(Qa,null,"Tags")},mt.tags.map((vn,Mn)=>o.createElement(P.Z,{key:`${vn}-${Mn}`},o.createElement(Jt.Z,null),o.createElement(_a,{primary:vn}))))),!!qt.length&&o.createElement(ar,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(pn).map(([vn,Mn],Fn)=>o.createElement("div",{key:Fn},o.createElement(me.Z,{dense:!0,subheader:o.createElement(Qa,null,vn)},Mn.map(On=>o.createElement(P.Z,{key:On.targetRef},o.createElement(Jt.Z,null,o.createElement(Gt,{entityRef:On.targetRef})),o.createElement(_a,{primary:o.createElement(Za,{entityRef:On.targetRef})}))))))),!!((J=Vt.items)!=null&&J.length)&&o.createElement(ar,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},Vt.items.map((vn,Mn)=>o.createElement("div",{key:Mn},o.createElement(Z.Z,null,vn.level,": ",vn.type),o.createElement(D.Z,{ml:2},vn.message))))))}function Yr(_){return o.createElement(o.Fragment,null,o.createElement(X.Z,{variant:"h2"},"Entity as YAML"),o.createElement(X.Z,null,"This is the raw entity data as received from the catalog, on YAML form."),o.createElement(X.Z,null,o.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},o.createElement(le.Oi,{text:$t.ZP.stringify(pr(_.entity)),language:"yaml",showCopyCodeButton:!0}))))}const Gr=(0,Q.Z)(_=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:_.palette.background.paper},tabs:{borderRight:`1px solid ${_.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function Sr(_){const{children:I,value:N,index:J,...Se}=_,Ve=Gr();return o.createElement("div",{role:"tabpanel",hidden:N!==J,id:`vertical-tabpanel-${J}`,"aria-labelledby":`vertical-tab-${J}`,className:Ve.tabContents,...Se},N===J&&o.createElement(D.Z,{pl:3,pr:3},I))}function Tr(_){return{id:`vertical-tab-${_}`,"aria-controls":`vertical-tabpanel-${_}`}}function go(_){const I=Gr(),[N,J]=o.useState(0);return(0,o.useEffect)(()=>{J(0)},[_.open]),_.entity?o.createElement(Ct.Z,{fullWidth:!0,maxWidth:"xl",open:_.open,onClose:_.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:I.fullHeightDialog}},o.createElement(je.Z,{id:"entity-inspector-dialog-title"},"Entity Inspector"),o.createElement(nt.Z,{dividers:!0},o.createElement("div",{className:I.root},o.createElement(Te.Z,{orientation:"vertical",variant:"scrollable",value:N,onChange:(Se,Ve)=>J(Ve),"aria-label":"Inspector options",className:I.tabs},o.createElement(gt.Z,{label:"Overview",...Tr(0)}),o.createElement(gt.Z,{label:"Ancestry",...Tr(1)}),o.createElement(gt.Z,{label:"Colocated",...Tr(2)}),o.createElement(gt.Z,{label:"Raw JSON",...Tr(3)}),o.createElement(gt.Z,{label:"Raw YAML",...Tr(4)})),o.createElement(Sr,{value:N,index:0},o.createElement(Ur,{entity:_.entity})),o.createElement(Sr,{value:N,index:1},o.createElement(Jn,{entity:_.entity})),o.createElement(Sr,{value:N,index:2},o.createElement(Jr,{entity:_.entity})),o.createElement(Sr,{value:N,index:3},o.createElement(po,{entity:_.entity})),o.createElement(Sr,{value:N,index:4},o.createElement(Yr,{entity:_.entity})))),o.createElement(de.Z,null,o.createElement(te.Z,{onClick:_.onClose,color:"primary"},"Close"))):null}function Ar(_){var I;const N=(0,r.u)(ht),J=(I=_.metadata.annotations)==null?void 0:I[u.q1],Se=_.metadata.uid,Ve=J==="bootstrap:bootstrap",dt=(0,se.default)(async()=>{const Mn=N.getLocationByRef(J);let Fn;if(!J)Fn=Promise.resolve([]);else{const On=`metadata.annotations.${u.q1}`;Fn=N.getEntities({filter:{[On]:J},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(oa=>oa.items)}return Promise.all([Mn,Fn]).then(([On,oa])=>({location:On,colocatedEntities:oa}))},[N,_]),mt=(0,o.useCallback)(async function(){const{location:Fn}=dt.value;await N.removeLocationById(Fn.id)},[N,dt]),wt=(0,o.useCallback)(async function(){await N.removeEntityByUid(Se)},[N,Se]);if(Ve)return{type:"bootstrap",location:J,deleteEntity:wt};const{loading:qt,error:Vt,value:pn}=dt;if(qt)return{type:"loading"};if(Vt)return{type:"error",error:Vt};const{location:Pn,colocatedEntities:vn}=pn;return Pn?{type:"unregister",location:J,colocatedEntities:vn.map(u.iB),unregisterLocation:mt,deleteEntity:wt}:{type:"only-delete",deleteEntity:wt}}const Qr=(0,Q.Z)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),Xr=({entity:_,onConfirm:I,onClose:N})=>{var J;const Se=(0,r.u)(r.l),Ve=(0,r.u)(r.p),dt=Qr(),mt=Ar(_),[wt,qt]=(0,o.useState)(!1),[Vt,pn]=(0,o.useState)(!1),Pn=(J=Ve.getOptionalString("app.title"))!=null?J:"Backstage",vn=(0,o.useCallback)(async function(){if("unregisterLocation"in mt){pn(!0);try{await mt.unregisterLocation(),I()}catch(oa){(0,j.BD)(oa),Se.post({message:oa.message})}finally{pn(!1)}}},[Se,I,mt]),Mn=(0,o.useCallback)(async function(){var oa;if("deleteEntity"in mt){pn(!0);try{await mt.deleteEntity();const ba=(oa=_.metadata.title)!=null?oa:_.metadata.name;I(),Se.post({message:`Removed entity ${ba}`,severity:"success",display:"transient"})}catch(ba){(0,j.BD)(ba),Se.post({message:ba.message})}finally{pn(!1)}}},[Se,I,mt,_]),Fn=()=>o.createElement(de.Z,{className:dt.dialogActions},o.createElement(te.Z,{onClick:N,color:"primary"},"Cancel"));return mt.type==="loading"?o.createElement(le.Ex,null):mt.type==="error"?o.createElement(le.Gk,{error:mt.error}):mt.type==="bootstrap"?o.createElement(o.Fragment,null,o.createElement(Ae.Z,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',mt.location,'"). If you believe this is in error, please contact the ',Pn," ","integrator."),o.createElement(D.Z,{marginTop:2},!wt&&o.createElement(o.Fragment,null,o.createElement(te.Z,{variant:"text",size:"small",color:"primary",className:dt.advancedButton,onClick:()=>qt(!0)},"Advanced Options"),o.createElement(Fn,null)),wt&&o.createElement(o.Fragment,null,o.createElement(X.Z,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),o.createElement(te.Z,{variant:"contained",color:"secondary",disabled:Vt,onClick:Mn},"Delete Entity"),o.createElement(Fn,null)))):mt.type==="only-delete"?o.createElement(o.Fragment,null,o.createElement(X.Z,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),o.createElement(te.Z,{variant:"contained",color:"secondary",disabled:Vt,onClick:Mn},"Delete Entity"),o.createElement(Fn,null)):mt.type==="unregister"?o.createElement(o.Fragment,null,o.createElement(X.Z,null,"This action will unregister the following entities:"),o.createElement(X.Z,{component:"ul"},mt.colocatedEntities.map(On=>o.createElement("li",{key:`${On.kind}:${On.namespace}/${On.name}`},o.createElement(Za,{entityRef:On})))),o.createElement(X.Z,null,"Located at the following location:"),o.createElement(X.Z,{component:"ul"},o.createElement("li",null,mt.location)),o.createElement(X.Z,null,"To undo, just re-register the entity in ",Pn,"."),o.createElement(D.Z,{marginTop:2},o.createElement(te.Z,{variant:"contained",color:"secondary",disabled:Vt,onClick:vn},"Unregister Location"),!wt&&o.createElement(D.Z,{component:"span",marginLeft:2},o.createElement(te.Z,{variant:"text",size:"small",color:"primary",className:dt.advancedButton,onClick:()=>qt(!0)},"Advanced Options"))),wt&&o.createElement(o.Fragment,null,o.createElement(D.Z,{paddingTop:4,paddingBottom:4},o.createElement(G.Z,null)),o.createElement(X.Z,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),o.createElement(te.Z,{variant:"contained",color:"secondary",disabled:Vt,onClick:Mn},"Delete Entity"))):o.createElement(Ae.Z,{severity:"error"},"Internal error: Unknown state")},mr=_=>{const{open:I,onConfirm:N,onClose:J,entity:Se}=_;return o.createElement(Ct.Z,{open:I,onClose:J},o.createElement(je.Z,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),o.createElement(nt.Z,null,o.createElement(Xr,{entity:Se,onConfirm:N,onClose:J})))};function gr(){const _=(0,r.u)(r.t),I=(0,r.u)(ht),{filters:N}=$(),{value:J,loading:Se}=(0,se.default)(async()=>(await _.getBackstageIdentity()).ownershipEntityRefs,[]),{user:Ve,owners:dt,...mt}=N,{["metadata.name"]:wt,...qt}=tn((0,st.compact)(Object.values(mt))),[{value:Vt,loading:pn},Pn]=(0,B.default)(async Mn=>{const Fn=$r(Mn.owners,Mn.ownershipEntityRefs);if(Fn===void 0)return 0;const{totalItems:On}=await I.queryEntities({filter:{...Mn.filter,"relations.ownedBy":Fn},limit:0});return On},[],{loading:!0});return(0,ze.Z)(()=>{Object.keys(qt).length!==0&&J!==void 0&&Pn({ownershipEntityRefs:J,owners:dt,filter:qt})},[J,dt,qt]),{count:Vt,loading:Se||pn,filter:(0,o.useMemo)(()=>ia.owned(J!=null?J:[]),[J]),ownershipEntityRefs:J}}function $r(_,I){var N;if(I===void 0)return;const J=(N=_==null?void 0:_.values)!=null?N:[];if(J.length){const Se=(0,st.intersection)(J,I);return Se.length===0?void 0:Se}return I}function Or(){const _=(0,r.u)(ht),{filters:I}=$(),N=(0,o.useRef)(),J=(0,o.useMemo)(()=>{const{user:dt,...mt}=I,wt=(0,st.compact)(Object.values(mt)),qt=tn(wt),Vt={filter:qt,limit:0};return Object.keys(qt).length===0?(N.current=void 0,N.current):(0,st.isEqual)(Vt,N.current)?N.current:(N.current=Vt,Vt)},[I]),{value:Se,loading:Ve}=(0,se.default)(async()=>{if(J===void 0)return 0;const{totalItems:dt}=await _.queryEntities(J);return dt},[J]);return{count:Se,loading:Ve}}function hr(){const _=(0,r.u)(ht),{filters:I}=$(),{starredEntities:N}=Ce(),J=(0,o.useRef)(),Se=(0,o.useMemo)(()=>{const{user:wt,...qt}=I,Vt=(0,st.compact)(Object.values(qt)),vn={filter:{...tn(Vt),["metadata.name"]:Array.from(N).map(Mn=>(0,u.of)(Mn).name)},limit:1e3};return(0,st.isEqual)(vn,J.current)?J.current:(J.current=vn,vn)},[I,N]),{value:Ve,loading:dt}=(0,se.default)(async()=>N.size?(await _.queryEntities(Se)).items.map(qt=>(0,u.eE)({kind:qt.kind,namespace:qt.metadata.namespace,name:qt.metadata.name})).filter(qt=>N.has(qt)).length:0,[Se,N]),mt=(0,o.useMemo)(()=>ia.starred(Array.from(N)),[N]);return{count:Ve,loading:dt,filter:mt}}const Dr=(0,Q.Z)(_=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:_.spacing(1,0,1,0)},title:{margin:_.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:_.palette.text.primary},menuItem:{minHeight:_.spacing(6)},groupWrapper:{margin:_.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function Ir(_){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:he.Z},{id:"starred",label:"Starred",icon:on.Z}]},{name:_!=null?_:"Company",items:[{id:"all",label:"All"}]}]}const rr=_=>{var I;const{initialFilter:N,availableFilters:J}=_,Se=Dr(),dt=(I=(0,r.u)(r.p).getOptionalString("organization.name"))!=null?I:"Company",{filters:mt,updateFilters:wt,queryParameters:{kind:qt,user:Vt}}=$(),pn=["starred","all"],Pn=Ir(dt).map(Ca=>({...Ca,items:Ca.items.filter(({id:Da})=>["group","user"].some(Er=>Er===qt)?pn.includes(Da):!J||J.includes(Da))})).filter(({items:Ca})=>!!Ca.length),{count:vn,loading:Mn,filter:Fn}=gr(),{count:On}=Or(),{count:oa,filter:ba,loading:Kn}=hr(),zn=(0,o.useMemo)(()=>[Vt].flat()[0],[Vt]),[Yn,na]=(0,o.useState)(zn!=null?zn:N),ma=(0,o.useMemo)(()=>({all:On,starred:oa,owned:vn}),[oa,vn,On]);(0,o.useEffect)(()=>{zn&&na(zn)},[zn]);const Ta=Mn||Kn;return(0,o.useEffect)(()=>{!Ta&&Yn&&Yn!=="all"&&ma[Yn]===0&&na("all")},[Ta,ma,Yn,na]),(0,o.useEffect)(()=>{if(!Yn||Ta)return;wt({user:(()=>Yn==="owned"?Fn:Yn==="starred"?ba:ia.all())()})},[Yn,ba,Fn,wt,Ta]),o.createElement(b.Z,{className:Se.root},Pn.map(Ca=>o.createElement(o.Fragment,{key:Ca.name},o.createElement(Z.Z,{variant:"subtitle2",component:"span",className:Se.title},Ca.name),o.createElement(b.Z,{className:Se.groupWrapper},o.createElement(me.Z,{disablePadding:!0,dense:!0,role:"menu","aria-label":Ca.name},Ca.items.map(Da=>{var Er,to;return o.createElement(Pe.Z,{role:"none presentation",key:Da.id,divider:!0,onClick:()=>na(Da.id),selected:Da.id===((Er=mt.user)==null?void 0:Er.value),className:Se.menuItem,disabled:ma[Da.id]===0,"data-testid":`user-picker-${Da.id}`,tabIndex:0,ContainerProps:{role:"menuitem"}},Da.icon&&o.createElement(Jt.Z,{className:Se.listIcon},o.createElement(Da.icon,{fontSize:"small"})),o.createElement(xe.Z,null,o.createElement(Z.Z,{variant:"body1"},Da.label," ")),o.createElement(Lt.Z,null,(to=ma[Da.id])!=null?to:"-"))}))))))},ho=(0,Q.Z)({input:{}},{name:"CatalogReactEntityProcessingStatusPickerPicker"}),fo=o.createElement(St.Z,{fontSize:"small"}),Eo=o.createElement(Xe.Z,{fontSize:"small"}),qr=()=>{const _=ho(),{updateFilters:I}=$(),[N,J]=(0,o.useState)([]);function Se(mt){I({orphan:mt?new ue(mt):void 0})}function Ve(mt){I({error:mt?new Qe(mt):void 0})}const dt=["Is Orphan","Has Error"];return o.createElement(D.Z,{pb:1,pt:1},o.createElement(Z.Z,{variant:"button",component:"label"},"Processing Status",o.createElement(fe.ZP,{multiple:!0,disableCloseOnSelect:!0,options:dt,value:N,onChange:(mt,wt)=>{J(wt),Se(wt.includes("Is Orphan")),Ve(wt.includes("Has Error"))},renderOption:(mt,{selected:wt})=>o.createElement(re.Z,{control:o.createElement(ie.Z,{icon:fo,checkedIcon:Eo,checked:wt}),onClick:qt=>qt.preventDefault(),label:mt}),size:"small",popupIcon:o.createElement(Wt.Z,{"data-testid":"processing-status-picker-expand"}),renderInput:mt=>o.createElement(H.Z,{...mt,className:_.input,variant:"outlined"})})))},eo=(0,Q.Z)({input:{}},{name:"CatalogReactEntityNamespacePicker"}),ha=()=>{const _=eo();return o.createElement(Ln,{label:"Namespace",name:"namespace",path:"metadata.namespace",Filter:Pa,InputProps:{className:_.input}})},Xa=(0,Q.Z)(_=>({code:{borderRadius:6,margin:_.spacing(2,0),background:_.palette.type==="dark"?"#444":_.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function Zr(_,I){var N,J;const Se=(I==null?void 0:I.kind)||"Component",Ve=(I==null?void 0:I.metadata.name)||"example",dt=((N=I==null?void 0:I.spec)==null?void 0:N.type)||"website",mt=((J=I==null?void 0:I.spec)==null?void 0:J.owner)||"user:default/guest",wt=`apiVersion: backstage.io/v1alpha1
kind: ${Se}
metadata:
  name: ${Ve}
  annotations:${_.map(pn=>`
    ${pn}: value`).join("")}
spec:
  type: ${dt}
  owner: ${mt}`;let qt=6;const Vt=[];return _.forEach(()=>{Vt.push(qt),qt++}),{yamlText:wt,lineNumbers:Vt}}function lr(_,I="Component"){const N=_.length<=1;return o.createElement(o.Fragment,null,"The ",N?"annotation":"annotations"," ",_.map(J=>o.createElement("code",null,J)).reduce((J,Se)=>o.createElement(o.Fragment,null,J,", ",Se))," ",N?"is":"are"," missing. You need to add the"," ",N?"annotation":"annotations"," to your ",I," if you want to enable this tool.")}function fr(_){let I;try{I=(0,Be.u)().entity}catch{}const{annotation:N,readMoreUrl:J}=_,Se=Array.isArray(N)?N:[N],Ve=J||"https://backstage.io/docs/features/software-catalog/well-known-annotations",dt=Xa(),mt=(I==null?void 0:I.kind)||"Component",{yamlText:wt,lineNumbers:qt}=Zr(Se,I);return o.createElement(le.ub,{missing:"field",title:"Missing Annotation",description:lr(Se,mt),action:o.createElement(o.Fragment,null,o.createElement(Z.Z,{variant:"body1"},"Add the annotation to your ",mt," YAML as shown in the highlighted example below:"),o.createElement(D.Z,{className:dt.code},o.createElement(le.Oi,{text:wt,language:"yaml",showLineNumbers:!0,highlightedNumbers:qt,customStyle:{background:"inherit",fontSize:"115%"}})),o.createElement(te.Z,{color:"primary",component:le.rU,to:Ve},"Read more"))})}function Vr(_){var I;const{children:N,value:J}=_,[Se,Ve]=useState((I=J==null?void 0:J.filters)!=null?I:{}),dt=useCallback(qt=>{Ve(Vt=>{const pn=typeof qt=="function"?qt(Vt):qt;return{...Vt,...pn}})},[]),mt=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),wt=useMemo(()=>{var qt,Vt,pn,Pn,vn;return{entities:(qt=J==null?void 0:J.entities)!=null?qt:mt.entities,backendEntities:(Vt=J==null?void 0:J.backendEntities)!=null?Vt:mt.backendEntities,updateFilters:(pn=J==null?void 0:J.updateFilters)!=null?pn:dt,filters:Se,loading:(Pn=J==null?void 0:J.loading)!=null?Pn:!1,queryParameters:(vn=J==null?void 0:J.queryParameters)!=null?vn:mt.queryParameters,error:J==null?void 0:J.error}},[J,mt,Se,dt]);return React.createElement(yt.Provider,{value:wt},N)}},33394:(Rn,kt,e)=>{"use strict";e.d(kt,{C:()=>h});var r=e(34520),m=e(49558),u=e(73495),W=e(78373),A=e(90436),o=e(15459),U=e(93750),We=e(27604),we=e(2997),a=e(11640),te=e(28347),q=e(76635),D=e.n(q),Z=e(19928),Le=e.n(Z),ie=e(2784),re=e(7089);const Q=Object.freeze({createNameColumn(p){function be(ge){var ye;return((ye=ge.metadata)==null?void 0:ye.title)||(0,u.$3)(ge,{defaultKind:p==null?void 0:p.defaultKind})}return{title:"Name",field:"resolved.entityRef",highlight:!0,customSort({entity:ge},{entity:ye}){return be(ge).localeCompare(be(ye))},render:({entity:ge})=>ie.createElement(u.dx,{entityRef:ge,defaultKind:(p==null?void 0:p.defaultKind)||"Component"})}},createSystemColumn(){return{title:"System",field:"resolved.partOfSystemRelationTitle",render:({resolved:p})=>ie.createElement(u.rI,{entityRefs:p.partOfSystemRelations,defaultKind:"system"})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:p})=>ie.createElement(u.rI,{entityRefs:p.ownedByRelations,defaultKind:"group"})}},createSpecTargetsColumn(){return{title:"Targets",field:"entity.spec.targets",render:({entity:p})=>{var be,ge;return ie.createElement(ie.Fragment,null,(((be=p==null?void 0:p.spec)==null?void 0:be.targets)||((ge=p==null?void 0:p.spec)==null?void 0:ge.target))&&ie.createElement(m.Or,{text:(p.spec.targets||[p.spec.target]).join(", "),placement:"bottom-start"}))}}},createSpecTypeColumn(p={hidden:!1}){return{title:"Type",field:"entity.spec.type",hidden:p.hidden,width:"auto"}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"entity.spec.lifecycle"}},createMetadataDescriptionColumn(){return{title:"Description",field:"entity.metadata.description",render:({entity:p})=>ie.createElement(m.Or,{text:p.metadata.description,placement:"bottom-start"}),width:"auto"}},createTagsColumn(){return{title:"Tags",field:"entity.metadata.tags",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:p})=>ie.createElement(ie.Fragment,null,p.metadata.tags&&p.metadata.tags.map(be=>ie.createElement(re.Z,{key:be,label:be,size:"small",variant:"outlined",style:{marginBottom:"0px"}}))),width:"auto"}},createTitleColumn(p){return{title:"Title",field:"entity.metadata.title",hidden:p==null?void 0:p.hidden,searchable:!0}},createLabelColumn(p,be){return{title:(be==null?void 0:be.title)||"Label",field:"entity.metadata.labels",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:ge})=>{var ye;const ne=(ye=ge.metadata)==null?void 0:ye.labels,oe=ne&&ne[p]||(be==null?void 0:be.defaultValue);return ie.createElement(ie.Fragment,null,oe&&ie.createElement(re.Z,{key:oe,label:oe,size:"small",variant:"outlined"}))},width:"auto"}},createNamespaceColumn(){return{title:"Namespace",field:"entity.metadata.namespace",width:"auto"}}});function H(p){const{columns:be,data:ge,next:ye,prev:ne}=p;return ie.createElement(m.iA,{columns:be,data:ge,options:{paginationPosition:"both",pageSizeOptions:[],showFirstLastPageButtons:!1,pageSize:Number.MAX_SAFE_INTEGER,emptyRowsWhenPaging:!1},onPageChange:oe=>{oe>0?ye==null||ye():ne==null||ne()},page:ne?1:0,totalCount:ye?Number.MAX_VALUE:Number.MAX_SAFE_INTEGER,localization:{pagination:{labelDisplayedRows:""}}})}const S=(0,o.Z)({root:{color:"#f3ba37"}})(a.Z),l=(p,be)=>{const ge=ye=>ye.metadata.title||(0,u.$3)(ye,{defaultKind:"Component"});return ge(p).localeCompare(ge(be))},b=({filters:p,entities:be})=>{var ge;const ye=p.type===void 0;return[Q.createTitleColumn({hidden:!0}),Q.createNameColumn({defaultKind:(ge=p.kind)==null?void 0:ge.value}),...ne(),Q.createMetadataDescriptionColumn(),Q.createTagsColumn()];function ne(){var oe;const X=[Q.createSystemColumn(),Q.createOwnerColumn(),Q.createSpecTypeColumn({hidden:!ye}),Q.createSpecLifecycleColumn()];switch((oe=p.kind)==null?void 0:oe.value){case"user":return[];case"domain":case"system":return[Q.createOwnerColumn()];case"group":case"template":return[Q.createSpecTypeColumn({hidden:!ye})];case"location":return[Q.createSpecTypeColumn({hidden:!ye}),Q.createSpecTargetsColumn()];default:return be.every(xe=>xe.metadata.namespace==="default")?X:[...X,Q.createNamespaceColumn()]}}},h=p=>{var be,ge,ye,ne;const{columns:oe=b,tableOptions:X,subtitle:xe,emptyContent:It}=p,{isStarredEntity:P,toggleStarredEntity:Jt}=(0,u.CR)(),me=(0,u.wp)(),{loading:Lt,error:Ct,entities:je,filters:nt,pageInfo:Te}=me,gt=!!Te,de=(0,ie.useMemo)(()=>typeof oe=="function"?oe(me):oe,[oe,me]);if(Ct)return ie.createElement("div",null,ie.createElement(m.GB,{severity:"error",title:"Could not fetch catalog entities."},ie.createElement(m.Oi,{language:"text",text:Ct.toString()})));const G=[({entity:w})=>{var L;const se=(L=w.metadata.annotations)==null?void 0:L[r.l2],Me="View";return{icon:()=>ie.createElement(ie.Fragment,null,ie.createElement(A.Z,{style:U.Z},Me),ie.createElement(we.Z,{fontSize:"small"})),tooltip:Me,disabled:!se,onClick:()=>{se&&window.open(se,"_blank")}}},({entity:w})=>{var L;const se=(L=w.metadata.annotations)==null?void 0:L[r.Tf],Me="Edit";return{icon:()=>ie.createElement(ie.Fragment,null,ie.createElement(A.Z,{style:U.Z},Me),ie.createElement(We.Z,{fontSize:"small"})),tooltip:Me,disabled:!se,onClick:()=>{se&&window.open(se,"_blank")}}},({entity:w})=>{const L=P(w),se=L?"Remove from favorites":"Add to favorites";return{cellStyle:{paddingLeft:"1em"},icon:()=>ie.createElement(ie.Fragment,null,ie.createElement(A.Z,{style:U.Z},se),L?ie.createElement(S,null):ie.createElement(te.Z,null)),tooltip:se,onClick:()=>Jt(w)}}],Pe=((be=nt.kind)==null?void 0:be.value)||"",ce=((ge=nt.type)==null?void 0:ge.value)||"",Be=[(0,q.capitalize)((ne=(ye=nt.user)==null?void 0:ye.value)!=null?ne:"all"),ce,Le()(Pe)].filter(w=>w).join(" "),st=`${Be} (${je.length})`,Kt=p.actions||G,ct={actionsColumnIndex:-1,loadingType:"linear",showEmptyDataSourceMessage:!Lt,padding:"dense",...X};if(gt)return ie.createElement(H,{columns:de,emptyContent:It,isLoading:Lt,title:st,actions:Kt,subtitle:xe,options:ct,data:je.map(C),next:Te.next,prev:Te.prev});const Zt=je.sort(l).map(C),O=20,B=Zt.length>O;return ie.createElement(m.iA,{isLoading:Lt,columns:de,options:{paging:B,pageSize:O,pageSizeOptions:[20,50,100],...ct},title:`${Be} (${je.length})`,data:Zt,actions:Kt,subtitle:xe,emptyContent:It})};h.columns=Q;function C(p){const be=(0,W.g)(p,r.cz,{kind:"system"}),ge=(0,W.g)(p,r.S4);return{entity:p,resolved:{name:(0,u.$3)(p,{defaultKind:"Component"}),entityRef:(0,r.eE)(p),ownedByRelationsTitle:ge.map(ye=>(0,u.$3)(ye,{defaultKind:"group"})).join(", "),ownedByRelations:ge,partOfSystemRelationTitle:be.map(ye=>(0,u.$3)(ye,{defaultKind:"system"})).join(", "),partOfSystemRelations:be}}}},50893:(Rn,kt,e)=>{"use strict";e.d(kt,{E:()=>me});var r=e(34520),m=e(49558),u=e(57032),W=e(30705),A=e(73495),o=e(78373),U=e(12231),We=e(86136),we=e(49378),a=e(85256),te=e(80030),q=e(61837),D=e(79784),Z=e(50758),Le=e(95544),ie=e(99688),re=e(2784),Q=e(73557),H=e(79692),S=e(31654),l=e(43054),b=e(65759),h=e(61068),C=e(75650),p=e(49166),be=e(95074),ge=e(34341);function ye(Lt){var Ct;const{unregisterEntityOptions:je,isUnregisterAllowed:nt,onUnregisterEntity:Te,onClose:gt}=Lt,de=typeof(je==null?void 0:je.disableUnregister)=="boolean",G=(Ct=!nt||(de?!!(je!=null&&je.disableUnregister):(je==null?void 0:je.disableUnregister)==="disable"))!=null?Ct:!1;let Pe=re.createElement(re.Fragment,null);return(je==null?void 0:je.disableUnregister)!=="hidden"&&(Pe=re.createElement(U.Z,{onClick:()=>{gt(),Te()},disabled:G},re.createElement(We.Z,null,re.createElement(p.Z,{fontSize:"small"})),re.createElement(we.Z,{primary:"Unregister entity"}))),re.createElement(re.Fragment,null,Pe)}const ne=(0,H.Z)(Lt=>({button:{color:Lt.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function oe(Lt){const{UNSTABLE_extraContextMenuItems:Ct,UNSTABLE_contextMenuOptions:je,onUnregisterEntity:nt,onInspectEntity:Te}=Lt,[gt,de]=(0,re.useState)(),G=ne(),ce=(0,h.N$)(C.j8).allowed,le=O=>{de(O.currentTarget)},Be=()=>{de(void 0)},st=(0,u.u)(u.l),[Kt,ct]=(0,be.Z)();(0,re.useEffect)(()=>{!Kt.error&&Kt.value&&st.post({message:"Copied!",severity:"info",display:"transient"})},[Kt,st]);const Zt=Ct&&[...Ct.map(O=>re.createElement(U.Z,{key:O.title,onClick:()=>{Be(),O.onClick()}},re.createElement(We.Z,null,re.createElement(O.Icon,{fontSize:"small"})),re.createElement(we.Z,{primary:O.title}))),re.createElement(a.Z,{key:"the divider is here!"})];return re.createElement(re.Fragment,null,re.createElement(te.ZP,{title:"More",arrow:!0},re.createElement(q.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!gt,role:"button",onClick:le,"data-testid":"menu-button",className:G.button,id:"long-menu"},re.createElement(l.Z,null))),re.createElement(D.ZP,{open:Boolean(gt),onClose:Be,anchorEl:gt,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu"},re.createElement(Z.Z,{autoFocusItem:Boolean(gt)},Zt,re.createElement(ye,{unregisterEntityOptions:je,isUnregisterAllowed:ce,onUnregisterEntity:nt,onClose:Be}),re.createElement(U.Z,{onClick:()=>{Be(),Te()}},re.createElement(We.Z,null,re.createElement(S.Z,{fontSize:"small"})),re.createElement(we.Z,{primary:"Inspect entity"})),re.createElement(U.Z,{onClick:()=>{Be(),ct(window.location.toString())}},re.createElement(We.Z,null,re.createElement(b.Z,{fontSize:"small"})),re.createElement(we.Z,{primary:"Copy entity URL"})))))}const X="plugin.catalog.entityLayoutRoute",xe=()=>null;(0,W.R5)(xe,X,!0),(0,W.R5)(xe,"core.gatherMountPoints",!0);function It(Lt){const{entity:Ct,title:je}=Lt;return re.createElement(Le.Z,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},re.createElement(Le.Z,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},Ct?re.createElement(A.co,{entityRef:Ct,hideIcon:!0}):je),Ct&&re.createElement(A.LH,{entity:Ct}))}function P(Lt,Ct,je,nt){var Te,gt,de,G,Pe;const ce=(Te=Lt!=null?Lt:nt==null?void 0:nt.kind)!=null?Te:"",le=(gt=Ct!=null?Ct:nt==null?void 0:nt.metadata.namespace)!=null?gt:"";return{headerTitle:`${(Pe=(G=(de=nt==null?void 0:nt.metadata.title)!=null?de:je)!=null?G:nt==null?void 0:nt.metadata.name)!=null?Pe:""}${le&&le!==r.zG?` in ${le}`:""}`,headerType:(()=>{let st=ce.toLocaleLowerCase("en-US");return nt&&nt.spec&&"type"in nt.spec&&(st+=" \u2014 ",st+=nt.spec.type.toLocaleLowerCase("en-US")),st})()}}function Jt(Lt){var Ct,je;const{entity:nt}=Lt,Te=(0,o.g)(nt,r.S4);return re.createElement(re.Fragment,null,Te.length>0&&re.createElement(m.i9,{label:"Owner",contentTypograpyRootComponent:"p",value:re.createElement(A.rI,{entityRefs:Te,defaultKind:"Group",color:"inherit"})}),((Ct=nt.spec)==null?void 0:Ct.lifecycle)&&re.createElement(m.i9,{label:"Lifecycle",value:(je=nt.spec.lifecycle)==null?void 0:je.toString()}))}const me=Lt=>{var Ct,je,nt;const{UNSTABLE_extraContextMenuItems:Te,UNSTABLE_contextMenuOptions:gt,children:de,NotFoundComponent:G}=Lt,{kind:Pe,namespace:ce,name:le}=(0,W.Oi)(A.wi),{entity:Be,loading:st,error:Kt}=(0,o.a)(),ct=(0,Q.TH)(),Zt=(0,W.vJ)(de,Wt=>Wt.selectByComponentData({key:X,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:fe})=>{if(Be){if(fe.if&&!fe.if(Be))return[]}else return[];return[{path:fe.path,title:fe.title,children:fe.children,tabProps:fe.tabProps}]}),[Be]),{headerTitle:O,headerType:B}=P(Pe,ce,le,Be),[w,L]=(0,re.useState)(!1),[se,Me]=(0,re.useState)(!1),rt=(0,Q.s0)(),xt=(0,W.tg)(ge.r),ut=(0,W.tg)(ge.u),et=async()=>{L(!1),Me(!1),rt(ut?ut():xt())};return(0,re.useEffect)(()=>{L(!1),Me(!1)},[ct.pathname]),re.createElement(m.T3,{themeId:(nt=(je=(Ct=Be==null?void 0:Be.spec)==null?void 0:Ct.type)==null?void 0:je.toString())!=null?nt:"home"},re.createElement(m.h4,{title:re.createElement(It,{title:O,entity:Be}),pageTitleOverride:O,type:B},Be&&re.createElement(re.Fragment,null,re.createElement(Jt,{entity:Be}),re.createElement(oe,{UNSTABLE_extraContextMenuItems:Te,UNSTABLE_contextMenuOptions:gt,onUnregisterEntity:()=>L(!0),onInspectEntity:()=>Me(!0)}))),st&&re.createElement(m.Ex,null),Be&&re.createElement(m.tn,{routes:Zt}),Kt&&re.createElement(m.VY,null,re.createElement(ie.Z,{severity:"error"},Kt.toString())),!st&&!Kt&&!Be&&re.createElement(m.VY,null,G||re.createElement(m.GB,{title:"Entity not found"},"There is no ",Pe," with the requested"," ",re.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),re.createElement(A.pp,{open:w,entity:Be,onConfirm:et,onClose:()=>L(!1)}),re.createElement(A.U_,{open:se,entity:Be,onClose:()=>Me(!1)}))};me.Route=xe},34341:(Rn,kt,e)=>{"use strict";e.d(kt,{D:()=>st,a:()=>G,b:()=>Zt,c:()=>Kt,r:()=>B,u:()=>O,v:()=>ct});var r=e(34520);function m(w){const{years:L=0,months:se=0,weeks:Me=0,days:rt=0,hours:xt=0,minutes:ut=0,seconds:et=0,milliseconds:Wt=0}=w;return((((L*365+se*30+Me*7+rt)*24+xt)*60+ut)*60+et)*1e3+Wt}var u=e(99798),W=e.n(u),A=e(12830),o=e.n(A),U=e(82394),We=e.n(U),we=e(73495),a=e(43642),te=e(77224),q=e(15933),D=e(86737),Z=e(78898),Le=e(4989),ie=e(44407),re=e(84219),Q=e(98685),H=e(39412),S=e(76635),l=e(30705);const b={seconds:10},h={milliseconds:50},C=D.Z,p={api:q.Z,component:ie.Z,system:te.Z,resource:H.Z,domain:a.Z,location:Le.Z,user:Q.Z,group:re.Z,template:Z.Z};function be(w){return{async:w.async,render:({entityRef:L,entity:se,context:Me})=>({snapshot:(0,we.n8)(se||L,Me),loadEntity:w.async})}}var ge=(w,L,se)=>{if(!L.has(w))throw TypeError("Cannot "+se)},ye=(w,L,se)=>(ge(w,L,"read from private field"),se?se.call(w):L.get(w)),ne=(w,L,se)=>{if(L.has(w))throw TypeError("Cannot add the same private member more than once");L instanceof WeakSet?L.add(w):L.set(w,se)},oe=(w,L,se,Me)=>(ge(w,L,"write to private field"),Me?Me.call(w,se):L.set(w,se),se),X=(w,L,se)=>(ge(w,L,"access private method"),se),xe,It,P,Jt,me,Lt,Ct,je,nt,Te,gt;const de=class qo{constructor(L){ne(this,Lt),ne(this,je),ne(this,Te),ne(this,xe,void 0),ne(this,It,void 0),ne(this,P,void 0),ne(this,Jt,void 0),ne(this,me,void 0);var se,Me,rt,xt;const ut=(se=L.cacheTtl)!=null?se:b,et=(Me=L.batchDelay)!=null?Me:h,Wt=(rt=L.renderer)!=null?rt:be({async:!0}),fe={};if(Object.entries(p).forEach(([Ae,Xe])=>{fe[Ae.toLocaleLowerCase("en-US")]=Xe}),Object.entries((xt=L.kindIcons)!=null?xt:{}).forEach(([Ae,Xe])=>{fe[Ae.toLocaleLowerCase("en-US")]=Xe}),Wt.async){if(!L.catalogApi)throw new TypeError("Asynchronous rendering requires a catalog API");oe(this,P,X(this,je,nt).call(this,{cacheTtl:ut,batchDelay:et,renderer:Wt,catalogApi:L.catalogApi}))}oe(this,It,m(ut)),oe(this,xe,new Map),oe(this,Jt,fe),oe(this,me,Wt)}static createLocal(){return new qo({renderer:be({async:!1})})}static create(L){return new qo(L)}forEntity(L,se){const{entityRef:Me,kind:rt,entity:xt,needsLoad:ut}=X(this,Lt,Ct).call(this,L),et=Ae=>{const{snapshot:Xe}=ye(this,me).render({entityRef:Me,loading:Ae.loading,entity:Ae.entity,context:se||{}});return{...Xe,entityRef:Me,Icon:X(this,Te,gt).call(this,Xe.Icon,rt)}};let Wt;try{Wt=et({loading:ut,entity:xt})}catch{Wt={primaryTitle:Me,entityRef:Me}}const fe=ut?new(We())(Ae=>{let Xe=!1;return Promise.resolve().then(()=>{var St;return(St=ye(this,P))==null?void 0:St.load(Me)}).then(St=>{if(!Xe&&St&&St.metadata.etag!==(xt==null?void 0:xt.metadata.etag)){const pt=et({loading:!1,entity:St});Ae.next(pt)}}).catch(()=>{}).finally(()=>{Xe||Ae.complete()}),()=>{Xe=!0}}):void 0;return{snapshot:Wt,update$:fe}}};xe=new WeakMap,It=new WeakMap,P=new WeakMap,Jt=new WeakMap,me=new WeakMap,Lt=new WeakSet,Ct=function(w){if(typeof w!="string")return{entity:w,kind:w.kind,entityRef:(0,r.eE)(w),needsLoad:!1};const L=ye(this,xe).get(w),se=L==null?void 0:L.entity,rt=(!L||Date.now()-L.updatedAt>ye(this,It))&&ye(this,me).async!==!1&&ye(this,P)!==void 0;return{entity:se,kind:(0,r.of)(w).kind,entityRef:w,needsLoad:rt}},je=new WeakSet,nt=function(w){const L=m(w.cacheTtl),se=m(w.batchDelay);return new(W())(async Me=>{const{items:rt}=await w.catalogApi.getEntitiesByRefs({entityRefs:Me}),xt=Date.now();return Me.forEach((ut,et)=>{ye(this,xe).set(ut,{updatedAt:xt,entity:rt[et]})}),rt},{name:"DefaultEntityPresentationApi",cacheMap:new(o())(L),maxBatchSize:100,batchScheduleFn:se?Me=>setTimeout(Me,se):void 0})},Te=new WeakSet,gt=function(w,L){var se;return w||(w===!1?!1:(se=ye(this,Jt)[L.toLocaleLowerCase("en-US")])!=null?se:C)};let G=de;async function Pe({storageApi:w}){var L;const se=w.forBucket("settings"),Me=w.forBucket("starredEntities"),rt=se.snapshot("starredEntities").value;if(!(0,S.isArray)(rt))return;const xt=new Set((L=Me.snapshot("entityRefs").value)!=null?L:[]);rt.filter(S.isString).map(ut=>ut.split(":")).filter(ut=>ut.length===4&&ut[0]==="entity").map(([ut,et,Wt,fe])=>(0,r.eE)({kind:et,namespace:Wt,name:fe})).forEach(ut=>xt.add(ut)),await Me.set("entityRefs",Array.from(xt)),await se.remove("starredEntities")}var ce=Object.defineProperty,le=(w,L,se)=>L in w?ce(w,L,{enumerable:!0,configurable:!0,writable:!0,value:se}):w[L]=se,Be=(w,L,se)=>(le(w,typeof L!="symbol"?L+"":L,se),se);class st{constructor(L){Be(this,"settingsStore"),Be(this,"starredEntities"),Be(this,"subscribers",new Set),Be(this,"observable",new(We())(Me=>(Me.next(new Set(this.starredEntities)),this.subscribers.add(Me),()=>{this.subscribers.delete(Me)})));var se;Pe(L).then(),this.settingsStore=L.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((se=this.settingsStore.snapshot("entityRefs").value)!=null?se:[]),this.settingsStore.observe$("entityRefs").subscribe({next:Me=>{var rt;this.starredEntities=new Set((rt=Me.value)!=null?rt:[]),this.notifyChanges()}})}async toggleStarred(L){this.starredEntities.has(L)?this.starredEntities.delete(L):this.starredEntities.add(L),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const L of this.subscribers)L.next(new Set(this.starredEntities))}}const Kt=(0,l.x8)({id:"create-component",optional:!0}),ct=(0,l.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),Zt=(0,l.x8)({id:"create-from-template",optional:!0,params:["namespace","templateName"]}),O=(0,l.x8)({id:"catalog:unregister-redirect",optional:!0}),B=(0,l.NT)({id:"catalog"})},16673:(Rn,kt,e)=>{"use strict";e.d(kt,{BL:()=>Ae,Cy:()=>pt,Eq:()=>me,FZ:()=>Bt,Kf:()=>Zt,PA:()=>Jt,Tu:()=>xt,VU:()=>je,_l:()=>ct,bM:()=>et,dN:()=>ut,f2:()=>Wt,im:()=>gt,jF:()=>Tt,mr:()=>de,o6:()=>$e,oU:()=>St,p$:()=>ce,rR:()=>rt,vA:()=>Ct,yf:()=>Xe});var r=e(34341),m=e(2784),u=e(79692),W=e(12420),A=e(8629),o=e(79249),U=e(49429),We=e(77277),we=e(95544),a=e(73495),te=e(78373),q=e(19928),D=e.n(q),Z=e(57032),Le=e(30705),ie=e(64279),re=e(99688),Q=e(73557),H=e(32272),S=e(49558),l=e(34520),b=e(88285),h=e(42054),C=e(99798),p=e.n(C),be=e(82394),ge=e.n(be),ye=e(76635),ne=e.n(ye);function oe(){const _e=useApi(catalogApiRef),{error:Je,loading:Ee,value:it}=useAsync(async()=>await _e.getEntityFacets({facets:["kind"]}).then(Pt=>{var Nt;return((Nt=Pt.facets.kind)==null?void 0:Nt.map(on=>on.value).sort())||[]}),[_e]);return{loading:Ee,error:Je,allKinds:it!=null?it:[]}}function X(_e,Je,Ee){let it=_e;return Je&&(it=it.filter(Pt=>Je.some(Nt=>Nt.toLocaleLowerCase("en-US")===Pt.toLocaleLowerCase("en-US")))),Ee&&!_e.some(Pt=>Pt.toLocaleLowerCase("en-US")===Ee.toLocaleLowerCase("en-US"))&&(it=it.concat([Ee])),it.sort().reduce((Pt,Nt)=>(Pt[Nt.toLocaleLowerCase("en-US")]=Nt,Pt),{})}const xe=(0,u.Z)(_e=>(0,W.Z)({root:{..._e.typography.h4}}));function It(_e){var Je,Ee;const{initialFilter:it="component",allowedKinds:at}=_e,Pt=xe(),{allKinds:Nt}=oe(),{filters:on,updateFilters:Ze,queryParameters:{kind:He}}=useEntityList(),ve=useMemo(()=>[He].flat()[0],[He]),[Ie,lt]=useState((Ee=ve!=null?ve:(Je=on.kind)==null?void 0:Je.value)!=null?Ee:it);useEffect(()=>{ve&&lt(ve)},[ve]),useEffect(()=>{var j,he;(j=on.kind)!=null&&j.value&&lt((he=on.kind)==null?void 0:he.value)},[on.kind]),useEffect(()=>{Ze({kind:Ie?new EntityKindFilter(Ie):void 0})},[Ie,Ze]);const $t=X(Nt,at,Ie);return React.createElement(Select,{input:React.createElement(InputBase,null),value:Ie.toLocaleLowerCase("en-US"),onChange:j=>lt(j.target.value),classes:Pt},Object.keys($t).map(j=>React.createElement(MenuItem,{value:j,key:j},`${pluralize($t[j])}`)))}function P(_e){const{open:Je,onClose:Ee,onConfirm:it,entity:at}=_e,[Pt,Nt]=(0,m.useState)(!1),on=(0,Z.u)(a.Ah),Ze=(0,Z.u)(Z.l),He=async()=>{Nt(!0);try{const ve=at.metadata.uid;await on.removeEntityByUid(ve),it()}catch(ve){(0,H.BD)(ve),Ze.post({message:ve.message})}finally{Nt(!1)}};return m.createElement(A.Z,{open:Je,onClose:Ee},m.createElement(o.Z,{id:"responsive-dialog-title"},"Are you sure you want to delete this entity?"),m.createElement(U.Z,null,m.createElement(We.Z,{variant:"contained",color:"secondary",disabled:Pt,onClick:He},"Delete"),m.createElement(We.Z,{onClick:Ee,color:"primary"},"Cancel")))}function Jt(_e){var Je,Ee;return((Ee=(Je=_e==null?void 0:_e.metadata)==null?void 0:Je.annotations)==null?void 0:Ee["backstage.io/orphan"])==="true"}function me(){const _e=(0,Q.s0)(),Je=(0,Le.tg)(r.r),[Ee,it]=(0,m.useState)(!1),{entity:at}=(0,te.u)(),Pt=async()=>{it(!1),_e(Je())};return m.createElement(m.Fragment,null,m.createElement(re.Z,{severity:"warning",onClick:()=>it(!0)},"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."),m.createElement(P,{open:Ee,entity:at,onConfirm:Pt,onClose:()=>it(!1)}))}async function Lt(_e,Je){var Ee;const it=(Ee=_e.relations)==null?void 0:Ee.map(Pt=>Pt.targetRef);if(!it||(it==null?void 0:it.length)<1||it.length>1e3)return[];const at=await Je.getEntitiesByRefs({entityRefs:it,fields:["kind","metadata.name","metadata.namespace"]});return it.filter((Pt,Nt)=>at.items[Nt]===void 0)}async function Ct(_e,Je){const Ee=Je.apis.get(a.Ah);if(!Ee)throw new Error(`No implementation available for ${a.Ah}`);return(await Lt(_e,Ee)).length>0}function je(){const{entity:_e}=(0,te.u)(),Je=(0,Z.u)(a.Ah),{loading:Ee,error:it,value:at}=(0,ie.default)(async()=>Lt(_e,Je),[_e,Je]);return it?m.createElement(we.Z,{mb:1},m.createElement(S.Gk,{error:it})):Ee||!at||at.length===0?null:m.createElement(m.Fragment,null,m.createElement(re.Z,{severity:"warning"},"This entity has relations to other entities, which can't be found in the catalog. ",m.createElement("br",null),"Entities not found are: ",at.join(", ")))}const nt=_e=>_e.error&&_e.level==="error"&&_e.type===b.mk;async function Te(_e,Je){return{items:(await Je.getEntityAncestors({entityRef:_e})).items.map(at=>{var Pt,Nt;return{errors:((Nt=(Pt=at.entity.status)==null?void 0:Pt.items)!=null?Nt:[]).filter(nt).map(He=>He.error).filter(He=>Boolean(He)),entity:at.entity}}).filter(at=>at.errors.length>0)}}async function gt(_e,Je){const Ee=Je.apis.get(a.Ah);if(!Ee)throw new Error(`No implementation available for ${a.Ah}`);return(await Te((0,l.eE)(_e),Ee)).items.length>0}function de(){const{entity:_e}=(0,te.u)(),Je=(0,l.eE)(_e),Ee=(0,Z.u)(a.Ah),{loading:it,error:at,value:Pt}=(0,ie.default)(async()=>Te(Je,Ee),[Je,Ee]);return at?m.createElement(we.Z,{mb:1},m.createElement(S.Gk,{error:at})):it||!Pt?null:m.createElement(m.Fragment,null,Pt.items.map((Nt,on)=>m.createElement(we.Z,{key:on,mb:1},(0,l.eE)(_e)!==(0,l.eE)(Nt.entity)&&m.createElement(we.Z,{p:1},"The error below originates from"," ",m.createElement(a.dx,{entityRef:Nt.entity})),Nt.errors.map((Ze,He)=>m.createElement(S.Gk,{key:He,error:Ze})))))}const G="core.backstage.entitySwitch",Pe=_e=>null;(0,Le.R5)(Pe,G,!0);const ce=_e=>{var Je,Ee;const{entity:it,loading:at}=(0,te.a)(),Pt=(0,Z.b)(),Nt=(0,Le.vJ)(_e.children,Ze=>Ze.selectByComponentData({key:G,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(He=>{if(at&&!it)return[];const{if:ve,children:Ie}=He.props;return it?[{if:ve==null?void 0:ve(it,{apis:Pt}),children:Ie}]:[{if:ve===void 0,children:Ie}]}),[Pt,it,at]);if(Nt.some(Ze=>typeof Ze.if=="object"&&"then"in Ze.if))return m.createElement(le,{results:Nt,renderMultipleMatches:_e.renderMultipleMatches});if(_e.renderMultipleMatches==="all"){const Ze=Nt.filter(He=>He.if).map(He=>He.children);return Ze.length===0?Be(Nt):m.createElement(m.Fragment,null,Ze)}return(Ee=(Je=Nt.find(Ze=>Ze.if))==null?void 0:Je.children)!=null?Ee:Be(Nt)};function le({results:_e,renderMultipleMatches:Je}){const{loading:Ee,value:it}=(0,ie.default)(async()=>{var at;const Pt=_e.map(async({if:Nt,children:on})=>{try{if(await Nt)return on}catch{}return null});if(Je==="all"){const Nt=(await Promise.all(Pt)).filter(Boolean);return Nt.length===0?Be(_e):m.createElement(m.Fragment,null,Nt)}return(at=(await Promise.all(Pt)).find(Boolean))!=null?at:Be(_e)},[_e]);return Ee||!it?null:it}function Be(_e){var Je,Ee;return(Ee=(Je=_e.filter(it=>it.if===void 0)[0])==null?void 0:Je.children)!=null?Ee:null}ce.Case=Pe;function st(_e,Je){return Boolean(_e&&typeof _e=="string"&&(_e==null?void 0:_e.toLocaleLowerCase("en-US"))===(Je==null?void 0:Je.toLocaleLowerCase("en-US")))}function Kt(_e,Je){return typeof Je=="string"?st(_e,Je):Je.length===0||Je.some(Ee=>st(_e,Ee))}function ct(_e){return B({kind:_e})}function Zt(_e){return B({kind:"component",type:_e})}function O(_e){return B({kind:"resource",type:_e})}function B(_e){return Je=>{var Ee;return!(_e.kind&&!Kt(Je.kind,_e.kind)||_e.type&&!Kt((Ee=Je.spec)==null?void 0:Ee.type,_e.type))}}function w(_e){return Je=>{var Ee;return Kt((Ee=Je.metadata)==null?void 0:Ee.namespace,_e)}}const L=null,se=a._i.Filters,Me=a._i.Content,rt=(0,Le.rx)({id:"catalog",apis:[(0,Le.ni)({api:a.Ah,deps:{discoveryApi:Z.q,fetchApi:Z.s},factory:({discoveryApi:_e,fetchApi:Je})=>new b.MS({discoveryApi:_e,fetchApi:Je})}),(0,Le.ni)({api:a.p3,deps:{storageApi:Z.x},factory:({storageApi:_e})=>new r.D({storageApi:_e})}),(0,Le.ni)({api:a.XI,deps:{catalogApi:a.Ah},factory:({catalogApi:_e})=>r.a.create({catalogApi:_e})})],routes:{catalogIndex:r.r,catalogEntity:a.wi},externalRoutes:{createComponent:r.c,viewTechDoc:r.v,createFromTemplate:r.b,unregisterRedirect:r.u}}),xt=rt.provide((0,Le.P4)({name:"CatalogIndexPage",component:()=>e.e(1729).then(e.bind(e,21729)).then(_e=>_e.CatalogPage),mountPoint:r.r})),ut=rt.provide((0,Le.P4)({name:"CatalogEntityPage",component:()=>e.e(4897).then(e.bind(e,84897)).then(_e=>_e.CatalogEntityPage),mountPoint:a.wi})),et=rt.provide((0,Le.CO)({name:"EntityAboutCard",component:{lazy:()=>e.e(5724).then(e.bind(e,45724)).then(_e=>_e.AboutCard)}})),Wt=rt.provide((0,Le.CO)({name:"EntityLinksCard",component:{lazy:()=>e.e(9448).then(e.bind(e,69448)).then(_e=>_e.EntityLinksCard)}})),fe=rt.provide((0,Le.CO)({name:"EntityLabelsCard",component:{lazy:()=>e.e(1296).then(e.bind(e,1296)).then(_e=>_e.EntityLabelsCard)}})),Ae=rt.provide((0,Le.CO)({name:"EntityHasSystemsCard",component:{lazy:()=>e.e(4745).then(e.bind(e,34745)).then(_e=>_e.HasSystemsCard)}})),Xe=rt.provide((0,Le.CO)({name:"EntityHasComponentsCard",component:{lazy:()=>e.e(5932).then(e.bind(e,5932)).then(_e=>_e.HasComponentsCard)}})),St=rt.provide((0,Le.CO)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>e.e(4949).then(e.bind(e,74949)).then(_e=>_e.HasSubcomponentsCard)}})),pt=rt.provide((0,Le.CO)({name:"EntityHasResourcesCard",component:{lazy:()=>e.e(2842).then(e.bind(e,2842)).then(_e=>_e.HasResourcesCard)}})),Tt=rt.provide((0,Le.CO)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>e.e(748).then(e.bind(e,20748)).then(_e=>_e.DependsOnComponentsCard)}})),Dt=rt.provide((0,Le.CO)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>e.e(6146).then(e.bind(e,36146)).then(_e=>_e.DependencyOfComponentsCard)}})),$e=rt.provide((0,Le.CO)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>e.e(7127).then(e.bind(e,47127)).then(_e=>_e.DependsOnResourcesCard)}})),ot=rt.provide((0,Le.CO)({name:"RelatedEntitiesCard",component:{lazy:()=>e.e(9489).then(e.bind(e,59489)).then(_e=>_e.RelatedEntitiesCard)}})),Bt=rt.provide((0,h.c)({name:"CatalogSearchResultListItem",component:()=>e.e(306).then(e.bind(e,60306)).then(_e=>_e.CatalogSearchResultListItem),predicate:_e=>_e.type==="software-catalog"}))},42214:(Rn,kt,e)=>{"use strict";e.d(kt,{IJ:()=>gn,Oz:()=>An,Q3:()=>x,fX:()=>Wt,i4:()=>Ft});var r=e(57032),m=e(30705),u=e(1854),W=e(89393),A=e(49462),o=e(2784),U=e(78373),We=e(73495),we=e(39857),a=e(73557),te=e(79692),q=e(27616),D=e(8284),Z=e(90436),Le=e(4614),ie=e(80030),re=e(69087),Q=e(35111),H=e(14498),S=e(89571),l=e(15584),b=e(49378),h=e(70660),C=e(91256),p=e(37390),be=e(95544),ge=e(67358),ye=e(27556),ne=e(97485),oe=e(12420),X=e(60905),xe=e(7089),It=e(38592),P=e(61837),Jt=e(28899),me=e(86619),Lt=e(77277),Ct=e(73698),je=e(12231),nt=e(38016),Te=e(69001),gt=e(26228),de=e(49558),G=e(64279),Pe=e(30254),ce=e(34520),le=e(82717),Be=e.n(le),st=e(58838),Kt=e(43266),ct=e(26883),Zt=e(77446),O=e(99688);const B=(0,r.c)({id:"plugin.githubactions.service"});var w=Object.defineProperty,L=(Fe,qe,At)=>qe in Fe?w(Fe,qe,{enumerable:!0,configurable:!0,writable:!0,value:At}):Fe[qe]=At,se=(Fe,qe,At)=>(L(Fe,typeof qe!="symbol"?qe+"":qe,At),At);class Me{constructor(qe){se(this,"configApi"),se(this,"scmAuthApi"),this.configApi=qe.configApi,this.scmAuthApi=qe.scmAuthApi}async getOctokit(qe="github.com"){var At;const{token:tn}=await this.scmAuthApi.getCredentials({url:`https://${qe}/`,additionalScope:{customScopes:{github:["repo"]}}}),dn=(0,u.MY)((At=this.configApi.getOptionalConfigArray("integrations.github"))!=null?At:[]).find(wn=>wn.host===qe),un=dn==null?void 0:dn.apiBaseUrl;return new W.v({auth:tn,baseUrl:un})}async reRunWorkflow(qe){const{hostname:At,owner:tn,repo:ln,runId:dn}=qe;return(await this.getOctokit(At)).actions.reRunWorkflow({owner:tn,repo:ln,run_id:dn})}async listWorkflowRuns(qe){const{hostname:At,owner:tn,repo:ln,pageSize:dn=100,page:un=0,branch:wn}=qe;return(await(await this.getOctokit(At)).actions.listWorkflowRunsForRepo({owner:tn,repo:ln,per_page:dn,page:un,...wn?{branch:wn}:{}})).data}async getWorkflow(qe){const{hostname:At,owner:tn,repo:ln,id:dn}=qe;return(await(await this.getOctokit(At)).actions.getWorkflow({owner:tn,repo:ln,workflow_id:dn})).data}async getWorkflowRun(qe){const{hostname:At,owner:tn,repo:ln,id:dn}=qe;return(await(await this.getOctokit(At)).actions.getWorkflowRun({owner:tn,repo:ln,run_id:dn})).data}async listJobsForWorkflowRun(qe){const{hostname:At,owner:tn,repo:ln,id:dn,pageSize:un=100,page:wn=0}=qe;return(await(await this.getOctokit(At)).actions.listJobsForWorkflowRun({owner:tn,repo:ln,run_id:dn,per_page:un,page:wn})).data}async downloadJobLogsForWorkflowRun(qe){const{hostname:At,owner:tn,repo:ln,runId:dn}=qe;return(await(await this.getOctokit(At)).actions.downloadJobLogsForWorkflowRun({owner:tn,repo:ln,job_id:dn})).data}async listBranches(qe){const{hostname:At,owner:tn,repo:ln,page:dn=0}=qe;return(await(await this.getOctokit(At)).rest.repos.listBranches({owner:tn,repo:ln,per_page:100,page:dn})).data}async getDefaultBranch(qe){const{hostname:At,owner:tn,repo:ln}=qe;return(await(await this.getOctokit(At)).rest.repos.get({owner:tn,repo:ln})).data.default_branch}}var rt=(Fe=>(Fe[Fe.success=0]="success",Fe[Fe.failure=1]="failure",Fe[Fe.pending=2]="pending",Fe[Fe.running=3]="running",Fe))(rt||{});const xt=(0,m.NT)({id:"github-actions"}),ut=(0,m.Rz)({id:"github-actions/build",path:"/:id",parent:xt}),et=(0,m.rx)({id:"github-actions",apis:[(0,m.ni)({api:B,deps:{configApi:r.p,scmAuthApi:A.Om},factory:({configApi:Fe,scmAuthApi:qe})=>new Me({configApi:Fe,scmAuthApi:qe})})],routes:{entityContent:xt}}),Wt=et.provide((0,m.P4)({name:"EntityGithubActionsContent",component:()=>Promise.resolve().then(function(){return Ye}).then(Fe=>Fe.Router),mountPoint:xt})),fe=et.provide((0,m.CO)({name:"EntityLatestGithubActionRunCard",component:{lazy:()=>e.e(6169).then(e.bind(e,96169)).then(Fe=>Fe.LatestWorkflowRunCard)}})),Ae=et.provide((0,m.CO)({name:"EntityLatestGithubActionsForBranchCard",component:{lazy:()=>e.e(6169).then(e.bind(e,96169)).then(Fe=>Fe.LatestWorkflowsForBranchCard)}})),Xe=et.provide((0,m.CO)({name:"EntityRecentGithubActionsRunsCard",component:{lazy:()=>e.e(6169).then(e.bind(e,96169)).then(Fe=>Fe.RecentWorkflowRunsCard)}})),St="github.com/project-slug",pt=Fe=>{var qe,At;return(At=(qe=Fe==null?void 0:Fe.metadata.annotations)==null?void 0:qe[St])!=null?At:""},Tt=Fe=>o.createElement(o.Fragment,null,o.createElement(Dt,{...Fe}),$e(Fe));function Dt({status:Fe,conclusion:qe}){if(Fe===void 0)return null;switch(Fe.toLocaleLowerCase("en-US")){case"queued":return o.createElement(de.wA,null);case"in_progress":return o.createElement(de.VC,null);case"completed":switch(qe==null?void 0:qe.toLocaleLowerCase("en-US")){case"skipped":return o.createElement(de.dh,null);case"timed_out":return o.createElement(de.Pd,null);case"failure":return o.createElement(de.vK,null);default:return o.createElement(de.Kq,null)}default:return o.createElement(de.wA,null)}}function $e({status:Fe,conclusion:qe}){if(Fe===void 0)return"";switch(Fe.toLocaleLowerCase("en-US")){case"queued":return"Queued";case"in_progress":return"In progress";case"completed":switch(qe==null?void 0:qe.toLocaleLowerCase("en-US")){case"skipped":return"Aborted";case"timed_out":return"Timed out";case"failure":return"Error";default:return"Completed"}default:return"Pending"}}const ot=({hostname:Fe,owner:qe,repo:At})=>{const tn=(0,r.u)(B),{id:ln}=(0,m.Oi)(ut);return(0,G.default)(async()=>{if(!At||!qe)throw new Error("No repo/owner provided");const dn=await tn.listJobsForWorkflowRun({hostname:Fe,owner:qe,repo:At,id:parseInt(ln,10)});return{total_count:dn.total_count,jobs:dn.jobs.map(un=>{var wn,Wn,Gn,sa;return{html_url:(wn=un.html_url)!=null?wn:void 0,status:un.status,conclusion:(Wn=un.conclusion)!=null?Wn:void 0,started_at:un.started_at,completed_at:(Gn=un.completed_at)!=null?Gn:void 0,id:un.id,name:un.name,steps:(sa=un.steps)==null?void 0:sa.map(Cn=>{var ea,la,ra;return{name:Cn.name,status:Cn.status,conclusion:(ea=Cn.conclusion)!=null?ea:void 0,number:Cn.number,started_at:(la=Cn.started_at)!=null?la:void 0,completed_at:(ra=Cn.completed_at)!=null?ra:void 0}})}})}},[At,qe,ln])},Bt=({hostname:Fe,owner:qe,repo:At})=>{const tn=(0,r.u)(B),{id:ln}=(0,m.Oi)(ut);return(0,G.default)(async()=>At&&qe?tn.getWorkflowRun({hostname:Fe,owner:qe,repo:At,id:parseInt(ln,10)}):Promise.reject(new Error("No repo/owner provided")),[At,qe,ln])},_e=({hostname:Fe,owner:qe,repo:At,id:tn})=>{const ln=(0,r.u)(B);return(0,G.default)(async()=>At&&qe?ln.downloadJobLogsForWorkflowRun({hostname:Fe,owner:qe,repo:At,runId:tn}):Promise.reject("No repo/owner provided"),[At,qe,tn])},Je=Fe=>{var qe,At,tn;const ln=(tn=(qe=Fe==null?void 0:Fe.metadata.annotations)==null?void 0:qe[ce.M6])!=null?tn:(At=Fe==null?void 0:Fe.metadata.annotations)==null?void 0:At[ce.P1];return ln!=null&&ln.startsWith("url:")?Be()(ln.slice(4)).resource:void 0},Ee=(0,te.Z)(Fe=>({button:{order:-1,marginRight:0,marginLeft:"-20px"},modal:{display:"flex",alignItems:"center",width:"85%",height:"85%",justifyContent:"center",margin:"auto"},normalLogContainer:{height:"75vh",width:"100%"},modalLogContainer:{height:"100%",width:"100%"},log:{background:Fe.palette.background.default}})),it=({entity:Fe,runId:qe,inProgress:At})=>{const tn=Ee(),ln=pt(Fe),dn=Je(Fe),[un,wn]=ln&&ln.split("/")||[],Wn=_e({hostname:dn,owner:un,repo:wn,id:qe}),Gn=Wn.value?String(Wn.value):void 0,[sa,Cn]=o.useState(!1),ea=()=>{Cn(!0)},la=()=>{Cn(!1)};return o.createElement(q.Z,{TransitionProps:{unmountOnExit:!0},disabled:At},o.createElement(D.Z,{expandIcon:o.createElement(nt.Z,null),IconButtonProps:{className:tn.button}},o.createElement(Z.Z,{variant:"button"},Wn.loading?o.createElement(Le.Z,null):"Job Log"),o.createElement(ie.ZP,{title:"Open Log",TransitionComponent:re.Z,arrow:!0},o.createElement(Pe.Z,{onClick:ra=>{ra.stopPropagation(),ea()},style:{marginLeft:"auto"}})),o.createElement(Q.Z,{className:tn.modal,onClick:ra=>ra.stopPropagation(),open:sa,onClose:la},o.createElement(H.Z,{in:sa},o.createElement("div",{className:tn.modalLogContainer},o.createElement(de.nU,{text:Gn!=null?Gn:"No Values Found",classes:{root:tn.log}}))))),Gn&&o.createElement("div",{className:tn.normalLogContainer},o.createElement(de.nU,{text:Gn,classes:{root:tn.log}})))},at=(0,te.Z)(Fe=>({root:{maxWidth:720,margin:Fe.spacing(2)},title:{padding:Fe.spacing(1,0,2,0)},table:{padding:Fe.spacing(1)},accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),Pt=(Fe,qe)=>{if(!Fe||!qe)return"";const At=gt.ou.fromISO(Fe);return(qe?gt.ou.fromISO(qe):gt.ou.now()).diff(At).toFormat("m 'minutes' s 'seconds'")},Nt=({step:Fe})=>{var qe;return o.createElement(S.Z,null,o.createElement(l.Z,null,o.createElement(b.Z,{primary:Fe.name,secondary:Pt(Fe.started_at,Fe.completed_at)})),o.createElement(l.Z,null,o.createElement(Tt,{status:Fe.status.toLocaleUpperCase("en-US"),conclusion:(qe=Fe.conclusion)==null?void 0:qe.toLocaleUpperCase("en-US")})))},on=({job:Fe,className:qe,entity:At})=>{var tn;const ln=at();return o.createElement(q.Z,{TransitionProps:{unmountOnExit:!0},className:qe},o.createElement(D.Z,{expandIcon:o.createElement(nt.Z,null),IconButtonProps:{className:ln.button}},o.createElement(Z.Z,{variant:"button"},Fe.name," (",Pt(Fe.started_at,Fe.completed_at),")")),o.createElement(h.Z,{className:ln.accordionDetails},o.createElement(C.Z,null,o.createElement(p.Z,null,(tn=Fe.steps)==null?void 0:tn.map(dn=>o.createElement(Nt,{key:dn.number,step:dn}))))),Fe.status==="queued"||Fe.status==="in_progress"?o.createElement(it,{runId:Fe.id,inProgress:!0,entity:At}):o.createElement(it,{runId:Fe.id,inProgress:!1,entity:At}))},Ze=({jobs:Fe,entity:qe})=>{const At=at();return o.createElement(be.Z,null,Fe&&Fe.total_count>0&&Fe.jobs.map(tn=>o.createElement(on,{key:tn.id,job:tn,className:tn.status!=="success"?At.failed:At.success,entity:qe})))},He=({entity:Fe})=>{var qe,At,tn,ln,dn,un,wn,Wn,Gn,sa,Cn,ea,la,ra,fa;const Pa=pt(Fe),ia=Je(Fe),[Ra,ue]=Pa&&Pa.split("/")||[],Qe=Bt({hostname:ia,owner:Ra,repo:ue}),yt=ot({hostname:ia,owner:Ra,repo:ue}),K=at();return Qe.error&&Qe.error.message?o.createElement(Z.Z,{variant:"h6",color:"error"},"Failed to load build, ",Qe.error.message):Qe.loading?o.createElement(ge.Z,null):o.createElement("div",{className:K.root},o.createElement(be.Z,{mb:3},o.createElement(de.Oo,{"aria-label":"breadcrumb"},o.createElement(de.rU,{to:".."},"Workflow runs"),o.createElement(Z.Z,null,"Workflow run details"))),o.createElement(C.Z,{component:ye.Z,className:K.table},o.createElement(p.Z,null,o.createElement(ne.Z,null,o.createElement(S.Z,null,o.createElement(l.Z,null,o.createElement(Z.Z,{noWrap:!0},"Branch")),o.createElement(l.Z,null,(qe=Qe.value)==null?void 0:qe.head_branch)),o.createElement(S.Z,null,o.createElement(l.Z,null,o.createElement(Z.Z,{noWrap:!0},"Message")),o.createElement(l.Z,null,(tn=(At=Qe.value)==null?void 0:At.head_commit)==null?void 0:tn.message)),o.createElement(S.Z,null,o.createElement(l.Z,null,o.createElement(Z.Z,{noWrap:!0},"Commit ID")),o.createElement(l.Z,null,(dn=(ln=Qe.value)==null?void 0:ln.head_commit)==null?void 0:dn.id)),o.createElement(S.Z,null,o.createElement(l.Z,null,o.createElement(Z.Z,{noWrap:!0},"Workflow")),o.createElement(l.Z,null,(un=Qe.value)==null?void 0:un.name)),o.createElement(S.Z,null,o.createElement(l.Z,null,o.createElement(Z.Z,{noWrap:!0},"Status")),o.createElement(l.Z,null,o.createElement(Tt,{status:((wn=Qe.value)==null?void 0:wn.status)||void 0,conclusion:((Wn=Qe.value)==null?void 0:Wn.conclusion)||void 0}))),o.createElement(S.Z,null,o.createElement(l.Z,null,o.createElement(Z.Z,{noWrap:!0},"Author")),o.createElement(l.Z,null,`${(Cn=(sa=(Gn=Qe.value)==null?void 0:Gn.head_commit)==null?void 0:sa.author)==null?void 0:Cn.name} (${(ra=(la=(ea=Qe.value)==null?void 0:ea.head_commit)==null?void 0:la.author)==null?void 0:ra.email})`)),o.createElement(S.Z,null,o.createElement(l.Z,null,o.createElement(Z.Z,{noWrap:!0},"Links")),o.createElement(l.Z,null,((fa=Qe.value)==null?void 0:fa.html_url)&&o.createElement(de.rU,{to:Qe.value.html_url},"Workflow runs on GitHub"," ",o.createElement(Te.Z,{className:K.externalLinkIcon})))),o.createElement(S.Z,null,o.createElement(l.Z,{colSpan:2},o.createElement(Z.Z,{noWrap:!0},"Jobs"),yt.loading?o.createElement(Le.Z,null):o.createElement(Ze,{jobs:yt.value,entity:Fe})))))))};function ve({hostname:Fe,owner:qe,repo:At,branch:tn,initialPageSize:ln=6}){const dn=(0,r.u)(B),un=(0,r.u)(r.r),[wn,Wn]=(0,o.useState)(0),[Gn,sa]=(0,o.useState)(0),[Cn,ea]=(0,o.useState)(ln),[la,ra]=(0,o.useState)([]),[fa,Pa]=(0,o.useState)(""),{loading:ia,value:Ra,retry:ue,error:Qe}=(0,Zt.Z)(async()=>{const yt=await dn.getDefaultBranch({hostname:Fe,owner:qe,repo:At});Pa(yt);let K=tn;tn==="default"&&(K=yt);const T=await(async()=>{let V=!0,Ce=0;const Re=[];for(;V;){const pe=await dn.listBranches({hostname:Fe,owner:qe,repo:At,page:Ce});pe.length===0&&(V=!1),Ce++,Re.push(...pe)}return Re})();ra(T);const F=await dn.listWorkflowRuns({hostname:Fe,owner:qe,repo:At,pageSize:Cn,page:Gn+1,branch:K});return Wn(F.total_count),F.workflow_runs.map(V=>{var Ce,Re,pe,Ne,tt,_t,Ht,en,Xt;return{workflowName:(Ce=V.name)!=null?Ce:void 0,message:(Re=V.head_commit)==null?void 0:Re.message,id:`${V.id}`,onReRunClick:async()=>{try{await dn.reRunWorkflow({hostname:Fe,owner:qe,repo:At,runId:V.id})}catch(mn){un.post(new Error(`Failed to rerun the workflow: ${mn.message}`))}},source:{branchName:(pe=V.head_branch)!=null?pe:void 0,commit:{hash:(Ne=V.head_commit)==null?void 0:Ne.id,url:(Ht=(tt=V.head_repository)==null?void 0:tt.branches_url)==null?void 0:Ht.replace("{/branch}",(_t=V.head_branch)!=null?_t:"")}},status:(en=V.status)!=null?en:void 0,conclusion:(Xt=V.conclusion)!=null?Xt:void 0,url:V.url,githubUrl:V.html_url}})},[Gn,Cn,At,qe]);return[{page:Gn,pageSize:Cn,loading:ia,runs:Ra,branches:la,defaultBranch:fa,projectName:`${qe}/${At}`,total:wn,error:Qe},{runs:Ra,setPage:sa,setPageSize:ea,retry:ue}]}const Ie=(0,te.Z)(Fe=>(0,oe.Z)({card:{border:`1px solid ${Fe.palette.divider}`,boxShadow:Fe.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:Fe.spacing(4,1,1),flex:"1",minWidth:"0px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"middle"},bottomline:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"-5px"},pagination:{width:"100%"}})),lt={skipped:"warning",canceled:"info",timed_out:"error",failure:"error",success:"success"},$t=(Fe,qe)=>{var At,tn,ln,dn;const un=qe.toLocaleLowerCase();return((At=Fe.workflowName)==null?void 0:At.toLocaleLowerCase().includes(un))||((tn=Fe.source.branchName)==null?void 0:tn.toLocaleLowerCase().includes(un))||((ln=Fe.status)==null?void 0:ln.toLocaleLowerCase().includes(un))||((dn=Fe.id)==null?void 0:dn.toLocaleLowerCase().includes(un))},j=({runs:Fe,searchTerm:qe,loading:At,onChangePageSize:tn,onChangePage:ln,page:dn,total:un,pageSize:wn})=>{const Wn=Ie(),Gn=(0,m.tg)(ut),sa=Fe==null?void 0:Fe.filter(Cn=>$t(Cn,qe));return o.createElement(X.Z,{container:!0,spacing:3},sa&&(Fe==null?void 0:Fe.length)!==0?sa.map(Cn=>{var ea,la;return o.createElement(X.Z,{key:Cn.id,item:!0,container:!0,xs:12,sm:4,md:4,xl:4},o.createElement(be.Z,{className:Wn.card},o.createElement(be.Z,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},o.createElement(be.Z,{pt:2,sx:{width:"100%"},textAlign:"center"},o.createElement(ie.ZP,{title:(ea=Cn.status)!=null?ea:"No Status",placement:"top-start"},o.createElement(O.Z,{variant:"outlined",severity:lt[Cn.conclusion],style:{alignItems:"center"}},o.createElement(Z.Z,{variant:"h6"},o.createElement(de.rU,{to:Gn({id:Cn.id})},o.createElement(Z.Z,{color:"primary",variant:"h6"},Cn.workflowName))))),o.createElement(ie.ZP,{title:(la=Cn.message)!=null?la:"No run message"},o.createElement(Z.Z,{variant:"body2",component:"span",style:{fontSize:"smaller"}},o.createElement(de.SA,{content:`Commit ID : ${Cn.source.commit.hash}`}))),Cn.source.branchName&&o.createElement(de.SA,{content:`Branch : ${Cn.source.branchName}`}),o.createElement(xe.Z,{key:Cn.id,size:"small",label:`Workflow ID : ${Cn.id}`}),o.createElement(xe.Z,{size:"small",label:o.createElement(be.Z,{display:"flex",alignItems:"center"},o.createElement(Tt,{status:Cn.status,conclusion:Cn.conclusion}))}),o.createElement("div",{className:Wn.bottomline},Cn.githubUrl&&o.createElement(de.rU,{to:Cn.githubUrl},"Workflow runs on GitHub"," ",o.createElement(Te.Z,{className:Wn.externalLinkIcon})),o.createElement(It.Z,null,o.createElement(ie.ZP,{title:"Rerun workflow"},o.createElement(P.Z,{onClick:Cn.onReRunClick,style:{fontSize:"12px"}},o.createElement(Kt.Z,null)))))))))}):o.createElement(be.Z,{p:2},At?o.createElement(Le.Z,null):"No matching runs found."),o.createElement("div",{className:Wn.pagination},o.createElement(Jt.Z,{component:"div",count:un,page:dn,rowsPerPage:wn,onPageChange:(Cn,ea)=>ln(ea),onRowsPerPageChange:Cn=>tn(parseInt(Cn.target.value,6)),labelRowsPerPage:"Workflows per page",rowsPerPageOptions:[6,12,18,{label:"All",value:-1}]})))},he=({searchTerm:Fe,handleSearch:qe,retry:At})=>o.createElement(o.Fragment,null,o.createElement(be.Z,{flexGrow:1}),o.createElement(me.Z,{type:"search",label:"Search",value:Fe,onChange:qe,"data-testid":"search-control",style:{marginRight:"20px"}}),o.createElement(It.Z,null,o.createElement(ie.ZP,{title:"Reload workflow runs"},o.createElement(P.Z,{onClick:At},o.createElement(ct.Z,null))))),ze=({entity:Fe})=>{const qe=pt(Fe),At=Je(Fe),[tn,ln]=(qe!=null?qe:"/").split("/"),[dn,un]=(0,o.useState)("default"),[wn,Wn]=(0,o.useState)([]),[Gn,sa]=(0,o.useState)(""),Cn=K=>{sa(K.target.value)},[{runs:ea,branches:la,defaultBranch:ra,...fa},{retry:Pa,setPage:ia,setPageSize:Ra}]=ve({hostname:At,owner:tn,repo:ln,branch:dn==="all"?void 0:dn}),ue=At||"github.com",Qe=!fa.loading&&!ea,yt=K=>{const $=K.target.value;un($),ia(0),Pa()};return(0,o.useEffect)(()=>{Wn(ea)},[ea,dn]),(0,o.useEffect)(()=>{un(ra)},[ra]),o.createElement(X.Z,{item:!0},Qe?o.createElement(de.ub,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:o.createElement(Lt.Z,{variant:"contained",color:"primary",href:`https://${ue}/${qe}/actions/new`},"Create new Workflow")}):o.createElement(de.rJ,{title:o.createElement(be.Z,{display:"flex",alignItems:"center"},o.createElement(st.Z,null),o.createElement(be.Z,{mr:1}),o.createElement(Z.Z,{variant:"h6"},qe),o.createElement(Ct.Z,{value:dn,key:dn,label:"Branch",onChange:yt,"data-testid":"menu-control",style:{marginLeft:"30px",marginRight:"20px",width:"230px"}},la.map(K=>o.createElement(je.Z,{key:K.name,value:K.name},K.name===ra?o.createElement(Z.Z,{variant:"body2",component:"span"},K.name," ",o.createElement(Z.Z,{variant:"body2",component:"span",style:{color:"lightgray",fontSize:"x-small"}},"(default)")):K.name)),o.createElement(je.Z,{value:"all",key:"all",style:{color:"lightGrey",fontSize:"small"}},"select all branches")),o.createElement(he,{searchTerm:Gn,handleSearch:Cn,retry:Pa}))},o.createElement(j,{runs:wn,loading:fa.loading,onChangePageSize:Ra,onChangePage:ia,page:fa.page,total:fa.total,pageSize:fa.pageSize,searchTerm:Gn,projectName:qe})))},ht=[{title:"ID",field:"id",type:"numeric",width:"150px"},{title:"Message",field:"message",highlight:!0,render:Fe=>{const qe=()=>{const At=(0,m.tg)(ut);return o.createElement(de.rU,{component:we.rU,to:At({id:Fe.id})},Fe.message)};return o.createElement(qe,null)}},{title:"Source",render:Fe=>{var qe,At;return o.createElement(Z.Z,{variant:"body2",noWrap:!0},o.createElement(Z.Z,{paragraph:!0,variant:"body2"},(qe=Fe.source)==null?void 0:qe.branchName),o.createElement(Z.Z,{paragraph:!0,variant:"body2"},(At=Fe.source)==null?void 0:At.commit.hash))}},{title:"Workflow",field:"workflowName"},{title:"Status",customSort:(Fe,qe)=>$e(Fe).localeCompare($e(qe)),render:Fe=>o.createElement(be.Z,{display:"flex",alignItems:"center"},o.createElement(Tt,{status:Fe.status,conclusion:Fe.conclusion}))},{title:"Actions",render:Fe=>o.createElement(ie.ZP,{title:"Rerun workflow"},o.createElement(P.Z,{onClick:Fe.onReRunClick},o.createElement(Kt.Z,null))),width:"10%"}],sn=({projectName:Fe,loading:qe,pageSize:At,page:tn,retry:ln,runs:dn,onChangePage:un,onChangePageSize:wn,total:Wn})=>o.createElement(de.iA,{isLoading:qe,options:{paging:!0,pageSize:At,padding:"dense"},totalCount:Wn,page:tn,actions:[{icon:()=>o.createElement(ct.Z,null),tooltip:"Reload workflow runs",isFreeAction:!0,onClick:()=>ln()}],data:dn!=null?dn:[],onPageChange:un,onRowsPerPageChange:wn,style:{width:"100%"},title:o.createElement(be.Z,{display:"flex",alignItems:"center"},o.createElement(st.Z,null),o.createElement(be.Z,{mr:1}),o.createElement(Z.Z,{variant:"h6"},Fe)),columns:ht}),Qt=({entity:Fe,branch:qe})=>{const At=pt(Fe),tn=Je(Fe),[ln,dn]=(At!=null?At:"/").split("/"),[{runs:un,...wn},{retry:Wn,setPage:Gn,setPageSize:sa}]=ve({hostname:tn,owner:ln,repo:dn,branch:qe}),Cn=tn||"github.com";return!wn.loading&&!un?o.createElement(de.ub,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:o.createElement(Lt.Z,{variant:"contained",color:"primary",href:`https://${Cn}/${At}/actions/new`},"Create new Workflow")}):o.createElement(sn,{...wn,runs:un,loading:wn.loading,retry:Wn,onChangePageSize:sa,onChangePage:Gn})},x=Fe=>{var qe;return Boolean((qe=Fe.metadata.annotations)==null?void 0:qe[St])};var Ye=Object.freeze({__proto__:null,isGithubActionsAvailable:x,Router:Fe=>{const{view:qe="table"}=Fe,{entity:At}=(0,U.u)();if(!x(At))return o.createElement(We.sk,{annotation:St});const tn=qe==="cards"?o.createElement(ze,{entity:At}):o.createElement(Qt,{entity:At});return o.createElement(a.Z5,null,o.createElement(a.AW,{path:"/",element:tn}),o.createElement(a.AW,{path:`${ut.path}`,element:o.createElement(He,{entity:At})}))}});const Et=(0,te.Z)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),zt=Fe=>{var qe;const{error:At,loading:tn,lastRun:ln,branch:dn}=Fe,un=Et();return At?o.createElement(Z.Z,null,"Couldn't fetch latest ",dn," run"):tn?o.createElement(ge.Z,null):o.createElement(de.xT,{metadata:{status:o.createElement(o.Fragment,null,o.createElement(Tt,{status:ln.status,conclusion:ln.conclusion})),message:ln.message,url:o.createElement(de.rU,{to:(qe=ln.githubUrl)!=null?qe:""},"See more on GitHub"," ",o.createElement(Te.Z,{className:un.externalLinkIcon}))}})},Ft=Fe=>{var qe,At,tn;const{branch:ln="master",variant:dn}=Fe,{entity:un}=(0,U.u)(),wn=(0,r.u)(r.r),Wn=Je(un),[Gn,sa]=((At=(qe=un==null?void 0:un.metadata.annotations)==null?void 0:qe[St])!=null?At:"/").split("/"),[{runs:Cn,loading:ea,error:la}]=ve({hostname:Wn,owner:Gn,repo:sa,branch:ln}),ra=(tn=Cn==null?void 0:Cn[0])!=null?tn:{};return(0,o.useEffect)(()=>{la&&wn.post(la)},[la,wn]),o.createElement(de.rJ,{title:`Last ${ln} build`,variant:dn},o.createElement(zt,{error:la,loading:ea,branch:ln,lastRun:ra}))},gn=Fe=>{const{branch:qe="master",variant:At}=Fe,{entity:tn}=(0,U.u)();return o.createElement(de.rJ,{title:`Last ${qe} build`,variant:At},o.createElement(Qt,{branch:qe,entity:tn}))},cn=Fe=>Fe.split(`
`)[0],An=Fe=>{var qe,At;const{branch:tn,dense:ln=!1,limit:dn=5,variant:un}=Fe,{entity:wn}=(0,U.u)(),Wn=(0,r.u)(r.r),Gn=Je(wn),[sa,Cn]=((At=(qe=wn==null?void 0:wn.metadata.annotations)==null?void 0:qe[St])!=null?At:"/").split("/"),[{runs:ea=[],loading:la,error:ra}]=ve({hostname:Gn,owner:sa,repo:Cn,branch:tn,initialPageSize:dn});(0,o.useEffect)(()=>{ra&&Wn.post(ra)},[ra,Wn]);const fa=Gn||"github.com",Pa=(0,m.tg)(ut);return ra?o.createElement(de.yu,{title:ra.message,error:ra}):o.createElement(de.rJ,{title:"Recent Workflow Runs",subheader:tn?`Branch: ${tn}`:"All Branches",noPadding:!0,variant:un},ea.length?o.createElement(de.iA,{isLoading:la,options:{search:!1,paging:!1,padding:ln?"dense":"default",toolbar:!1},columns:[{title:"Commit Message",field:"message",render:ia=>{var Ra;return o.createElement(de.rU,{component:we.rU,to:Pa({id:ia.id})},cn((Ra=ia.message)!=null?Ra:""))}},{title:"Branch",field:"source.branchName"},{title:"Status",field:"status",render:Tt}],data:ea}):o.createElement("div",{style:{textAlign:"center"}},o.createElement(Z.Z,{variant:"body1"},"This component has GitHub Actions enabled, but no workflows were found."),o.createElement(Z.Z,{variant:"body2"},o.createElement(de.rU,{to:`https://${fa}/${sa}/${Cn}/actions/new`},"Create a new workflow"))))}},22573:(Rn,kt,e)=>{"use strict";e.d(kt,{L:()=>A});var r=e(30705);const m=(0,r.NT)({id:"github-pull-requests-board"}),u=(0,r.rx)({id:"github-pull-requests-board",routes:{root:m}}),W=u.provide((0,r.CO)({name:"EntityTeamPullRequestsCard",component:{lazy:()=>Promise.all([e.e(1770),e.e(507)]).then(e.bind(e,90507)).then(o=>o.EntityTeamPullRequestsCard)}})),A=u.provide((0,r.P4)({name:"PullRequestPage",component:()=>Promise.all([e.e(1770),e.e(7264)]).then(e.bind(e,57264)).then(o=>o.EntityTeamPullRequestsContent),mountPoint:m}))},27826:(Rn,kt,e)=>{"use strict";e.d(kt,{T:()=>te,_:()=>q});var r=e(2784),m=e(8629),u=e(79249),W=e(38724),A=e(49429),o=e(77277),U=e(61837),We=e(47603),we=e(49558),a=e(30705);const te=Z=>{const{open:Le,close:ie,componentName:re,children:Q}=Z;return r.createElement(m.Z,{open:Le,onClose:()=>ie()},r.createElement(u.Z,null,re?`Settings - ${re}`:"Settings"),r.createElement(W.Z,null,Q),r.createElement(A.Z,null,r.createElement(o.Z,{onClick:()=>ie(),color:"primary",variant:"contained"},"Close")))};function q(Z){const{title:Le,components:ie,name:re,description:Q,layout:H,settings:S}=Z,l=(S==null?void 0:S.schema)!==void 0;return(0,a.YO)({name:re,data:{title:Le,description:Q,"home.widget.config":{layout:H,settings:S}},component:{lazy:()=>ie().then(b=>h=>r.createElement(D,{...h,...b,title:h.title||Le,isCustomizable:l}))}})}function D(Z){const{Renderer:Le,Content:ie,Settings:re,Actions:Q,ContextProvider:H,isCustomizable:S,title:l,...b}=Z,h=(0,a.qD)(),{Progress:C}=h.getComponents(),[p,be]=r.useState(!1);if(Le)return r.createElement(r.Suspense,{fallback:r.createElement(C,null)},r.createElement(Le,{...l&&{title:l},Content:ie,...Q?{Actions:Q}:{},...re&&!S?{Settings:re}:{},...H?{ContextProvider:H}:{},...b}));const ge={...l&&{title:l},...re&&!S?{action:r.createElement(U.Z,{onClick:()=>be(!0)},r.createElement(We.Z,null,"Settings"))}:{},...Q?{actions:r.createElement(Q,null)}:{}},ye=r.createElement(we.rJ,{...ge},re&&!S&&r.createElement(te,{open:p,componentName:l,close:()=>be(!1)},r.createElement(re,null)),r.createElement(ie,{...b}));return r.createElement(r.Suspense,{fallback:r.createElement(C,null)},H?r.createElement(H,{...b},ye):ye)}},38453:(Rn,kt,e)=>{"use strict";e.d(kt,{C:()=>Me,V:()=>ut,v:()=>Lt});var r=e(2784),m=e(66244),u=e.n(m),W=e(57032),A=e(30705),o=e(79692),U=e(12420),We=e(8629),we=e(38724),a=e(60905),te=e(80030),q=e(79249),D=e(3806),Z=e(60364),Le=e(76635),ie=e.n(Le),re=e(72164),Q=e(49558),H=e(90436),S=e(61837),l=e(47603),b=e(22983),h=e(95303),C=e(90137),p=e(11280),be=e(11776),ge=e(38402),ye=e(65549),ne=e(49378),oe=e(77277),X=e(96401),xe=e(27604),It=e(49166),P=e(30195),Jt=e(73557),me=e(34520);const Lt=(0,W.c)({id:"homepage.visits"}),Ct=(0,h.Zz)(C.Q2),je=(0,o.Z)(et=>(0,U.Z)({iconGrid:{height:"100%","& *":{padding:0}},settingsOverlay:{position:"absolute",backgroundColor:"rgba(40, 40, 40, 0.93)",width:"100%",height:"100%",top:0,left:0,padding:et.spacing(2),color:"white"}})),nt=et=>{const{id:Wt,widget:fe,settings:Ae,handleRemove:Xe,handleSettingsSave:St,deletable:pt}=et,[Tt,Dt]=r.useState(!1),$e=je();return r.createElement("div",{className:$e.settingsOverlay},fe.settingsSchema&&r.createElement(We.Z,{open:Tt,className:"widgetSettingsDialog",onClose:()=>Dt(!1)},r.createElement(we.Z,null,r.createElement(Ct,{validator:p.ZP,showErrorList:!1,schema:fe.settingsSchema,uiSchema:fe.uiSchema,noHtml5Validate:!0,formData:Ae,formContext:{settings:Ae},onSubmit:({formData:ot,errors:Bt})=>{Bt.length===0&&(St(Wt,ot),Dt(!1))},experimental_defaultFormStateBehavior:{allOf:"populateDefaults"}}))),r.createElement(a.Z,{container:!0,className:$e.iconGrid,alignItems:"center",justifyContent:"center"},fe.settingsSchema&&r.createElement(a.Z,{item:!0,className:"overlayGridItem"},r.createElement(te.ZP,{title:"Edit settings"},r.createElement(S.Z,{color:"primary",onClick:()=>Dt(!0)},r.createElement(l.Z,{fontSize:"large"})))),pt!==!1&&r.createElement(a.Z,{item:!0,className:"overlayGridItem"},r.createElement(te.ZP,{title:"Delete widget"},r.createElement(S.Z,{color:"secondary",onClick:()=>Xe(Wt)},r.createElement(b.Z,{fontSize:"large"}))))))},Te=et=>et.title||et.name,gt=et=>{const{widgets:Wt,handleAdd:fe}=et;return r.createElement(r.Fragment,null,r.createElement(q.Z,null,"Add new widget to dashboard"),r.createElement(we.Z,null,r.createElement(be.Z,{dense:!0},Wt.map(Ae=>r.createElement(ge.Z,{key:Ae.name,button:!0,onClick:()=>fe(Ae)},r.createElement(D.Z,null,r.createElement(ye.Z,null)),r.createElement(ne.Z,{secondary:Ae.description&&r.createElement(H.Z,{component:"span",variant:"caption",color:"textPrimary"},Ae.description),primary:r.createElement(H.Z,{variant:"body1",color:"textPrimary"},Te(Ae))}))))))},de=(0,o.Z)(et=>(0,U.Z)({contentHeaderBtn:{marginLeft:et.spacing(2)},widgetWrapper:{"& > *:first-child":{width:"100%",height:"100%"}}})),G=et=>{const{editMode:Wt,numWidgets:fe,clearLayout:Ae,setAddWidgetDialogOpen:Xe,changeEditMode:St,defaultConfigAvailable:pt,restoreDefault:Tt}=et,Dt=de();return r.createElement(r.Fragment,null,!Wt&&fe>0?r.createElement(oe.Z,{variant:"contained",color:"primary",onClick:()=>St(!0),size:"small",startIcon:r.createElement(xe.Z,null)},"Edit"):r.createElement(r.Fragment,null,pt&&r.createElement(oe.Z,{variant:"contained",className:Dt.contentHeaderBtn,onClick:Tt,size:"small",startIcon:r.createElement(It.Z,null)},"Restore defaults"),fe>0&&r.createElement(oe.Z,{variant:"contained",color:"secondary",className:Dt.contentHeaderBtn,onClick:Ae,size:"small",startIcon:r.createElement(b.Z,null)},"Clear all"),r.createElement(oe.Z,{variant:"contained",className:Dt.contentHeaderBtn,onClick:()=>Xe(!0),size:"small",startIcon:r.createElement(ye.Z,null)},"Add widget"),fe>0&&r.createElement(oe.Z,{className:Dt.contentHeaderBtn,variant:"contained",color:"primary",onClick:()=>St(!1),size:"small",startIcon:r.createElement(X.Z,null)},"Save")))},Pe=P.z.any(),ce=P.z.any(),le=P.z.any(),Be=P.z.any(),st=P.z.object({component:le,x:P.z.number().nonnegative("x must be positive number"),y:P.z.number().nonnegative("y must be positive number"),width:P.z.number().positive("width must be positive number"),height:P.z.number().positive("height must be positive number"),movable:P.z.boolean().optional(),deletable:P.z.boolean().optional(),resizable:P.z.boolean().optional()}),Kt=P.z.object({name:P.z.string(),title:P.z.string().optional(),description:P.z.string().optional(),component:le,width:P.z.number().positive("width must be positive number").optional(),height:P.z.number().positive("height must be positive number").optional(),minWidth:P.z.number().positive("minWidth must be positive number").optional(),maxWidth:P.z.number().positive("maxWidth must be positive number").optional(),minHeight:P.z.number().positive("minHeight must be positive number").optional(),maxHeight:P.z.number().positive("maxHeight must be positive number").optional(),settingsSchema:Pe.optional(),uiSchema:ce.optional(),movable:P.z.boolean().optional(),deletable:P.z.boolean().optional(),resizable:P.z.boolean().optional()}),ct=P.z.object({id:P.z.string(),layout:Be,settings:P.z.record(P.z.string(),P.z.any()),movable:P.z.boolean().optional(),deletable:P.z.boolean().optional(),resizable:P.z.boolean().optional()}),Zt=P.z.object({version:P.z.literal(1),pages:P.z.record(P.z.string(),P.z.array(ct))}),O=(0,m.WidthProvider)(m.Responsive),B=(0,o.Z)(et=>(0,U.Z)({responsiveGrid:{"& .react-grid-item > .react-resizable-handle:after":{position:"absolute",content:'""',borderStyle:"solid",borderWidth:"0 0 20px 20px",borderColor:`transparent transparent ${et.palette.primary.light} transparent`}},contentHeaderBtn:{marginLeft:et.spacing(2)},widgetWrapper:{'& > div[class*="MuiCard-root"]':{width:"100%",height:"100%"},'& div[class*="MuiCardContent-root"]':{overflow:"auto"},"& + .react-grid-placeholder":{backgroundColor:et.palette.primary.light},"&.edit > :active":{cursor:"move"}}}));function w(et){const Wt="home",fe=(0,W.u)(W.x).forBucket("home.customHomepage"),Ae=(0,r.useCallback)(pt=>{const Tt={version:1,pages:{default:pt}};fe.set(Wt,JSON.stringify(Tt))},[Wt,fe]),Xe=(0,re.Z)(fe.observe$(Wt),fe.snapshot(Wt));return[(0,r.useMemo)(()=>{if(Xe.presence==="absent")return et;try{const pt=JSON.parse(Xe.value);return Zt.parse(pt).pages.default}catch{return et}},[Xe,et]),Ae]}const L=(et,Wt)=>{const fe=et.map((Ae,Xe)=>{var St,pt;const Tt=st.parse(Ae),Dt=r.isValidElement(Tt.component)?(0,A.IY)(Tt.component,"core.extensionName"):Tt.component;if(!Dt)return null;const $e=Wt.find(Bt=>Bt.name===Dt);if(!$e)return null;const ot=`${$e.name}__${Xe}${Math.random().toString(36).slice(2)}`;return{id:ot,layout:{i:ot,x:Tt.x,y:Tt.y,w:Math.min((St=$e.maxWidth)!=null?St:Number.MAX_VALUE,Tt.width),h:Math.min((pt=$e.maxHeight)!=null?pt:Number.MAX_VALUE,Tt.height),minW:$e.minWidth,maxW:$e.maxWidth,minH:$e.minHeight,maxH:$e.maxHeight,isDraggable:!1,isResizable:!1},settings:{},movable:Ae.movable,deletable:Ae.deletable,resizable:Ae.resizable}});return(0,Le.compact)(fe)},se=et=>et.selectByComponentData({key:"core.extensionName"}).getElements().flatMap(Wt=>{var fe,Ae,Xe,St,pt,Tt,Dt,$e,ot,Bt,_e,Je,Ee,it;const at=(0,A.IY)(Wt,"home.widget.config");return[Kt.parse({component:Wt,name:(0,A.IY)(Wt,"core.extensionName"),title:(0,A.IY)(Wt,"title"),description:(0,A.IY)(Wt,"description"),settingsSchema:(fe=at==null?void 0:at.settings)==null?void 0:fe.schema,uiSchema:(Ae=at==null?void 0:at.settings)==null?void 0:Ae.uiSchema,width:(St=(Xe=at==null?void 0:at.layout)==null?void 0:Xe.width)==null?void 0:St.defaultColumns,minWidth:(Tt=(pt=at==null?void 0:at.layout)==null?void 0:pt.width)==null?void 0:Tt.minColumns,maxWidth:($e=(Dt=at==null?void 0:at.layout)==null?void 0:Dt.width)==null?void 0:$e.maxColumns,height:(Bt=(ot=at==null?void 0:at.layout)==null?void 0:ot.height)==null?void 0:Bt.defaultRows,minHeight:(Je=(_e=at==null?void 0:at.layout)==null?void 0:_e.height)==null?void 0:Je.minRows,maxHeight:(it=(Ee=at==null?void 0:at.layout)==null?void 0:Ee.height)==null?void 0:it.maxRows})]}),Me=et=>{var Wt;const fe=B(),Ae=(0,Z.Z)(),Xe=(0,A.vJ)(et.children,se,[et]),St=(0,r.useMemo)(()=>et.config?L(et.config,Xe):[],[et.config,Xe]),[pt,Tt]=w(St),[Dt,$e]=r.useState(!1),ot=pt.find(ve=>ve.layout.isResizable)!==void 0,[Bt,_e]=r.useState(ot),Je=ve=>Xe.find(Ie=>Ie.name===ve),Ee=ve=>ve.split("__")[0],it=ve=>{var Ie,lt,$t,j;const he=`${ve.name}__${pt.length+1}${Math.random().toString(36).slice(2)}`;Tt([...pt,{id:he,layout:{i:he,x:0,y:Math.max(...pt.map(ze=>ze.layout.y+ze.layout.h))+1,w:Math.min((Ie=ve.maxWidth)!=null?Ie:Number.MAX_VALUE,(lt=ve.width)!=null?lt:12),h:Math.min(($t=ve.maxHeight)!=null?$t:Number.MAX_VALUE,(j=ve.height)!=null?j:4),minW:ve.minWidth,maxW:ve.maxWidth,minH:ve.minHeight,maxH:ve.maxHeight,isResizable:Bt,isDraggable:Bt},settings:{},movable:ve.movable,deletable:ve.deletable,resizable:ve.resizable}]),$e(!1)},at=ve=>{Tt(pt.filter(Ie=>Ie.id!==ve))},Pt=(ve,Ie)=>{const lt=pt.findIndex($t=>$t.id===ve);if(lt>=0){const $t=pt[lt];$t.settings=Ie,pt[lt]=$t,Tt(pt)}},Nt=()=>{Tt([])},on=ve=>{_e(ve),Tt(pt.map(Ie=>{const lt=Ie.resizable===!1?!1:ve,$t=Ie.movable===!1?!1:ve;return{...Ie,layout:{...Ie.layout,isDraggable:$t,isResizable:lt}}}))},Ze=(ve,Ie)=>{if(Bt){const lt=ve.map($t=>({...pt.find(he=>he.id===$t.i),layout:$t}));Tt(lt)}},He=()=>{Tt(St.map(ve=>{const Ie=ve.resizable===!1?!1:Bt,lt=ve.movable===!1?!1:Bt;return{...ve,layout:{...ve.layout,isDraggable:lt,isResizable:Ie}}}))};return r.createElement(r.Fragment,null,r.createElement(Q.yW,{title:""},r.createElement(G,{editMode:Bt,numWidgets:pt.length,clearLayout:Nt,setAddWidgetDialogOpen:$e,changeEditMode:on,defaultConfigAvailable:et.config!==void 0,restoreDefault:He})),r.createElement(We.Z,{open:Dt,onClose:()=>$e(!1)},r.createElement(gt,{widgets:Xe,handleAdd:it})),!Bt&&pt.length===0&&r.createElement(H.Z,{variant:"h5",align:"center"},"No widgets added. Start by clicking the 'Add widget' button."),r.createElement(O,{className:fe.responsiveGrid,measureBeforeMount:!0,compactType:et.compactType,style:et.style,allowOverlap:et.allowOverlap,preventCollision:et.preventCollision,draggableCancel:".overlayGridItem,.widgetSettingsDialog,.disabled",containerPadding:et.containerPadding,margin:et.containerMargin,breakpoints:et.breakpoints?et.breakpoints:Ae.breakpoints.values,cols:et.cols?et.cols:{xl:12,lg:12,md:10,sm:6,xs:4,xxs:2},rowHeight:(Wt=et.rowHeight)!=null?Wt:60,onLayoutChange:Ze,layouts:{xl:pt.map(ve=>ve.layout)}},pt.map(ve=>{var Ie;const lt=ve.layout,$t=Ee(lt.i),j=Je($t);if(!j||!j.component)return null;const he={...j.component.props,...(Ie=ve.settings)!=null?Ie:{}};return r.createElement("div",{key:lt.i,className:`${fe.widgetWrapper} ${Bt&&"edit"} ${ve.movable===!1&&"disabled"}`},r.createElement(Q.SV,null,r.createElement(j.component.type,{...he})),Bt&&r.createElement(nt,{id:lt.i,widget:j,handleRemove:at,handleSettingsSave:Pt,settings:ve.settings,deletable:ve.deletable}))})))},rt=({rootPath:et="catalog",stringifyEntityRefImpl:Wt=me.eE}={})=>({pathname:fe})=>{const Xe=new RegExp(`^/${et}/(?<namespace>[^/]+)/(?<kind>[^/]+)/(?<name>[^/]+)`).exec(fe);if(!Xe||!(Xe!=null&&Xe.groups))return;const St={namespace:Xe.groups.namespace,kind:Xe.groups.kind,name:Xe.groups.name};return Wt(St)},xt=({rootPath:et="catalog",document:Wt=e.g.document}={})=>({pathname:fe})=>{let Xe=new RegExp(`^/${et}/(?<namespace>[^/]+)/(?<kind>[^/]+)/(?<name>[^/]+)`).exec(fe);return Xe&&(Xe!=null&&Xe.groups)||(Xe=/^\/(?<name>[^\/]+)$/.exec(fe),Xe&&(Xe!=null&&Xe.groups))?Xe.groups.name:Wt.title},ut=({children:et,toEntityRef:Wt,visitName:fe})=>{const Ae=(0,W.u)(Lt),{pathname:Xe}=(0,Jt.TH)(),St=Wt!=null?Wt:rt(),pt=fe!=null?fe:xt();return(0,r.useEffect)(()=>{const Tt=requestAnimationFrame(()=>{Ae.save({visit:{name:pt({pathname:Xe}),pathname:Xe,entityRef:St({pathname:Xe})}})});return()=>cancelAnimationFrame(Tt)},[Ae,Xe,St,pt]),r.createElement(r.Fragment,null,et)}},68306:(Rn,kt,e)=>{"use strict";e.d(kt,{U4:()=>ne,kG:()=>l});var r=e(30705),m=e(57032),u=e(27826),W=e(38453),A=e(2784),o=e(79692),U=e(66244),We=e.n(U),we=e(76635),a=e.n(we),te=e(95303),q=e(90137),D=e(11280);const Z=(0,r.NT)({id:"home"});var Le=Object.defineProperty,ie=(je,nt,Te)=>nt in je?Le(je,nt,{enumerable:!0,configurable:!0,writable:!0,value:Te}):je[nt]=Te,re=(je,nt,Te)=>(ie(je,typeof nt!="symbol"?nt+"":nt,Te),Te);class Q{constructor(nt){re(this,"limit"),re(this,"storageApi"),re(this,"storageKeyPrefix","@backstage/plugin-home:visits"),re(this,"identityApi");var Te;this.limit=Math.abs((Te=nt.limit)!=null?Te:100),this.storageApi=nt.storageApi,this.identityApi=nt.identityApi}static create(nt){return new Q(nt)}async list(nt){var Te,gt;let de=[...await this.retrieveAll()];return((Te=nt==null?void 0:nt.orderBy)!=null?Te:[]).reverse().forEach(G=>{G.direction==="asc"?de.sort((Pe,ce)=>this.compare(G,Pe,ce)):de.sort((Pe,ce)=>this.compare(G,ce,Pe))}),((gt=nt==null?void 0:nt.filterBy)!=null?gt:[]).reverse().forEach(G=>{de=de.filter(Pe=>{const ce=Pe[G.field];return G.operator===">"?ce>G.value:G.operator===">="?ce>=G.value:G.operator==="<"?ce<G.value:G.operator==="<="?ce<=G.value:G.operator==="=="?ce===G.value:G.operator==="!="?ce!==G.value:G.operator==="contains"?`${ce}`.includes(`${G.value}`):!1})}),de}async save(nt){const Te=[...await this.retrieveAll()],gt={...nt.visit,id:window.crypto.randomUUID(),hits:1,timestamp:Date.now()},de=Te.findIndex(G=>G.pathname===gt.pathname);return de>=0?(gt.id=Te[de].id,gt.hits=Te[de].hits+1,Te[de]=gt):Te.push(gt),Te.sort((G,Pe)=>Pe.timestamp-G.timestamp),await this.persistAll(Te.splice(0,this.limit)),gt}async persistAll(nt){const Te=await this.getStorageKey();return this.storageApi.set(Te,nt)}async retrieveAll(){var nt;const Te=await this.getStorageKey(),gt=this.storageApi.snapshot(Te);return(gt==null?void 0:gt.presence)!=="unknown"?(nt=gt==null?void 0:gt.value)!=null?nt:[]:new Promise((de,G)=>{const Pe=this.storageApi.observe$(Te).subscribe({next:ce=>{var le;const Be=(le=ce.value)!=null?le:[];Pe.unsubscribe(),de(Be)},error:ce=>{Pe.unsubscribe(),G(ce)}})})}async getStorageKey(){const{userEntityRef:nt}=await this.identityApi.getBackstageIdentity();return`${this.storageKeyPrefix}:${nt}`}compare(nt,Te,gt){return typeof Te[nt.field]=="number"?Te[nt.field]-gt[nt.field]:`${Te[nt.field]}`.localeCompare(`${gt[nt.field]}`)}}class H{static create(nt){return Q.create({limit:nt.limit,identityApi:nt.identityApi,storageApi:WebStorage.create({errorApi:nt.errorApi})})}}const S=(0,r.rx)({id:"home",apis:[(0,r.ni)({api:W.v,deps:{storageApi:m.x,identityApi:m.t},factory:({storageApi:je,identityApi:nt})=>Q.create({storageApi:je,identityApi:nt})})],routes:{root:Z}}),l=S.provide((0,r.P4)({name:"HomepageCompositionRoot",component:()=>e.e(3781).then(e.bind(e,73781)).then(je=>je.HomepageCompositionRoot),mountPoint:Z})),b=S.provide((0,r.CO)({name:"ComponentAccordion",component:{lazy:()=>e.e(3968).then(e.bind(e,43968)).then(je=>je.ComponentAccordion)}})),h=S.provide((0,r.CO)({name:"ComponentTabs",component:{lazy:()=>e.e(3968).then(e.bind(e,43968)).then(je=>je.ComponentTabs)}})),C=S.provide((0,r.CO)({name:"ComponentTab",component:{lazy:()=>e.e(3968).then(e.bind(e,43968)).then(je=>je.ComponentTab)}})),p=S.provide((0,r.CO)({name:"WelcomeTitle",component:{lazy:()=>e.e(1700).then(e.bind(e,1700)).then(je=>je.WelcomeTitle)}})),be=S.provide((0,r.CO)({name:"CompanyLogo",component:{lazy:()=>e.e(3258).then(e.bind(e,33258)).then(je=>je.CompanyLogo)}})),ge=S.provide((0,u._)({name:"HomePageRandomJoke",title:"Random Joke",components:()=>e.e(8163).then(e.bind(e,8163)),description:"Shows a random joke about optional category",layout:{height:{minRows:4},width:{minColumns:3}},settings:{schema:{title:"Random Joke settings",type:"object",properties:{defaultCategory:{title:"Category",type:"string",enum:["any","programming","dad"],default:"any"}}}}})),ye=S.provide((0,u._)({name:"HomePageToolkit",title:"Toolkit",components:()=>e.e(7777).then(e.bind(e,27777))})),ne=S.provide((0,u._)({name:"HomePageStarredEntities",title:"Your Starred Entities",components:()=>e.e(8313).then(e.bind(e,28313))})),oe=S.provide((0,r.CO)({name:"HeaderWorldClock",component:{lazy:()=>e.e(2352).then(e.bind(e,32352)).then(je=>je.HeaderWorldClock)}})),X=S.provide((0,u._)({name:"HomePageTopVisited",components:()=>e.e(9182).then(e.bind(e,19182))})),xe=S.provide((0,u._)({name:"HomePageRecentlyVisited",components:()=>e.e(847).then(e.bind(e,20847))})),It=S.provide((0,u._)({name:"FeaturedDocsCard",title:"Featured Docs",components:()=>e.e(228).then(e.bind(e,10228))})),P=je=>React.createElement("svg",{className:je.classes.svg,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2079.95 456.05"},React.createElement("path",{className:je.classes.path,d:"M302.9,180a80.62,80.62,0,0,0,13.44-10.37c.8-.77,1.55-1.54,2.31-2.31a81.89,81.89,0,0,0,7.92-9.37,62.37,62.37,0,0,0,6.27-10.77,48.6,48.6,0,0,0,4.36-16.4c1.49-19.39-10-38.67-35.62-54.22L198.42,14,78.16,129.22l-78.29,75,108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.69,49.69,0,0,0-6.8-8.87,89.78,89.78,0,0,0,19.28,2.15H259a85.09,85.09,0,0,0,31-5.79A80.88,80.88,0,0,0,302.9,180Zm-100.59,59.8c-19.32,18.51-50.4,21.24-75.7,5.9l-75.13-45.6,67.44-64.65,76.42,46.39C222.88,198.57,221.36,221.6,202.31,239.84Zm8.94-82.21L140.6,114.74,205,53l69.37,42.11c25.94,15.73,29.31,37.05,10.55,55A60.71,60.71,0,0,1,211.25,157.63Zm29.86,190c-19.57,18.75-46.17,29.08-74.88,29.08a123.84,123.84,0,0,1-64.11-18.19L-.13,296.51v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.85,87.85,0,0,1,241.11,347.67Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,257.52V282.2l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.79A86.86,86.86,0,0,1,241.11,308.68Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,218.54v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.12,19.68-41.49v-1.82A87.14,87.14,0,0,1,241.11,269.7Zm83.69,25.74a94.16,94.16,0,0,1-60.19,25.86h0V348a81.6,81.6,0,0,0,51.73-22.37c14-13.38,21.15-28.11,21-42.64v-2.2A95.14,95.14,0,0,1,324.8,295.44Zm-83.69,91.21c-19.57,18.75-46.17,29.09-74.88,29.09a123.76,123.76,0,0,1-64.11-18.2L-.13,335.49v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.35,87.35,0,0,1,241.11,386.65Zm85.75-210.21c-.68.69-1.35,1.38-2.06,2.05a99.19,99.19,0,0,1-22.23,15.69,94.53,94.53,0,0,1-26.24,8.71,97.84,97.84,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a52.7,52.7,0,0,1,1.13,12V231h.05A84.48,84.48,0,0,0,290,225.47a80.83,80.83,0,0,0,26.38-16.82c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,62.85,62.85,0,0,0,6.29-10.78,48.5,48.5,0,0,0,4.32-16.44c.09-1.23.2-2.47.19-3.7v-2c-.72,1-1.48,2.06-2.26,3.09A98,98,0,0,1,326.86,176.44Zm0,77.92c-.68.7-1.3,1.41-2,2.1a94.09,94.09,0,0,1-60.19,25.85h0V309h0a81.65,81.65,0,0,0,51.73-22.37,73.51,73.51,0,0,0,16.48-22.49,48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A95.81,95.81,0,0,1,326.82,254.36Zm0-39c-.68.7-1.3,1.41-2,2.1a92.22,92.22,0,0,1-10.62,8.65,93.53,93.53,0,0,1-11.63,7,95.63,95.63,0,0,1-37.94,10.18h-.05l0,26.67h0a81.63,81.63,0,0,0,51.73-22.37c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,63.16,63.16,0,0,0,6.29-10.77,48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A98.19,98.19,0,0,1,326.82,215.38Zm241-88.84q7.94,0,17.09.17t18.12,1a139.3,139.3,0,0,1,16.74,2.57,42.78,42.78,0,0,1,13.3,5.14,64.27,64.27,0,0,1,20.54,19.89Q662,168,662,186.54q0,19.54-9.49,33.78t-27.1,21.09v.68q22.78,4.82,34.87,20.58t12.08,38.4a72.62,72.62,0,0,1-4.83,26.06,65.29,65.29,0,0,1-14.33,22.46,71.57,71.57,0,0,1-23.47,15.78q-14,6-32.28,6H478.38V126.54Zm9,105.27q28,0,40.21-9.78t12.26-29.31q0-13-4.14-20.58a29.47,29.47,0,0,0-11.4-11.66A45,45,0,0,0,597,155.17a161.2,161.2,0,0,0-20.19-1.2h-65.6v77.84Zm16.57,112.13q21.74,0,34-11.66T639.59,300q0-12-4.48-19.88a34.85,34.85,0,0,0-11.91-12.52,50.14,50.14,0,0,0-17.09-6.52,105,105,0,0,0-20-1.88H511.17v84.7Zm274.79,26.74q-7.61,4.45-21.06,4.46-11.4,0-18.12-6.34t-6.74-20.75a70.17,70.17,0,0,1-28.13,20.75,97.87,97.87,0,0,1-57.65,3.6,53.51,53.51,0,0,1-18.82-8.58A41.19,41.19,0,0,1,705,348.56q-4.65-9.42-4.66-22.8,0-15.09,5.18-24.69a44.92,44.92,0,0,1,13.64-15.6,62.63,62.63,0,0,1,19.33-9.09q10.88-3.08,22.27-5.14,12.08-2.4,23-3.6a128,128,0,0,0,19.16-3.43c5.53-1.48,9.89-3.65,13.12-6.51s4.83-7,4.83-12.52q0-9.6-3.62-15.43a24.94,24.94,0,0,0-9.32-8.92,38.38,38.38,0,0,0-12.78-4.11,96.54,96.54,0,0,0-14-1q-18.63,0-31.07,7T736.6,249.29H707.26q.69-16.46,6.9-27.77a52.21,52.21,0,0,1,16.57-18.35,70,70,0,0,1,23.65-10.11A125.51,125.51,0,0,1,782.86,190a168.63,168.63,0,0,1,24,1.72,63.26,63.26,0,0,1,21.58,7A41.23,41.23,0,0,1,844,213.59q5.87,9.57,5.87,25v91q0,10.26,1.21,15.05t8.11,4.79a35.57,35.57,0,0,0,9-1.37Zm-47.64-90.87c-3.69,2.74-8.52,4.72-14.5,6s-12.26,2.27-18.82,3.07-13.17,1.71-19.85,2.73a73.7,73.7,0,0,0-18,4.94,32.62,32.62,0,0,0-12.94,9.73q-5,6.32-5,17.23a23.31,23.31,0,0,0,2.94,12.11,24.11,24.11,0,0,0,7.59,8,32,32,0,0,0,10.88,4.44,60.94,60.94,0,0,0,13.11,1.36q14.5,0,24.86-3.92a52.49,52.49,0,0,0,16.91-9.9,39.1,39.1,0,0,0,9.67-13,32.53,32.53,0,0,0,3.11-13.14ZM1002.07,225q-11.05-9.25-29.69-9.26-15.89,0-26.58,5.83A47.29,47.29,0,0,0,928.71,237a64.66,64.66,0,0,0-9.15,22.12A119.83,119.83,0,0,0,916.8,285a98.22,98.22,0,0,0,2.93,24,64.18,64.18,0,0,0,9.15,20.74,46.2,46.2,0,0,0,16.23,14.58q10,5.49,23.82,5.48,21.75,0,34-11.31t15-31.89h30q-4.83,32.91-24.68,50.75t-54,17.83q-20.37,0-36.07-6.52A69.86,69.86,0,0,1,907,350.11a79.92,79.92,0,0,1-15.88-28.63A118.64,118.64,0,0,1,885.73,285a129.41,129.41,0,0,1,5.18-37.21,85.63,85.63,0,0,1,15.71-30.17A73.46,73.46,0,0,1,933,197.35Q948.91,190,970,190a108.54,108.54,0,0,1,28.48,3.6,69.59,69.59,0,0,1,23.48,11.15,61,61,0,0,1,16.74,19q6.55,11.49,8.29,27.26h-30.38Q1013.11,234.21,1002.07,225Zm109.77-98.41v145l81.47-77.49h39.36l-70.77,64.46,75.95,112.82h-37.29l-61.1-92.59-27.62,25.38v67.21H1082.5V126.54Zm170.54,205.22a31.07,31.07,0,0,0,10.87,10.63,49,49,0,0,0,15.19,5.66,87.06,87.06,0,0,0,17.44,1.71,109.18,109.18,0,0,0,14.5-1,53.22,53.22,0,0,0,14-3.78,26.27,26.27,0,0,0,10.53-8q4.14-5.32,4.14-13.55,0-11.31-8.63-17.14a73.69,73.69,0,0,0-21.58-9.43q-12.94-3.6-28.13-6.52a146,146,0,0,1-28.14-8.23A58.16,58.16,0,0,1,1261,267.13q-8.64-9.6-8.63-26.75,0-13.38,6-23a49.26,49.26,0,0,1,15.53-15.61,71.76,71.76,0,0,1,21.4-8.91A99.41,99.41,0,0,1,1319,190a141.31,141.31,0,0,1,28,2.58,64.85,64.85,0,0,1,22.62,8.91,46.16,46.16,0,0,1,15.7,17.15q5.87,10.8,6.91,26.91h-29.35q-.69-8.57-4.48-14.23a29.36,29.36,0,0,0-9.67-9.08,44.16,44.16,0,0,0-12.94-5,67.68,67.68,0,0,0-14.33-1.54,87.29,87.29,0,0,0-13.29,1,45.28,45.28,0,0,0-12.26,3.6,24.49,24.49,0,0,0-9,6.86q-3.46,4.29-3.46,11.14a16.32,16.32,0,0,0,5.36,12.52,42.75,42.75,0,0,0,13.63,8.23,120,120,0,0,0,18.64,5.48q10.37,2.24,20.72,4.63,11,2.4,21.57,5.83A70.74,70.74,0,0,1,1382,284.1a44.55,44.55,0,0,1,13.12,14.23q5,8.58,5,21.26,0,16.13-6.73,26.75a52.5,52.5,0,0,1-17.61,17.14,73.89,73.89,0,0,1-24.51,9.09,146.3,146.3,0,0,1-27.1,2.57,126.24,126.24,0,0,1-28.31-3.09A69.56,69.56,0,0,1,1272,361.94a51.74,51.74,0,0,1-16.57-18.52q-6.21-11.49-6.9-27.95h29.34A32.65,32.65,0,0,0,1282.38,331.76Zm226.46-137.67v25.72h-35.56V329.88a31.37,31.37,0,0,0,.87,8.23,8.42,8.42,0,0,0,3.28,4.8,14.61,14.61,0,0,0,6.73,2.23,99.19,99.19,0,0,0,11.22.51h13.46v25.72H1486.4a105.8,105.8,0,0,1-19.5-1.55,28.65,28.65,0,0,1-13.12-5.65,24.09,24.09,0,0,1-7.42-11.66q-2.43-7.54-2.42-19.89V219.81h-30.38V194.09h30.38V140.94h29.34v53.15ZM1699.4,370.68q-7.61,4.45-21.06,4.46-11.4,0-18.12-6.34t-6.74-20.75a70.17,70.17,0,0,1-28.13,20.75,97.87,97.87,0,0,1-57.65,3.6,53.51,53.51,0,0,1-18.82-8.58,41.19,41.19,0,0,1-12.6-15.26q-4.65-9.42-4.66-22.8,0-15.09,5.18-24.69a44.92,44.92,0,0,1,13.64-15.6,62.63,62.63,0,0,1,19.33-9.09q10.88-3.08,22.27-5.14,12.07-2.4,23-3.6a128,128,0,0,0,19.16-3.43c5.53-1.48,9.89-3.65,13.12-6.51s4.83-7,4.83-12.52q0-9.6-3.62-15.43a24.94,24.94,0,0,0-9.32-8.92,38.38,38.38,0,0,0-12.78-4.11,96.54,96.54,0,0,0-14-1q-18.63,0-31.07,7t-13.46,26.57h-29.34q.67-16.46,6.9-27.77A52.21,52.21,0,0,1,1562,203.17a70,70,0,0,1,23.65-10.11,125.51,125.51,0,0,1,28.48-3.09,168.63,168.63,0,0,1,24,1.72,63.26,63.26,0,0,1,21.58,7,41.23,41.23,0,0,1,15.53,14.89q5.87,9.57,5.87,25v91q0,10.26,1.21,15.05t8.11,4.79a35.57,35.57,0,0,0,9-1.37Zm-47.64-90.87c-3.69,2.74-8.52,4.72-14.5,6s-12.26,2.27-18.82,3.07-13.17,1.71-19.85,2.73a73.7,73.7,0,0,0-17.95,4.94,32.62,32.62,0,0,0-12.94,9.73q-5,6.32-5,17.23a23.31,23.31,0,0,0,2.94,12.11,24.11,24.11,0,0,0,7.59,8,32,32,0,0,0,10.88,4.44,60.94,60.94,0,0,0,13.11,1.36q14.51,0,24.86-3.92a52.49,52.49,0,0,0,16.91-9.9,39.1,39.1,0,0,0,9.67-13,32.53,32.53,0,0,0,3.11-13.14Zm208.85,141.62q-20,21.6-62.83,21.6a122.11,122.11,0,0,1-25.37-2.74,78,78,0,0,1-23.48-8.92,54.41,54.41,0,0,1-17.43-16.11q-6.91-10-7.6-24.35h29.35a21.47,21.47,0,0,0,5,13.38,36.67,36.67,0,0,0,11.4,8.91,55.52,55.52,0,0,0,14.67,5,79.51,79.51,0,0,0,15.19,1.55q14.49,0,24.51-5A46,46,0,0,0,1840.59,401a56.53,56.53,0,0,0,9.49-21.09,117.46,117.46,0,0,0,2.94-27.09V341.19h-.7q-7.59,16.46-23,24.18a71.8,71.8,0,0,1-32.63,7.71q-20,0-34.86-7.2A72.88,72.88,0,0,1,1737,346.51a82.13,82.13,0,0,1-15-28.46,116.62,116.62,0,0,1-5-34.47,133.92,133.92,0,0,1,4.14-32.4A88.17,88.17,0,0,1,1735,221a75.49,75.49,0,0,1,25.55-22.29q15.87-8.75,39-8.75a66.21,66.21,0,0,1,31.07,7.38,52.13,52.13,0,0,1,22.09,22.11h.35V194.09h27.61V356.28Q1880.63,399.83,1860.61,421.43Zm-37.46-79.72a47.94,47.94,0,0,0,16.4-15.78,71.89,71.89,0,0,0,9.15-22.11,106.77,106.77,0,0,0,2.93-24.69,96.71,96.71,0,0,0-2.76-23,64,64,0,0,0-8.8-20.4,45.76,45.76,0,0,0-15.71-14.57q-9.66-5.49-23.47-5.49-14.16,0-24.17,5.32a46.77,46.77,0,0,0-16.4,14.23,60.14,60.14,0,0,0-9.32,20.57,99.69,99.69,0,0,0-2.93,24.35,120.63,120.63,0,0,0,2.42,24,67.5,67.5,0,0,0,8.28,21.77,46.37,46.37,0,0,0,15.54,15.78q9.66,6,24.16,6T1823.15,341.71Zm228,18.34q-20,15.09-50.41,15.09-21.4,0-37.11-6.86a73.16,73.16,0,0,1-26.41-19.2,81.52,81.52,0,0,1-16-29.49,141.12,141.12,0,0,1-6-37.38,106.1,106.1,0,0,1,6.21-37A88.56,88.56,0,0,1,1938.8,216a79.09,79.09,0,0,1,26.58-19.2A81.66,81.66,0,0,1,1999,190q23.82,0,39.53,9.78a78,78,0,0,1,25.2,24.86,98.18,98.18,0,0,1,13.12,32.91,140.6,140.6,0,0,1,2.93,34h-133.6a70,70,0,0,0,2.76,22.12,49.9,49.9,0,0,0,10,18.51A49.1,49.1,0,0,0,1976.6,345q10.7,4.82,25.2,4.8,18.65,0,30.55-8.57t15.71-26.06h29Q2071.18,345,2051.17,360.05Zm-7.08-113.84a50,50,0,0,0-10.7-16,53.1,53.1,0,0,0-56.62-10.63,47.48,47.48,0,0,0-15.71,10.81,51.69,51.69,0,0,0-10.35,15.94,60.18,60.18,0,0,0-4.49,19.37h102.53A59.47,59.47,0,0,0,2044.09,246.21ZM302.9,180a80.62,80.62,0,0,0,13.44-10.37c.8-.77,1.55-1.54,2.31-2.31a81.89,81.89,0,0,0,7.92-9.37,62.37,62.37,0,0,0,6.27-10.77,48.6,48.6,0,0,0,4.36-16.4c1.49-19.39-10-38.67-35.62-54.22L198.42,14,78.16,129.22l-78.29,75,108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.69,49.69,0,0,0-6.8-8.87,89.78,89.78,0,0,0,19.28,2.15H259a85.09,85.09,0,0,0,31-5.79A80.88,80.88,0,0,0,302.9,180Zm-100.59,59.8c-19.32,18.51-50.4,21.24-75.7,5.9l-75.13-45.6,67.44-64.65,76.42,46.39C222.88,198.57,221.36,221.6,202.31,239.84Zm8.94-82.21L140.6,114.74,205,53l69.37,42.11c25.94,15.73,29.31,37.05,10.55,55A60.71,60.71,0,0,1,211.25,157.63Zm29.86,190c-19.57,18.75-46.17,29.08-74.88,29.08a123.84,123.84,0,0,1-64.11-18.19L-.13,296.51v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.85,87.85,0,0,1,241.11,347.67Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,257.52V282.2l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.79A86.86,86.86,0,0,1,241.11,308.68Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.84,123.84,0,0,1-64.11-18.19L-.13,218.54v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.12,19.68-41.49v-1.82A87.14,87.14,0,0,1,241.11,269.7Zm83.69,25.74a94.16,94.16,0,0,1-60.19,25.86h0V348a81.6,81.6,0,0,0,51.73-22.37c14-13.38,21.15-28.11,21-42.64v-2.2A95.14,95.14,0,0,1,324.8,295.44Zm-83.69,91.21c-19.57,18.75-46.17,29.09-74.88,29.09a123.76,123.76,0,0,1-64.11-18.2L-.13,335.49v24.67l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.35,87.35,0,0,1,241.11,386.65Zm85.75-210.21c-.68.69-1.35,1.38-2.06,2.05a99.19,99.19,0,0,1-22.23,15.69,94.53,94.53,0,0,1-26.24,8.71,97.84,97.84,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a52.7,52.7,0,0,1,1.13,12V231h.05A84.48,84.48,0,0,0,290,225.47a80.83,80.83,0,0,0,26.38-16.82c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,62.85,62.85,0,0,0,6.29-10.78,48.5,48.5,0,0,0,4.32-16.44c.09-1.23.2-2.47.19-3.7v-2c-.72,1-1.48,2.06-2.26,3.09A98,98,0,0,1,326.86,176.44Zm0,77.92c-.68.7-1.3,1.41-2,2.1a94.09,94.09,0,0,1-60.19,25.85h0V309h0a81.65,81.65,0,0,0,51.73-22.37,73.51,73.51,0,0,0,16.48-22.49,48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A95.81,95.81,0,0,1,326.82,254.36Zm0-39c-.68.7-1.3,1.41-2,2.1a92.22,92.22,0,0,1-10.62,8.65,93.53,93.53,0,0,1-11.63,7,95.63,95.63,0,0,1-37.94,10.18h-.05l0,26.67h0a81.63,81.63,0,0,0,51.73-22.37c.81-.77,1.51-1.56,2.27-2.34a82,82,0,0,0,7.92-9.38,63.16,63.16,0,0,0,6.29-10.77,48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7v-2.2c-.74,1.08-1.47,2.16-2.27,3.22A98.19,98.19,0,0,1,326.82,215.38Z"})),Jt=(0,o.Z)({svg:{width:"auto",height:28},path:{fill:"#7df3e1"}}),me=()=>{const je=Jt();return React.createElement("svg",{className:je.svg,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 337.46 428.5"},React.createElement("path",{className:je.path,d:"M303,166.05a80.69,80.69,0,0,0,13.45-10.37c.79-.77,1.55-1.53,2.3-2.3a83.12,83.12,0,0,0,7.93-9.38A63.69,63.69,0,0,0,333,133.23a48.58,48.58,0,0,0,4.35-16.4c1.49-19.39-10-38.67-35.62-54.22L198.56,0,78.3,115.23,0,190.25l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.69,19.16-18.36,25.52-42.12,13.7-61.87a49.22,49.22,0,0,0-6.8-8.87A89.17,89.17,0,0,0,259,178.29h.15a85.08,85.08,0,0,0,31-5.79A80.88,80.88,0,0,0,303,166.05ZM202.45,225.86c-19.32,18.51-50.4,21.23-75.7,5.9L51.61,186.15l67.45-64.64,76.41,46.38C223,184.58,221.49,207.61,202.45,225.86Zm8.93-82.22-70.65-42.89L205.14,39,274.51,81.1c25.94,15.72,29.31,37,10.55,55A60.69,60.69,0,0,1,211.38,143.64Zm29.86,190c-19.57,18.75-46.17,29.09-74.88,29.09a123.73,123.73,0,0,1-64.1-18.2L0,282.52v24.67L108.6,373.1a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A87.27,87.27,0,0,1,241.24,333.68Zm0-39c-19.57,18.75-46.17,29.08-74.88,29.08a123.81,123.81,0,0,1-64.1-18.19L0,243.53v24.68l108.6,65.91a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.81,66.42-25.69,12.88-12.34,20-27.13,19.68-41.5v-1.78A87.27,87.27,0,0,1,241.24,294.7Zm0-39c-19.57,18.76-46.17,29.09-74.88,29.09a123.81,123.81,0,0,1-64.1-18.19L0,204.55v24.68l108.6,65.91a111.59,111.59,0,0,0,57.76,16.41c24.92,0,48.8-8.8,66.42-25.68,12.88-12.35,20-27.13,19.68-41.5v-1.82A86.09,86.09,0,0,1,241.24,255.71Zm83.7,25.74a94.15,94.15,0,0,1-60.2,25.86h0V334a81.6,81.6,0,0,0,51.74-22.37c14-13.38,21.14-28.11,21-42.64v-2.19A94.92,94.92,0,0,1,324.94,281.45Zm-83.7,91.21c-19.57,18.76-46.17,29.09-74.88,29.09a123.73,123.73,0,0,1-64.1-18.2L0,321.5v24.68l108.6,65.9a111.6,111.6,0,0,0,57.76,16.42c24.92,0,48.8-8.8,66.42-25.69,12.88-12.34,20-27.13,19.68-41.49v-1.79A86.29,86.29,0,0,1,241.24,372.66ZM327,162.45c-.68.69-1.35,1.38-2.05,2.06a94.37,94.37,0,0,1-10.64,8.65,91.35,91.35,0,0,1-11.6,7,94.53,94.53,0,0,1-26.24,8.71,97.69,97.69,0,0,1-14.16,1.57c.5,1.61.9,3.25,1.25,4.9a53.27,53.27,0,0,1,1.14,12V217h.05a84.41,84.41,0,0,0,25.35-5.55,81,81,0,0,0,26.39-16.82c.8-.77,1.5-1.56,2.26-2.34a82.08,82.08,0,0,0,7.93-9.38A63.76,63.76,0,0,0,333,172.17a48.55,48.55,0,0,0,4.32-16.45c.09-1.23.2-2.47.19-3.7V150q-1.08,1.54-2.25,3.09A96.73,96.73,0,0,1,327,162.45Zm0,77.92c-.69.7-1.31,1.41-2,2.1a94.2,94.2,0,0,1-60.2,25.86h0l0,26.67h0a81.6,81.6,0,0,0,51.74-22.37A73.51,73.51,0,0,0,333,250.13a48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.47.19-3.71v-2.19c-.74,1.07-1.46,2.15-2.27,3.21A95.68,95.68,0,0,1,327,240.37Zm0-39c-.69.7-1.31,1.41-2,2.1a93.18,93.18,0,0,1-10.63,8.65,91.63,91.63,0,0,1-11.63,7,95.47,95.47,0,0,1-37.94,10.18h0V256h0a81.65,81.65,0,0,0,51.74-22.37c.8-.77,1.5-1.56,2.26-2.34a82.08,82.08,0,0,0,7.93-9.38A63.76,63.76,0,0,0,333,211.15a48.56,48.56,0,0,0,4.32-16.44c.09-1.24.2-2.48.19-3.71v-2.2c-.74,1.08-1.46,2.16-2.27,3.22A95.68,95.68,0,0,1,327,201.39Z"}))},Lt=null,Ct=null},59235:(Rn,kt,e)=>{"use strict";e.d(kt,{$M:()=>G,Eg:()=>ce,Jh:()=>ut,Yq:()=>_e,jJ:()=>Je,jQ:()=>le,oy:()=>rt,qJ:()=>w,rw:()=>Pe,w1:()=>de});var r=e(30705),m=e(57032),u=e(34520),W=e(78373),A=e(73495),o=e(79692),U=e(12420),We=e(95544),we=e(90436),a=e(60905),te=e(82938),q=e(38402),D=e(86136),Z=e(49378),Le=e(85256),ie=e(61837),re=e(11776),Q=e(80030),H=e(9520),S=e(76637),l=e(2784),b=e(64279),h=e(49558),C=e(73655),p=e(99688),be=e(52866),ge=e(27604),ye=e(13384),ne=e(62367),oe=e(52160),X=e(61068),xe=e(75650),It=e(98685),P=e(19928),Jt=e.n(P),me=e(14162),Lt=e.n(me),Ct=e(37794),je=e.n(Ct),nt=e(76635),Te=e.n(nt);const gt=(0,r.x8)({id:"catalog-index"}),de=(0,r.rx)({id:"org",externalRoutes:{catalogIndex:gt}}),G=de.provide((0,r.CO)({name:"EntityGroupProfileCard",component:{lazy:()=>e.e(111).then(e.bind(e,50111)).then(Ee=>Ee.GroupProfileCard)}})),Pe=de.provide((0,r.CO)({name:"EntityMembersListCard",component:{lazy:()=>e.e(111).then(e.bind(e,50111)).then(Ee=>Ee.MembersListCard)}})),ce=de.provide((0,r.CO)({name:"EntityOwnershipCard",component:{lazy:()=>e.e(111).then(e.bind(e,50111)).then(Ee=>Ee.OwnershipCard)}})),le=de.provide((0,r.CO)({name:"EntityUserProfileCard",component:{lazy:()=>e.e(111).then(e.bind(e,50111)).then(Ee=>Ee.UserProfileCard)}})),Be=async(Ee,it)=>(Ee.length===0?{items:[]}:await it.getEntities({filter:{kind:"User","relations.memberof":Ee.map(Pt=>(0,u.eE)({kind:"group",namespace:Pt.namespace.toLocaleLowerCase("en-US"),name:Pt.name.toLocaleLowerCase("en-US")}))}})).items,st=async(Ee,it)=>{var at;const Pt=new Map,on=[{kind:Ee.kind,namespace:(at=Ee.metadata.namespace)!=null?at:u.zG,name:Ee.metadata.name}],Ze=[];for(;on.length>0;){const He=on.shift(),ve=await it.getEntityByRef(He);Pt.set((0,u.eE)(He),!0);const Ie=(0,W.g)(ve,u._b,{kind:"Group"}).filter(lt=>!Pt.has((0,u.eE)(lt)));Ie.forEach(lt=>Pt.set((0,u.eE)(lt),!0)),on.push(...Ie),Ze.push(...Ie)}return Ze},Kt=async(Ee,it)=>Be(await st(Ee,it),it),ct=Ee=>{const it=new Map;return Ee.filter(at=>{const Pt=(0,u.eE)(at),Nt=it.has(Pt);return it.set(Pt,!0),!Nt})},Zt=(0,o.Z)(Ee=>(0,U.Z)({card:{border:`1px solid ${Ee.palette.divider}`,boxShadow:Ee.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:Ee.spacing(4,1,1),flex:"1",minWidth:"0px"}})),O=Ee=>{var it;const at=Zt(),{metadata:{name:Pt,description:Nt},spec:{profile:on}}=Ee.member,Ze=(it=on==null?void 0:on.displayName)!=null?it:Pt;return l.createElement(We.Z,{className:at.card},l.createElement(We.Z,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},l.createElement(h.qE,{displayName:Ze,picture:on==null?void 0:on.picture,customStyles:{position:"absolute",top:"-2rem"}}),l.createElement(We.Z,{pt:2,sx:{width:"100%"},textAlign:"center"},l.createElement(we.Z,{variant:"h6"},l.createElement(A.dx,{"data-testid":"user-link",entityRef:Ee.member,title:Ze})),(on==null?void 0:on.email)&&l.createElement(h.rU,{to:`mailto:${on.email}`},l.createElement(h.Or,{text:on.email})),Nt&&l.createElement(we.Z,{variant:"subtitle2"},Nt))))},B=(0,o.Z)(Ee=>({root:{height:"100%"},cardContent:{overflow:"auto"},memberList:{display:"grid",gap:Ee.spacing(1.5),gridTemplateColumns:`repeat(auto-fit, minmax(auto, ${Ee.spacing(34)}px))`}})),w=Ee=>{var it;const{memberDisplayTitle:at="Members",pageSize:Pt=50,showAggregateMembersToggle:Nt}=Ee,on=B(),{entity:Ze}=(0,W.u)(),{metadata:{name:He,namespace:ve},spec:{profile:Ie}}=Ze,lt=(0,m.u)(A.Ah),$t=(it=Ie==null?void 0:Ie.displayName)!=null?it:He,j=ve||u.zG,[he,ze]=l.useState(1),ht=(qe,At)=>{ze(At)},[sn,Qt]=(0,l.useState)(!1),{loading:x,value:Y}=(0,b.default)(async()=>Nt?await Kt(Ze,lt):[],[lt,Ze,Nt]),{loading:Ye,error:Et,value:zt}=(0,b.default)(async()=>(await lt.getEntities({filter:{kind:"User","relations.memberof":[(0,u.eE)({kind:"group",namespace:j.toLocaleLowerCase("en-US"),name:He.toLocaleLowerCase("en-US")})]}})).items,[lt,Ze]),Ft=ct([...zt!=null?zt:[],...Y&&sn?Y:[]].sort((qe,At)=>(0,u.eE)(qe).localeCompare((0,u.eE)(At))));if(Ye)return l.createElement(h.Ex,null);if(Et)return l.createElement(h.Gk,{error:Et});const gn=Math.ceil(((Ft==null?void 0:Ft.length)||0)/Pt),cn=gn<2?"":`, page ${he} of ${gn}`,An=l.createElement(S.Z,{count:gn,page:he,onChange:ht,showFirstButton:!0,showLastButton:!0});let Fe;return Ft&&Ft.length>0?Fe=l.createElement(We.Z,{className:on.memberList},Ft.slice(Pt*(he-1),Pt*he).map(qe=>l.createElement(O,{member:qe,key:qe.metadata.uid}))):Fe=l.createElement(We.Z,{p:2},l.createElement(we.Z,null,"This group has no ",at.toLocaleLowerCase(),".")),l.createElement(a.Z,{item:!0,className:on.root},l.createElement(h.rJ,{title:`${at} (${(Ft==null?void 0:Ft.length)||0}${cn})`,subheader:`of ${$t}`,...gn<=1?{}:{actions:An},className:on.root,cardClassName:on.cardContent},Nt&&l.createElement(l.Fragment,null,"Direct Members",l.createElement(te.Z,{color:"primary",checked:sn,onChange:()=>{Qt(!sn)},inputProps:{"aria-label":"Users Type Switch"}}),"Aggregated Members"),sn&&x?l.createElement(h.Ex,null):Fe))},L=({href:Ee,Icon:it,text:at})=>l.createElement(q.Z,{key:Ee},l.createElement(D.Z,null,it?l.createElement(it,null):l.createElement(oe.Z,null)),l.createElement(Z.Z,null,l.createElement(h.rU,{to:Ee},at))),se=({links:Ee})=>{const it=(0,r.qD)(),at=Pt=>{var Nt;return Pt&&(Nt=it.getSystemIcon(Pt))!=null?Nt:oe.Z};return Ee===void 0?null:l.createElement(l.Fragment,null,l.createElement(Le.Z,null),Ee.map(Pt=>l.createElement(L,{key:Pt.url,href:Pt.url,text:Pt.title,Icon:at(Pt.icon)})))},Me=Ee=>l.createElement(We.Z,{display:"flex",alignItems:"center"},l.createElement(ne.Z,{fontSize:"inherit"}),l.createElement(We.Z,{ml:1},Ee.title)),rt=Ee=>{var it,at,Pt;const Nt=(0,m.u)(A.Ah),on=(0,m.u)(m.l),{entity:Ze}=(0,W.u)(),{allowed:He}=(0,X.N$)(xe.es),ve=(0,l.useCallback)(async()=>{await Nt.refreshEntity((0,u.eE)(Ze)),on.post({message:"Refresh scheduled",severity:"info",display:"transient"})},[Nt,on,Ze]);if(!Ze)return l.createElement(p.Z,{severity:"error"},"Group not found");const{metadata:{name:Ie,description:lt,title:$t,annotations:j,links:he},spec:{profile:ze}}=Ze,ht=(0,W.g)(Ze,u._b,{kind:"Group"}),sn=(0,W.g)(Ze,u.wP,{kind:"group"}),Qt=j==null?void 0:j[u.P1],x=(Qt==null?void 0:Qt.startsWith("url:"))||(Qt==null?void 0:Qt.startsWith("file:")),Y=(it=Ze.metadata.annotations)==null?void 0:it[u.Tf],Ye=(Pt=(at=ze==null?void 0:ze.displayName)!=null?at:$t)!=null?Pt:Ie,Et=ze!=null&&ze.email?`mailto:${ze.email}`:"#",zt=Y?l.createElement(ie.Z,{"aria-label":"Edit",title:"Edit Metadata",component:h.rU,to:Y},l.createElement(ge.Z,null)):l.createElement(ie.Z,{"aria-label":"Edit",disabled:!0,title:"Edit Metadata"},l.createElement(ge.Z,null));return l.createElement(h.rJ,{title:l.createElement(Me,{title:Ye}),subheader:lt,variant:Ee.variant,action:l.createElement(l.Fragment,null,x&&He&&l.createElement(ie.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:ve},l.createElement(be.Z,null)),zt)},l.createElement(a.Z,{container:!0,spacing:3},l.createElement(a.Z,{item:!0,xs:12,sm:2,xl:1},l.createElement(h.qE,{displayName:Ye,picture:ze==null?void 0:ze.picture})),l.createElement(a.Z,{item:!0,md:10,xl:11},l.createElement(re.Z,null,(ze==null?void 0:ze.email)&&l.createElement(q.Z,null,l.createElement(D.Z,null,l.createElement(Q.ZP,{title:"Email"},l.createElement(ye.Z,null))),l.createElement(Z.Z,{primary:l.createElement(h.rU,{to:Et},ze.email),secondary:"Email"})),l.createElement(q.Z,null,l.createElement(D.Z,null,l.createElement(Q.ZP,{title:"Parent Group"},l.createElement(C.Z,null))),l.createElement(Z.Z,{primary:sn.length?l.createElement(A.rI,{entityRefs:sn,defaultKind:"Group"}):"N/A",secondary:"Parent Group"})),l.createElement(q.Z,null,l.createElement(D.Z,null,l.createElement(Q.ZP,{title:"Child Groups"},l.createElement(ne.Z,null))),l.createElement(Z.Z,{primary:ht.length?l.createElement(A.rI,{entityRefs:ht,defaultKind:"Group"}):"N/A",secondary:"Child Groups"})),(Ee==null?void 0:Ee.showLinks)&&l.createElement(se,{links:he})))))},xt=Ee=>Ee.title?l.createElement(We.Z,{display:"flex",alignItems:"center"},l.createElement(It.Z,{fontSize:"inherit"}),l.createElement(We.Z,{ml:1},Ee.title)):null,ut=Ee=>{var it,at;const{entity:Pt}=(0,W.u)();if(!Pt)return l.createElement(p.Z,{severity:"error"},"User not found");const Nt=(it=Pt.metadata.annotations)==null?void 0:it[u.Tf],{metadata:{name:on,description:Ze,links:He},spec:{profile:ve}}=Pt,Ie=(at=ve==null?void 0:ve.displayName)!=null?at:on,lt=ve!=null&&ve.email?`mailto:${ve.email}`:void 0,$t=(0,W.g)(Pt,u.hr,{kind:"Group"});return l.createElement(h.rJ,{title:l.createElement(xt,{title:Ie}),subheader:Ze,variant:Ee.variant,action:l.createElement(l.Fragment,null,Nt&&l.createElement(ie.Z,{"aria-label":"Edit",title:"Edit Metadata",component:h.rU,to:Nt},l.createElement(ge.Z,null)))},l.createElement(a.Z,{container:!0,spacing:3,alignItems:"flex-start"},l.createElement(a.Z,{item:!0,xs:12,sm:2,xl:1},l.createElement(h.qE,{displayName:Ie,picture:ve==null?void 0:ve.picture})),l.createElement(a.Z,{item:!0,md:10,xl:11},l.createElement(re.Z,null,(ve==null?void 0:ve.email)&&l.createElement(q.Z,null,l.createElement(D.Z,null,l.createElement(Q.ZP,{title:"Email"},l.createElement(ye.Z,null))),l.createElement(Z.Z,null,l.createElement(h.rU,{to:lt!=null?lt:""},ve.email))),l.createElement(q.Z,null,l.createElement(D.Z,null,l.createElement(Q.ZP,{title:"Member of"},l.createElement(ne.Z,null))),l.createElement(Z.Z,null,l.createElement(A.rI,{entityRefs:$t,defaultKind:"Group"}))),(Ee==null?void 0:Ee.showLinks)&&l.createElement(se,{links:He})))))},et=Lt()(10),Wt=(Ee,it)=>{const{kind:at,type:Pt}=it,Nt=Ee.map(Ze=>(0,A.$3)((0,u.of)(Ze),{defaultKind:"group"})),on={kind:at.toLocaleLowerCase("en-US"),type:Pt,owners:Nt,user:"all"};return je().stringify({filters:on},{arrayFormat:"repeat"})},fe=Ee=>[...(0,W.g)(Ee,u.hr,{kind:"Group"}).map(({kind:Pt,namespace:Nt,name:on})=>(0,u.eE)({kind:Pt,namespace:Nt,name:on})),(0,u.eE)(Ee)],Ae=Ee=>Ee!==void 0,Xe=async(Ee,it,at=[])=>{const Pt=(0,W.g)(Ee,u._b,{kind:"Group"}),Nt=Pt.length>0,on=(0,u.eE)(Ee);if(Nt){const Ze=Pt.map($t=>(0,u.eE)($t)),Ie=(await it.getEntitiesByRefs({fields:["kind","metadata.namespace","metadata.name","relations"],entityRefs:Ze})).items.filter(Ae).filter($t=>!at.includes((0,u.eE)($t))),lt=(await Promise.all(Ie.map($t=>et(()=>Xe($t,it,[...at,on]))))).flatMap($t=>$t);return(0,nt.uniq)([...lt,on])}return[on]},St=async(Ee,it,at)=>{const Pt=Ee.kind==="Group",Nt=it==="aggregated",on=Ee.kind==="User";return Nt&&Pt?Xe(Ee,at):Nt&&on?fe(Ee):[(0,u.eE)(Ee)]},pt=(Ee,it,at)=>at.getEntities({filter:[{kind:it,"relations.ownedBy":Ee}],fields:["kind","metadata.name","metadata.namespace","spec.type","relations"]});function Tt(Ee,it,at,Pt=6){const Nt=(0,m.u)(A.Ah),on=at!=null?at:["Component","API","System"],{loading:Ze,error:He,value:ve}=(0,b.default)(async()=>{const Ie=await St(Ee,it,Nt);return(await pt(Ie,on,Nt)).items.reduce((he,ze)=>{var ht,sn;const Qt=he.find(x=>{var Y;return x.kind===ze.kind&&x.type===((Y=ze.spec)==null?void 0:Y.type)});return Qt?Qt.count+=1:he.push({kind:ze.kind,type:(sn=(ht=ze.spec)==null?void 0:ht.type)==null?void 0:sn.toString(),count:1}),he},[]).sort((he,ze)=>ze.count-he.count).slice(0,Pt).map(he=>({counter:he.count,type:he.type,kind:he.kind,queryParams:Wt(Ie,he)}))},[Nt,Ee,it]);return{componentsWithCounters:ve,loading:Ze,error:He}}const Dt=(0,o.Z)(Ee=>(0,U.Z)({card:{border:`1px solid ${Ee.palette.divider}`,boxShadow:Ee.shadows[2],borderRadius:"4px",padding:Ee.spacing(2),transition:`${Ee.transitions.duration.standard}ms`,"&:hover":{boxShadow:Ee.shadows[4]},height:"100%"},bold:{fontWeight:Ee.typography.fontWeightBold},smallFont:{fontSize:Ee.typography.body2.fontSize},entityTypeBox:{background:it=>Ee.getPageTheme({themeId:it.type}).backgroundImage,color:it=>Ee.getPageTheme({themeId:it.type}).fontColor}})),$e=({counter:Ee,type:it,kind:at,url:Pt})=>{const Nt=Dt({type:it!=null?it:at}),on=it!=null?it:at,Ze=on.length>10;return l.createElement(h.rU,{to:Pt,variant:"body2"},l.createElement(We.Z,{className:`${Nt.card} ${Nt.entityTypeBox}`,display:"flex",flexDirection:"column",alignItems:"center"},l.createElement(we.Z,{className:Nt.bold,variant:"h6"},Ee),l.createElement(We.Z,{sx:{width:"100%",textAlign:"center"}},l.createElement(we.Z,{className:`${Nt.bold} ${Ze&&Nt.smallFont}`,variant:"h6"},l.createElement(h.Or,{text:Jt()(on.toLocaleUpperCase("en-US"),Ee)}))),it&&l.createElement(we.Z,{variant:"subtitle1"},at)))},ot=({entity:Ee,relationsType:it,entityFilterKind:at,entityLimit:Pt=6})=>{const Nt=(0,r.tg)(gt),{componentsWithCounters:on,loading:Ze,error:He}=Tt(Ee,it,at,Pt);return Ze?l.createElement(h.Ex,null):He?l.createElement(h.Gk,{error:He}):l.createElement(a.Z,{container:!0},on==null?void 0:on.map(ve=>{var Ie;return l.createElement(a.Z,{item:!0,xs:6,md:6,lg:4,key:(Ie=ve.type)!=null?Ie:ve.kind},l.createElement($e,{counter:ve.counter,kind:ve.kind,type:ve.type,url:`${Nt()}/?${ve.queryParams}`}))}))},Bt=(0,o.Z)(Ee=>({list:{[Ee.breakpoints.down("xs")]:{padding:"0 0 12px"}},listItemText:{[Ee.breakpoints.down("xs")]:{paddingRight:0,paddingLeft:0}},listItemSecondaryAction:{[Ee.breakpoints.down("xs")]:{width:"100%",top:"auto",right:"auto",position:"relative",transform:"unset"}}})),_e=Ee=>{const{variant:it,entityFilterKind:at,hideRelationsToggle:Pt,relationsType:Nt,entityLimit:on=6}=Ee,Ze=Pt===void 0?!1:Pt,He=Bt(),{entity:ve}=(0,W.u)(),Ie=ve.kind==="User"?"aggregated":"direct",[lt,$t]=(0,l.useState)(Nt!=null?Nt:Ie);return(0,l.useEffect)(()=>{Nt||$t(Ie)},[$t,Ie,Nt]),l.createElement(h.rJ,{title:"Ownership",variant:it},!Ze&&l.createElement(re.Z,{dense:!0},l.createElement(q.Z,{className:He.list},l.createElement(Z.Z,{className:He.listItemText}),l.createElement(H.Z,{className:He.listItemSecondaryAction},"Direct Relations",l.createElement(Q.ZP,{placement:"top",arrow:!0,title:`${lt==="direct"?"Direct":"Aggregated"} Relations`},l.createElement(te.Z,{color:"primary",checked:lt!=="direct",onChange:()=>{$t(lt==="direct"?"aggregated":"direct")},name:"pin",inputProps:{"aria-label":"Ownership Type Switch"}})),"Aggregated Relations"))),l.createElement(ot,{entity:ve,entityLimit:on,relationsType:lt,entityFilterKind:at}))},Je=Ee=>{const{singularTitle:it,pluralTitle:at,icon:Pt,filter:Nt}=Ee,on=(0,m.u)(m.t),Ze=(0,m.u)(A.Ah),He=(0,r.tg)(A.wi),{value:ve}=(0,b.default)(async()=>{const Ie=await on.getBackstageIdentity();return(await Ze.getEntities({filter:[{kind:"group","relations.hasMember":Ie.userEntityRef,...Nt!=null?Nt:{}}],fields:["metadata","kind"]})).items},[]);if(!(ve!=null&&ve.length))return null;if(ve.length===1){const Ie=ve[0];return l.createElement(h.R6,{text:it,to:He((0,u.iB)(Ie)),icon:Pt})}return l.createElement(h.R6,{icon:Pt,text:at},l.createElement(h.k2,{title:at},ve==null?void 0:ve.map(function(lt){return l.createElement(h.BT,{title:lt.metadata.title||lt.metadata.name,subtitle:lt.metadata.namespace!==u.zG?lt.metadata.namespace:void 0,to:He((0,u.iB)(lt)),icon:Pt,key:(0,u.eE)(lt)})})))}},5083:(Rn,kt,e)=>{"use strict";e.d(kt,{J$:()=>Z,Y2:()=>b,g2:()=>We,rG:()=>o});var r=e(32272),m=e(96279),u=e.n(m),W=e(9571),A=e(30195),o=(h=>(h.DENY="DENY",h.ALLOW="ALLOW",h.CONDITIONAL="CONDITIONAL",h))(o||{});function U(h,C){return h.name===C.name}function We(h,C){return"resourceType"in h?!C||h.resourceType===C:!1}function we(h){return h.attributes.action==="create"}function a(h){return h.attributes.action==="read"}function te(h){return h.attributes.action==="update"}function q(h){return h.attributes.action==="delete"}function D(h){return{authorize:async(C,p)=>await h.authorize(C,p),authorizeConditional(C,p){const be=C;return h.authorize(be,p)}}}function Z({name:h,attributes:C,resourceType:p}){return p?{type:"resource",name:h,attributes:C,resourceType:p}:{type:"basic",name:h,attributes:C}}var Le=Object.defineProperty,ie=(h,C,p)=>C in h?Le(h,C,{enumerable:!0,configurable:!0,writable:!0,value:p}):h[C]=p,re=(h,C,p)=>(ie(h,typeof C!="symbol"?C+"":C,p),p);const Q=A.z.lazy(()=>A.z.object({rule:A.z.string(),resourceType:A.z.string(),params:A.z.record(A.z.any()).optional()}).or(A.z.object({anyOf:A.z.array(Q).nonempty()})).or(A.z.object({allOf:A.z.array(Q).nonempty()})).or(A.z.object({not:Q}))),H=A.z.object({result:A.z.literal(o.ALLOW).or(A.z.literal(o.DENY))}),S=A.z.union([A.z.object({result:A.z.literal(o.ALLOW).or(A.z.literal(o.DENY))}),A.z.object({result:A.z.literal(o.CONDITIONAL),pluginId:A.z.string(),resourceType:A.z.string(),conditions:Q})]),l=(h,C)=>A.z.object({items:A.z.array(A.z.intersection(A.z.object({id:A.z.string()}),h)).refine(p=>p.length===C.size&&p.every(({id:be})=>C.has(be)),{message:"Items in response do not match request"})});class b{constructor(C){re(this,"enabled"),re(this,"discovery");var p;this.discovery=C.discovery,this.enabled=(p=C.config.getOptionalBoolean("permission.enabled"))!=null?p:!1}async authorize(C,p){return this.makeRequest(C,H,p)}async authorizeConditional(C,p){return this.makeRequest(C,S,p)}async makeRequest(C,p,be){if(!this.enabled)return C.map(It=>({result:o.ALLOW}));const ge={items:C.map(It=>({id:W.Z(),...It}))},ye=await this.discovery.getBaseUrl("permission"),ne=await u()(`${ye}/authorize`,{method:"POST",body:JSON.stringify(ge),headers:{...this.getAuthorizationHeader(be==null?void 0:be.token),"content-type":"application/json"}});if(!ne.ok)throw await r.VL.fromResponse(ne);const oe=await ne.json(),xe=l(p,new Set(ge.items.map(({id:It})=>It))).parse(oe).items.reduce((It,P)=>(It[P.id]=P,It),{});return ge.items.map(It=>xe[It.id])}getAuthorizationHeader(C){return C?{Authorization:`Bearer ${C}`}:{}}}},56563:(Rn,kt,e)=>{"use strict";e.d(kt,{RV:()=>o,gI:()=>We,iM:()=>U,un:()=>a});var r=e(2784),m=e(57032),u=e(30705),W=e(5083),A=e(69984);const o=(0,m.c)({id:"plugin.permission.api"});class U{constructor(q,D){this.permissionClient=q,this.identityApi=D}static create(q){const{config:D,discovery:Z,identity:Le}=q,ie=new W.Y2({discovery:Z,config:D});return new U(ie,Le)}async authorize(q){return(await this.permissionClient.authorize([q],await this.identityApi.getCredentials()))[0]}}function We(te){const q=(0,m.u)(o),{data:D,error:Z}=(0,A.ZP)(te,async Le=>{if((0,W.g2)(Le.permission)&&!Le.resourceRef)return W.rG.DENY;const{result:ie}=await q.authorize(Le);return ie});return Z?{error:Z,loading:!1,allowed:!1}:D===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:D===W.rG.ALLOW}}const we=te=>{const{permission:q,resourceRef:D,errorComponent:Z,...Le}=te,ie=We(isResourcePermission(q)?{permission:q,resourceRef:D}:{permission:q}),re=useApp(),{NotFoundErrorPage:Q}=re.getComponents();let H=Z===void 0?React.createElement(Q,null):Z;return ie.loading?H=null:ie.allowed&&(H=te.element),React.createElement(Route,{...Le,element:H})};function a(te){const{permission:q,resourceRef:D}=te,Z=We((0,W.g2)(q)?{permission:q,resourceRef:D}:{permission:q}),Le=(0,u.qD)();if(Z.loading)return null;if(Z.allowed)return r.createElement(r.Fragment,null,te.children);if(te.errorPage)return r.createElement(r.Fragment,null,te.errorPage);const{NotFoundErrorPage:ie}=Le.getComponents();return r.createElement(ie,null)}},67898:(Rn,kt,e)=>{"use strict";e.d(kt,{t:()=>a});var r=e(34520),m="http://json-schema.org/draft-07/schema",u="TemplateV1beta3",W="A Template describes a scaffolding task for use with the Scaffolder. It describes the required parameters as well as a series of steps that will be taken to execute the scaffolding task.",A=[{apiVersion:"scaffolder.backstage.io/v1beta3",kind:"Template",metadata:{name:"react-ssr-template",title:"React SSR Template",description:"Next.js application skeleton for creating isomorphic web applications.",tags:["recommended","react"]},spec:{owner:"artist-relations-team",type:"website",parameters:{required:["name","description","repoUrl"],"backstage:permissions":{tags:["one","two"]},properties:{name:{title:"Name",type:"string",description:"Unique name of the component"},description:{title:"Description",type:"string",description:"Description of the component"},repoUrl:{title:"Pick a repository",type:"string","ui:field":"RepoUrlPicker"}}},steps:[{id:"fetch",name:"Fetch",action:"fetch:plain",parameters:{url:"./template"},"backstage:permissions":{tags:["one","two"]}},{id:"publish",name:"Publish to GitHub",action:"publish:github",parameters:{repoUrl:"${{ parameters.repoUrl }}"},if:"${{ parameters.repoUrl }}"}],output:{catalogInfoUrl:"${{ steps.publish.output.catalogInfoUrl }}"}}}],o=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["scaffolder.backstage.io/v1beta3"]},kind:{enum:["Template"]},spec:{type:"object",required:["type","steps"],properties:{type:{type:"string",description:"The type of component created by the template. The software catalog accepts any type value, but an organization should take great care to establish a proper taxonomy for these. Tools including Backstage itself may read this field and behave differently depending on its value. For example, a website type component may present tooling in the Backstage interface that is specific to just websites.",examples:["service","website","library"],minLength:1},owner:{type:"string",description:"The user (or group) owner of the template",minLength:1},parameters:{oneOf:[{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}},{type:"array",description:"A list of separate forms to collect parameters.",items:{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}}}]},steps:{type:"array",description:"A list of steps to execute.",items:{type:"object",description:"A description of the step to execute.",required:["action"],properties:{id:{type:"string",description:"The ID of the step, which can be used to refer to its outputs."},name:{type:"string",description:"The name of the step, which will be displayed in the UI during the scaffolding process."},action:{type:"string",description:"The name of the action to execute."},input:{type:"object",description:"A templated object describing the inputs to the action."},if:{type:["string","boolean"],description:'A templated condition that skips the step when evaluated to false. If the condition is true or not defined, the step is executed. The condition is true, if the input is not `false`, `undefined`, `null`, `""`, `0`, or `[]`.'},"backstage:permissions":{type:"object",description:"Object used for authorizing the step",properties:{tags:{type:"array",items:{type:"string"}}}}}}},output:{type:"object",description:"A templated object describing the outputs of the scaffolding task.",properties:{links:{type:"array",description:"A list of external hyperlinks, typically pointing to resources created or updated by the template",items:{type:"object",required:[],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://github.com/my-org/my-new-repo"],minLength:1},entityRef:{type:"string",description:"An entity reference to an entity in the catalog.",examples:["Component:default/my-app"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["View new repo"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1}}}},text:{type:"array",description:"A list of Markdown text blobs, like output data from the template.",items:{type:"object",required:[],properties:{title:{type:"string",description:"A user friendly display name for the text.",examples:["Output Content"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},content:{type:"string",description:"The text blob to display in the UI, rendered as Markdown.",examples:["**hey** _I'm_ Markdown"]}}}}},additionalProperties:{type:"string"}}}}}}],U={$schema:m,$id:u,description:W,examples:A,allOf:o};const We=(0,r.wI)(U),we={async check(te){return We(te)===te}},a=te=>te.apiVersion==="scaffolder.backstage.io/v1beta3"&&te.kind==="Template"},31011:(Rn,kt,e)=>{"use strict";e.d(kt,{Iy:()=>wn,Lp:()=>la,Q0:()=>j,_G:()=>Ra,br:()=>at,h4:()=>At,l0:()=>Qt,mg:()=>Bt,ow:()=>Fe,v9:()=>fa,vF:()=>Y,zP:()=>Qe});var r=e(57032),m=e(30705),u=e(79692),W=e(42494),A=e(90436),o=e(67358),U=e(31625),We=e(31377),we=e(34546),a=e(77277),te=e(60364),q=e(94339),D=e(24579),Z=e(60905),Le=e(95544),ie=e(85256),re=e(7089),Q=e(14503),H=e(27556),S=e(4614),l=e(97136),b=e(5806),h=e(21324),C=e(86619),p=e(2784),be=e(51251),ge=e(49558),ye=e(11280),ne=e(37794),oe=e.n(ne),X=e(64279),xe=e(60885),It=e(9850),P=e.n(It),Jt=e(95303),me=e(93804),Lt=e(90137),Ct=e(34520),je=e(73495),nt=e(78373),Te=e(52160),gt=e(67898),de=e(27057),G=e(71140),Pe=e(34063),ce=e(72779),le=e.n(ce),Be=e(34812),st=e(91750),Kt=e(70218),ct=e(26228),Zt=e(75951),O=e.n(Zt),B=e(89586),w=e(82108),L=e.n(w),se=e(19996),Me=e(25505),rt=e(38016),xt=e(88013),ut=e(61837),et=e(86136),Wt=e(49378),fe=e(12231),Ae=e(50758),Xe=e(79784),St=e(30254),pt=e(27604),Tt=e(33882),Dt=e(43054);function $e(K){return typeof K=="object"&&K!==null&&!Array.isArray(K)}function ot(K,$){if(!$e(K))return;const{properties:T,items:F,anyOf:V,oneOf:Ce,allOf:Re,dependencies:pe,then:Ne,else:tt}=K;for(const _t in K)K.hasOwnProperty(_t)&&_t.startsWith("ui:")&&($[_t]=K[_t],delete K[_t]);if($e(T))for(const _t in T){if(!T.hasOwnProperty(_t))continue;const Ht=T[_t];if(!$e(Ht))continue;const en={};$[_t]=en,ot(Ht,en)}if($e(F)){const _t={};$.items=_t,ot(F,_t)}if(Array.isArray(V))for(const _t of V)$e(_t)&&ot(_t,$);if(Array.isArray(Ce))for(const _t of Ce)$e(_t)&&ot(_t,$);if(Array.isArray(Re))for(const _t of Re)$e(_t)&&ot(_t,$);if($e(pe))for(const _t of Object.keys(pe)){const Ht=pe[_t];$e(Ht)&&ot(Ht,$)}$e(Ne)&&ot(Ne,$),$e(tt)&&ot(tt,$)}const Bt=K=>{const $={},T=JSON.parse(JSON.stringify(K));return ot(T,$),{uiSchema:$,schema:T}},_e=()=>{const K={__errors:[],addError:$=>{var T;(T=K.__errors)==null||T.push($)}};return K};function Je(K){return!!K&&"__errors"in K}function Ee(K){var $;if(!K)return!1;for(const T of Object.values(K)){if(Je(T)){if((($=T.__errors)!=null?$:[]).length>0)return!0;continue}if(Ee(T))return!0}return!1}function it(K){return typeof K=="object"&&K!==null&&!Array.isArray(K)}const at=(K,$,T)=>{async function F(V,Ce="#",Re=V){var pe,Ne;const tt=new be.NL(K),_t={},Ht=async(en,Xt,mn,_n,hn)=>{const En=$[en];if(En){const bn=_e();try{await En(mn,bn,{...T,formData:V,schema:_n,uiSchema:hn})}catch(Ln){bn.addError(Ln.message)}_t[Xt]=bn}};for(const[en,Xt]of Object.entries(Re)){const mn=`${Ce}/${en}`,_n=tt.getSchema(mn,V),{schema:hn,uiSchema:En}=Bt(_n),bn=_n&&_n.items,Ln=async(Vn,xn,Bn)=>{await Ht(Vn["ui:field"],en,Xt,xn,Bn)},qn=async Vn=>{if("ui:field"in Vn){const{schema:xn,uiSchema:Bn}=Bt(_n.items);await Ln(Vn,xn,Bn)}};if(_n&&"ui:field"in _n)await Ln(_n,hn,En);else if(bn&&"ui:field"in _n.items)await qn(_n.items);else if(bn&&_n.items.type==="object"){const Vn=(Ne=(pe=_n.items)==null?void 0:pe.properties)!=null?Ne:[];for(const[,xn]of Object.entries(Vn))await qn(xn)}else it(Xt)&&(_t[en]=await F(V,mn,Xt))}return _t}return async V=>await F(V)},Pt=K=>{const $=Object.fromEntries(Object.entries(K.formState).map(([T,F])=>{var V;for(const Ce of K.schemas){const pe=new be.NL(Ce.mergedSchema).getSchema(`#/${T}`,K.formState);if(pe){const Ne=(V=pe["ui:backstage"])==null?void 0:V.review;if(Ne){if(Ne.mask)return[T,Ne.mask];if(Ne.show===!1)return[]}if(pe["ui:widget"]==="password")return[T,"******"];if(pe.enum&&pe.enumNames)return[T,pe.enumNames[pe.enum.indexOf(F)]||F]}}return[T,F]}).filter(T=>T.length>0));return p.createElement(ge.xT,{metadata:$})},Nt=K=>{const $=(0,r.u)(r.f),F=K.steps.map(({title:V,description:Ce,schema:Re})=>({title:V,description:Ce,mergedSchema:Re,...Bt(Re)})).filter(V=>{var Ce;const Re=(Ce=V.uiSchema["ui:backstage"])==null?void 0:Ce.featureFlag;return Re?$.isActive(Re):!0}).map(V=>{var Ce,Re,pe;const Ne={...V,schema:{...V.schema,title:void 0}};return(Ce=V.schema)!=null&&Ce.properties&&(Ne.schema.properties=Object.fromEntries(Object.entries((pe=(Re=V.schema)==null?void 0:Re.properties)!=null?pe:[]).filter(([tt])=>{var _t,Ht;const en=(Ht=(_t=V.uiSchema[tt])==null?void 0:_t["ui:backstage"])==null?void 0:Ht.featureFlag;return en?$.isActive(en):!0}))),Ne});return{presentation:K.presentation,steps:F}},on=K=>(0,p.useState)(()=>{if(K)return K;const $=oe().parse(window.location.search,{ignoreQueryPrefix:!0});try{return JSON.parse($.formData)}catch{return{}}}),Ze=K=>{const $=(0,r.u)(xe.s),{value:T,loading:F,error:V}=(0,X.default)(()=>$.getTemplateParameterSchema(K),[$,K]);return{manifest:T,loading:F,error:V}},He=K=>{const $="backstage:featureFlag",T=(0,r.u)(r.f);if(!K)return;const F=K==null?void 0:K.steps.filter(V=>{const Ce=V.schema[$];return typeof Ce!="string"||T.isActive(Ce)}).map(V=>{var Ce;const Re=P()(V),pe=[];return Re.schema.properties&&(Re.schema.properties=Object.fromEntries(Object.entries(Re.schema.properties).filter(([Ne,tt])=>tt[$]?T.isActive(tt[$])?!0:(pe.push(Ne),!1):!0)),Re.schema.required=Array.isArray(Re.schema.required)?(Ce=Re.schema.required)==null?void 0:Ce.filter(Ne=>!pe.includes(Ne)):Re.schema.required),Re});return{...K,steps:F}},ve=(K,$={})=>{var T;const{layouts:F=[]}=$,V=K==null?void 0:K.uiSchema["ui:ObjectFieldTemplate"];if(typeof V!="string")return K;const Ce=(T=F.find(Re=>Re.name===V))==null?void 0:T.component;return Ce?{...K,uiSchema:{...K.uiSchema,["ui:ObjectFieldTemplate"]:Ce}}:K};var lt=Object.freeze({__proto__:null,DescriptionField:({description:K})=>K&&p.createElement(ge.SA,{content:K,linkTarget:"_blank"})});const $t=(0,u.Z)(K=>({markdownDescription:{fontSize:K.typography.caption.fontSize,margin:0,color:K.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),j=K=>{const{children:$,displayLabel:T=!0,rawErrors:F=[],errors:V,help:Ce,rawDescription:Re,required:pe,disabled:Ne}=K,tt=$t();return p.createElement(W.Z,{fullWidth:!0,error:!!F.length,required:pe,disabled:Ne},$,T&&Re?p.createElement(ge.SA,{content:Re,className:tt.markdownDescription}):null,V,Ce)},he=K=>{const{id:$,children:T,classNames:F,style:V,disabled:Ce,displayLabel:Re,hidden:pe,label:Ne,onDropPropertyClick:tt,onKeyChange:_t,readonly:Ht,required:en,rawErrors:Xt=[],errors:mn,help:_n,rawDescription:hn,schema:En,uiSchema:bn,registry:Ln}=K,qn=(0,me.LI)(bn),Vn=(0,me.t4)("WrapIfAdditionalTemplate",Ln,qn);return pe?p.createElement("div",{style:{display:"none"}},T):p.createElement(Vn,{classNames:F,style:V,disabled:Ce,id:$,label:Ne,onDropPropertyClick:tt,onKeyChange:_t,readonly:Ht,required:en,schema:En,uiSchema:bn,registry:Ln},p.createElement(j,{displayLabel:Re,rawErrors:Xt,help:_n,disabled:Ce,rawDescription:hn,errors:mn,required:en},T))},ze=(0,u.Z)(K=>({markdownDescription:{fontSize:K.typography.caption.fontSize,margin:0,color:K.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),ht=K=>{const{id:$,description:T}=K,F=ze();return T?typeof T=="string"?p.createElement(ge.SA,{content:T,className:F.markdownDescription}):p.createElement(A.Z,{id:$,variant:"subtitle2",style:{marginTop:"5px"}},T):null},sn=(0,Jt.Zz)(Lt.Q2),Qt=K=>{const $=p.useMemo(()=>{var F;return Object.fromEntries(Object.entries((F=K.fields)!=null?F:{}).map(([V,Ce])=>[V,Re=>{var pe,Ne;return p.createElement(Ce,{...Re,uiSchema:(pe=Re.uiSchema)!=null?pe:{},formData:Re.formData,rawErrors:(Ne=Re.rawErrors)!=null?Ne:[]})}]))},[K.fields]),T=p.useMemo(()=>({FieldTemplate:he,DescriptionFieldTemplate:ht,...K.templates}),[K.templates]);return p.createElement(sn,{...K,templates:T,fields:$})},x=(0,u.Z)(K=>({backButton:{marginRight:K.spacing(1)},footer:{display:"flex",flexDirection:"row",justifyContent:"right",marginTop:K.spacing(2)},formWrapper:{padding:K.spacing(2)}})),Y=K=>{var $,T,F,V,Ce,Re,pe;const{layouts:Ne=[],components:tt={},..._t}=K,{ReviewStateComponent:Ht=Pt,ReviewStepComponent:en,backButtonText:Xt="Back",createButtonText:mn="Create",reviewButtonText:_n="Review"}=tt,hn=(0,m.z$)(),{presentation:En,steps:bn}=Nt(_t.manifest),Ln=(0,r.b)(),[qn,Vn]=(0,p.useState)(0),[xn,Bn]=(0,p.useState)(!1),[$n,yn]=on(_t.initialState),[Dn,pa]=(0,p.useState)(),ga=x(),Ma=(0,p.useMemo)(()=>Object.fromEntries(_t.extensions.map(({name:Hn,component:Ea})=>[Hn,Ea])),[_t.extensions]),Fa=(0,p.useMemo)(()=>({...lt,...Ma}),[Ma]),Ga=(0,p.useMemo)(()=>Object.fromEntries(_t.extensions.map(({name:Hn,validation:Ea})=>[Hn,Ea])),[_t.extensions]),er=(0,p.useMemo)(()=>{var Hn;return at((Hn=bn[qn])==null?void 0:Hn.mergedSchema,Ga,{apiHolder:Ln})},[bn,qn,Ga,Ln]),Ba=()=>{Vn(Hn=>Hn-1)},Va=(0,p.useCallback)(Hn=>yn(Ea=>({...Ea,...Hn.formData})),[yn]),Ha=(0,p.useCallback)(()=>{var Hn;_t.onCreate($n);const Ea=typeof $n.name=="string"?$n.name:void 0;hn.captureEvent("create",(Hn=Ea!=null?Ea:_t.templateName)!=null?Hn:"unknown")},[_t,$n,hn]),Ka=ve(bn[qn],{layouts:Ne}),Ja=async({formData:Hn={}})=>{pa(void 0),Bn(!0);const Ea=await er(Hn);Bn(!1),Ee(Ea)?pa(Ea):(pa(void 0),Vn(Ua=>{const tr=Ua+1;return hn.captureEvent("click",`Next Step (${tr})`),tr})),yn(Ua=>({...Ua,...Hn}))},sr=(T=($=En==null?void 0:En.buttonLabels)==null?void 0:$.backButtonText)!=null?T:Xt,dr=(V=(F=En==null?void 0:En.buttonLabels)==null?void 0:F.createButtonText)!=null?V:mn,Za=(Re=(Ce=En==null?void 0:En.buttonLabels)==null?void 0:Ce.reviewButtonText)!=null?Re:_n;return p.createElement(p.Fragment,null,xn&&p.createElement(o.Z,{variant:"indeterminate"}),p.createElement(U.Z,{activeStep:qn,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},bn.map((Hn,Ea)=>{const Ua=qn>Ea;return p.createElement(We.Z,{key:Ea},p.createElement(we.Z,{"aria-label":`Step ${Ea+1}`,style:{cursor:Ua?"pointer":"default"},onClick:()=>{Ua&&Vn(Ea)}},Hn.title))}),p.createElement(We.Z,null,p.createElement(we.Z,null,"Review"))),p.createElement("div",{className:ga.formWrapper},qn<bn.length?p.createElement(Qt,{validator:ye.ZP,extraErrors:Dn,formData:$n,formContext:{formData:$n},schema:Ka.schema,uiSchema:Ka.uiSchema,onSubmit:Ja,fields:Fa,showErrorList:!1,onChange:Va,experimental_defaultFormStateBehavior:{allOf:"populateDefaults"},...(pe=_t.formProps)!=null?pe:{}},p.createElement("div",{className:ga.footer},p.createElement(a.Z,{onClick:Ba,className:ga.backButton,disabled:qn<1||xn},sr),p.createElement(a.Z,{variant:"contained",color:"primary",type:"submit",disabled:xn},qn===bn.length-1?Za:"Next"))):en?p.createElement(en,{disableButtons:xn,formData:$n,handleBack:Ba,handleReset:()=>{},steps:bn,handleCreate:Ha}):p.createElement(p.Fragment,null,p.createElement(Ht,{formState:$n,schemas:bn}),p.createElement("div",{className:ga.footer},p.createElement(a.Z,{onClick:Ba,className:ga.backButton,disabled:qn<1},"Back"),p.createElement(a.Z,{variant:"contained",color:"primary",onClick:Ha},dr)))))},Ye=(0,u.Z)(()=>({header:{backgroundImage:({cardBackgroundImage:K})=>K,color:({cardFontColor:K})=>K},subtitleWrapper:{display:"flex",justifyContent:"space-between"}})),Et=K=>{const{template:{metadata:{title:$,name:T},spec:{type:F}}}=K,{getPageTheme:V}=(0,te.Z)(),Ce=V({themeId:F}),Re=Ye({cardFontColor:Ce.fontColor,cardBackgroundImage:Ce.backgroundImage}),pe=p.createElement("div",{className:Re.subtitleWrapper},p.createElement("div",null,F),p.createElement("div",null,p.createElement(je.LH,{entity:K.template,style:{padding:0}})));return p.createElement(ge.hu,{title:$!=null?$:T,subtitle:pe,classes:{root:Re.header}})},zt=(0,u.Z)(()=>({linkText:{display:"inline-flex",alignItems:"center"}})),Ft=({icon:K,text:$,url:T})=>{const F=zt();return p.createElement("div",{className:F.linkText},p.createElement(K,{fontSize:"small"}),p.createElement(ge.rU,{style:{marginLeft:"8px"},to:T},$||T))},gn=(0,u.Z)(K=>({box:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":10,"-webkit-box-orient":"vertical"},markdown:{"& :first-child":{margin:0}},label:{color:K.palette.text.secondary,textTransform:"uppercase",fontWeight:"bold",letterSpacing:.5,lineHeight:1,fontSize:"0.75rem"},footer:{display:"flex",justifyContent:"space-between",flex:1,alignItems:"center"},ownedBy:{display:"flex",alignItems:"center",flex:1,color:K.palette.link}})),cn=K=>{var $,T,F,V,Ce,Re,pe;const{template:Ne}=K,tt=gn(),_t=(0,nt.g)(Ne,Ct.S4),Ht=(0,m.qD)(),en=Xt=>{var mn;return Xt&&(mn=Ht.getSystemIcon(Xt))!=null?mn:Te.Z};return p.createElement(q.Z,null,p.createElement(Et,{template:Ne}),p.createElement(D.Z,null,p.createElement(Z.Z,{container:!0,spacing:2},p.createElement(Z.Z,{item:!0,xs:12},p.createElement(Le.Z,{className:tt.box},p.createElement(ge.SA,{className:tt.markdown,content:($=Ne.metadata.description)!=null?$:"No description"}))),((F=(T=Ne.metadata.tags)==null?void 0:T.length)!=null?F:0)>0&&p.createElement(p.Fragment,null,p.createElement(Z.Z,{item:!0,xs:12},p.createElement(ie.Z,null)),p.createElement(Z.Z,{item:!0,xs:12},p.createElement(Z.Z,{container:!0,spacing:2},(V=Ne.metadata.tags)==null?void 0:V.map(Xt=>p.createElement(Z.Z,{item:!0},p.createElement(re.Z,{style:{margin:0},size:"small",label:Xt,key:Xt})))))),(K.additionalLinks||((Ce=Ne.metadata.links)==null?void 0:Ce.length))&&p.createElement(p.Fragment,null,p.createElement(Z.Z,{item:!0,xs:12},p.createElement(ie.Z,null)),p.createElement(Z.Z,{item:!0,xs:12},p.createElement(Z.Z,{container:!0,spacing:2},(Re=K.additionalLinks)==null?void 0:Re.map(({icon:Xt,text:mn,url:_n},hn)=>p.createElement(Z.Z,{className:tt.linkText,item:!0,xs:6,key:hn},p.createElement(Ft,{icon:Xt,text:mn,url:_n}))),(pe=Ne.metadata.links)==null?void 0:pe.map(({url:Xt,icon:mn,title:_n},hn)=>p.createElement(Z.Z,{className:tt.linkText,item:!0,xs:6,key:hn},p.createElement(Ft,{icon:en(mn),text:_n||Xt,url:Xt})))))))),p.createElement(Q.Z,{style:{padding:"16px",flex:1,alignItems:"flex-end"}},p.createElement("div",{className:tt.footer},p.createElement("div",{className:tt.ownedBy},_t.length>0&&p.createElement(p.Fragment,null,p.createElement(ge.tB,{fontSize:"small"}),p.createElement(je.rI,{style:{marginLeft:"8px"},entityRefs:_t,defaultKind:"Group",hideIcons:!0}))),p.createElement(a.Z,{size:"small",variant:"outlined",color:"primary",onClick:()=>{var Xt;return(Xt=K.onSelected)==null?void 0:Xt.call(K,Ne)}},"Choose"))))},An=K=>{const{templates:$,title:T,components:{CardComponent:F}={},onSelected:V}=K,Ce=typeof T=="string"?p.createElement(ge.yW,{title:T}):T;if($.length===0)return null;const Re=F||cn;return p.createElement(ge.VY,null,Ce,p.createElement(ge.Oh,null,$.map(({template:pe,additionalLinks:Ne})=>p.createElement(Re,{key:(0,Ct.eE)(pe),additionalLinks:Ne,template:pe,onSelected:V}))))},Fe=K=>{const{loading:$,error:T,entities:F}=(0,je.wp)(),{groups:V,templateFilter:Ce,TemplateCardComponent:Re,onTemplateSelected:pe}=K,Ne=(0,r.u)(r.r),tt=(0,p.useCallback)(_t=>{pe==null||pe(_t)},[pe]);return $?p.createElement(ge.Ex,null):T?(Ne.post(T),null):!F||!F.length?p.createElement(A.Z,{variant:"body2"},"No templates found that match your filter. Learn more about"," ",p.createElement(ge.rU,{to:"https://backstage.io/docs/features/software-templates/adding-templates"},"adding templates"),"."):p.createElement(p.Fragment,null,V.map(({title:_t,filter:Ht},en)=>{const Xt=F.filter(gt.t).filter(mn=>Ce?Ce(mn):!0).filter(Ht).map(mn=>{var _n,hn;const En=(hn=(_n=K.additionalLinksForEntity)==null?void 0:_n.call(K,mn))!=null?hn:[];return{template:mn,additionalLinks:En}});return p.createElement(An,{key:en,templates:Xt,title:_t,components:{CardComponent:Re},onSelected:tt})}))},qe=(0,u.Z)({markdown:{"& :first-child":{marginTop:0},"& :last-child":{marginBottom:0}}}),At=K=>{var $;const{title:T,description:F,namespace:V,templateName:Ce,...Re}=K,pe=qe(),Ne=(0,Ct.eE)({kind:"Template",namespace:V,name:Ce}),tt=(0,r.u)(r.r),{loading:_t,manifest:Ht,error:en}=Ze(Ne),Xt=He(Ht);return(0,p.useEffect)(()=>{en&&tt.post(new Error(`Failed to load template, ${en}`))},[en,tt]),en?Re.onError(en):p.createElement(ge.VY,null,_t&&p.createElement(ge.Ex,null),Xt&&p.createElement(ge.rJ,{title:T!=null?T:Xt.title,subheader:p.createElement(ge.SA,{className:pe.markdown,content:($=F!=null?F:Xt.description)!=null?$:"No description"}),noPadding:!0,titleTypographyProps:{component:"h2"}},p.createElement(Y,{manifest:Xt,templateName:Ce,...Re})))},tn=K=>React.createElement(SecretsContextProvider,null,React.createElement(At,{...K})),ln=(0,u.Z)({root:{"&:hover":{textDecoration:"none"}}}),dn=K=>{const{links:$=[]}=K.output,T=ln(),F=(0,m.qD)(),V=(0,m.tg)(je.wi),Ce=Re=>{var pe;return(pe=F.getSystemIcon(Re))!=null?pe:de.Z};return p.createElement(p.Fragment,null,$.filter(({url:Re,entityRef:pe})=>Re||pe).map(({url:Re,entityRef:pe,title:Ne,icon:tt})=>{if(pe){const _t=(0,Ct.of)(pe),Ht=V(_t);return{title:Ne,icon:tt,url:Ht}}return{title:Ne,icon:tt,url:Re}}).map(({url:Re,title:pe,icon:Ne},tt)=>{const _t=Ce(Ne);return p.createElement(ge.rU,{to:Re,key:tt,classes:{root:T.root}},p.createElement(a.Z,{startIcon:p.createElement(_t,null),component:"div",color:"primary"},pe))}))},un=K=>{const{output:{text:$=[]},index:T,setIndex:F}=K,V=(0,m.qD)(),Ce=Re=>{var pe;return(pe=V.getSystemIcon(Re))!=null?pe:de.Z};return p.createElement(p.Fragment,null,$.filter(({content:Re})=>Re!==void 0).map(({title:Re,icon:pe},Ne)=>{const tt=Ce(pe);return p.createElement(a.Z,{key:Ne,startIcon:p.createElement(tt,null),component:"div",color:"primary",onClick:()=>F==null?void 0:F(T!==Ne?Ne:void 0),variant:T===Ne?"outlined":void 0},Re)}))},wn=K=>{var $,T;const[F,V]=(0,p.useState)(),Ce=(0,p.useMemo)(()=>{var Re,pe;return F!==void 0?(pe=(Re=K.output)==null?void 0:Re.text)==null?void 0:pe[F]:null},[K.output,F]);return K.output?p.createElement(p.Fragment,null,p.createElement(Le.Z,{paddingBottom:2},p.createElement(H.Z,null,p.createElement(Le.Z,{padding:2,justifyContent:"center",display:"flex",gridGap:16},p.createElement(un,{output:K.output,index:F,setIndex:V}),p.createElement(dn,{output:K.output})))),Ce?p.createElement(Le.Z,{paddingBottom:2},p.createElement(ge.rJ,{title:($=Ce.title)!=null?$:"Text Output",noPadding:!0,titleTypographyProps:{component:"h2"}},p.createElement(Le.Z,{padding:2,height:"100%"},p.createElement(ge.SA,{content:(T=Ce.content)!=null?T:""})))):null):null},Wn=(0,u.Z)(K=>({root:{color:K.palette.text.disabled},completed:{color:K.palette.status.ok},error:{color:K.palette.status.error}})),Gn=K=>{const $=Wn(),{active:T,completed:F,error:V,skipped:Ce}=K,Re=()=>T?p.createElement(S.Z,{size:"20px"}):F?p.createElement(Be.Z,null):V?p.createElement(st.Z,null):Ce?p.createElement(G.Z,null):p.createElement(Pe.Z,null);return p.createElement("div",{className:le()($.root,{[$.completed]:F,[$.error]:V})},Re())},sa=K=>{const[$,T]=(0,p.useState)(""),{step:F}=K,V=()=>F.startedAt&&F.endedAt&&$?null:F.startedAt&&F.endedAt?1:1e3,Ce=(0,p.useCallback)(()=>{if(!F.startedAt){T("");return}const Re=F.endedAt?ct.ou.fromISO(F.endedAt):ct.ou.local(),pe=ct.ou.fromISO(F.startedAt),Ne=ct.Xp.fromDateTimes(pe,Re).toDuration().valueOf();T(O()(Ne,{round:!0}))},[F.endedAt,F.startedAt]);return(0,B.n)(Ce),(0,Kt.Z)(Ce,V()),p.createElement(A.Z,{variant:"caption"},$)},Cn=(0,u.Z)(K=>({failed:{backgroundColor:K.palette.error.main},success:{backgroundColor:K.palette.success.main}})),ea=K=>{const $=Cn();return K.isComplete?p.createElement(o.Z,{variant:"determinate",classes:{bar:K.isError?$.failed:$.success},value:100}):p.createElement(o.Z,{variant:"indeterminate"})},la=K=>{var $,T;return p.createElement(H.Z,{style:{position:"relative",overflow:"hidden"}},p.createElement(ea,{isComplete:($=K.isComplete)!=null?$:!1,isError:(T=K.isError)!=null?T:!1}),p.createElement(Le.Z,{padding:2},p.createElement(U.Z,{activeStep:K.activeStep,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},K.steps.map(F=>{const V=F.status==="completed",Ce=F.status==="failed",Re=F.status==="processing",pe=F.status==="skipped",Ne={completed:V,error:Ce,active:Re,skipped:pe};return p.createElement(We.Z,{key:F.id},p.createElement(l.Z,null,p.createElement(we.Z,{StepIconProps:Ne,StepIconComponent:Gn,"data-testid":"step-label"},p.createElement(Le.Z,null,F.name),!pe&&p.createElement(sa,{step:F}))))}))))},ra=(0,u.Z)({root:{width:"100%",height:"100%",position:"relative"}}),fa=K=>{const $=ra();return p.createElement("div",{className:$.root},p.createElement(ge.nU,{text:Object.values(K.logs).map(T=>T.join(`
`)).filter(Boolean).join(`
`)}))},Pa=p.createElement(Me.Z,{fontSize:"small"}),ia=p.createElement(se.Z,{fontSize:"small"}),Ra=()=>{const K=(0,r.u)(r.l),{error:$,loading:T,availableTypes:F,selectedTypes:V,setSelectedTypes:Ce}=(0,je.Uh)();return T?p.createElement(ge.Ex,null):$?(K.post({message:`Failed to load entity types with error: ${$}`,severity:"error"}),null):F?p.createElement(Le.Z,{pb:1,pt:1},p.createElement(A.Z,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),p.createElement(xt.ZP,{multiple:!0,id:"categories-picker",options:F,value:V,onChange:(Re,pe)=>Ce(pe),renderOption:(Re,{selected:pe})=>p.createElement(b.Z,{control:p.createElement(h.Z,{icon:Pa,checkedIcon:ia,checked:pe}),label:L()(Re)}),size:"small",popupIcon:p.createElement(rt.Z,null),renderInput:Re=>p.createElement(C.Z,{...Re,variant:"outlined"})})):null},ue=(0,u.Z)(K=>({button:{color:K.page.fontColor}}));function Qe(K){const{onEditorClicked:$,onActionsClicked:T,onTasksClicked:F}=K,V=ue(),[Ce,Re]=(0,p.useState)();if(!$&&!T)return null;const pe=tt=>{Re(tt.currentTarget)},Ne=()=>{Re(void 0)};return p.createElement(p.Fragment,null,p.createElement(ut.Z,{id:"long-menu","aria-label":"more","aria-controls":"long-menu","aria-expanded":!!Ce,"aria-haspopup":"true",role:"button",onClick:pe,"data-testid":"menu-button",color:"inherit",className:V.button},p.createElement(Dt.Z,null)),p.createElement(Xe.ZP,{"aria-labelledby":"long-menu",open:Boolean(Ce),onClose:Ne,anchorEl:Ce,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},p.createElement(Ae.Z,null,$&&p.createElement(fe.Z,{onClick:$},p.createElement(et.Z,null,p.createElement(pt.Z,{fontSize:"small"})),p.createElement(Wt.Z,{primary:"Template Editor"})),T&&p.createElement(fe.Z,{onClick:T},p.createElement(et.Z,null,p.createElement(St.Z,{fontSize:"small"})),p.createElement(Wt.Z,{primary:"Installed Actions"})),F&&p.createElement(fe.Z,{onClick:F},p.createElement(et.Z,null,p.createElement(Tt.Z,{fontSize:"small"})),p.createElement(Wt.Z,{primary:"Task List"})))))}function yt(K){return{expose(){const $=()=>null;return attachComponentData($,FIELD_EXTENSION_KEY,K),$}}}},60885:(Rn,kt,e)=>{"use strict";e.d(kt,{F:()=>W,S:()=>U,a:()=>A,s:()=>we,u:()=>We});var r=e(18473),m=e(2784),u=e(57032);const W="scaffolder.extensions.wrapper.v1",A="scaffolder.extensions.field.v1",o=(0,r.CT)("secrets-context"),U=a=>{const[te,q]=(0,m.useState)({});return m.createElement(o.Provider,{value:(0,r.EI)({1:{secrets:te,setSecrets:q}})},a.children)},We=()=>{var a;const te=(a=(0,m.useContext)(o))==null?void 0:a.atVersion(1);if(!te)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:q,secrets:D={}}=te;return{setSecrets:(0,m.useCallback)(Le=>{q(ie=>({...ie,...Le}))},[q]),secrets:D}},we=(0,r.uW)("scaffolder:scaffolder-api-ref",()=>(0,u.c)({id:"plugin.scaffolder.service"}))},12053:(Rn,kt,e)=>{"use strict";e.d(kt,{PT:()=>We,WQ:()=>D,eP:()=>o,mx:()=>U,zS:()=>te});var r=e(30705),m=e(57032),u=e(60885),W=e(92233),A=e(2784);function o(ie){return{expose(){const re=()=>null;return(0,r.R5)(re,u.a,ie),re}}}const U=()=>null;(0,r.R5)(U,u.F,!0);const We=ie=>(0,r.vJ)(ie,re=>re.selectByComponentData({key:u.F}).findComponentData({key:u.a})),we="scaffolder.layout.v1",a="scaffolder.layouts.wrapper.v1",te=ie=>(0,r.vJ)(ie,re=>re.selectByComponentData({key:a}).findComponentData({key:we}));function q(ie,re){var Q,H,S;switch(re.type){case"INIT":{ie.steps=re.data.spec.steps.reduce((l,b)=>(l[b.id]={status:"open",id:b.id},l),{}),ie.stepLogs=re.data.spec.steps.reduce((l,b)=>(l[b.id]=[],l),{}),ie.loading=!1,ie.error=void 0,ie.completed=!1,ie.task=re.data;return}case"LOGS":{const l=re.data;for(const b of l){const h=`${b.createdAt} ${b.body.message}`;if(!b.body.stepId||!((Q=ie.steps)!=null&&Q[b.body.stepId]))continue;const C=(H=ie.stepLogs)==null?void 0:H[b.body.stepId],p=(S=ie.steps)==null?void 0:S[b.body.stepId];b.body.status&&b.body.status!==p.status&&(p.status=b.body.status,p.status==="processing"&&(p.startedAt=b.createdAt),["cancelled","completed","failed"].includes(p.status)&&(p.endedAt=b.createdAt)),C==null||C.push(h)}return}case"COMPLETED":{ie.completed=!0,ie.output=re.data.body.output,ie.error=re.data.body.error;return}case"CANCELLED":{ie.cancelled=!0;return}case"ERROR":{ie.error=re.data,ie.loading=!1,ie.completed=!0;return}default:return}}const D=ie=>{const re=(0,m.u)(u.s),[Q,H]=(0,W.C)(q,{cancelled:!1,loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,A.useEffect)(()=>{let S=!1,l,b,h=1;const C=()=>re.getTask(ie).then(p=>{if(S)return;H({type:"INIT",data:p});const be=re.streamLogs({taskId:ie}),ge=new Array;function ye(){if(ge.length){const ne=ge.splice(0,ge.length);H({type:"LOGS",data:ne})}}b=setInterval(ye,500),l=be.subscribe({next:ne=>{switch(ne.type){case"log":return ge.push(ne);case"cancelled":H({type:"CANCELLED"});return;case"completion":ye(),H({type:"COMPLETED",data:ne});return;default:throw new Error(`Unhandled event type ${ne.type} in observer`)}},error:ne=>{ye(),ne.message||(ne.message=`We cannot connect at the moment, trying again in some seconds... Retrying (${h}/3 retries)`),h<=3&&setTimeout(()=>{h+=1,C()},15e3),H({type:"ERROR",data:ne})}})},p=>{S||H({type:"ERROR",data:p})});return C(),()=>{S=!0,l&&l.unsubscribe(),b&&clearInterval(b)}},[re,H,ie]),Q};function Z(ie){return{expose(){const re=()=>null;return attachComponentData(re,we,ie),re}}}const Le=()=>null;(0,r.R5)(Le,a,!0)},94063:(Rn,kt,e)=>{"use strict";e.d(kt,{A:()=>ot,B:()=>Tt,C:()=>$e,D:()=>Ye,F:()=>Y,G:()=>he,H:()=>it,I:()=>Je,J:()=>_e,K:()=>sn,N:()=>ht,P:()=>dn,T:()=>Ra,d:()=>ea,e:()=>K,i:()=>at,l:()=>ln,o:()=>cn,p:()=>At,q:()=>qe,r:()=>Ft,s:()=>un,t:()=>Fe,u:()=>Et,v:()=>zt,w:()=>An,x:()=>gn,y:()=>Ae,z:()=>fe});var r=e(49462),m=e(60885),u=e(12053),W=e(34520),A=e(32272),o=e(37794),U=e.n(o),We=e(82394),we=e.n(We),a=e(31734),te=e.n(a),q=e(88285),D=e(57032),Z=e(30705),Le=e(73495),ie=e(86619),re=e(95544),Q=e(90436),H=e(85256),S=e(42494),l=e(5806),b=e(21324),h=e(79692),C=e(60364),p=e(61837),be=e(79784),ge=e(50758),ye=e(12231),ne=e(86136),oe=e(49378),X=e(27556),xe=e(77277),It=e(88013),P=e(2784),Jt=e(64279),me=e(30195),Lt=e(29641),Ct=e(74828),je=e(29611),nt=e(56939),Te=e(49558),gt=e(48760),de=e(62155),G=e(82108),Pe=e.n(G),ce=e(19996),le=e(25505),Be=e(38016),st=e(73557),Kt=e(60497),ct=e(49166),Zt=e(93269),O=e(8198),B=e(15026),w=e(43054),L=e(31011),se=Object.defineProperty,Me=($,T,F)=>T in $?se($,T,{enumerable:!0,configurable:!0,writable:!0,value:F}):$[T]=F,rt=($,T,F)=>(Me($,typeof T!="symbol"?T+"":T,F),F);class xt{constructor(T){rt(this,"discoveryApi"),rt(this,"scmIntegrationsApi"),rt(this,"fetchApi"),rt(this,"identityApi"),rt(this,"useLongPollingLogs");var F,V;this.discoveryApi=T.discoveryApi,this.fetchApi=(F=T.fetchApi)!=null?F:{fetch},this.scmIntegrationsApi=T.scmIntegrationsApi,this.useLongPollingLogs=(V=T.useLongPollingLogs)!=null?V:!1,this.identityApi=T.identityApi}async listTasks(T){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const F=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:V}=await this.identityApi.getBackstageIdentity(),Ce=U().stringify(T.filterByOwnership==="owned"?{createdBy:V}:{}),Re=await this.fetchApi.fetch(`${F}/v2/tasks?${Ce}`);if(!Re.ok)throw await A.VL.fromResponse(Re);return await Re.json()}async getIntegrationsList(T){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(V=>!this.scmIntegrationsApi.bitbucketCloud.byHost(V.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(V.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.gitea.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(V=>({type:V.type,title:V.title,host:V.config.host})).filter(V=>T.allowedHosts.includes(V.host))}}async getTemplateParameterSchema(T){const{namespace:F,kind:V,name:Ce}=(0,W.of)(T,{defaultKind:"template"}),Re=await this.discoveryApi.getBaseUrl("scaffolder"),pe=[F,V,Ce].map(Ht=>encodeURIComponent(Ht)).join("/"),Ne=`${Re}/v2/templates/${pe}/parameter-schema`,tt=await this.fetchApi.fetch(Ne);if(!tt.ok)throw await A.VL.fromResponse(tt);return await tt.json()}async scaffold(T){const{templateRef:F,values:V,secrets:Ce={}}=T,Re=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,pe=await this.fetchApi.fetch(Re,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:F,values:{...V},secrets:Ce})});if(pe.status!==201){const tt=`${pe.status} ${pe.statusText}`,_t=await pe.text();throw new Error(`Backend request failed, ${tt} ${_t.trim()}`)}const{id:Ne}=await pe.json();return{taskId:Ne}}async getTask(T){const V=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(T)}`,Ce=await this.fetchApi.fetch(V);if(!Ce.ok)throw await A.VL.fromResponse(Ce);return await Ce.json()}streamLogs(T){return this.useLongPollingLogs?this.streamLogsPolling(T):this.streamLogsEventStream(T)}async dryRun(T){const F=await this.discoveryApi.getBaseUrl("scaffolder"),V=await this.fetchApi.fetch(`${F}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:T.template,values:T.values,secrets:T.secrets,directoryContents:T.directoryContents})});if(!V.ok)throw await A.VL.fromResponse(V);return V.json()}streamLogsEventStream({taskId:T,after:F}){return new(we())(V=>{var Ce;const Re=new URLSearchParams;F!==void 0&&Re.set("after",String(Number(F))),Promise.all([this.discoveryApi.getBaseUrl("scaffolder"),(Ce=this.identityApi)==null?void 0:Ce.getCredentials()]).then(([pe,Ne])=>{const tt=`${pe}/v2/tasks/${encodeURIComponent(T)}/eventstream`,_t=en=>{if(en.data)try{V.next(JSON.parse(en.data))}catch(Xt){V.error(Xt)}},Ht=new a.EventSourcePolyfill(tt,{withCredentials:!0,headers:Ne!=null&&Ne.token?{Authorization:`Bearer ${Ne.token}`}:{}});Ht.addEventListener("log",_t),Ht.addEventListener("cancelled",_t),Ht.addEventListener("completion",en=>{_t(en),Ht.close(),V.complete()}),Ht.addEventListener("error",en=>{V.error(en)})},pe=>{V.error(pe)})})}streamLogsPolling({taskId:T,after:F}){let V=F;return new(we())(Ce=>{this.discoveryApi.getBaseUrl("scaffolder").then(async Re=>{for(;!Ce.closed;){const pe=`${Re}/v2/tasks/${encodeURIComponent(T)}/events?${U().stringify({after:V})}`,Ne=await this.fetchApi.fetch(pe);if(!Ne.ok){await new Promise(_t=>setTimeout(_t,1e3));continue}const tt=await Ne.json();for(const _t of tt)if(V=Number(_t.id),Ce.next(_t),_t.type==="completion"){Ce.complete();return}}})})}async listActions(){const T=await this.discoveryApi.getBaseUrl("scaffolder"),F=await this.fetchApi.fetch(`${T}/v2/actions`);if(!F.ok)throw await A.VL.fromResponse(F);return await F.json()}async cancelTask(T){const V=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(T)}/cancel`,Ce=await this.fetchApi.fetch(V,{method:"POST"});if(!Ce.ok)throw await A.VL.fromResponse(Ce);return await Ce.json()}}function ut($,T){return{schema:{returnValue:(0,Lt.ZP)($),uiOptions:T?(0,Lt.ZP)(T):void 0},type:null,uiOptionsType:null}}const et=me.z.record(me.z.string().or(me.z.object({exists:me.z.boolean().optional()})).or(me.z.array(me.z.string()))),fe=ut(me.z.string(),me.z.object({allowedKinds:me.z.array(me.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:me.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:me.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:me.z.union([me.z.string(),me.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:me.z.array(et).or(et).optional().describe("List of key-value filter expression for entities")})).schema,Ae=$=>{var T,F,V,Ce,Re;const{onChange:pe,schema:{title:Ne="Entity",description:tt="An entity from the catalog"},required:_t,uiSchema:Ht,rawErrors:en,formData:Xt,idSchema:mn}=$,_n=pt(Ht),hn=(T=Ht["ui:options"])==null?void 0:T.defaultKind,En=((F=Ht["ui:options"])==null?void 0:F.defaultNamespace)||void 0,bn=(0,D.u)(Le.Ah),{value:Ln,loading:qn}=(0,Jt.default)(async()=>{const{items:yn}=await bn.getEntities(_n?{filter:_n}:void 0);return yn}),Vn=(Ce=(V=Ht["ui:options"])==null?void 0:V.allowArbitraryValues)!=null?Ce:!0,xn=(0,P.useCallback)(yn=>{try{return(0,Le.$3)((0,W.of)(yn,{defaultKind:hn,defaultNamespace:En}),{defaultKind:hn,defaultNamespace:En})}catch{return yn}},[hn,En]),Bn=(0,P.useCallback)((yn,Dn,pa)=>{if(typeof Dn!="string")pe(Dn?(0,W.eE)(Dn):void 0);else if(pa==="blur"||pa==="create-option"){let ga=Dn;try{ga=(0,W.eE)((0,W.of)(Dn,{defaultKind:hn,defaultNamespace:En}))}catch{}(Xt!==Dn||Vn)&&pe(ga)}},[pe,Xt,hn,En,Vn]),$n=(Re=Ln==null?void 0:Ln.find(yn=>(0,W.eE)(yn)===Xt))!=null?Re:Vn&&Xt?xn(Xt):"";return(0,P.useEffect)(()=>{(Ln==null?void 0:Ln.length)===1&&$n===""&&pe((0,W.eE)(Ln[0]))},[Ln,pe,$n]),P.createElement(S.Z,{margin:"normal",required:_t,error:(en==null?void 0:en.length)>0&&!Xt},P.createElement(It.ZP,{disabled:(Ln==null?void 0:Ln.length)===1,id:mn==null?void 0:mn.$id,value:$n,loading:qn,onChange:Bn,options:Ln||[],getOptionLabel:yn=>typeof yn=="string"?yn:(0,Le.$3)(yn,{defaultKind:hn,defaultNamespace:En}),autoSelect:!0,freeSolo:Vn,renderInput:yn=>P.createElement(ie.Z,{...yn,label:Ne,margin:"dense",helperText:tt,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:_t,InputProps:yn.InputProps})}))};function Xe($){return typeof $=="object"&&$.exists?q.n3:$==null?void 0:$.toString()}function St($){const T={};for(const[F,V]of Object.entries($))Array.isArray(V)?T[F]=V:T[F]=Xe(V);return T}function pt($){var T,F;const V=(T=$["ui:options"])==null?void 0:T.allowedKinds,Ce=((F=$["ui:options"])==null?void 0:F.catalogFilter)||V&&{kind:V};if(Ce)return Array.isArray(Ce)?Ce.map(St):St(Ce)}const Tt=($,T)=>{W.y$.isValidObjectName($)||T.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")},$e=ut(me.z.string()).schema,ot=$=>{const{onChange:T,required:F,schema:{title:V="Name",description:Ce="Unique name of the component"},rawErrors:Re,formData:pe,uiSchema:{"ui:autofocus":Ne},idSchema:tt,placeholder:_t}=$;return P.createElement(ie.Z,{id:tt==null?void 0:tt.$id,label:V,placeholder:_t,helperText:Ce,required:F,value:pe!=null?pe:"",onChange:({target:{value:Ht}})=>T(Ht),margin:"normal",error:(Re==null?void 0:Re.length)>0&&!pe,inputProps:{autoFocus:Ne}})},_e=ut(me.z.string(),me.z.object({allowedKinds:me.z.array(me.z.string()).default(["Group","User"]).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:me.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:me.z.union([me.z.string(),me.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:me.z.array(et).or(et).optional().describe("List of key-value filter expression for entities")})).schema,Je=$=>{var T,F,V,Ce,Re;const{schema:{title:pe="Owner",description:Ne="The owner of the component"},uiSchema:tt,..._t}=$,Ht=(T=tt["ui:options"])==null?void 0:T.defaultNamespace,en=(F=tt["ui:options"])==null?void 0:F.allowedKinds,Xt=((V=tt["ui:options"])==null?void 0:V.catalogFilter)||{kind:en||["Group","User"]},mn={...tt,"ui:options":{catalogFilter:Xt,defaultKind:"Group",allowArbitraryValues:(Re=(Ce=tt["ui:options"])==null?void 0:Ce.allowArbitraryValues)!=null?Re:!0,...Ht!==void 0?{defaultNamespace:Ht}:{}}};return P.createElement(Ae,{..._t,schema:{title:pe,description:Ne},uiSchema:mn})},it=ut(me.z.string(),me.z.object({allowedHosts:me.z.array(me.z.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:me.z.array(me.z.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:me.z.array(me.z.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:me.z.array(me.z.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:me.z.array(me.z.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:me.z.object({secretsKey:me.z.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:me.z.object({gitea:me.z.array(me.z.string()).optional().describe("Additional Gitea scopes to request"),gerrit:me.z.array(me.z.string()).optional().describe("Additional Gerrit scopes to request"),github:me.z.array(me.z.string()).optional().describe("Additional GitHub scopes to request"),gitlab:me.z.array(me.z.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:me.z.array(me.z.string()).optional().describe("Additional BitBucket scopes to request"),azure:me.z.array(me.z.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})).schema,at=($,T,F)=>{var V,Ce;try{const{host:Re,searchParams:pe}=new URL(`https://${$}`),Ne=F.apiHolder.get(r.q3);Re?(((V=Ne==null?void 0:Ne.byHost(Re))==null?void 0:V.type)==="bitbucket"?(Re==="bitbucket.org"&&!pe.get("workspace")&&T.addError("Incomplete repository location provided, workspace not provided"),pe.get("project")||T.addError("Incomplete repository location provided, project not provided")):((Ce=Ne==null?void 0:Ne.byHost(Re))==null?void 0:Ce.type)!=="gerrit"&&(pe.get("owner")||T.addError("Incomplete repository location provided, owner not provided")),pe.get("repo")||T.addError("Incomplete repository location provided, repo not provided")):T.addError("Incomplete repository location provided, host not provided")}catch{T.addError("Unable to parse the Repository URL")}},Pt=$=>{const{allowedOwners:T=[],rawErrors:F,state:V,onChange:Ce}=$,Re=T?T.map(Ne=>({label:Ne,value:Ne})):[{label:"Loading...",value:"loading"}],{owner:pe}=V;return P.createElement(P.Fragment,null,P.createElement(S.Z,{margin:"normal",required:!0,error:(F==null?void 0:F.length)>0&&!pe},T!=null&&T.length?P.createElement(Te.Ph,{native:!0,label:"Owner Available",onChange:Ne=>Ce({owner:String(Array.isArray(Ne)?Ne[0]:Ne)}),disabled:T.length===1,selected:pe,items:Re}):P.createElement(P.Fragment,null,P.createElement(nt.Z,{htmlFor:"ownerInput"},"Owner"),P.createElement(je.Z,{id:"ownerInput",onChange:Ne=>Ce({owner:Ne.target.value}),value:pe})),P.createElement(Ct.Z,null,"The organization, user or project that this repo will belong to")))},Nt=$=>{const{allowedOwners:T=[],state:F,onChange:V,rawErrors:Ce}=$,Re=T?T.map(Ne=>({label:Ne,value:Ne})):[{label:"Loading...",value:"loading"}],{owner:pe}=F;return P.createElement(P.Fragment,null,P.createElement(S.Z,{margin:"normal",required:!0,error:(Ce==null?void 0:Ce.length)>0&&!pe},T!=null&&T.length?P.createElement(Te.Ph,{native:!0,label:"Owner Available",onChange:Ne=>V({owner:String(Array.isArray(Ne)?Ne[0]:Ne)}),disabled:T.length===1,selected:pe,items:Re}):P.createElement(P.Fragment,null,P.createElement(nt.Z,{htmlFor:"ownerInput"},"Owner"),P.createElement(je.Z,{id:"ownerInput",onChange:Ne=>V({owner:Ne.target.value}),value:pe})),P.createElement(Ct.Z,null,"Gitea namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},on=$=>{const{allowedOwners:T=[],state:F,onChange:V,rawErrors:Ce}=$,Re=T?T.map(Ne=>({label:Ne,value:Ne})):[{label:"Loading...",value:"loading"}],{owner:pe}=F;return P.createElement(P.Fragment,null,P.createElement(S.Z,{margin:"normal",required:!0,error:(Ce==null?void 0:Ce.length)>0&&!pe},T!=null&&T.length?P.createElement(Te.Ph,{native:!0,label:"Owner Available",onChange:Ne=>V({owner:String(Array.isArray(Ne)?Ne[0]:Ne)}),disabled:T.length===1,selected:pe,items:Re}):P.createElement(P.Fragment,null,P.createElement(nt.Z,{htmlFor:"ownerInput"},"Owner"),P.createElement(je.Z,{id:"ownerInput",onChange:Ne=>V({owner:Ne.target.value}),value:pe})),P.createElement(Ct.Z,null,"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},Ze=$=>{const{allowedOrganizations:T=[],allowedOwners:F=[],rawErrors:V,state:Ce,onChange:Re}=$,pe=T?T.map(Ht=>({label:Ht,value:Ht})):[{label:"Loading...",value:"loading"}],Ne=F?F.map(Ht=>({label:Ht,value:Ht})):[{label:"Loading...",value:"loading"}],{organization:tt,owner:_t}=Ce;return P.createElement(P.Fragment,null,P.createElement(S.Z,{margin:"normal",required:!0,error:(V==null?void 0:V.length)>0&&!tt},T!=null&&T.length?P.createElement(Te.Ph,{native:!0,label:"Organization",onChange:Ht=>Re({organization:String(Array.isArray(Ht)?Ht[0]:Ht)}),disabled:T.length===1,selected:tt,items:pe}):P.createElement(P.Fragment,null,P.createElement(nt.Z,{htmlFor:"orgInput"},"Organization"),P.createElement(je.Z,{id:"orgInput",onChange:Ht=>Re({organization:Ht.target.value}),value:tt})),P.createElement(Ct.Z,null,"The Organization that this repo will belong to")),P.createElement(S.Z,{margin:"normal",required:!0,error:(V==null?void 0:V.length)>0&&!_t},F!=null&&F.length?P.createElement(Te.Ph,{native:!0,label:"Owner",onChange:Ht=>Re({owner:String(Array.isArray(Ht)?Ht[0]:Ht)}),disabled:F.length===1,selected:_t,items:Ne}):P.createElement(P.Fragment,null,P.createElement(nt.Z,{htmlFor:"ownerInput"},"Project"),P.createElement(je.Z,{id:"ownerInput",onChange:Ht=>Re({owner:Ht.target.value}),value:_t})),P.createElement(Ct.Z,null,"The Project that this repo will belong to")))},He=$=>{const{allowedOwners:T=[],allowedProjects:F=[],onChange:V,rawErrors:Ce,state:Re}=$,{host:pe,workspace:Ne,project:tt}=Re,_t=T?T==null?void 0:T.map(en=>({label:en,value:en})):[],Ht=F?F==null?void 0:F.map(en=>({label:en,value:en})):[];return(0,P.useEffect)(()=>{pe==="bitbucket.org"&&T.length&&V({workspace:T[0]})},[T,pe,V]),P.createElement(P.Fragment,null,pe==="bitbucket.org"&&P.createElement(S.Z,{margin:"normal",required:!0,error:(Ce==null?void 0:Ce.length)>0&&!Ne},T!=null&&T.length?P.createElement(Te.Ph,{native:!0,label:"Allowed Workspaces",onChange:en=>V({workspace:String(Array.isArray(en)?en[0]:en)}),disabled:T.length===1,selected:Ne,items:_t}):P.createElement(P.Fragment,null,P.createElement(nt.Z,{htmlFor:"workspaceInput"},"Workspace"),P.createElement(je.Z,{id:"workspaceInput",onChange:en=>V({workspace:en.target.value}),value:Ne})),P.createElement(Ct.Z,null,"The Workspace that this repo will belong to")),P.createElement(S.Z,{margin:"normal",required:!0,error:(Ce==null?void 0:Ce.length)>0&&!tt},F!=null&&F.length?P.createElement(Te.Ph,{native:!0,label:"Allowed Projects",onChange:en=>V({project:String(Array.isArray(en)?en[0]:en)}),disabled:F.length===1,selected:tt,items:Ht}):P.createElement(P.Fragment,null,P.createElement(nt.Z,{htmlFor:"projectInput"},"Project"),P.createElement(je.Z,{id:"projectInput",onChange:en=>V({project:en.target.value}),value:tt})),P.createElement(Ct.Z,null,"The Project that this repo will belong to")))},ve=$=>{const{onChange:T,rawErrors:F,state:V}=$,{workspace:Ce,owner:Re}=V;return P.createElement(P.Fragment,null,P.createElement(S.Z,{margin:"normal",error:(F==null?void 0:F.length)>0&&!Ce},P.createElement(nt.Z,{htmlFor:"ownerInput"},"Owner"),P.createElement(je.Z,{id:"ownerInput",onChange:pe=>T({owner:pe.target.value}),value:Re}),P.createElement(Ct.Z,null,"The owner of the project (optional)")),P.createElement(S.Z,{margin:"normal",required:!0,error:(F==null?void 0:F.length)>0&&!Ce},P.createElement(nt.Z,{htmlFor:"parentInput"},"Parent"),P.createElement(je.Z,{id:"parentInput",onChange:pe=>T({workspace:pe.target.value}),value:Ce}),P.createElement(Ct.Z,null,"The project parent that the repo will belong to")))},Ie=$=>{const{host:T,hosts:F,onChange:V,rawErrors:Ce}=$,Re=(0,D.u)(m.s),{value:{integrations:pe}={integrations:[]},loading:Ne}=(0,Jt.default)(async()=>await Re.getIntegrationsList({allowedHosts:F!=null?F:[]}));(0,P.useEffect)(()=>{T||(F!=null&&F.length?V(F[0]):pe!=null&&pe.length&&V(pe[0].host))},[F,T,V,pe]);const tt=pe?pe.filter(_t=>F!=null&&F.length?F==null?void 0:F.includes(_t.host):!0).map(_t=>({label:_t.title,value:_t.host})):[{label:"Loading...",value:"loading"}];return Ne?P.createElement(Te.Ex,null):P.createElement(P.Fragment,null,P.createElement(S.Z,{margin:"normal",required:!0,error:(Ce==null?void 0:Ce.length)>0&&!T},P.createElement(Te.Ph,{native:!0,disabled:(F==null?void 0:F.length)===1,label:"Host",onChange:_t=>V(String(Array.isArray(_t)?_t[0]:_t)),selected:T,items:tt,"data-testid":"host-select"}),P.createElement(Ct.Z,null,"The host where the repository will be created")))},lt=$=>{const{repoName:T,allowedRepos:F,onChange:V,rawErrors:Ce}=$;(0,P.useEffect)(()=>{T||F!=null&&F.length&&V(F[0])},[F,T,V]);const Re=F?F.map(pe=>({label:pe,value:pe})):[{label:"Loading...",value:"loading"}];return P.createElement(P.Fragment,null,P.createElement(S.Z,{margin:"normal",required:!0,error:(Ce==null?void 0:Ce.length)>0&&!T},F!=null&&F.length?P.createElement(Te.Ph,{native:!0,label:"Repositories Available",onChange:pe=>V(String(Array.isArray(pe)?pe[0]:pe)),disabled:F.length===1,selected:T,items:Re}):P.createElement(P.Fragment,null,P.createElement(nt.Z,{htmlFor:"repoNameInput"},"Repository"),P.createElement(je.Z,{id:"repoNameInput",onChange:pe=>V(String(pe.target.value)),value:T})),P.createElement(Ct.Z,null,"The name of the repository")))};function $t($){if(!$.host)return;const T=new URLSearchParams;return $.owner&&T.set("owner",$.owner),$.repoName&&T.set("repo",$.repoName),$.organization&&T.set("organization",$.organization),$.workspace&&T.set("workspace",$.workspace),$.project&&T.set("project",$.project),`${$.host}?${T.toString()}`}function j($){let T="",F="",V="",Ce="",Re="",pe="";try{if($){const Ne=new URL(`https://${$}`);T=Ne.host,F=Ne.searchParams.get("owner")||"",V=Ne.searchParams.get("repo")||"",Ce=Ne.searchParams.get("organization")||"",Re=Ne.searchParams.get("workspace")||"",pe=Ne.searchParams.get("project")||""}}catch{}return{host:T,owner:F,repoName:V,organization:Ce,workspace:Re,project:pe}}const he=$=>{var T,F;const{uiSchema:V,onChange:Ce,rawErrors:Re,formData:pe,schema:Ne}=$,[tt,_t]=(0,P.useState)(j(pe)),Ht=(0,D.u)(r.q3),en=(0,D.u)(r.Om),{setSecrets:Xt}=(0,m.u)(),mn=(0,P.useMemo)(()=>{var yn,Dn;return(Dn=(yn=V==null?void 0:V["ui:options"])==null?void 0:yn.allowedHosts)!=null?Dn:[]},[V]),_n=(0,P.useMemo)(()=>{var yn,Dn;return(Dn=(yn=V==null?void 0:V["ui:options"])==null?void 0:yn.allowedOrganizations)!=null?Dn:[]},[V]),hn=(0,P.useMemo)(()=>{var yn,Dn;return(Dn=(yn=V==null?void 0:V["ui:options"])==null?void 0:yn.allowedOwners)!=null?Dn:[]},[V]),En=(0,P.useMemo)(()=>{var yn,Dn;return(Dn=(yn=V==null?void 0:V["ui:options"])==null?void 0:yn.allowedProjects)!=null?Dn:[]},[V]),bn=(0,P.useMemo)(()=>{var yn,Dn;return(Dn=(yn=V==null?void 0:V["ui:options"])==null?void 0:yn.allowedRepos)!=null?Dn:[]},[V]),{owner:Ln,organization:qn,project:Vn,repoName:xn}=tt;(0,P.useEffect)(()=>{Ce($t(tt))},[tt,Ce]),(0,P.useEffect)(()=>{_n.length>0&&!qn&&_t(yn=>({...yn,organization:_n[0]}))},[_t,_n,qn]),(0,P.useEffect)(()=>{hn.length>0&&!Ln&&_t(yn=>({...yn,owner:hn[0]}))},[_t,hn,Ln]),(0,P.useEffect)(()=>{En.length>0&&!Vn&&_t(yn=>({...yn,project:En[0]}))},[_t,En,Vn]),(0,P.useEffect)(()=>{bn.length>0&&!xn&&_t(yn=>({...yn,repoName:bn[0]}))},[_t,bn,xn]);const Bn=(0,P.useCallback)(yn=>{_t(Dn=>({...Dn,...yn}))},[_t]);(0,gt.Z)(async()=>{var yn;const{requestUserCredentials:Dn}=(yn=V==null?void 0:V["ui:options"])!=null?yn:{},pa=tt.owner?tt.owner:tt.project;if(!Dn||!(tt.host&&pa&&tt.repoName))return;const[ga,Ma]=[tt.host,tt.repoName].map(encodeURIComponent),{token:Fa}=await en.getCredentials({url:`https://${ga}/${pa}/${Ma}`,additionalScope:{repoWrite:!0,customScopes:Dn.additionalScopes}});Xt({[Dn.secretsKey]:Fa})},500,[tt,V]);const $n=(F=tt.host&&((T=Ht.byHost(tt.host))==null?void 0:T.type))!=null?F:null;return P.createElement(P.Fragment,null,Ne.title&&P.createElement(re.Z,{my:1},P.createElement(Q.Z,{variant:"h5"},Ne.title),P.createElement(H.Z,null)),Ne.description&&P.createElement(Q.Z,{variant:"body1"},Ne.description),P.createElement(Ie,{host:tt.host,hosts:mn,onChange:yn=>_t(Dn=>({...Dn,host:yn})),rawErrors:Re}),$n==="github"&&P.createElement(Pt,{allowedOwners:hn,onChange:Bn,rawErrors:Re,state:tt}),$n==="gitea"&&P.createElement(Nt,{allowedOwners:hn,allowedRepos:bn,rawErrors:Re,state:tt,onChange:Bn}),$n==="gitlab"&&P.createElement(on,{allowedOwners:hn,rawErrors:Re,state:tt,onChange:Bn}),$n==="bitbucket"&&P.createElement(He,{allowedOwners:hn,allowedProjects:En,rawErrors:Re,state:tt,onChange:Bn}),$n==="azure"&&P.createElement(Ze,{allowedOrganizations:_n,allowedOwners:hn,rawErrors:Re,state:tt,onChange:Bn}),$n==="gerrit"&&P.createElement(ve,{rawErrors:Re,state:tt,onChange:Bn}),P.createElement(lt,{repoName:tt.repoName,allowedRepos:bn,onChange:yn=>_t(Dn=>({...Dn,repoName:yn})),rawErrors:Re}))},ht=ut(me.z.string(),me.z.object({allowedKinds:me.z.array(me.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:me.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:me.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:me.z.union([me.z.string(),me.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:me.z.array(et).or(et).optional().describe("List of key-value filter expression for entities")})).schema,sn=$=>{const{schema:{title:T="Entity",description:F="An entity from the catalog"},uiSchema:V,required:Ce}=$,Re=(0,D.u)(D.t),{loading:pe,value:Ne}=(0,Jt.default)(async()=>(await Re.getBackstageIdentity()).ownershipEntityRefs);if(pe)return P.createElement(It.ZP,{loading:pe,renderInput:_t=>P.createElement(ie.Z,{..._t,label:T,margin:"dense",helperText:F,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:Ce,InputProps:_t.InputProps}),options:[]});const tt=Qt(V,Ne);return P.createElement(Ae,{...$,uiSchema:tt})};function Qt($,T){const F=($==null?void 0:$["ui:options"])||{},V=F.allowedKinds;return{"ui:options":{catalogFilter:{...F.catalogFilter,...V?{kind:V,[`relations.${W.S4}`]:T||[]}:{[`relations.${W.S4}`]:T||[]}}}}}const Y=ut(me.z.array(me.z.string()),me.z.object({kinds:me.z.array(me.z.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:me.z.boolean().optional().describe("Whether to show usage counts per tag"),helperText:me.z.string().optional().describe("Helper text to display")})).schema,Ye=$=>{var T,F,V;const{formData:Ce,onChange:Re,uiSchema:pe}=$,Ne=(0,D.u)(Le.Ah),[tt,_t]=(0,P.useState)([]),[Ht,en]=(0,P.useState)(""),[Xt,mn]=(0,P.useState)(!1),_n=(0,W.In)().isValidTag,hn=(T=pe["ui:options"])==null?void 0:T.kinds,En=(F=pe["ui:options"])==null?void 0:F.showCounts,bn=(V=pe["ui:options"])==null?void 0:V.helperText,{loading:Ln,value:qn}=(0,Jt.default)(async()=>{const xn="metadata.tags",Bn={facets:[xn]};hn&&(Bn.filter={kind:hn});const{facets:$n}=await Ne.getEntityFacets(Bn),yn=Object.fromEntries($n[xn].map(({value:Dn,count:pa})=>[Dn,pa]));return _t(Object.keys(yn).sort((Dn,pa)=>En?yn[pa]-yn[Dn]:Dn.localeCompare(pa))),yn}),Vn=(xn,Bn)=>{let $n=!1,yn=!1;const Dn=Ce||[];if(Bn!=null&&Bn.length&&Dn.length<Bn.length){const pa=Bn[Bn.length-1]=Bn[Bn.length-1].toLocaleLowerCase("en-US").trim();$n=!_n(pa),yn=Dn.indexOf(pa)!==-1}mn($n),en($n?Ht:""),!$n&&!yn&&Re(Bn||[])};return(0,de.Z)(()=>Re(Ce||[])),P.createElement(S.Z,{margin:"normal"},P.createElement(It.ZP,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:Vn,value:Ce||[],inputValue:Ht,loading:Ln,options:tt,ChipProps:{size:"small"},renderOption:xn=>En?`${xn} (${qn==null?void 0:qn[xn]})`:xn,renderInput:xn=>P.createElement(ie.Z,{...xn,label:"Tags",onChange:Bn=>en(Bn.target.value),error:Xt,helperText:bn!=null?bn:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))},Et=(0,Z.x8)({id:"register-component",optional:!0}),zt=(0,Z.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),Ft=(0,Z.NT)({id:"scaffolder"}),gn=(0,Z.Rz)({id:"scaffolder/legacy/selected-template",parent:Ft,path:"/templates/:templateName"}),cn=(0,Z.Rz)({id:"scaffolder/selected-template",parent:Ft,path:"/templates/:namespace/:templateName"}),An=(0,Z.Rz)({id:"scaffolder/task",parent:Ft,path:"/tasks/:taskId"}),Fe=(0,Z.Rz)({id:"scaffolder/list-tasks",parent:Ft,path:"/tasks"}),qe=(0,Z.Rz)({id:"scaffolder/actions",parent:Ft,path:"/actions"}),At=(0,Z.Rz)({id:"scaffolder/edit",parent:Ft,path:"/edit"}),ln=ut(me.z.string(),me.z.object({title:me.z.string().default("Group").describe("Group"),description:me.z.string().default("A group you are part of").describe("The group to which the entity belongs")})).schema,dn=$=>{const{schema:{title:T,description:F},required:V,rawErrors:Ce,onChange:Re}=$,pe=(0,D.u)(D.t),Ne=(0,D.u)(Le.Ah),tt=(0,D.u)(D.r),[_t,Ht]=(0,P.useState)([]),[en,Xt]=(0,P.useState)(null);(0,Jt.default)(async()=>{const{userEntityRef:_n}=await pe.getBackstageIdentity();if(!_n){tt.post(new A.dR("No user entity ref found"));return}const{items:hn}=await Ne.getEntities({filter:{kind:"Group",["relations.hasMember"]:[_n]}}),En=hn.filter(bn=>Boolean(bn)).map(bn=>{var Ln;return{label:(Ln=bn.metadata.title)!=null?Ln:bn.metadata.name,ref:(0,W.eE)(bn)}});Ht(En)});const mn=(_n,hn)=>{var En;Xt(hn),Re((En=hn==null?void 0:hn.ref)!=null?En:"")};return P.createElement(S.Z,{margin:"normal",required:V,error:(Ce==null?void 0:Ce.length)>0},P.createElement(It.ZP,{id:"OwnershipEntityRefPicker-dropdown",options:_t||[],value:en,onChange:mn,getOptionLabel:_n=>_n.label,renderInput:_n=>P.createElement(ie.Z,{..._n,label:T,margin:"dense",helperText:F,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:V})}))},un=(0,Z.rx)({id:"scaffolder",apis:[(0,Z.ni)({api:m.s,deps:{discoveryApi:D.q,scmIntegrationsApi:r.q3,fetchApi:D.s,identityApi:D.t},factory:({discoveryApi:$,scmIntegrationsApi:T,fetchApi:F,identityApi:V})=>new xt({discoveryApi:$,scmIntegrationsApi:T,fetchApi:F,identityApi:V})})],routes:{root:Ft,selectedTemplate:cn,ongoingTask:An,actions:qe,listTasks:Fe,edit:At},externalRoutes:{registerComponent:Et,viewTechDoc:zt}}),wn=un.provide((0,u.eP)({component:Ae,name:"EntityPicker",schema:fe})),Wn=un.provide((0,u.eP)({component:ot,name:"EntityNamePicker",validation:Tt,schema:$e})),Gn=un.provide((0,u.eP)({component:he,name:"RepoUrlPicker",validation:at,schema:it})),sa=un.provide((0,u.eP)({component:Je,name:"OwnerPicker",schema:_e})),Cn=un.provide((0,u.eP)({component:dn,name:"MyGroupsPicker",schema:ln})),ea=un.provide((0,Z.P4)({name:"ScaffolderPage",component:()=>Promise.all([e.e(3761),e.e(2719)]).then(e.bind(e,12719)).then($=>$.Router),mountPoint:Ft})),la=un.provide((0,u.eP)({component:sn,name:"OwnedEntityPicker",schema:ht})),ra=un.provide((0,u.eP)({component:Ye,name:"EntityTagsPicker",schema:Y})),fa=un.provide((0,Z.P4)({name:"LegacyScaffolderPage",component:()=>Promise.all([e.e(3761),e.e(1447)]).then(e.bind(e,1447)).then($=>$.LegacyRouter),mountPoint:Ft})),Pa=P.createElement(le.Z,{fontSize:"small"}),ia=P.createElement(ce.Z,{fontSize:"small"}),Ra=()=>{const $=(0,D.u)(D.l),{error:T,loading:F,availableTypes:V,selectedTypes:Ce,setSelectedTypes:Re}=(0,Le.Uh)();return F?P.createElement(Te.Ex,null):V?T?($.post({message:"Failed to load entity types",severity:"error"}),null):P.createElement(re.Z,{pb:1,pt:1},P.createElement(Q.Z,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),P.createElement(It.ZP,{id:"categories-picker",multiple:!0,options:V,value:Ce,onChange:(pe,Ne)=>Re(Ne),renderOption:(pe,{selected:Ne})=>P.createElement(l.Z,{control:P.createElement(b.Z,{icon:Pa,checkedIcon:ia,checked:Ne}),label:Pe()(pe)}),size:"small",popupIcon:P.createElement(Be.Z,{"data-testid":"categories-picker-expand"}),renderInput:pe=>P.createElement(ie.Z,{...pe,variant:"outlined"})})):null},ue=(0,h.Z)(()=>({button:{color:({fontColor:$})=>$}})),Qe=$=>{const{cancelEnabled:T,logsVisible:F,buttonBarVisible:V,onStartOver:Ce,onToggleLogs:Re,onToggleButtonBar:pe,taskId:Ne}=$,{getPageTheme:tt}=(0,C.Z)(),_t=tt({themeId:"website"}),Ht=ue({fontColor:_t.fontColor}),en=(0,D.u)(m.s),[Xt,mn]=(0,P.useState)(),[{status:_n},{execute:hn}]=(0,Kt.r)(async()=>{Ne&&await en.cancelTask(Ne)});return P.createElement(P.Fragment,null,P.createElement(p.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:En=>{mn(En.currentTarget)},"data-testid":"menu-button",className:Ht.button},P.createElement(w.Z,null)),P.createElement(be.ZP,{open:Boolean(Xt),onClose:()=>mn(void 0),anchorEl:Xt,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},P.createElement(ge.Z,null,P.createElement(ye.Z,{onClick:()=>Re==null?void 0:Re(!F)},P.createElement(ne.Z,null,P.createElement(O.Z,{fontSize:"small"})),P.createElement(oe.Z,{primary:F?"Hide Logs":"Show Logs"})),P.createElement(ye.Z,{onClick:()=>pe==null?void 0:pe(!V)},P.createElement(ne.Z,null,P.createElement(B.Z,{fontSize:"small"})),P.createElement(oe.Z,{primary:V?"Hide Button Bar":"Show Button Bar"})),P.createElement(ye.Z,{onClick:Ce},P.createElement(ne.Z,null,P.createElement(Zt.Z,{fontSize:"small"})),P.createElement(oe.Z,{primary:"Start Over"})),P.createElement(ye.Z,{onClick:hn,disabled:!T||_n!=="not-executed","data-testid":"cancel-task"},P.createElement(ne.Z,null,P.createElement(ct.Z,{fontSize:"small"})),P.createElement(oe.Z,{primary:"Cancel"})))))},yt=(0,h.Z)($=>({contentWrapper:{display:"flex",flexDirection:"column"},buttonBar:{display:"flex",flexDirection:"row",justifyContent:"right"},cancelButton:{marginRight:$.spacing(1)},logsVisibilityButton:{marginRight:$.spacing(1)}})),K=$=>{var T,F,V,Ce,Re,pe,Ne,tt;const{taskId:_t}=(0,st.UO)(),Ht=(0,Z.tg)(cn),en=(0,st.s0)(),Xt=(0,D.u)(m.s),mn=(0,u.WQ)(_t),_n=yt(),hn=(0,P.useMemo)(()=>{var ga,Ma;return(Ma=(ga=mn.task)==null?void 0:ga.spec.steps.map(Fa=>{var Ga;return{...Fa,...(Ga=mn==null?void 0:mn.steps)==null?void 0:Ga[Fa.id]}}))!=null?Ma:[]},[mn]),[En,bn]=(0,P.useState)(!1),[Ln,qn]=(0,P.useState)(!0);(0,P.useEffect)(()=>{mn.error&&bn(!0)},[mn.error]),(0,P.useEffect)(()=>{mn.completed&&!mn.error&&qn(!1)},[mn.error,mn.completed]);const Vn=(0,P.useMemo)(()=>{for(let ga=hn.length-1;ga>=0;ga--)if(hn[ga].status!=="open")return ga;return 0},[hn]),xn=(0,P.useCallback)(()=>{var ga,Ma,Fa,Ga,er,Ba;const{namespace:Va,name:Ha}=(Ga=(Fa=(Ma=(ga=mn.task)==null?void 0:ga.spec.templateInfo)==null?void 0:Ma.entity)==null?void 0:Fa.metadata)!=null?Ga:{},Ka=(Ba=(er=mn.task)==null?void 0:er.spec.parameters)!=null?Ba:{};!Va||!Ha||en({pathname:Ht({namespace:Va,templateName:Ha}),search:`?${U().stringify({formData:JSON.stringify(Ka)})}`})},[en,(T=mn.task)==null?void 0:T.spec.parameters,(Ce=(V=(F=mn.task)==null?void 0:F.spec.templateInfo)==null?void 0:V.entity)==null?void 0:Ce.metadata,Ht]),[{status:Bn},{execute:$n}]=(0,Kt.r)(async()=>{_t&&await Xt.cancelTask(_t)}),yn=(Re=$.TemplateOutputsComponent)!=null?Re:L.Iy,Dn=(tt=(Ne=(pe=mn.task)==null?void 0:pe.spec.templateInfo)==null?void 0:Ne.entity)==null?void 0:tt.metadata.name,pa=!(mn.cancelled||mn.completed);return P.createElement(Te.T3,{themeId:"website"},P.createElement(Te.h4,{pageTitleOverride:`Run of ${Dn}`,title:P.createElement("div",null,"Run of ",P.createElement("code",null,Dn)),subtitle:`Task ${_t}`},P.createElement(Qe,{cancelEnabled:pa,logsVisible:En,buttonBarVisible:Ln,onStartOver:xn,onToggleLogs:bn,onToggleButtonBar:qn,taskId:_t})),P.createElement(Te.VY,{className:_n.contentWrapper},mn.error?P.createElement(re.Z,{paddingBottom:2},P.createElement(Te.yu,{error:mn.error,titleFormat:"markdown",title:mn.error.message})):null,P.createElement(re.Z,{paddingBottom:2},P.createElement(L.Lp,{steps:hn,activeStep:Vn,isComplete:mn.completed,isError:Boolean(mn.error)})),P.createElement(yn,{output:mn.output}),Ln?P.createElement(re.Z,{paddingBottom:2},P.createElement(X.Z,null,P.createElement(re.Z,{padding:2},P.createElement("div",{className:_n.buttonBar},P.createElement(xe.Z,{className:_n.cancelButton,disabled:!pa||Bn!=="not-executed",onClick:$n,"data-testid":"cancel-button"},"Cancel"),P.createElement(xe.Z,{className:_n.logsVisibilityButton,color:"primary",variant:"outlined",onClick:()=>bn(!En)},En?"Hide Logs":"Show Logs"),P.createElement(xe.Z,{variant:"contained",color:"primary",disabled:pa,onClick:xn},"Start Over"))))):null,En?P.createElement(re.Z,{paddingBottom:2,height:"100%"},P.createElement(X.Z,{style:{height:"100%"}},P.createElement(re.Z,{padding:2,height:"100%"},P.createElement(L.v9,{logs:mn.stepLogs})))):null))}},31734:function(Rn,kt){var e,r,m;/** @license
* eventsource.js
* Available under MIT License (MIT)
* https://github.com/Yaffle/EventSource/
*/(function(u){"use strict";var W=u.setTimeout,A=u.clearTimeout,o=u.XMLHttpRequest,U=u.XDomainRequest,We=u.ActiveXObject,we=u.EventSource,a=u.document,te=u.Promise,q=u.fetch,D=u.Response,Z=u.TextDecoder,Le=u.TextEncoder,ie=u.AbortController;if(typeof window!="undefined"&&typeof a!="undefined"&&!("readyState"in a)&&a.body==null&&(a.readyState="loading",window.addEventListener("load",function(O){a.readyState="complete"},!1)),o==null&&We!=null&&(o=function(){return new We("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(O){function B(){}return B.prototype=O,new B}),Date.now||(Date.now=function(){return new Date().getTime()}),ie==null){var re=q;q=function(O,B){var w=B.signal;return re(O,{headers:B.headers,credentials:B.credentials,cache:B.cache}).then(function(L){var se=L.body.getReader();return w._reader=se,w._aborted&&w._reader.cancel(),{status:L.status,statusText:L.statusText,headers:L.headers,body:{getReader:function(){return se}}}})},ie=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function Q(){this.bitsNeeded=0,this.codePoint=0}Q.prototype.decode=function(O){function B(et,Wt,fe){if(fe===1)return et>=128>>Wt&&et<<Wt<=2047;if(fe===2)return et>=2048>>Wt&&et<<Wt<=55295||et>=57344>>Wt&&et<<Wt<=65535;if(fe===3)return et>=65536>>Wt&&et<<Wt<=1114111;throw new Error}function w(et,Wt){if(et===6*1)return Wt>>6>15?3:Wt>31?2:1;if(et===6*2)return Wt>15?3:2;if(et===6*3)return 3;throw new Error}for(var L=65533,se="",Me=this.bitsNeeded,rt=this.codePoint,xt=0;xt<O.length;xt+=1){var ut=O[xt];Me!==0&&(ut<128||ut>191||!B(rt<<6|ut&63,Me-6,w(Me,rt)))&&(Me=0,rt=L,se+=String.fromCharCode(rt)),Me===0?(ut>=0&&ut<=127?(Me=0,rt=ut):ut>=192&&ut<=223?(Me=6*1,rt=ut&31):ut>=224&&ut<=239?(Me=6*2,rt=ut&15):ut>=240&&ut<=247?(Me=6*3,rt=ut&7):(Me=0,rt=L),Me!==0&&!B(rt,Me,w(Me,rt))&&(Me=0,rt=L)):(Me-=6,rt=rt<<6|ut&63),Me===0&&(rt<=65535?se+=String.fromCharCode(rt):(se+=String.fromCharCode(55296+(rt-65535-1>>10)),se+=String.fromCharCode(56320+(rt-65535-1&1023))))}return this.bitsNeeded=Me,this.codePoint=rt,se};var H=function(){try{return new Z().decode(new Le().encode("test"),{stream:!0})==="test"}catch(O){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+O)}return!1};(Z==null||Le==null||!H())&&(Z=Q);var S=function(){};function l(O){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=S,this.onload=S,this.onerror=S,this.onreadystatechange=S,this._contentType="",this._xhr=O,this._sendTimeout=0,this._abort=S}l.prototype.open=function(O,B){this._abort(!0);var w=this,L=this._xhr,se=1,Me=0;this._abort=function(fe){w._sendTimeout!==0&&(A(w._sendTimeout),w._sendTimeout=0),(se===1||se===2||se===3)&&(se=4,L.onload=S,L.onerror=S,L.onabort=S,L.onprogress=S,L.onreadystatechange=S,L.abort(),Me!==0&&(A(Me),Me=0),fe||(w.readyState=4,w.onabort(null),w.onreadystatechange())),se=0};var rt=function(){if(se===1){var fe=0,Ae="",Xe=void 0;if("contentType"in L)fe=200,Ae="OK",Xe=L.contentType;else try{fe=L.status,Ae=L.statusText,Xe=L.getResponseHeader("Content-Type")}catch{fe=0,Ae="",Xe=void 0}fe!==0&&(se=2,w.readyState=2,w.status=fe,w.statusText=Ae,w._contentType=Xe,w.onreadystatechange())}},xt=function(){if(rt(),se===2||se===3){se=3;var fe="";try{fe=L.responseText}catch{}w.readyState=3,w.responseText=fe,w.onprogress()}},ut=function(fe,Ae){if((Ae==null||Ae.preventDefault==null)&&(Ae={preventDefault:S}),xt(),se===1||se===2||se===3){if(se=4,Me!==0&&(A(Me),Me=0),w.readyState=4,fe==="load")w.onload(Ae);else if(fe==="error")w.onerror(Ae);else if(fe==="abort")w.onabort(Ae);else throw new TypeError;w.onreadystatechange()}},et=function(fe){L!=null&&(L.readyState===4?(!("onload"in L)||!("onerror"in L)||!("onabort"in L))&&ut(L.responseText===""?"error":"load",fe):L.readyState===3?"onprogress"in L||xt():L.readyState===2&&rt())},Wt=function(){Me=W(function(){Wt()},500),L.readyState===3&&xt()};"onload"in L&&(L.onload=function(fe){ut("load",fe)}),"onerror"in L&&(L.onerror=function(fe){ut("error",fe)}),"onabort"in L&&(L.onabort=function(fe){ut("abort",fe)}),"onprogress"in L&&(L.onprogress=xt),"onreadystatechange"in L&&(L.onreadystatechange=function(fe){et(fe)}),("contentType"in L||!("ontimeout"in o.prototype))&&(B+=(B.indexOf("?")===-1?"?":"&")+"padding=true"),L.open(O,B,!0),"readyState"in L&&(Me=W(function(){Wt()},0))},l.prototype.abort=function(){this._abort(!1)},l.prototype.getResponseHeader=function(O){return this._contentType},l.prototype.setRequestHeader=function(O,B){var w=this._xhr;"setRequestHeader"in w&&w.setRequestHeader(O,B)},l.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},l.prototype.send=function(){if((!("ontimeout"in o.prototype)||!("sendAsBinary"in o.prototype)&&!("mozAnon"in o.prototype))&&a!=null&&a.readyState!=null&&a.readyState!=="complete"){var O=this;O._sendTimeout=W(function(){O._sendTimeout=0,O.send()},4);return}var B=this._xhr;"withCredentials"in B&&(B.withCredentials=this.withCredentials);try{B.send(void 0)}catch(w){throw w}};function b(O){return O.replace(/[A-Z]/g,function(B){return String.fromCharCode(B.charCodeAt(0)+32)})}function h(O){for(var B=Object.create(null),w=O.split(`\r
`),L=0;L<w.length;L+=1){var se=w[L],Me=se.split(": "),rt=Me.shift(),xt=Me.join(": ");B[b(rt)]=xt}this._map=B}h.prototype.get=function(O){return this._map[b(O)]},o!=null&&o.HEADERS_RECEIVED==null&&(o.HEADERS_RECEIVED=2);function C(){}C.prototype.open=function(O,B,w,L,se,Me,rt){O.open("GET",se);var xt=0;O.onprogress=function(){var et=O.responseText,Wt=et.slice(xt);xt+=Wt.length,w(Wt)},O.onerror=function(et){et.preventDefault(),L(new Error("NetworkError"))},O.onload=function(){L(null)},O.onabort=function(){L(null)},O.onreadystatechange=function(){if(O.readyState===o.HEADERS_RECEIVED){var et=O.status,Wt=O.statusText,fe=O.getResponseHeader("Content-Type"),Ae=O.getAllResponseHeaders();B(et,Wt,fe,new h(Ae))}},O.withCredentials=Me;for(var ut in rt)Object.prototype.hasOwnProperty.call(rt,ut)&&O.setRequestHeader(ut,rt[ut]);return O.send(),O};function p(O){this._headers=O}p.prototype.get=function(O){return this._headers.get(O)};function be(){}be.prototype.open=function(O,B,w,L,se,Me,rt){var xt=null,ut=new ie,et=ut.signal,Wt=new Z;return q(se,{headers:rt,credentials:Me?"include":"same-origin",signal:et,cache:"no-store"}).then(function(fe){return xt=fe.body.getReader(),B(fe.status,fe.statusText,fe.headers.get("Content-Type"),new p(fe.headers)),new te(function(Ae,Xe){var St=function(){xt.read().then(function(pt){if(pt.done)Ae(void 0);else{var Tt=Wt.decode(pt.value,{stream:!0});w(Tt),St()}}).catch(function(pt){Xe(pt)})};St()})}).catch(function(fe){if(fe.name!=="AbortError")return fe}).then(function(fe){L(fe)}),{abort:function(){xt!=null&&xt.cancel(),ut.abort()}}};function ge(){this._listeners=Object.create(null)}function ye(O){W(function(){throw O},0)}ge.prototype.dispatchEvent=function(O){O.target=this;var B=this._listeners[O.type];if(B!=null)for(var w=B.length,L=0;L<w;L+=1){var se=B[L];try{typeof se.handleEvent=="function"?se.handleEvent(O):se.call(this,O)}catch(Me){ye(Me)}}},ge.prototype.addEventListener=function(O,B){O=String(O);var w=this._listeners,L=w[O];L==null&&(L=[],w[O]=L);for(var se=!1,Me=0;Me<L.length;Me+=1)L[Me]===B&&(se=!0);se||L.push(B)},ge.prototype.removeEventListener=function(O,B){O=String(O);var w=this._listeners,L=w[O];if(L!=null){for(var se=[],Me=0;Me<L.length;Me+=1)L[Me]!==B&&se.push(L[Me]);se.length===0?delete w[O]:w[O]=se}};function ne(O){this.type=O,this.target=void 0}function oe(O,B){ne.call(this,O),this.data=B.data,this.lastEventId=B.lastEventId}oe.prototype=Object.create(ne.prototype);function X(O,B){ne.call(this,O),this.status=B.status,this.statusText=B.statusText,this.headers=B.headers}X.prototype=Object.create(ne.prototype);function xe(O,B){ne.call(this,O),this.error=B.error}xe.prototype=Object.create(ne.prototype);var It=-1,P=0,Jt=1,me=2,Lt=-1,Ct=0,je=1,nt=2,Te=3,gt=/^text\/event\-stream(;.*)?$/i,de=1e3,G=18e6,Pe=function(O,B){var w=O==null?B:parseInt(O,10);return w!==w&&(w=B),ce(w)},ce=function(O){return Math.min(Math.max(O,de),G)},le=function(O,B,w){try{typeof B=="function"&&B.call(O,w)}catch(L){ye(L)}};function Be(O,B){ge.call(this),B=B||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,ct(this,O,B)}function st(){return o!=null&&"withCredentials"in o.prototype||U==null?new o:new U}var Kt=q!=null&&D!=null&&"body"in D.prototype;function ct(O,B,w){B=String(B);var L=Boolean(w.withCredentials),se=w.lastEventIdQueryParameterName||"lastEventId",Me=ce(1e3),rt=Pe(w.heartbeatTimeout,45e3),xt="",ut=Me,et=!1,Wt=0,fe=w.headers||{},Ae=w.Transport,Xe=Kt&&Ae==null?void 0:new l(Ae!=null?new Ae:st()),St=Ae!=null&&typeof Ae!="string"?new Ae:Xe==null?new be:new C,pt=void 0,Tt=0,Dt=It,$e="",ot="",Bt="",_e="",Je=Ct,Ee=0,it=0,at=function(He,ve,Ie,lt){if(Dt===P)if(He===200&&Ie!=null&&gt.test(Ie)){Dt=Jt,et=Date.now(),ut=Me,O.readyState=Jt;var $t=new X("open",{status:He,statusText:ve,headers:lt});O.dispatchEvent($t),le(O,O.onopen,$t)}else{var j="";He!==200?(ve&&(ve=ve.replace(/\s+/g," ")),j="EventSource's response has a status "+He+" "+ve+" that is not 200. Aborting the connection."):j="EventSource's response has a Content-Type specifying an unsupported type: "+(Ie==null?"-":Ie.replace(/\s+/g," "))+". Aborting the connection.",on();var $t=new X("error",{status:He,statusText:ve,headers:lt});O.dispatchEvent($t),le(O,O.onerror,$t),console.error(j)}},Pt=function(He){if(Dt===Jt){for(var ve=-1,Ie=0;Ie<He.length;Ie+=1){var lt=He.charCodeAt(Ie);(lt===`
`.charCodeAt(0)||lt==="\r".charCodeAt(0))&&(ve=Ie)}var $t=(ve!==-1?_e:"")+He.slice(0,ve+1);_e=(ve===-1?_e:"")+He.slice(ve+1),He!==""&&(et=Date.now(),Wt+=He.length);for(var j=0;j<$t.length;j+=1){var lt=$t.charCodeAt(j);if(Je===Lt&&lt===`
`.charCodeAt(0))Je=Ct;else if(Je===Lt&&(Je=Ct),lt==="\r".charCodeAt(0)||lt===`
`.charCodeAt(0)){if(Je!==Ct){Je===je&&(it=j+1);var he=$t.slice(Ee,it-1),ze=$t.slice(it+(it<j&&$t.charCodeAt(it)===" ".charCodeAt(0)?1:0),j);he==="data"?($e+=`
`,$e+=ze):he==="id"?ot=ze:he==="event"?Bt=ze:he==="retry"?(Me=Pe(ze,Me),ut=Me):he==="heartbeatTimeout"&&(rt=Pe(ze,rt),Tt!==0&&(A(Tt),Tt=W(function(){Ze()},rt)))}if(Je===Ct){if($e!==""){xt=ot,Bt===""&&(Bt="message");var ht=new oe(Bt,{data:$e.slice(1),lastEventId:ot});if(O.dispatchEvent(ht),Bt==="open"?le(O,O.onopen,ht):Bt==="message"?le(O,O.onmessage,ht):Bt==="error"&&le(O,O.onerror,ht),Dt===me)return}$e="",Bt=""}Je=lt==="\r".charCodeAt(0)?Lt:Ct}else Je===Ct&&(Ee=j,Je=je),Je===je?lt===":".charCodeAt(0)&&(it=j+1,Je=nt):Je===nt&&(Je=Te)}}},Nt=function(He){if(Dt===Jt||Dt===P){Dt=It,Tt!==0&&(A(Tt),Tt=0),Tt=W(function(){Ze()},ut),ut=ce(Math.min(Me*16,ut*2)),O.readyState=P;var ve=new xe("error",{error:He});O.dispatchEvent(ve),le(O,O.onerror,ve),He!=null&&console.error(He)}},on=function(){Dt=me,pt!=null&&(pt.abort(),pt=void 0),Tt!==0&&(A(Tt),Tt=0),O.readyState=me},Ze=function(){if(Tt=0,Dt!==It){if(!et&&pt!=null)Nt(new Error("No activity within "+rt+" milliseconds. "+(Dt===P?"No response received.":Wt+" chars received.")+" Reconnecting.")),pt!=null&&(pt.abort(),pt=void 0);else{var He=Math.max((et||Date.now())+rt-Date.now(),1);et=!1,Tt=W(function(){Ze()},He)}return}et=!1,Wt=0,Tt=W(function(){Ze()},rt),Dt=P,$e="",Bt="",ot=xt,_e="",Ee=0,it=0,Je=Ct;var ve=B;if(B.slice(0,5)!=="data:"&&B.slice(0,5)!=="blob:"&&xt!==""){var Ie=B.indexOf("?");ve=Ie===-1?B:B.slice(0,Ie+1)+B.slice(Ie+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(ze,ht){return ht===se?"":ze}),ve+=(B.indexOf("?")===-1?"?":"&")+se+"="+encodeURIComponent(xt)}var lt=O.withCredentials,$t={};$t.Accept="text/event-stream";var j=O.headers;if(j!=null)for(var he in j)Object.prototype.hasOwnProperty.call(j,he)&&($t[he]=j[he]);try{pt=St.open(Xe,at,Pt,Nt,ve,lt,$t)}catch(ze){throw on(),ze}};O.url=B,O.readyState=P,O.withCredentials=L,O.headers=fe,O._close=on,Ze()}Be.prototype=Object.create(ge.prototype),Be.prototype.CONNECTING=P,Be.prototype.OPEN=Jt,Be.prototype.CLOSED=me,Be.prototype.close=function(){this._close()},Be.CONNECTING=P,Be.OPEN=Jt,Be.CLOSED=me,Be.prototype.withCredentials=void 0;var Zt=we;o!=null&&(we==null||!("withCredentials"in we.prototype))&&(Zt=Be),function(O){if(typeof Rn.exports=="object"){var B=O(kt);B!==void 0&&(Rn.exports=B)}else r=[kt],e=O,m=typeof e=="function"?e.apply(kt,r):e,m!==void 0&&(Rn.exports=m)}(function(O){O.EventSourcePolyfill=Be,O.NativeEventSource=we,O.EventSource=Zt})})(typeof globalThis=="undefined"?typeof window!="undefined"?window:typeof self!="undefined"?self:this:globalThis)},42054:(Rn,kt,e)=>{"use strict";e.d(kt,{S:()=>S,b:()=>q,c:()=>Q});var r=e(2784),m=e(30705),u=e(79692),W=e(86136),A=e(49378),o=e(95544),U=e(38402),We=e(11776),we=e(90436),a=e(49558);const te=(0,u.Z)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),q=l=>{const{text:b,preTag:h,postTag:C}=l,p=te(),be=(0,r.useMemo)(()=>b.split(new RegExp(`(${h}.+?${C})`)),[C,h,b]);return r.createElement(r.Fragment,null,be.map((ge,ye)=>ge.includes(h)?r.createElement("mark",{className:p.highlight,key:ye},ge.replace(new RegExp(`${h}|${C}`,"g"),"")):ge))},D=({result:l,highlight:b,icon:h,secondaryAction:C,lineClamp:p=5})=>l?r.createElement(r.Fragment,null,h&&r.createElement(W.Z,null,h),r.createElement(A.Z,{primaryTypographyProps:{variant:"h6"},primary:r.createElement(a.rU,{noTrack:!0,to:l.location},b!=null&&b.fields.title?r.createElement(q,{text:(b==null?void 0:b.fields.title)||"",preTag:(b==null?void 0:b.preTag)||"",postTag:(b==null?void 0:b.postTag)||""}):l.title),secondary:r.createElement(we.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:p,overflow:"hidden"},color:"textSecondary",variant:"body2"},b!=null&&b.fields.text?r.createElement(q,{text:b.fields.text,preTag:b.preTag,postTag:b.postTag}):l.text)}),C&&r.createElement(o.Z,{alignItems:"flex-end"},C)):null,Z=l=>r.createElement(m.fC,{attributes:{pluginId:"search",extension:"DefaultResultListItem"}},r.createElement(D,{...l})),Le="search.results.list.items.extensions.v1",ie=(l,b)=>{for(const h of l){if(!(0,r.isValidElement)(h))continue;const C=(0,m.IY)(h,Le);if(C!=null&&C(b))return(0,r.cloneElement)(h,{rank:b.rank,highlight:b.highlight,result:b.document,...h.props})}return null},re=l=>{const{rank:b,result:h,noTrack:C,children:p,alignItems:be="flex-start",...ge}=l,ye=(0,m.z$)(),ne=(0,r.useCallback)(()=>{C||h&&ye.captureEvent("discover",h.title,{attributes:{to:h.location},value:b})},[b,h,C,ye]);return r.createElement(U.Z,{divider:!0,alignItems:be,onClickCapture:ne,...ge},p)},Q=l=>{const{name:b,component:h,predicate:C=()=>!0}=l;return(0,m.YO)({name:b,component:{lazy:()=>h().then(p=>be=>r.createElement(re,{rank:be.rank,result:be.result,noTrack:be.noTrack},(0,r.createElement)(p,be)))},data:{[Le]:C}})},H=l=>{const b=(0,m.vJ)(l,h=>h.selectByComponentData({key:Le}).getElements(),[l]);return(0,r.useCallback)((h,C)=>{const p=ie(b,h);return r.createElement(r.Fragment,{key:C},p!=null?p:r.createElement(re,{rank:h.rank,result:h.document},r.createElement(Z,{rank:h.rank,highlight:h.highlight,result:h.document})))},[b])},S=l=>{const{results:b,children:h,...C}=l,p=H(h);return r.createElement(We.Z,{...C},b.map(p))}},92573:(Rn,kt,e)=>{"use strict";e.d(kt,{E1:()=>le,GQ:()=>on,Nd:()=>G,Rx:()=>je,US:()=>ce,ay:()=>rt,gK:()=>me,lt:()=>pt,qO:()=>ct,wy:()=>Wt});var r=e(57032),m=e(30705),u=e(42054),W=e(50581),A=e(61837),o=e(86619),U=e(79692),We=e(4614),we=e(7089),a=e(42494),te=e(84899),q=e(5806),D=e(21324),Z=e(56939),Le=e(73698),ie=e(12231),re=e(90436),Q=e(28899),H=e(77277),S=e(21853),l=e(2784),b=e(48760),h=e(76635),C=e.n(h),p=e(64279),be=e(1849),ge=e(18473),ye=e(88013),ne=e(69294),oe=e(49558),X=e(37794),xe=e.n(X),It=e(27742),P=e(35352),Jt=e(48834).Buffer;const me=(0,r.c)({id:"plugin.search.queryservice"});class Lt{constructor(He){this.mockedResults=He}query(){return Promise.resolve(this.mockedResults||{results:[]})}}const Ct=(0,ge.CT)("search-context"),je=()=>{const Ze=(0,l.useContext)(Ct);if(!Ze)throw new Error("useSearch must be used within a SearchContextProvider");const He=Ze.atVersion(1);if(!He)throw new Error("No SearchContext v1 found");return He},nt=()=>(0,l.useContext)(Ct)!==void 0,Te={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},gt=(Ze=Te)=>{var He,ve,Ie,lt;const $t=(0,r.u)(me),j=(0,m.z$)(),[he,ze]=(0,l.useState)(Ze.term),[ht,sn]=(0,l.useState)(Ze.types),[Qt,x]=(0,l.useState)(Ze.filters),[Y,Ye]=(0,l.useState)(Ze.pageLimit),[Et,zt]=(0,l.useState)(Ze.pageCursor),Ft=(0,be.Z)(he),gn=(0,be.Z)(Qt),cn=(0,p.default)(async()=>{var ln,dn;const un=await $t.query({term:he,types:ht,filters:Qt,pageLimit:Y,pageCursor:Et});return he&&j.captureEvent("search",he,{value:(dn=(ln=cn.value)==null?void 0:ln.numberOfResults)!=null?dn:void 0}),un},[he,ht,Qt,Y,Et]),An=!cn.loading&&!cn.error&&((He=cn.value)==null?void 0:He.nextPageCursor),Fe=!cn.loading&&!cn.error&&((ve=cn.value)==null?void 0:ve.previousPageCursor),qe=(0,l.useCallback)(()=>{var ln;zt((ln=cn.value)==null?void 0:ln.nextPageCursor)},[(Ie=cn.value)==null?void 0:Ie.nextPageCursor]),At=(0,l.useCallback)(()=>{var ln;zt((ln=cn.value)==null?void 0:ln.previousPageCursor)},[(lt=cn.value)==null?void 0:lt.previousPageCursor]);return(0,l.useEffect)(()=>{Ft!==void 0&&he!==Ft&&zt(void 0)},[he,Ft,zt]),(0,l.useEffect)(()=>{gn!==void 0&&!(0,h.isEqual)(Qt,gn)&&zt(void 0)},[Qt,gn,zt]),{result:cn,term:he,setTerm:ze,types:ht,setTypes:sn,filters:Qt,setFilters:x,pageLimit:Y,setPageLimit:Ye,pageCursor:Et,setPageCursor:zt,fetchNextPage:An?qe:void 0,fetchPreviousPage:Fe?At:void 0}},de=Ze=>{const{initialState:He,children:ve}=Ze,Ie=gt(He);return l.createElement(m.fC,{attributes:{searchTypes:Ie.types.sort().join(",")}},l.createElement(Ct.Provider,{value:(0,ge.EI)({1:Ie})},ve))},G=Ze=>{const{initialState:He,inheritParentContextIfAvailable:ve,children:Ie}=Ze,lt=nt(),$t=(0,r.u)(r.p),j=He!=null?He:{},he=$t.has("search.query.pageLimit")?{pageLimit:$t.getNumber("search.query.pageLimit")}:{},ze={...Te,...j,...he};return lt&&ve?l.createElement(l.Fragment,null,Ie):l.createElement(de,{initialState:ze},Ie)};function Pe(Ze){return(0,l.forwardRef)((He,ve)=>l.createElement(G,{inheritParentContextIfAvailable:!0},l.createElement(Ze,{...He,ref:ve})))}const ce=Pe((0,l.forwardRef)((Ze,He)=>{const{onChange:ve,onKeyDown:Ie=()=>{},onClear:lt=()=>{},onSubmit:$t=()=>{},debounceTime:j=200,clearButton:he=!0,fullWidth:ze=!0,value:ht,label:sn,placeholder:Qt,inputProps:x={},InputProps:Y={},endAdornment:Ye,...Et}=Ze,zt=(0,r.u)(r.p),[Ft,gn]=(0,l.useState)(""),cn=(0,l.useRef)("");(0,l.useEffect)(()=>{gn(un=>un===cn.current?String(ht):un)},[ht,cn]),(0,b.Z)(()=>{cn.current=Ft,ve(Ft)},j,[Ft]);const An=(0,l.useCallback)(un=>{gn(un.target.value)},[gn]),Fe=(0,l.useCallback)(un=>{Ie&&Ie(un),$t&&un.key==="Enter"&&$t()},[Ie,$t]),qe=(0,l.useCallback)(()=>{cn.current="",ve(""),gn(""),lt&&lt()},[ve,lt]),At=sn?void 0:"Search",tn=Qt!=null?Qt:`Search in ${zt.getOptionalString("app.title")||"Backstage"}`,ln=l.createElement(W.Z,{position:"start"},l.createElement(A.Z,{"aria-label":"Query",size:"small",disabled:!0},l.createElement(S.Z,null))),dn=l.createElement(W.Z,{position:"end"},l.createElement(H.Z,{"aria-label":"Clear",size:"small",onClick:qe,onKeyDown:un=>{un.key==="Enter"&&un.stopPropagation()}},"Clear"));return l.createElement(o.Z,{id:"search-bar-text-field","data-testid":"search-bar-next",variant:"outlined",margin:"normal",inputRef:He,value:Ft,label:sn,placeholder:tn,InputProps:{startAdornment:ln,endAdornment:he?dn:Ye,...Y},inputProps:{"aria-label":At,...x},fullWidth:ze,onChange:An,onKeyDown:Fe,...Et})})),le=Pe((0,l.forwardRef)((Ze,He)=>{const{value:ve="",onChange:Ie,...lt}=Ze,{term:$t,setTerm:j}=je();(0,l.useEffect)(()=>{ve&&j(String(ve))},[ve,j]);const he=(0,l.useCallback)(ze=>{Ie?Ie(ze):j(ze)},[Ie,j]);return l.createElement(m.fC,{attributes:{pluginId:"search",extension:"SearchBar"}},l.createElement(ce,{...lt,ref:He,value:$t,onChange:he}))})),Be=(0,U.Z)(Ze=>({loading:{right:Ze.spacing(1),position:"absolute"}})),st=Ze=>He=>l.createElement(G,{inheritParentContextIfAvailable:!0},l.createElement(Ze,{...He})),Kt=()=>{const Ze=Be();return l.createElement(We.Z,{className:Ze.loading,"data-testid":"search-autocomplete-progressbar",color:"inherit",size:20})},ct=st(function(He){const{loading:ve,value:Ie,onChange:lt=()=>{},options:$t=[],getOptionLabel:j=cn=>String(cn),inputPlaceholder:he,inputDebounceTime:ze,freeSolo:ht=!0,fullWidth:sn=!0,clearOnBlur:Qt=!1,"data-testid":x="search-autocomplete",...Y}=He,{setTerm:Ye}=je(),Et=(0,l.useCallback)(cn=>cn?typeof cn=="string"?cn:j(cn):"",[j]),zt=(0,l.useMemo)(()=>Et(Ie),[Ie,Et]),Ft=(0,l.useCallback)((cn,An,Fe,qe)=>{Ye(Et(An)),lt(cn,An,Fe,qe)},[Et,Ye,lt]),gn=(0,l.useCallback)(({InputProps:{ref:cn,className:An,endAdornment:Fe},InputLabelProps:qe,...At})=>l.createElement(le,{...At,ref:cn,clearButton:!1,value:zt,placeholder:he,debounceTime:ze,endAdornment:ve?l.createElement(Kt,null):Fe,InputProps:{className:An}}),[ve,zt,he,ze]);return l.createElement(ye.ZP,{...Y,"data-testid":x,value:Ie,onChange:Ft,options:$t,getOptionLabel:j,renderInput:gn,freeSolo:ht,fullWidth:sn,clearOnBlur:Qt})}),Zt=Ze=>{const{icon:He,primaryText:ve,primaryTextTypographyProps:Ie,secondaryText:lt,secondaryTextTypographyProps:$t,disableTextTypography:j}=Ze;return React.createElement(React.Fragment,null,He?React.createElement(ListItemIcon,null,He):null,React.createElement(ListItemText,{primary:ve,primaryTypographyProps:Ie,secondary:lt,secondaryTypographyProps:$t,disableTypography:j}))},O=(Ze,He,ve=[],Ie=250)=>{const lt=(0,l.useRef)({}),$t=Ze||(()=>Promise.resolve([])),[j,he]=(0,ne.default)($t,[He],{loading:!0});if((0,b.Z)(()=>{lt.current[He]===void 0&&(lt.current[He]=he(He).then(ht=>(lt.current[He]=ht,ht)))},Ie,[he,He]),ve.length)return{loading:!1,value:ve};const ze=lt.current[He];return Array.isArray(ze)?{loading:!1,value:ze}:j},B=(Ze,He)=>{const{setFilters:ve}=je();(0,l.useEffect)(()=>{He&&[He].flat().length>0&&ve(Ie=>({...Ie,[Ze]:He}))},[])},w=Ze=>{const{className:He,defaultValue:ve,name:Ie,values:lt,valuesDebounceMs:$t,label:j,filterSelectedOptions:he,limitTags:ze,multiple:ht}=Ze,[sn,Qt]=(0,l.useState)("");B(Ie,ve);const x=typeof lt=="function"?lt:void 0,Y=typeof lt=="function"?void 0:lt,{value:Ye,loading:Et}=O(x,sn,Y,$t),{filters:zt,setFilters:Ft}=je(),gn=zt[Ie]||(ht?[]:null),cn=(qe,At)=>{Ft(tn=>{const{[Ie]:ln,...dn}=tn;return At?{...dn,[Ie]:At}:{...dn}})},An=qe=>l.createElement(o.Z,{...qe,name:"search",variant:"outlined",label:j,fullWidth:!0}),Fe=(qe,At)=>qe.map((tn,ln)=>l.createElement(we.Z,{label:tn,color:"primary",...At({index:ln})}));return l.createElement(ye.ZP,{filterSelectedOptions:he,limitTags:ze,multiple:ht,className:He,id:`${ht?"multi-":""}select-filter-${Ie}--select`,options:Ye||[],loading:Et,value:gn,onChange:cn,onInputChange:(qe,At)=>Qt(At),renderInput:An,renderTags:Fe})},L=(0,U.Z)({label:{textTransform:"capitalize"},checkboxWrapper:{display:"flex",alignItems:"center",width:"100%"},textWrapper:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),se=Ze=>{const{className:He,defaultValue:ve,label:Ie,name:lt,values:$t=[],valuesDebounceMs:j}=Ze,he=L(),{filters:ze,setFilters:ht}=je();B(lt,ve);const sn=typeof $t=="function"?$t:void 0,Qt=typeof $t=="function"?void 0:$t,{value:x=[],loading:Y}=O(sn,"",Qt,j),Ye=Et=>{const{target:{value:zt,checked:Ft}}=Et;ht(gn=>{const{[lt]:cn,...An}=gn,Fe=(cn||[]).filter(At=>At!==zt),qe=Ft?[...Fe,zt]:Fe;return qe.length?{...An,[lt]:qe}:An})};return l.createElement(a.Z,{className:He,disabled:Y,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},Ie?l.createElement(te.Z,{className:he.label},Ie):null,x.map(Et=>{var zt;return l.createElement(q.Z,{key:Et,classes:{root:he.checkboxWrapper,label:he.textWrapper},label:Et,control:l.createElement(D.Z,{color:"primary",inputProps:{"aria-labelledby":Et},value:Et,name:Et,onChange:Ye,checked:((zt=ze[lt])!=null?zt:[]).includes(Et)})})}))},Me=Ze=>{const{className:He,defaultValue:ve,label:Ie,name:lt,values:$t,valuesDebounceMs:j}=Ze,he=L();B(lt,ve);const ze=typeof $t=="function"?$t:void 0,ht=typeof $t=="function"?void 0:$t,{value:sn=[],loading:Qt}=O(ze,"",ht,j),{filters:x,setFilters:Y}=je(),Ye=Et=>{const{target:{value:zt}}=Et;Y(Ft=>{const{[lt]:gn,...cn}=Ft;return zt?{...cn,[lt]:zt}:cn})};return l.createElement(a.Z,{disabled:Qt,className:He,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},Ie?l.createElement(Z.Z,{className:he.label,margin:"dense"},Ie):null,l.createElement(Le.Z,{variant:"outlined",value:x[lt]||"",onChange:Ye},l.createElement(ie.Z,{value:""},l.createElement("em",null,"All")),sn.map(Et=>l.createElement(ie.Z,{key:Et,value:Et},l.createElement(re.Z,{variant:"inherit",noWrap:!0},Et)))))},rt=Ze=>{const{component:He,...ve}=Ze;return l.createElement(He,{...ve})};rt.Checkbox=Ze=>l.createElement(rt,{...Ze,component:se}),rt.Select=Ze=>l.createElement(rt,{...Ze,component:Me}),rt.Autocomplete=Ze=>l.createElement(rt,{...Ze,component:w});const xt=Ze=>Jt.from(Ze.toString(),"utf-8").toString("base64"),ut=Ze=>Ze?Number(Jt.from(Ze,"base64").toString("utf-8")):0,et=Ze=>{const{total:He=-1,cursor:ve,hasNextPage:Ie,onCursorChange:lt,limit:$t=25,limitLabel:j="Results per page:",limitText:he=({from:Ye,to:Et})=>He>0?`of ${He}`:`${Ye}-${Et}`,limitOptions:ze,onLimitChange:ht,...sn}=Ze,Qt=(0,l.useMemo)(()=>ut(ve),[ve]),x=(0,l.useCallback)((Ye,Et)=>{lt==null||lt(xt(Et))},[lt]),Y=(0,l.useCallback)(Ye=>{const Et=Ye.target.value;ht==null||ht(parseInt(Et,10))},[ht]);return l.createElement(Q.Z,{...sn,component:"div",count:He,page:Qt,nextIconButtonProps:{...Ie!==void 0&&{disabled:!Ie}},onPageChange:x,rowsPerPage:$t,labelRowsPerPage:j,labelDisplayedRows:he,rowsPerPageOptions:ze,onRowsPerPageChange:Y})},Wt=Ze=>{const{pageLimit:He,setPageLimit:ve,pageCursor:Ie,setPageCursor:lt,fetchNextPage:$t}=je(),j=(0,l.useCallback)(he=>{ve(he),lt(void 0)},[ve,lt]);return l.createElement(et,{...Ze,hasNextPage:!!$t,limit:He,onLimitChange:j,cursor:Ie,onCursorChange:lt})},fe=Ze=>{const{children:He}=Ze,ve=je(),{result:Ie,...lt}=ve;return He(Ie,lt)},Ae=Ze=>{const{query:He,children:ve}=Ze,Ie=(0,r.u)(me),lt=(0,p.default)(()=>{const{term:$t="",types:j=[],filters:he={},...ze}=He;return Ie.query({...ze,term:$t,types:j,filters:he})},[He]);return ve(lt,He)},Xe=Ze=>{const{query:He,children:ve}=Ze;return He?l.createElement(Ae,{query:He},ve):l.createElement(fe,null,ve)},St=Ze=>{const{query:He,children:ve,noResultsComponent:Ie=l.createElement(oe.ub,{missing:"data",title:"Sorry, no results were found"}),...lt}=Ze;return l.createElement(Xe,{query:He},({loading:$t,error:j,value:he})=>$t?l.createElement(oe.Ex,null):j?l.createElement(oe.Gk,{title:"Error encountered while fetching search results",error:j}):he!=null&&he.results.length?(0,h.isFunction)(ve)?ve(he):l.createElement(u.S,{...lt,results:he.results},ve):Ie)},pt=Ze=>l.createElement(m.fC,{attributes:{pluginId:"search",extension:"SearchResult"}},l.createElement(St,{...Ze})),Tt=Ze=>{const{error:He,loading:ve,resultItems:Ie,renderResultItem:lt=ze=>React.createElement(HigherOrderDefaultResultListItem,{key:ze.document.location,result:ze.document}),disableRenderingWithNoResults:$t,noResultsComponent:j=$t?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...he}=Ze;return ve?React.createElement(Progress,null):He?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:He}):Ie!=null&&Ie.length?React.createElement(List,{...he},Ie.map(lt)):React.createElement(React.Fragment,null,j)},Dt=Ze=>{const{query:He,renderResultItem:ve,children:Ie,...lt}=Ze,$t=useSearchResultListItemExtensions(Ie);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultList"}},React.createElement(Xe,{query:He},({loading:j,error:he,value:ze})=>React.createElement(Tt,{...lt,error:he,loading:j,resultItems:ze==null?void 0:ze.results,renderResultItem:ve!=null?ve:$t})))},$e=(0,U.Z)(Ze=>({listSubheader:{display:"flex",alignItems:"center"},listSubheaderName:{marginLeft:Ze.spacing(1),textTransform:"uppercase"},listSubheaderChip:{color:Ze.palette.text.secondary,margin:Ze.spacing(0,0,0,1.5)},listSubheaderFilter:{display:"flex",color:Ze.palette.text.secondary,margin:Ze.spacing(0,0,0,1.5)},listSubheaderLink:{marginLeft:"auto",display:"flex",alignItems:"center"},listSubheaderLinkIcon:{fontSize:"inherit",marginLeft:Ze.spacing(.5)}})),ot=Ze=>{const He=$e(),{label:ve,children:Ie,...lt}=Ze;return React.createElement(Chip,{...lt,className:He.listSubheaderFilter,variant:"outlined",label:React.createElement(React.Fragment,null,ve,": ",Ie)})},Bt=()=>null,_e=(0,U.Z)(Ze=>({root:{fontSize:"inherit","&:focus":{outline:"none",background:Ze.palette.common.white},"&:not(:focus)":{cursor:"pointer",color:Ze.palette.primary.main,"&:hover":{textDecoration:"underline"}}}})),Je=Ze=>{const He=_e(),{label:ve,value:Ie="None",onChange:lt,onDelete:$t}=Ze,j=useCallback(he=>{lt(he.target.value)},[lt]);return React.createElement(ot,{label:ve,onDelete:$t},React.createElement(Typography,{role:"textbox",component:"span",className:He.root,onChange:j,contentEditable:!0,suppressContentEditableWarning:!0},Ie==null?void 0:Ie.toString()))},Ee=(0,U.Z)(Ze=>({root:{fontSize:"inherit","&:not(:focus)":{cursor:"pointer",color:Ze.palette.primary.main,"&:hover":{textDecoration:"underline"}},"&:focus":{outline:"none"},"&>div:first-child":{padding:0}}})),it=Ze=>{const He=Ee(),{label:ve,value:Ie="none",onChange:lt,onDelete:$t,children:j}=Ze,he=useCallback(ze=>{lt(ze.target.value)},[lt]);return React.createElement(ot,{label:ve,onDelete:$t},React.createElement(Select,{className:He.root,value:Ie,onChange:he,input:React.createElement(InputBase,null),IconComponent:Bt},React.createElement(MenuItem,{value:"none"},"None"),j))};function at(Ze){const He=$e(),[ve,Ie]=useState(null),{error:lt,loading:$t,icon:j,title:he,titleProps:ze={},link:ht=React.createElement(React.Fragment,null,"See all",React.createElement(ArrowRightIcon,{className:He.listSubheaderLinkIcon})),linkProps:sn={},filterOptions:Qt,renderFilterOption:x=qe=>React.createElement(MenuItem,{key:String(qe),value:String(qe)},String(qe)),filterFields:Y,renderFilterField:Ye,resultItems:Et,renderResultItem:zt=qe=>React.createElement(HigherOrderDefaultResultListItem,{key:qe.document.location,result:qe.document}),disableRenderingWithNoResults:Ft,noResultsComponent:gn=Ft?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...cn}=Ze,An=useCallback(qe=>{Ie(qe.currentTarget)},[]),Fe=useCallback(()=>{Ie(null)},[]);return $t?React.createElement(Progress,null):lt?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:lt}):Et!=null&&Et.length?React.createElement(List,{...cn},React.createElement(ListSubheader,{className:He.listSubheader},j,React.createElement(Typography,{className:He.listSubheaderName,component:"strong",...ze},he),Qt?React.createElement(Chip,{className:He.listSubheaderChip,component:"button",icon:React.createElement(AddIcon,null),variant:"outlined",label:"Add filter","aria-controls":"filters-menu","aria-haspopup":"true",onClick:An}):null,Qt?React.createElement(Menu,{id:"filters-menu",anchorEl:ve,open:Boolean(ve),onClose:Fe,onClick:Fe,keepMounted:!0},Qt.map(x)):null,Y==null?void 0:Y.map(qe=>{var At;return(At=Ye==null?void 0:Ye(qe))!=null?At:null}),React.createElement(Link,{className:He.listSubheaderLink,to:"/search",...sn},ht)),Et.map(zt)):React.createElement(React.Fragment,null,gn)}function Pt(Ze){const{query:He,children:ve,renderResultItem:Ie,linkProps:lt={},...$t}=Ze,j=useSearchResultListItemExtensions(ve);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultGroup"}},React.createElement(Xe,{query:He},({loading:he,error:ze,value:ht},{term:sn,types:Qt,pageCursor:x,filters:Y={}})=>{const Ye=`/search?${qs.stringify({term:sn,types:Qt,filters:Y,pageCursor:x,query:sn},{arrayFormat:"brackets"})}`;return React.createElement(at,{...$t,error:ze,loading:he,linkProps:{to:Ye,...lt},filterFields:Object.keys(Y),resultItems:ht==null?void 0:ht.results,renderResultItem:Ie!=null?Ie:j})}))}const Nt=(0,U.Z)(Ze=>({root:{display:"flex",justifyContent:"space-between",gap:Ze.spacing(2),margin:Ze.spacing(2,0)}})),on=()=>{const{fetchNextPage:Ze,fetchPreviousPage:He}=je(),ve=Nt();return!Ze&&!He?l.createElement(l.Fragment,null):l.createElement("nav",{"aria-label":"pagination navigation",className:ve.root},l.createElement(H.Z,{"aria-label":"previous page",disabled:!He,onClick:He,startIcon:l.createElement(P.Z,null)},"Previous"),l.createElement(H.Z,{"aria-label":"next page",disabled:!Ze,onClick:Ze,endIcon:l.createElement(It.Z,null)},"Next"))}},81024:(Rn,kt,e)=>{"use strict";e.d(kt,{H:()=>gt,S:()=>G,a:()=>Kt,b:()=>nt,c:()=>Te,r:()=>Ct});var r=e(32272),m=e(37794),u=e.n(m),W=e(92573),A=e(30705),o=e(57032),U=e(2784),We=e(1849),we=e(73557),a=e(79692),te=e(94339),q=e(32552),D=e(24579),Z=e(27616),Le=e(8284),ie=e(70660),re=e(11776),Q=e(85256),H=e(38402),S=e(86136),l=e(49378),b=e(99152),h=e(6487),C=e(42494),p=e(56939),be=e(73698),ge=e(7089),ye=e(12231),ne=e(21324),oe=e(62155),X=e(38016),xe=e(56881),It=e(64279),P=Object.defineProperty,Jt=(ct,Zt,O)=>Zt in ct?P(ct,Zt,{enumerable:!0,configurable:!0,writable:!0,value:O}):ct[Zt]=O,me=(ct,Zt,O)=>(Jt(ct,typeof Zt!="symbol"?Zt+"":Zt,O),O);class Lt{constructor(Zt){me(this,"discoveryApi"),me(this,"identityApi"),this.discoveryApi=Zt.discoveryApi,this.identityApi=Zt.identityApi}async query(Zt){const{token:O}=await this.identityApi.getCredentials(),B=u().stringify(Zt),w=`${await this.discoveryApi.getBaseUrl("search")}/query?${B}`,L=await fetch(w,{headers:O?{Authorization:`Bearer ${O}`}:{}});if(!L.ok)throw await r.VL.fromResponse(L);return L.json()}}const Ct=(0,A.NT)({id:"search"}),je=(0,A.rx)({id:"search",apis:[(0,A.ni)({api:W.gK,deps:{discoveryApi:o.q,identityApi:o.t},factory:({discoveryApi:ct,identityApi:Zt})=>new Lt({discoveryApi:ct,identityApi:Zt})})],routes:{root:Ct}}),nt=je.provide((0,A.P4)({name:"SearchPage",component:()=>e.e(3509).then(e.bind(e,53509)).then(ct=>ct.SearchPage),mountPoint:Ct})),Te=je.provide((0,A.CO)({name:"SidebarSearchModal",component:{lazy:()=>e.e(8742).then(e.bind(e,38742)).then(ct=>ct.SidebarSearchModal)}})),gt=je.provide((0,A.CO)({name:"HomePageSearchBar",component:{lazy:()=>e.e(8622).then(e.bind(e,8622)).then(ct=>ct.HomePageSearchBar)}})),de=()=>{const ct=(0,we.TH)(),{term:Zt,setTerm:O,types:B,setTypes:w,pageCursor:L,setPageCursor:se,filters:Me,setFilters:rt}=(0,W.Rx)(),xt=(0,We.Z)(ct.search);return(0,U.useEffect)(()=>{if(ct.search===xt)return;const ut=u().parse(ct.search.substring(1),{arrayLimit:0})||{};ut.filters&&rt(ut.filters),ut.query&&O(ut.query),ut.pageCursor&&se(ut.pageCursor),ut.types&&w(ut.types)},[xt,ct,O,w,se,rt]),(0,U.useEffect)(()=>{const ut=u().stringify({query:Zt,types:B,pageCursor:L,filters:Me},{arrayFormat:"brackets"}),et=`${window.location.pathname}?${ut}`;window.history.replaceState(null,document.title,et)},[Zt,B,L,Me]),null},G=()=>{const ct=(0,we.pC)();return U.createElement(W.Nd,null,U.createElement(de,null),ct)},Pe=(0,a.Z)(ct=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:ct.spacing(1)},icon:{color:ct.palette.common.black},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:ct.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:ct.spacing(2,0),"&.Mui-expanded":{margin:ct.spacing(2,0)}},accordionDetails:{padding:ct.spacing(0,0,1)}})),ce=ct=>{const Zt=Pe(),{filters:O,setPageCursor:B,setTypes:w,term:L,types:se}=(0,W.Rx)(),Me=(0,o.u)(W.gK),[rt,xt]=(0,U.useState)(!0),{defaultValue:ut,name:et,showCounts:Wt,types:fe}=ct,Ae=()=>xt(Dt=>!Dt),Xe=Dt=>()=>{w(Dt!==""?[Dt]:[]),B(void 0),xt(!1)};(0,U.useEffect)(()=>{ut&&w([ut])},[]);const St=[{value:"",name:"All",icon:U.createElement(xe.Z,null)},...fe],pt=se[0]||"",{value:Tt}=(0,It.default)(async()=>{if(!Wt)return{};const Dt=await Promise.all(St.map($e=>$e.value).map(async $e=>{const{numberOfResults:ot}=await Me.query({term:L,types:$e?[$e]:[],filters:se.includes($e)||!se.length&&!$e?O:{},pageLimit:0});return[$e,ot!==void 0?`${ot>=1e4?">10000":ot} results`:" -- "]}));return Object.fromEntries(Dt)},[O,Wt,L,se]);return U.createElement(te.Z,{className:Zt.card},U.createElement(q.Z,{title:et,titleTypographyProps:{variant:"overline"}}),U.createElement(D.Z,{className:Zt.cardContent},U.createElement(Z.Z,{className:Zt.accordion,expanded:rt,onChange:Ae},U.createElement(Le.Z,{classes:{root:Zt.accordionSummary,content:Zt.accordionSummaryContent},expandIcon:U.createElement(X.Z,{className:Zt.icon}),IconButtonProps:{size:"small"}},rt?"Collapse":St.filter(Dt=>Dt.value===pt)[0].name),U.createElement(ie.Z,{classes:{root:Zt.accordionDetails}},U.createElement(re.Z,{className:Zt.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},St.map(Dt=>U.createElement(U.Fragment,{key:Dt.value},U.createElement(Q.Z,null),U.createElement(H.Z,{selected:se[0]===Dt.value||se.length===0&&Dt.value==="",onClick:Xe(Dt.value),button:!0},U.createElement(S.Z,null,(0,U.cloneElement)(Dt.icon,{className:Zt.listItemIcon})),U.createElement(l.Z,{primary:Dt.name,secondary:Tt&&Tt[Dt.value]})))))))))},le=(0,a.Z)(ct=>({tabs:{borderBottom:`1px solid ${ct.palette.textVerySubtle}`},tab:{height:"50px",fontWeight:ct.typography.fontWeightBold,fontSize:ct.typography.pxToRem(13),color:ct.palette.text.primary,minWidth:"130px"}})),Be=ct=>{const Zt=le(),{setPageCursor:O,setTypes:B,types:w}=(0,W.Rx)(),{defaultValue:L,types:se}=ct,Me=(xt,ut)=>{B(ut!==""?[ut]:[]),O(void 0)};(0,U.useEffect)(()=>{L&&B([L])},[]);const rt=[{value:"",name:"All"},...se];return U.createElement(b.Z,{"aria-label":"List of search types tabs",className:Zt.tabs,indicatorColor:"primary",value:w.length===0?"":w[0],onChange:Me},rt.map((xt,ut)=>U.createElement(h.Z,{key:ut,className:Zt.tab,label:xt.name,value:xt.value})))},st=(0,a.Z)(ct=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:ct.spacing(1)},chip:{margin:2}})),Kt=ct=>{const{className:Zt,defaultValue:O,name:B,values:w=[]}=ct,L=st(),{types:se,setTypes:Me}=(0,W.Rx)();(0,oe.Z)(()=>{se.length||(O&&Array.isArray(O)?Me(O):O&&Me([O]))});const rt=xt=>{const ut=xt.target.value;Me(ut)};return U.createElement(C.Z,{className:Zt,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},U.createElement(p.Z,{className:L.label,margin:"dense"},B),U.createElement(be.Z,{multiple:!0,variant:"outlined",value:se,onChange:rt,placeholder:"All Results",renderValue:xt=>U.createElement("div",{className:L.chips},xt.map(ut=>U.createElement(ge.Z,{key:ut,label:ut,className:L.chip,size:"small"})))},w.map(xt=>U.createElement(ye.Z,{key:xt,value:xt},U.createElement(ne.Z,{checked:se.indexOf(xt)>-1}),U.createElement(l.Z,{primary:xt})))))};Kt.Accordion=ct=>U.createElement(ce,{...ct}),Kt.Tabs=ct=>U.createElement(Be,{...ct})},72037:(Rn,kt,e)=>{"use strict";e.d(kt,{DS:()=>o,TI:()=>u,V1:()=>m,k6:()=>W});var r=e(57032);const m=(0,r.c)({id:"plugin.sonarqube.service"}),u="sonarqube.org/project-key",W=U=>{var We;return Boolean((We=U.metadata.annotations)==null?void 0:We[u])},A="/",o=U=>{var We;let we,a;const te=(We=U==null?void 0:U.metadata.annotations)==null?void 0:We[u];if(te){const q=te.indexOf(A);q>-1?(we=te.substring(0,q),a=te.substring(q+1)):a=te}return{projectInstance:we,projectKey:a}}},38511:(Rn,kt,e)=>{"use strict";e.d(kt,{LS:()=>nt,Sf:()=>G});var r=e(96279),m=e.n(r),u=e(72037),W=e(78373),A=e(73495),o=e(60364),U=e(43434),We=e(60905),we=e(90436),a=e(7089),te=e(79692),q=e(41128),D=e(31654),Z=e(94992),Le=e(20384),ie=e(28071),re=e(22674),Q=e(94722),H=e(2784),S=e(64279),l=e(47968),b=e(49558),h=e(57032),C=e(30705),p=e(26228),be=Object.defineProperty,ge=(ce,le,Be)=>le in ce?be(ce,le,{enumerable:!0,configurable:!0,writable:!0,value:Be}):ce[le]=Be,ye=(ce,le,Be)=>(ge(ce,typeof le!="symbol"?le+"":le,Be),Be);class ne{constructor(le){ye(this,"discoveryApi"),ye(this,"identityApi"),this.discoveryApi=le.discoveryApi,this.identityApi=le.identityApi}async callApi(le,Be){const{token:st}=await this.identityApi.getCredentials(),Kt=`${await this.discoveryApi.getBaseUrl("sonarqube")}`,ct=await m()(`${Kt}/${le}?${new URLSearchParams(Be).toString()}`,{headers:{"Content-Type":"application/json",...st&&{Authorization:`Bearer ${st}`}}});if(ct.status===200)return await ct.json()}async getFindingSummary({componentKey:le,projectInstance:Be}={}){if(!le)return;const st=Be||"",Kt={alert_status:void 0,bugs:void 0,reliability_rating:void 0,vulnerabilities:void 0,security_rating:void 0,security_hotspots_reviewed:void 0,security_review_rating:void 0,code_smells:void 0,sqale_rating:void 0,coverage:void 0,duplicated_lines_density:void 0},ct=await this.callApi("instanceUrl",{instanceKey:st});let Zt=ct==null?void 0:ct.instanceUrl;if(!Zt)return;Zt.endsWith("/")||(Zt+="/");const O=await this.callApi("findings",{componentKey:le,instanceKey:st});if(O)return O.measures.forEach(B=>{Kt[B.metric]=B.value}),{lastAnalysis:O.analysisDate,metrics:Kt,projectUrl:`${Zt}dashboard?id=${encodeURIComponent(le)}`,getIssuesUrl:B=>`${Zt}project/issues?id=${encodeURIComponent(le)}&types=${B.toLocaleUpperCase("en-US")}&resolved=false`,getComponentMeasuresUrl:B=>`${Zt}component_measures?id=${encodeURIComponent(le)}&metric=${B.toLocaleLowerCase("en-US")}&resolved=false&view=list`,getSecurityHotspotsUrl:()=>`${Zt}${Zt==="https://sonarcloud.io/"?"project/":""}security_hotspots?id=${encodeURIComponent(le)}`}}}const oe=(0,te.Z)(ce=>({root:{height:ce.spacing(3),width:ce.spacing(3)}})),X=({value:ce})=>{const le=oe(),Be=(0,o.Z)();return H.createElement(l.Cd,{strokeLinecap:"butt",percent:+(ce||0),strokeWidth:16,strokeColor:Be.palette.status.ok,trailColor:Be.palette.status.error,trailWidth:16,className:le.root})},xe=(0,te.Z)(ce=>{const le={height:ce.spacing(3),width:ce.spacing(3),color:ce.palette.common.white};return{ratingDefault:{...le,background:ce.palette.status.aborted},ratingA:{...le,background:ce.palette.status.ok},ratingB:{...le,background:(0,q.$n)(ce.palette.status.ok,.5)},ratingC:{...le,background:ce.palette.status.pending},ratingD:{...le,background:ce.palette.status.warning},ratingE:{...le,background:ce.palette.error.main}}}),It=({rating:ce,hideValue:le})=>{const Be=xe(),st=(0,H.useMemo)(()=>{switch(ce){case"1.0":return{name:"A",className:Be.ratingA};case"2.0":return{name:"B",className:Be.ratingB};case"3.0":return{name:"C",className:Be.ratingC};case"4.0":return{name:"D",className:Be.ratingD};case"5.0":return{name:"E",className:Be.ratingE};default:return{name:"",className:Be.ratingDefault}}},[Be,ce]);return H.createElement(U.Z,{className:st.className},!le&&st.name)},P=(0,te.Z)(ce=>({root:{margin:ce.spacing(1,0),minWidth:"140px"},upper:{display:"flex",justifyContent:"center",alignItems:"center"},cardTitle:{textAlign:"center"},wrapIcon:{display:"inline-flex",verticalAlign:"baseline"},left:{display:"flex"},right:{display:"flex",marginLeft:ce.spacing(.5)}})),Jt=({leftSlot:ce,rightSlot:le,title:Be,titleIcon:st,link:Kt})=>{const ct=P();return H.createElement(b.rU,{to:Kt,color:"inherit",underline:"none"},H.createElement(We.Z,{item:!0,className:ct.root},H.createElement(We.Z,{item:!0,className:ct.upper},H.createElement(We.Z,{item:!0,className:ct.left},ce),H.createElement(We.Z,{item:!0,className:ct.right},le)),H.createElement(We.Z,{item:!0,className:ct.cardTitle},H.createElement(we.Z,{variant:"body1",className:ct.wrapIcon},st," ",Be))))},me=(0,te.Z)(ce=>({value:{fontSize:"1.5rem",fontWeight:ce.typography.fontWeightMedium}})),Lt=ce=>{const le=me();return H.createElement(we.Z,{component:"span",className:le.value},ce.value)},Ct=(0,te.Z)(ce=>({badgeLabel:{color:ce.palette.common.white},badgeError:{margin:0,backgroundColor:ce.palette.error.main},badgeSuccess:{margin:0,backgroundColor:ce.palette.success.main},badgeUnknown:{backgroundColor:ce.palette.grey[500]},header:{padding:ce.spacing(2,2,2,2.5)},action:{margin:0},lastAnalyzed:{color:ce.palette.text.secondary}})),je=[{greaterThan:0,rating:"1.0"},{greaterThan:3,rating:"2.0"},{greaterThan:5,rating:"3.0"},{greaterThan:10,rating:"4.0"},{greaterThan:20,rating:"5.0"}],nt=ce=>{const{variant:le="gridItem",duplicationRatings:Be=je}=ce,{entity:st}=(0,W.u)(),Kt=(0,h.u)(u.V1),{projectKey:ct,projectInstance:Zt}=(0,u.DS)(st),{value:O,loading:B}=(0,S.default)(async()=>Kt.getFindingSummary({componentKey:ct,projectInstance:Zt}),[Kt,ct]),w=!B&&O?{title:"View more",link:O.projectUrl}:void 0,L=Ct();let se="Not computed",Me=L.badgeUnknown;if(O!=null&&O.metrics.alert_status){const ut=O.metrics.alert_status==="OK";se=ut?"Gate passed":"Gate failed",Me=ut?L.badgeSuccess:L.badgeError}const rt=!B&&O&&H.createElement(a.Z,{label:se,classes:{root:Me,label:L.badgeLabel}}),xt=(0,H.useMemo)(()=>{if(B||!O||!O.metrics.duplicated_lines_density)return"";let ut="";for(const et of Be)+O.metrics.duplicated_lines_density>=et.greaterThan&&(ut=et.rating);return ut},[B,O,Be]);return H.createElement(b.rJ,{title:"Code Quality",deepLink:w,variant:le,headerProps:{action:rt,classes:{root:L.header,action:L.action}}},B&&H.createElement(b.Ex,null),!B&&!ct&&H.createElement(A.sk,{annotation:u.TI}),!B&&ct&&!O&&H.createElement(b.ub,{missing:"info",title:"No information to display",description:`There is no SonarQube project with key '${ct}'.`}),!B&&O&&H.createElement(H.Fragment,null,H.createElement(We.Z,{item:!0,container:!0,direction:"column",justifyContent:"space-between",alignItems:"center",style:{height:"100%"},spacing:0},H.createElement(We.Z,{item:!0,container:!0,justifyContent:"space-around"},H.createElement(Jt,{titleIcon:H.createElement(D.Z,null),title:"Bugs",link:O.getIssuesUrl("BUG"),leftSlot:H.createElement(Lt,{value:O.metrics.bugs}),rightSlot:H.createElement(It,{rating:O.metrics.reliability_rating})}),H.createElement(Jt,{titleIcon:O.metrics.vulnerabilities==="0"?H.createElement(Z.Z,null):H.createElement(Le.Z,null),title:"Vulnerabilities",link:O.getIssuesUrl("VULNERABILITY"),leftSlot:H.createElement(Lt,{value:O.metrics.vulnerabilities}),rightSlot:H.createElement(It,{rating:O.metrics.security_rating})}),H.createElement(Jt,{titleIcon:O.metrics.code_smells==="0"?H.createElement(Q.Z,null):H.createElement(re.Z,null),title:"Code Smells",link:O.getIssuesUrl("CODE_SMELL"),leftSlot:H.createElement(Lt,{value:O.metrics.code_smells}),rightSlot:H.createElement(It,{rating:O.metrics.sqale_rating})}),O.metrics.security_review_rating&&H.createElement(Jt,{titleIcon:H.createElement(ie.Z,null),title:"Hotspots Reviewed",link:O.getSecurityHotspotsUrl(),leftSlot:H.createElement(Lt,{value:O.metrics.security_hotspots_reviewed?`${O.metrics.security_hotspots_reviewed}%`:"\u2014"}),rightSlot:H.createElement(It,{rating:O.metrics.security_review_rating})}),H.createElement("div",{style:{width:"100%"}}),H.createElement(Jt,{link:O.getComponentMeasuresUrl("COVERAGE"),title:"Coverage",leftSlot:H.createElement(X,{value:O.metrics.coverage}),rightSlot:H.createElement(Lt,{value:O.metrics.coverage!==void 0?`${O.metrics.coverage}%`:"\u2014"})}),H.createElement(Jt,{title:"Duplications",link:O.getComponentMeasuresUrl("DUPLICATED_LINES_DENSITY"),leftSlot:H.createElement(It,{rating:xt,hideValue:!0}),rightSlot:H.createElement(Lt,{value:`${O.metrics.duplicated_lines_density}%`})})),H.createElement(We.Z,{item:!0,className:L.lastAnalyzed},"Last analyzed on"," ",p.ou.fromISO(O.lastAnalysis).toLocaleString(p.ou.DATETIME_MED)))))},Te=null,gt=null,de=(0,C.rx)({id:"sonarqube",apis:[(0,C.ni)({api:u.V1,deps:{discoveryApi:h.q,identityApi:h.t},factory:({discoveryApi:ce,identityApi:le})=>new ne({discoveryApi:ce,identityApi:le})})]}),G=de.provide((0,C.CO)({name:"EntitySonarQubeCard",component:{lazy:()=>e.e(9501).then(e.bind(e,69501)).then(ce=>ce.SonarQubeCard)}})),Pe=de.provide((0,C.CO)({name:"EntitySonarQubeContentPage",component:{lazy:()=>e.e(3937).then(e.bind(e,33937)).then(ce=>ce.SonarQubeContentPage)}}))},7310:(Rn,kt,e)=>{"use strict";e.d(kt,{M:()=>W,T:()=>q,a:()=>u});var r=e(57032),m=e(30705);const u=(0,r.c)({id:"plugin.techradar.service"});var W=(D=>(D[D.Down=-1]="Down",D[D.NoChange=0]="NoChange",D[D.Up=1]="Up",D))(W||{});const A=new Array;A.push({id:"adopt",name:"ADOPT",color:"#5BA300",description:"Commodi accusantium culpa sed itaque excepturi rem eum nulla possimus."}),A.push({id:"trial",name:"TRIAL",color:"#009EB0",description:"Recusandae possimus ipsum dolores."}),A.push({id:"assess",name:"ASSESS",color:"#C7BA00",description:"In asperiores repellat error recusandae et adipisci laborum porro."}),A.push({id:"hold",name:"HOLD",color:"#E09B96",description:"Esse mollitia in."});const o=new Array;o.push({id:"infrastructure",name:"Infrastructure"}),o.push({id:"frameworks",name:"Frameworks"}),o.push({id:"languages",name:"Languages"}),o.push({id:"process",name:"Process"});const U=new Array;U.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06"),description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}],key:"javascript",id:"javascript",title:"JavaScript",quadrant:"languages",links:[{url:"https://www.javascript.com/",title:"Learn more"},{url:"https://www.typescriptlang.org/",title:"TypeScript"}],description:'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n```ts\nconst x = "3";\n```\n'}),U.push({timeline:[{moved:-1,ringId:"adopt",date:new Date("2020-08-06"),description:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"}],key:"typescript",id:"typescript",title:"TypeScript",quadrant:"languages",description:"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat"}),U.push({timeline:[{moved:1,ringId:"adopt",date:new Date("2020-08-06"),description:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur"}],links:[{url:"https://webpack.js.org/",title:"Learn more"}],key:"webpack",id:"webpack",title:"Webpack",quadrant:"frameworks"}),U.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],links:[{url:"https://reactjs.org/",title:"Learn more"}],key:"react",id:"react",title:"React",quadrant:"frameworks"}),U.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"code-reviews",id:"code-reviews",title:"Code Reviews",quadrant:"process"}),U.push({timeline:[{moved:0,ringId:"assess",date:new Date("2020-08-06")}],key:"mob-programming",id:"mob-programming",title:"Mob Programming",quadrant:"process"}),U.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"docs-like-code",id:"docs-like-code",title:"Docs-like-code",quadrant:"process"}),U.push({timeline:[{ringId:"hold",date:new Date("2020-08-06")}],key:"force-push",id:"force-push",title:"Force push to master",quadrant:"process"}),U.push({timeline:[{ringId:"adopt",date:new Date("2020-08-06"),description:"long description"},{ringId:"trial",date:new Date("2020-07-05"),description:"long description"}],links:[{url:"https://github.com",title:"Learn more"}],key:"github-actions",id:"github-actions",title:"GitHub Actions",quadrant:"infrastructure"});const We={entries:U,quadrants:o,rings:A};class we{async load(){return We}}const a=(0,m.NT)({id:"tech-radar"}),q=(0,m.rx)({id:"tech-radar",routes:{root:a},apis:[(0,m.ni)(u,new we)]}).provide((0,m.P4)({name:"TechRadarPage",component:()=>e.e(8272).then(e.bind(e,88272)).then(function(D){return D.b}).then(D=>D.RadarPage),mountPoint:a}))},65609:(Rn,kt,e)=>{"use strict";e.d(kt,{EU:()=>et,ql:()=>fe});var r=e(57032),m=e(30705),u=e(66565),W=e(2784),A=e(12576),o=e(15459),U=e(77277),We=e(79692),we=e(8560),a=e(27556),te=e(11433),q=e(60364),D=e(12231),Z=e(49378),Le=e(90436),ie=e(95544),re=e(61837),Q=e(51209),H=e(38016),S=e(82717),l=e.n(S),b=e(1854),h=e(49462),C=e(31654),p=e(49558),be=e(65549),ge=e(17373),ye=e(85224),ne=e(96103);const oe=".md-nav__item--nested .md-toggle",X="@backstage/techdocs-addons/nav-expanded",xe=(0,o.Z)({root:{position:"absolute",left:"220px",top:"19px",padding:0,minWidth:0}})(U.Z),It=(0,o.Z)({root:{height:"20px",width:"20px"}})(Q.Z),P=(0,o.Z)({root:{height:"20px",width:"20px"}})(H.Z),Jt=()=>{const Ae={expandAllNestedNavs:!1},{value:Xe,set:St}=(0,A.Z)(X,{defaultValue:Ae}),[pt,Tt]=(0,W.useState)(!1),[...Dt]=(0,u.pV)([oe]),$e=(0,W.useCallback)(Bt=>{const _e=Bt.checked,Je=Xe==null?void 0:Xe.expandAllNestedNavs;return!!(Je&&!_e||!Je&&_e)},[Xe]);(0,W.useEffect)(()=>{Dt!=null&&Dt.length&&(Tt(!0),Dt.forEach(Bt=>{$e(Bt)&&Bt.click()}))},[Xe,$e,Dt]);const ot=()=>{St(Bt=>({expandAllNestedNavs:!(Bt!=null&&Bt.expandAllNestedNavs)}))};return W.createElement(W.Fragment,null,pt?W.createElement(xe,{size:"small",onClick:ot,"aria-label":Xe!=null&&Xe.expandAllNestedNavs?"collapse-nav":"expand-nav"},Xe!=null&&Xe.expandAllNestedNavs?W.createElement(P,null):W.createElement(It,null)):null)},me="techdocs-report-issue",Lt=`#${me}`,Ct='[title^="Edit this page"]',je='[title^="Leave feedback for"]',nt='[data-md-component="main"] .md-content',Te=(Ae,Xe)=>Xe==="github"?(0,b.BT)(Ae,"blob"):Xe==="gitlab"?(0,b.ah)(Ae,"blob"):(console.error(`Invalid SCM type ${Xe} found in ReportIssue addon for URL ${Ae}!`),Ae),gt=Ae=>{const Xe=Ae.toString().substring(0,70),St=Xe.length===70?"...":"";return`Documentation feedback: ${Xe}${St}`},de=(Ae,Xe,St)=>{const pt="## Documentation Feedback \u{1F4DD}",Tt="#### The highlighted text:",Dt="#### The comment on the text:",$e="_>replace this line with your comment<_",ot=Ae.toString().trim().split(`
`).map(_e=>`> ${_e.trim()}`).join(`
`),Bt=[`${St} URL: <${window.location.href}> 
Markdown URL: <${Xe}>`];return`${pt}

 ${Tt} 

 ${ot}

 ${Dt} 
 ${$e}

 ___
${Bt}`},G=Ae=>{var Xe,St;const pt={title:"",body:""},Tt=(0,u.oi)(Ae),[Dt]=(0,u.pV)([Ct]),$e=(Xe=Dt==null?void 0:Dt.href)!=null?Xe:"",ot=(0,r.u)(h.q3),_e=(0,r.u)(r.p).getOptionalString("app.title")||"Backstage";if(!Tt||!$e)return pt;const Je=(St=ot.byUrl($e))==null?void 0:St.type;return Je?{title:gt(Tt),body:de(Tt,Te($e,Je),_e)}:pt},Pe=()=>{var Ae,Xe;const St=(0,r.u)(h.q3),[pt]=(0,u.pV)([Ct]),Tt=(Ae=pt==null?void 0:pt.href)!=null?Ae:"";if(!Tt)return null;const Dt=(Xe=St.byUrl(Tt))==null?void 0:Xe.type;return Dt?{...l()(Te(Tt,Dt)),type:Dt}:null},ce=(0,We.Z)(Ae=>({root:{display:"grid",gridGap:Ae.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:Ae.palette.common.black,fontSize:Ae.typography.button.fontSize}})),le=({type:Ae})=>Ae==="github"?p.fy:C.Z,Be=({type:Ae})=>Ae==="github"?"Github":"Gitlab",st=(Ae,Xe)=>{const{title:St,body:pt}=Xe,Tt=encodeURIComponent(St),Dt=encodeURIComponent(pt),{protocol:$e,resource:ot,owner:Bt,name:_e,type:Je}=Ae,Ee=`${$e}://${ot}/${Bt}/${_e}`,it=encodeURI(Ee);return Je==="github"?`${it}/issues/new?title=${Tt}&body=${Dt}`:`${it}/issues/new?issue[title]=${Tt}&issue[description]=${Dt}`},Kt=({template:Ae,repository:Xe})=>{const St=ce(),pt=le(Xe),Tt=st(Xe,Ae);return W.createElement(p.rU,{className:St.root,to:Tt,target:"_blank"},W.createElement(pt,null)," Open new ",Be(Xe)," issue")},ct=(0,We.Z)(Ae=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:Ae.spacing(1),zIndex:Ae.zIndex.tooltip,background:Ae.palette.common.white}})),Zt=({debounceTime:Ae=500,templateBuilder:Xe})=>{const St=ct(),[pt,Tt]=(0,W.useState)(),Dt=Pe(),$e=G(Ae),ot=(0,u.oi)(Ae),[Bt,_e]=(0,u.pV)([nt,je]);let[Je]=(0,u.pV)([Lt]);return _e&&(_e.style.display="none"),(0,W.useEffect)(()=>{if(!Dt||!ot||!ot.containsNode(Bt,!0)||ot!=null&&ot.containsNode(Je,!0))return;const Ee=Bt.getBoundingClientRect(),it=ot.getRangeAt(0).getBoundingClientRect();Tt({top:`${it.top-Ee.top-16}px`,left:`${it.left+it.width/2}px`})},[ot,Bt,Je]),!ot||!Dt||!["github","gitlab"].includes(Dt.type)?null:(Je||(Je=document.createElement("div"),Je.setAttribute("id",me),Bt.prepend(Je)),W.createElement(we.Z,{container:Je},W.createElement(a.Z,{"data-testid":"report-issue-addon",className:St.root,style:pt},W.createElement(Kt,{repository:Dt,template:Xe?Xe({selection:ot}):$e}))))},O="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",B=(0,o.Z)(Ae=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:Ae.palette.common.white,boxShadow:O,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:O}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:Ae.palette.common.black,fontSize:Ae.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(te.Z),w={key:"techdocs.addons.settings.textsize",defaultValue:100},L=[{value:90},{value:100},{value:115},{value:130},{value:150}],se=(0,We.Z)(Ae=>({container:{color:Ae.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:Ae.spacing(1)},increaseButton:{marginLeft:Ae.spacing(1)}})),Me=()=>{const Ae=se(),Xe=(0,q.Z)(),[St]=(0,u.pV)(["body"]),[pt,Tt]=(0,W.useState)(()=>{const at=localStorage==null?void 0:localStorage.getItem(w.key);return at?parseInt(at,10):w.defaultValue}),Dt=(0,W.useMemo)(()=>L.map(at=>at.value),[]),$e=(0,W.useMemo)(()=>Dt.indexOf(pt),[Dt,pt]),ot=(0,W.useMemo)(()=>Dt[0],[Dt]),Bt=(0,W.useMemo)(()=>Dt[Dt.length-1],[Dt]),_e=(0,W.useCallback)(()=>`${pt}%`,[pt]),Je=(0,W.useCallback)((at,Pt)=>{Array.isArray(Pt)||(Tt(Pt),localStorage==null||localStorage.setItem(w.key,String(Pt)))},[Tt]),Ee=(0,W.useCallback)(at=>{Je(at,Dt[$e-1])},[$e,Dt,Je]),it=(0,W.useCallback)(at=>{Je(at,Dt[$e+1])},[$e,Dt,Je]);return(0,W.useEffect)(()=>{var at,Pt;if(!St)return;const Nt=(Pt=(at=Xe.typography)==null?void 0:at.htmlFontSize)!=null?Pt:16;St.style.setProperty("--md-typeset-font-size",`${Nt*(pt/100)}px`)},[St,pt,Xe]),W.createElement(D.Z,{className:Ae.menuItem,button:!0,disableRipple:!0},W.createElement(Z.Z,{primary:W.createElement(Le.Z,{variant:"subtitle2",color:"textPrimary"},"Text size"),secondary:W.createElement(ie.Z,{className:Ae.container},W.createElement(re.Z,{className:Ae.decreaseButton,size:"small",edge:"start",disabled:pt===ot,onClick:Ee,"aria-label":"Decrease text size"},W.createElement(ge.Z,null)),W.createElement(B,{value:pt,"aria-labelledby":"text-size-slider",getAriaValueText:_e,valueLabelDisplay:"on",valueLabelFormat:_e,marks:L,step:null,min:ot,max:Bt,onChangeCommitted:Je}),W.createElement(re.Z,{className:Ae.increaseButton,size:"small",edge:"end",disabled:pt===Bt,onClick:it,"aria-label":"Increase text size"},W.createElement(be.Z,null))),disableTypography:!0}))},rt=()=>{const Ae=(0,u.pV)(["img"]);return(0,W.useEffect)(()=>{let Xe=null,St=new ye.Z({pswpModule:ne.Z,initialZoomLevel:1,secondaryZoomLevel:pt=>{const Tt=pt.elementSize.x,Dt=pt.elementSize.y,$e=pt.panAreaSize.x,ot=pt.panAreaSize.y,Bt=$e/Tt,_e=ot/Dt;return Math.min(Bt,_e)},wheelToZoom:!0,arrowPrevSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosIcon" aria-label="fontSize large"><path d="M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"></path></svg>',arrowNextSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon" aria-label="fontSize large"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg>',closeSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CloseIcon" aria-label="fontSize large"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',zoomSVG:`<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomIcon" aria-label="fontSize large">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z" id="photoswipe-zoom-icon-zoomin-path"></path><path d="M12 10H 7 V 9 H 12 Z" id="photoswipe-zoom-icon-zoomout-path">
        </svg>`});return Ae.forEach((pt,Tt)=>{pt.onclick=()=>(Xe===null&&(Xe=Ae.map(Dt=>({element:Dt,src:Dt.src,msrc:Dt.src,alt:Dt.alt,width:Dt.clientWidth,height:Dt.clientHeight}))),St.loadAndOpen(Tt,Xe),!1)}),St.init(),()=>{St.destroy(),St=null}},[Ae]),null},xt=(0,m.rx)({id:"techdocsModuleAddonsContrib"}),ut=xt.provide((0,u.KY)({name:"ExpandableNavigation",location:u.oZ.PrimarySidebar,component:Jt})),et=xt.provide((0,u.KY)({name:"ReportIssue",location:u.oZ.Content,component:Zt})),Wt=xt.provide((0,u.KY)({name:"TextSize",location:u.oZ.Settings,component:Me})),fe=xt.provide((0,u.KY)({name:"LightBox",location:u.oZ.Content,component:rt}))},66565:(Rn,kt,e)=>{"use strict";e.d(kt,{$L:()=>h,DR:()=>re,Dl:()=>p,KY:()=>H,Ox:()=>It,VA:()=>me,ZS:()=>oe,Zz:()=>ie,gT:()=>C,jM:()=>Le,oZ:()=>xe,oi:()=>nt,pV:()=>Ct,ux:()=>Jt,x1:()=>X});var r=e(2784),m=e(73557),u=e(30705),W=e(57032),A=e(64279),o=e(77446),U=e(34520),We=e(18473),we=e(70882),a=e(50236),te=e(19219),q=e(49558),D=e(54073),Z=e.n(D);const Le="techdocs.addons.addon.v1",ie="techdocs.addons.wrapper.v1",re=()=>null;(0,u.R5)(re,ie,!0);const Q=Te=>`${Le}.${Te.toLocaleLowerCase("en-US")}`;function H(Te){const{name:gt,component:de}=Te;return(0,u.YO)({name:gt,component:{sync:G=>r.createElement(de,{...G})},data:{[Le]:Te,[Q(gt)]:!0}})}const S=(Te,gt)=>Te.selectByComponentData({key:gt}).getElements()[0],l=Te=>Te.selectByComponentData({key:ie}).selectByComponentData({key:Le}),b=Te=>Te.selectByComponentData({key:ie}).findComponentData({key:Le}),h=()=>{const Te=(0,m.pC)(),gt=(0,u.vJ)(Te,l),de=(0,u.vJ)(Te,b),G=(0,r.useCallback)(le=>{var Be;if(!gt||!le)return null;const st=Q(le.name);return(Be=S(gt,st))!=null?Be:null},[gt]),Pe=(0,r.useCallback)(le=>{const Be=de.find(st=>st.name===le);return Be?G(Be):null},[de,G]),ce=(0,r.useCallback)(le=>{const Be=de.filter(st=>st.location===le);return Be.length?Be.map(G):null},[de,G]);return{renderComponentByName:Pe,renderComponentsByLocation:ce}},C=(0,W.c)({id:"plugin.techdocs.service"}),p=(0,W.c)({id:"plugin.techdocs.storageservice"});function be(Te,gt){return gt.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(Te.kind=Te.kind.toLocaleLowerCase(),Te.name=Te.name.toLocaleLowerCase(),Te.namespace=Te.namespace.toLocaleLowerCase()),Te}const ge=(Te,gt)=>(0,U.eE)(Te)===(0,U.eE)(gt),ye={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},ne=(0,We.CT)("techdocs-reader-page-context"),oe=(0,r.memo)(Te=>{const{entityRef:gt,children:de}=Te,G=(0,W.u)(C),Pe=(0,W.u)(W.p),ce=(0,A.default)(async()=>G.getEntityMetadata(gt),[gt]),le=(0,o.Z)(async()=>G.getTechDocsMetadata(gt),[gt]),[Be,st]=(0,r.useState)(ye.title),[Kt,ct]=(0,r.useState)(ye.subtitle),[Zt,O]=(0,r.useState)(ye.shadowRoot);(0,r.useEffect)(()=>{Zt&&!le.value&&!le.loading&&le.retry()},[le.value,le.loading,Zt,le.retry,le]);const B={metadata:le,entityRef:be(gt,Pe),entityMetadata:ce,shadowRoot:Zt,setShadowRoot:O,title:Be,setTitle:st,subtitle:Kt,setSubtitle:ct},w=(0,We.EI)({1:B});return r.createElement(u.fC,{attributes:{entityRef:(0,U.eE)(gt)}},r.createElement(ne.Provider,{value:w},de instanceof Function?de(B):de))},(Te,gt)=>ge(Te.entityRef,gt.entityRef)),X=()=>{const Te=(0,r.useContext)(ne);if(Te===void 0)return ye;const gt=Te.atVersion(1);if(gt===void 0)throw new Error("No context found for version 1.");return gt},xe=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"}),It="TECH_DOCS_SHADOW_DOM_STYLE_LOAD",P=Te=>{(0,r.useEffect)(()=>{var gt;if(!Te)return()=>{};const de=Te.querySelectorAll('head > link[rel="stylesheet"]');let G=(gt=de==null?void 0:de.length)!=null?gt:0;const Pe=new CustomEvent(It);if(!G)return Te.dispatchEvent(Pe),()=>{};const ce=()=>{--G===0&&Te.dispatchEvent(Pe)};return de==null||de.forEach(le=>{le.addEventListener("load",ce)}),()=>{de==null||de.forEach(le=>{le.removeEventListener("load",ce)})}},[Te])},Jt=Te=>{const[gt,de]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(!Te)return()=>{};de(!0);const G=Te.style;G.setProperty("opacity","0");const Pe=()=>{de(!1),G.setProperty("opacity","1")};return Te.addEventListener(It,Pe),()=>{Te.removeEventListener(It,Pe)}},[Te]),gt},me=Te=>{const{element:gt,onAppend:de,children:G}=Te,[Pe,ce]=(0,r.useState)((0,we.Ue)({...(0,a.Z)(),insertionPoint:void 0}));P(gt);const le=Jt(gt),Be=(0,r.useCallback)(st=>{if(!gt||!st)return;ce((0,we.Ue)({...(0,a.Z)(),insertionPoint:gt.querySelector("head")||void 0}));let Kt=st.shadowRoot;Kt||(Kt=st.attachShadow({mode:"open"})),Kt.replaceChildren(gt),typeof de=="function"&&de(Kt)},[gt,de]);return r.createElement(r.Fragment,null,le&&r.createElement(q.Ex,null),r.createElement(te.ZP,{jss:Pe,sheetsManager:new Map},r.createElement("div",{ref:Be,"data-testid":"techdocs-native-shadowroot"}),G))},Lt=()=>{const{shadowRoot:Te}=X();return Te},Ct=Te=>{const gt=Lt();return gt?Te.map(de=>gt==null?void 0:gt.querySelectorAll(de)).filter(de=>de.length).map(de=>Array.from(de)).flat():[]},je=Te=>Te.toString()&&Te.rangeCount&&Te.getRangeAt(0).getBoundingClientRect().top,nt=(Te=0)=>{const gt=Lt(),[de,G]=(0,r.useState)(null),Pe=(0,r.useMemo)(()=>Z()(()=>{const ce=gt,le=ce.getSelection?ce.getSelection():document.getSelection();le&&je(le)?G(le):G(null)},Te),[gt,G,Te]);return(0,r.useEffect)(()=>(window.document.addEventListener("selectionchange",Pe),()=>{Pe.cancel(),window.document.removeEventListener("selectionchange",Pe)}),[Pe]),de}},78832:(Rn,kt,e)=>{"use strict";e.d(kt,{E:()=>Le,a:()=>re,c:()=>Q,d:()=>H,t:()=>D});var r=e(2784),m=e(73557),u=e(34520),W=e(66565),A=e(67266),o=e(30705),U=e(57032),We=e(42054),we=e(33019),a=e(38334),te=e(78373),q=e(73495);const D=(0,o.rx)({id:"techdocs",apis:[(0,o.ni)({api:W.Dl,deps:{configApi:U.p,discoveryApi:U.q,identityApi:U.t,fetchApi:U.s},factory:({configApi:ye,discoveryApi:ne,identityApi:oe,fetchApi:X})=>new A.a({configApi:ye,discoveryApi:ne,identityApi:oe,fetchApi:X})}),(0,o.ni)({api:W.gT,deps:{configApi:U.p,discoveryApi:U.q,fetchApi:U.s},factory:({configApi:ye,discoveryApi:ne,fetchApi:oe})=>new A.T({configApi:ye,discoveryApi:ne,fetchApi:oe})})],routes:{root:A.r,docRoot:A.b,entityContent:A.c}}),Z=D.provide((0,o.P4)({name:"TechdocsPage",component:()=>Promise.resolve().then(function(){return ge}).then(ye=>ye.Router),mountPoint:A.r})),Le=D.provide((0,o.P4)({name:"EntityTechdocsContent",component:()=>Promise.resolve().then(function(){return ge}).then(ye=>ye.EmbeddedDocsRouter),mountPoint:A.c})),ie=D.provide((0,o.P4)({name:"TechDocsCustomHome",component:()=>e.e(979).then(e.bind(e,979)).then(ye=>ye.TechDocsCustomHome),mountPoint:A.r})),re=D.provide((0,o.P4)({name:"TechDocsIndexPage",component:()=>Promise.resolve().then(e.bind(e,38334)).then(function(ye){return ye.d}).then(ye=>ye.TechDocsIndexPage),mountPoint:A.r})),Q=D.provide((0,o.P4)({name:"TechDocsReaderPage",component:()=>e.e(4376).then(e.bind(e,34376)).then(ye=>ye.TechDocsReaderPage),mountPoint:A.b})),H=D.provide((0,We.c)({name:"TechDocsSearchResultListItem",component:()=>Promise.resolve().then(e.bind(e,77529)).then(ye=>ye.TechDocsSearchResultListItem),predicate:ye=>ye.type==="techdocs"})),S="backstage.io/techdocs-entity",l=({entity:ye})=>{var ne,oe;let X=(0,u.iB)(ye);if((ne=ye.metadata.annotations)!=null&&ne[S])try{X=(0,u.of)((oe=ye.metadata.annotations)==null?void 0:oe[S])}catch{}return r.createElement(Q,{entityRef:X},r.createElement(we.d,null),r.createElement(we.c,{withSearch:!1}))},b="backstage.io/techdocs-ref",h="backstage.io/techdocs-entity";var ge=Object.freeze({__proto__:null,isTechDocsAvailable:ye=>{var ne,oe,X,xe;return Boolean((oe=(ne=ye==null?void 0:ye.metadata)==null?void 0:ne.annotations)==null?void 0:oe[b])||Boolean((xe=(X=ye==null?void 0:ye.metadata)==null?void 0:X.annotations)==null?void 0:xe[h])},Router:()=>r.createElement(m.Z5,null,r.createElement(m.AW,{path:"/",element:r.createElement(a.c,null)}),r.createElement(m.AW,{path:"/:namespace/:kind/:name/*",element:r.createElement(we.f,null)})),EmbeddedDocsRouter:ye=>{var ne,oe;const{children:X}=ye,{entity:xe}=(0,te.u)(),It=(0,m.V$)([{path:"/*",element:r.createElement(l,{entity:xe}),children:[{path:"*",element:X}]}]);return((ne=xe.metadata.annotations)==null?void 0:ne[b])||((oe=xe.metadata.annotations)==null?void 0:oe[h])?It:r.createElement(q.sk,{annotation:[b]})}})},38334:(Rn,kt,e)=>{"use strict";e.r(kt),e.d(kt,{D:()=>h,E:()=>C,T:()=>p,a:()=>ye,b:()=>ge,c:()=>ne,d:()=>oe,t:()=>Q});var r=e(2784),m=e(73557),u=e(49558),W=e(73495),A=e(78373),o=e(88285),U=e(30705),We=e(57032),we=e(95074),a=e(76635),te=e.n(a),q=e(34520),D=e(67266),Z=e(39981),Le=e(2337),ie=e(11640),re=e(28347);function Q(X,xe){return xe.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?X:X.toLocaleLowerCase("en-US")}const H=(0,Le.Z)({root:{color:"#f3ba37"}})(ie.Z),S={createCopyDocsUrlAction(X){return xe=>({icon:()=>r.createElement(Z.Z,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>X(`${window.location.origin}${xe.resolved.docsUrl}`)})},createStarEntityAction(X,xe){return It=>{const P=It.entity,Jt=X(P);return{cellStyle:{paddingLeft:"1em"},icon:()=>Jt?r.createElement(H,null):r.createElement(re.Z,null),tooltip:Jt?"Remove from favorites":"Add to favorites",onClick:()=>xe(P)}}}};function l(X){return X.metadata.title||X.metadata.name}const b={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:X=>r.createElement(u.uw,{value:r.createElement(u.rU,{to:X.resolved.docsUrl},l(X.entity)),subvalue:X.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:X})=>r.createElement(W.rI,{entityRefs:X.ownedByRelations,defaultKind:"group"})}},createKindColumn(){return{title:"Kind",field:"entity.kind"}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},h=X=>{const{entities:xe,title:It,loading:P,columns:Jt,actions:me,options:Lt}=X,[,Ct]=(0,we.Z)(),je=(0,U.tg)(D.b),nt=(0,We.u)(We.p);if(!xe)return null;const Te=xe.map(ce=>{var le;const Be=(0,A.g)(ce,q.S4);return{entity:ce,resolved:{docsUrl:je({namespace:Q((le=ce.metadata.namespace)!=null?le:"default",nt),kind:Q(ce.kind,nt),name:Q(ce.metadata.name,nt)}),ownedByRelations:Be,ownedByRelationsTitle:Be.map(st=>(0,W.$3)(st,{defaultKind:"group"})).join(", ")}}}),gt=[b.createNameColumn(),b.createOwnerColumn(),b.createKindColumn(),b.createTypeColumn()],de=[S.createCopyDocsUrlAction(Ct)],G=20,Pe=Te&&Te.length>G;return r.createElement(r.Fragment,null,P||Te&&Te.length>0?r.createElement(u.iA,{isLoading:P,options:{paging:Pe,pageSize:G,search:!0,actionsColumnIndex:-1,...Lt},data:Te,columns:Jt||gt,actions:me||de,title:It?`${It} (${Te.length})`:`All (${Te.length})`}):r.createElement(u.ub,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:r.createElement(u.Qj,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};h.columns=b,h.actions=S;const C=X=>{var xe,It;const{columns:P,actions:Jt,options:me}=X,{loading:Lt,error:Ct,entities:je,filters:nt}=(0,W.wp)(),{isStarredEntity:Te,toggleStarredEntity:gt}=(0,W.CR)(),[,de]=(0,we.Z)(),G=(0,a.capitalize)((It=(xe=nt.user)==null?void 0:xe.value)!=null?It:"all"),Pe=[S.createCopyDocsUrlAction(de),S.createStarEntityAction(Te,gt)];return Ct?r.createElement(u.GB,{severity:"error",title:"Could not load available documentation."},r.createElement(u.Oi,{language:"text",text:Ct.toString()})):r.createElement(h,{title:G,entities:je,loading:Lt,actions:Jt||Pe,columns:P,options:me})};C.columns=b,C.actions=S;const p=X=>{var xe;const{children:It}=X,Jt=`Documentation available in ${(xe=(0,We.u)(We.p).getOptionalString("organization.name"))!=null?xe:"Backstage"}`;return r.createElement(u.g9,{title:"Documentation",subtitle:Jt,themeId:"documentation"},It)};class be{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":o.n3}}}const ge=()=>{const{updateFilters:X}=(0,W.wp)();return(0,r.useEffect)(()=>{X({techdocs:new be})},[X]),null},ye=X=>{const{initialFilter:xe="owned",columns:It,actions:P}=X;return r.createElement(p,null,r.createElement(u.VY,null,r.createElement(u.yW,{title:""},r.createElement(u.qt,null,"Discover documentation in your ecosystem.")),r.createElement(W.UO,null,r.createElement(W._i,null,r.createElement(W._i.Filters,null,r.createElement(ge,null),r.createElement(W.EW,{initialFilter:xe}),r.createElement(W.dq,null),r.createElement(W.xE,null)),r.createElement(W._i.Content,null,r.createElement(C,{actions:P,columns:It}))))))},ne=X=>(0,m.pC)()||r.createElement(ye,{...X});var oe=Object.freeze({__proto__:null,TechDocsIndexPage:ne})},33019:(Rn,kt,e)=>{"use strict";e.d(kt,{a:()=>ia,c:()=>Cn,d:()=>Pa,f:()=>Ra});var r=e(2784),m=e(73557),u=e(49558),W=e(66565),A=e(79692),o=e(12420),U=e(60905),We=e(90436),we=e(61837),a=e(77277),te=e(4190),q=e(4614),D=e(41128),Z=e(60364),Le=e(15459),ie=e(80030),re=e(72379),Q=e(41547),H=e(41156),S=e(8560),l=e(15223),b=e(95544),h=e(48348),C=e(92573),p=e(77529),be=e(99688),ge=e(98069),ye=e(87685),ne=e(57032),oe=e(30705),X=e(64279),xe=e(77446),It=e(49462),P=e(35368),Jt=e.n(P),me=e(1854),Lt=e(67097),Ct=e(82717),je=e.n(Ct),nt=e(44882),Te=e(95074),gt=e(18671),de=e(73250),G=e(78373),Pe=e(73495),ce=e(34520),le=e(76635),Be=e.n(le),st=e(67266),Kt=e(47603);function ct({contentLoading:ue,content:Qe,activeSyncState:yt}){return ue||yt==="BUILD_READY_RELOAD"||!Qe&&yt==="CHECKING"?"CHECKING":!Qe&&yt==="BUILDING"?"INITIAL_BUILD":Qe?yt==="BUILDING"?"CONTENT_STALE_REFRESHING":yt==="BUILD_READY"?"CONTENT_STALE_READY":yt==="ERROR"?"CONTENT_STALE_ERROR":"CONTENT_FRESH":"CONTENT_NOT_FOUND"}function Zt(ue,Qe){const yt={...ue};switch(Qe.type){case"sync":Qe.state==="CHECKING"&&(yt.buildLog=[]),yt.activeSyncState=Qe.state,yt.syncError=Qe.syncError;break;case"contentLoading":yt.contentLoading=!0,yt.contentError=void 0;break;case"content":typeof Qe.path=="string"&&(yt.path=Qe.path),yt.contentLoading=!1,yt.content=Qe.content,yt.contentError=Qe.contentError;break;case"buildLog":yt.buildLog=yt.buildLog.concat(Qe.log);break;default:throw new Error}return["BUILD_READY","BUILD_READY_RELOAD"].includes(yt.activeSyncState)&&["contentLoading","content"].includes(Qe.type)&&(yt.activeSyncState="UP_TO_DATE",yt.buildLog=[]),yt}function O(ue,Qe,yt,K){var $,T;const[F,V]=(0,r.useReducer)(Zt,{activeSyncState:"CHECKING",path:K,contentLoading:!0,buildLog:[]}),Ce=(0,ne.u)(W.Dl),{retry:Re}=(0,xe.Z)(async()=>{V({type:"contentLoading"});try{const tt=await Ce.getEntityDocs({kind:ue,namespace:Qe,name:yt},K);return V({type:"content",content:tt,path:K}),tt}catch(tt){V({type:"content",contentError:tt,path:K})}},[Ce,ue,Qe,yt,K]),pe=(0,r.useRef)({content:void 0,reload:()=>{}});return pe.current={content:F.content,reload:Re},(0,X.default)(async()=>{V({type:"sync",state:"CHECKING"});const tt=setTimeout(()=>{V({type:"sync",state:"BUILDING"})},1e3);try{switch(await Ce.syncEntityDocs({kind:ue,namespace:Qe,name:yt},Ht=>{V({type:"buildLog",log:Ht})})){case"updated":pe.current.content?V({type:"sync",state:"BUILD_READY"}):(pe.current.reload(),V({type:"sync",state:"BUILD_READY_RELOAD"}));break;case"cached":V({type:"sync",state:"UP_TO_DATE"});break;default:V({type:"sync",state:"ERROR",syncError:new Error("Unexpected return state")});break}}catch(_t){V({type:"sync",state:"ERROR",syncError:_t})}finally{clearTimeout(tt)}},[ue,yt,Qe,Ce,V,pe]),{state:(0,r.useMemo)(()=>ct({activeSyncState:F.activeSyncState,contentLoading:F.contentLoading,content:F.content}),[F.activeSyncState,F.content,F.contentLoading]),contentReload:Re,path:F.path,content:F.content,contentErrorMessage:($=F.contentError)==null?void 0:$.toString(),syncErrorMessage:(T=F.syncError)==null?void 0:T.toString(),buildLog:F.buildLog}}const B=(0,r.createContext)({}),w=()=>(0,r.useContext)(B),L=ue=>{const{children:Qe}=ue,{"*":yt=""}=(0,m.UO)(),{entityRef:K}=(0,W.x1)(),{kind:$,namespace:T,name:F}=K,V=O($,T,F,yt);return r.createElement(B.Provider,{value:V},Qe instanceof Function?Qe(V):Qe)},se=ue=>Qe=>r.createElement(L,null,r.createElement(ue,{...Qe})),Me=ue=>ue==null?void 0:ue.document,rt=ue=>{const{entityId:Qe,entityTitle:yt,debounceTime:K=150}=ue,[$,T]=(0,r.useState)(!1),F=(0,m.s0)(),{setFilters:V,result:{loading:Ce,value:Re}}=(0,C.Rx)(),[pe,Ne]=(0,r.useState)([]);(0,r.useEffect)(()=>{let Xt=!0;if(Xt&&Re){const mn=Re.results.slice(0,10);Ne(mn)}return()=>{Xt=!1}},[Ce,Re]);const{kind:tt,name:_t,namespace:Ht}=Qe;(0,r.useEffect)(()=>{V(Xt=>({...Xt,kind:tt,namespace:Ht,name:_t}))},[tt,Ht,_t,V]);const en=(Xt,mn)=>{if(Me(mn)){const{location:_n}=mn.document;F(_n)}};return r.createElement(C.qO,{"data-testid":"techdocs-search-bar",size:"small",open:$,getOptionLabel:()=>"",filterOptions:Xt=>Xt,onClose:()=>{T(!1)},onFocus:()=>{T(!0)},onChange:en,blurOnSelect:!0,noOptionsText:"No results found",value:null,options:pe,renderOption:({document:Xt,highlight:mn})=>r.createElement(p.TechDocsSearchResultListItem,{result:Xt,lineClamp:3,asListItem:!1,asLink:!1,title:Xt.title,highlight:mn}),loading:Ce,inputDebounceTime:K,inputPlaceholder:`Search ${yt||Qe.name} docs`,freeSolo:!1})},xt=ue=>{const Qe={term:"",types:["techdocs"],pageCursor:"",filters:ue.entityId};return r.createElement(C.Nd,{initialState:Qe},r.createElement(rt,{...ue}))},ut=(0,A.Z)(ue=>(0,o.Z)({paper:{width:"100%",[ue.breakpoints.up("sm")]:{width:"75%"},[ue.breakpoints.up("md")]:{width:"50%"},padding:ue.spacing(2.5)},root:{height:"100%",overflow:"hidden"},logs:{background:ue.palette.background.default}})),et=({buildLog:ue,onClose:Qe})=>{const yt=ut(),K=ue.length===0?"Waiting for logs...":ue.join(`
`);return r.createElement(U.Z,{container:!0,direction:"column",className:yt.root,spacing:0,wrap:"nowrap"},r.createElement(U.Z,{item:!0,container:!0,justifyContent:"space-between",alignItems:"center",spacing:0,wrap:"nowrap"},r.createElement(We.Z,{variant:"h5"},"Build Details"),r.createElement(we.Z,{key:"dismiss",title:"Close the drawer",onClick:Qe,color:"inherit"},r.createElement(ye.Z,null))),r.createElement(U.Z,{item:!0,xs:!0},r.createElement(u.nU,{text:K,classes:{root:yt.logs}})))},Wt=({buildLog:ue})=>{const Qe=ut(),[yt,K]=(0,r.useState)(!1);return r.createElement(r.Fragment,null,r.createElement(a.Z,{color:"inherit",onClick:()=>K(!0)},"Show Build Logs"),r.createElement(te.ZP,{classes:{paper:Qe.paper},anchor:"right",open:yt,onClose:()=>K(!1)},r.createElement(et,{buildLog:ue,onClose:()=>K(!1)})))},fe=({errorMessage:ue})=>{const Qe=(0,ne.u)(ne.p).getOptionalString("techdocs.builder"),yt=(0,oe.z$)(),{entityRef:K}=(0,W.x1)(),$=(0,m.TH)();(0,r.useEffect)(()=>{const{pathname:F,search:V,hash:Ce}=$;yt.captureEvent("not-found",`${F}${V}${Ce}`,{attributes:K})},[yt,K,$]);let T="";return Qe!=="local"&&(T="Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance."),r.createElement(u.mf,{status:"404",statusMessage:ue||"Documentation not found",additionalInfo:T})},Ae=(0,A.Z)(ue=>({root:{marginBottom:ue.spacing(2)},message:{wordBreak:"break-word",overflowWrap:"anywhere"}})),Xe=()=>{let ue=null;const Qe=Ae(),{state:yt,contentReload:K,contentErrorMessage:$,syncErrorMessage:T,buildLog:F}=w();return yt==="INITIAL_BUILD"&&(ue=r.createElement(be.Z,{classes:{root:Qe.root},variant:"outlined",severity:"info",icon:r.createElement(q.Z,{size:"24px"}),action:r.createElement(Wt,{buildLog:F})},"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.")),yt==="CONTENT_STALE_REFRESHING"&&(ue=r.createElement(be.Z,{variant:"outlined",severity:"info",icon:r.createElement(q.Z,{size:"24px"}),action:r.createElement(Wt,{buildLog:F}),classes:{root:Qe.root}},"A newer version of this documentation is being prepared and will be available shortly.")),yt==="CONTENT_STALE_READY"&&(ue=r.createElement(be.Z,{variant:"outlined",severity:"success",action:r.createElement(a.Z,{color:"inherit",onClick:()=>K()},"Refresh"),classes:{root:Qe.root}},"A newer version of this documentation is now available, please refresh to view.")),yt==="CONTENT_STALE_ERROR"&&(ue=r.createElement(be.Z,{variant:"outlined",severity:"error",action:r.createElement(Wt,{buildLog:F}),classes:{root:Qe.root,message:Qe.message}},"Building a newer version of this documentation failed."," ",T)),yt==="CONTENT_NOT_FOUND"&&(ue=r.createElement(r.Fragment,null,T&&r.createElement(be.Z,{variant:"outlined",severity:"error",action:r.createElement(Wt,{buildLog:F}),classes:{root:Qe.root,message:Qe.message}},"Building a newer version of this documentation failed."," ",T),r.createElement(fe,{errorMessage:$}))),ue},St=/main\.[A-Fa-f0-9]{8}\.min\.css$/,pt=/^https:\/\/fonts\.googleapis\.com/,Tt=/^https:\/\/fonts\.gstatic\.com/,Dt=ue=>ue.nodeName==="LINK",$e=ue=>{const Qe=(ue==null?void 0:ue.getAttribute("href"))||"",yt=Qe.match(St),K=Qe.match(pt),$=Qe.match(Tt);return yt||K||$},ot=ue=>(Dt(ue)&&!$e(ue)&&ue.remove(),ue),Bt=ue=>ue.nodeName==="IFRAME",_e=(ue,Qe)=>{const yt=ue.getAttribute("src")||"";try{const{host:K}=new URL(yt);return Qe.includes(K)}catch{return!1}},Je=ue=>Qe=>(Bt(Qe)&&!_e(Qe,ue)&&Qe.remove(),Qe),Ee=()=>{const ue=(0,ne.u)(ne.p);return(0,r.useMemo)(()=>ue.getOptionalConfig("techdocs.sanitizer"),[ue])},it=()=>{const ue=Ee();return(0,r.useCallback)(async Qe=>{const yt=ue==null?void 0:ue.getOptionalStringArray("allowedIframeHosts");Jt().addHook("beforeSanitizeElements",ot);const K=["link"];return yt&&(K.push("iframe"),Jt().addHook("beforeSanitizeElements",Je(yt))),Jt().sanitize(Qe.outerHTML,{ADD_TAGS:K,FORBID_TAGS:["style"],WHOLE_DOCUMENT:!0,RETURN_DOM:!0})},[ue])};var at=({theme:ue})=>`
/*==================  Variables  ==================*/
/*
  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.
  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.
*/

:host {
  /* FONT */
  --md-default-fg-color: ${ue.palette.text.primary};
  --md-default-fg-color--light: ${ue.palette.text.secondary};
  --md-default-fg-color--lighter: ${(0,D.$n)(ue.palette.text.secondary,.7)};
  --md-default-fg-color--lightest: ${(0,D.$n)(ue.palette.text.secondary,.3)};

  /* BACKGROUND */
  --md-default-bg-color:${ue.palette.background.default};
  --md-default-bg-color--light: ${ue.palette.background.paper};
  --md-default-bg-color--lighter: ${(0,D.$n)(ue.palette.background.paper,.7)};
  --md-default-bg-color--lightest: ${(0,D.$n)(ue.palette.background.paper,.3)};

  /* PRIMARY */
  --md-primary-fg-color: ${ue.palette.primary.main};
  --md-primary-fg-color--light: ${ue.palette.primary.light};
  --md-primary-fg-color--dark: ${ue.palette.primary.dark};
  --md-primary-bg-color: ${ue.palette.primary.contrastText};
  --md-primary-bg-color--light: ${(0,D.$n)(ue.palette.primary.contrastText,.7)};

  /* ACCENT */
  --md-accent-fg-color: var(--md-primary-fg-color);

  /* SHADOW */
  --md-shadow-z1: ${ue.shadows[1]};
  --md-shadow-z2: ${ue.shadows[2]};
  --md-shadow-z3: ${ue.shadows[3]};

  /* EXTENSIONS */
  --md-admonition-fg-color: var(--md-default-fg-color);
  --md-admonition-bg-color: var(--md-default-bg-color);
  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */
  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z"/></svg>');
  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>');
  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>');
  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>');
  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>');
  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>');
  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg>');
  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z"/></svg>');
  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/></svg>');
  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z"/></svg>');
  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z"/></svg>');
  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');
  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z"/></svg>');
}

:host > * {
  /* CODE */
  --md-code-fg-color: ${ue.palette.text.primary};
  --md-code-bg-color: ${ue.palette.background.paper};
  --md-code-hl-color: ${(0,D.Fq)(ue.palette.warning.main,.5)};
  --md-code-hl-keyword-color: ${ue.palette.type==="dark"?ue.palette.primary.light:ue.palette.primary.dark};
  --md-code-hl-function-color: ${ue.palette.type==="dark"?ue.palette.secondary.light:ue.palette.secondary.dark};
  --md-code-hl-string-color: ${ue.palette.type==="dark"?ue.palette.success.light:ue.palette.success.dark};
  --md-code-hl-number-color: ${ue.palette.type==="dark"?ue.palette.error.light:ue.palette.error.dark};
  --md-code-hl-constant-color: var(--md-code-hl-function-color);
  --md-code-hl-special-color: var(--md-code-hl-function-color);
  --md-code-hl-name-color: var(--md-code-fg-color);
  --md-code-hl-comment-color: var(--md-default-fg-color--light);
  --md-code-hl-generic-color: var(--md-default-fg-color--light);
  --md-code-hl-variable-color: var(--md-default-fg-color--light);
  --md-code-hl-operator-color: var(--md-default-fg-color--light);
  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);

  /* TYPESET */
  --md-typeset-font-size: 1rem;
  --md-typeset-color: var(--md-default-fg-color);
  --md-typeset-a-color: ${ue.palette.link};
  --md-typeset-table-color: ${ue.palette.text.primary};
  --md-typeset-del-color: ${ue.palette.type==="dark"?(0,D.Fq)(ue.palette.error.dark,.5):(0,D.Fq)(ue.palette.error.light,.5)};
  --md-typeset-ins-color: ${ue.palette.type==="dark"?(0,D.Fq)(ue.palette.success.dark,.5):(0,D.Fq)(ue.palette.success.light,.5)};
  --md-typeset-mark-color: ${ue.palette.type==="dark"?(0,D.Fq)(ue.palette.warning.dark,.5):(0,D.Fq)(ue.palette.warning.light,.5)};
}

@media screen and (max-width: 76.1875em) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .9rem;
  }
}

@media screen and (max-width: 600px) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .7rem;
  }
}
`,Pt=({theme:ue})=>`
/*==================  Reset  ==================*/

body {
  --md-text-color: var(--md-default-fg-color);
  --md-text-link-color: var(--md-accent-fg-color);
  --md-text-font-family: ${ue.typography.fontFamily};
  font-family: var(--md-text-font-family);
  background-color: unset;
}
`;const Nt="224px";var on=({theme:ue,sidebar:Qe})=>`
/*==================  Layout  ==================*/

/* mkdocs material v9 compat */
.md-nav__title {
  color: var(--md-default-fg-color);
}

.md-grid {
  max-width: 100%;
  margin: 0;
}

.md-nav {
  font-size: calc(var(--md-typeset-font-size) * 0.9);
}
.md-nav__link {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.md-nav__icon {
  height: 20px !important;
  width: 20px !important;
  margin-left:${ue.spacing(1)}px;
}
.md-nav__icon svg {
  margin: 0;
  width: 20px !important;
  height: 20px !important;
}
.md-nav__icon:after {
  width: 20px !important;
  height: 20px !important;
}

.md-nav__item--active > .md-nav__link, a.md-nav__link--active {
  text-decoration: underline;
  color: var(--md-typeset-a-color);
}

.md-main__inner {
  margin-top: 0;
}

.md-sidebar {
  bottom: 75px;
  position: fixed;
  width: 16rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-color: rgb(193, 193, 193) #eee;
  scrollbar-width: thin;
}
.md-sidebar .md-sidebar__scrollwrap {
  width: calc(12.1rem);
}
.md-sidebar--secondary {
  right: ${ue.spacing(3)}px;
}
.md-sidebar::-webkit-scrollbar {
  width: 5px;
}
.md-sidebar::-webkit-scrollbar-button {
  width: 5px;
  height: 5px;
}
.md-sidebar::-webkit-scrollbar-track {
  background: #eee;
  border: 1 px solid rgb(250, 250, 250);
  box-shadow: 0px 0px 3px #dfdfdf inset;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb {
  width: 5px;
  background: rgb(193, 193, 193);
  border: transparent;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb:hover {
  background: rgb(125, 125, 125);
}

.md-content {
  max-width: calc(100% - 16rem * 2);
  margin-left: 16rem;
  margin-bottom: 50px;
}

.md-footer {
  position: fixed;
  bottom: 0px;
  pointer-events: none;
}

.md-footer-nav__link, .md-footer__link {
  pointer-events: all;
}

.md-footer__title {
  background-color: unset;
}
.md-footer-nav__link, .md-footer__link {
  width: 16rem;
}

.md-dialog {
  background-color: unset;
}

@media screen and (min-width: 76.25em) {
  .md-sidebar {
    height: auto;
  }
}

@media screen and (max-width: 76.1875em) {
  .md-nav {
    transition: none !important;
    background-color: var(--md-default-bg-color)
  }
  .md-nav--primary .md-nav__title {
    cursor: auto;
    color: var(--md-default-fg-color);
    font-weight: 700;
    white-space: normal;
    line-height: 1rem;
    height: auto;
    display: flex;
    flex-flow: column;
    row-gap: 1.6rem;
    padding: 1.2rem .8rem .8rem;
    background-color: var(--md-default-bg-color);
  }
  .md-nav--primary .md-nav__title~.md-nav__list {
    box-shadow: none;
  }
  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {
    border-top: none;
  }
  .md-nav--primary .md-nav__title .md-nav__button {
    display: none;
  }
  .md-nav--primary .md-nav__title .md-nav__icon {
    color: var(--md-default-fg-color);
    position: static;
    height: auto;
    margin: 0 0 0 -0.2rem;
  }
  .md-nav--primary > .md-nav__title [for="none"] {
    padding-top: 0;
  }
  .md-nav--primary .md-nav__item {
    border-top: none;
  }
  .md-nav--primary :is(.md-nav__title,.md-nav__item) {
    font-size : var(--md-typeset-font-size);
  }
  .md-nav .md-source {
    display: none;
  }

  .md-sidebar {
    height: 100%;
  }
  .md-sidebar--primary {
    width: 12.1rem !important;
    z-index: 200;
    left: ${Qe.isPinned?`calc(-12.1rem + ${Nt})`:"calc(-12.1rem + 72px)"} !important;
  }
  .md-sidebar--secondary:not([hidden]) {
    display: none;
  }

  .md-content {
    max-width: 100%;
    margin-left: 0;
  }

  .md-header__button {
    margin: 0.4rem 0;
    margin-left: 0.4rem;
    padding: 0;
  }

  .md-overlay {
    left: 0;
  }

  .md-footer {
    position: static;
    padding-left: 0;
  }
  .md-footer-nav__link {
    /* footer links begin to overlap at small sizes without setting width */
    width: 50%;
  }
}

@media screen and (max-width: 600px) {
  .md-sidebar--primary {
    left: -12.1rem !important;
    width: 12.1rem;
  }
}


@media print {
  .md-sidebar,
  #toggle-sidebar {
    display: none;
  }
  
  .md-content {
    margin: 0;
    width: 100%;
    max-width: 100%;
  }
}
`;const Ze=["h1","h2","h3","h4","h5","h6"];var He=({theme:ue})=>`
/*==================  Typeset  ==================*/

.md-typeset {
  font-size: var(--md-typeset-font-size);
}

${Ze.reduce((Qe,yt)=>{var K;const $=(K=ue.typography.htmlFontSize)!=null?K:16,T=ue.typography[yt],{lineHeight:F,fontFamily:V,fontWeight:Ce,fontSize:Re}=T,pe=Ne=>{let tt=1;return typeof Ne=="number"&&(tt=Ne/$*.6),typeof Ne=="string"&&(tt=Ne.replace("rem","")),`calc(${tt} * var(--md-typeset-font-size))`};return Qe.concat(`
    .md-typeset ${yt} {
      color: var(--md-default-fg-color);
      line-height: ${F};
      font-family: ${V};
      font-weight: ${Ce};
      font-size: ${pe(Re)};
    }
  `)},"")}

.md-typeset .md-content__button {
  color: var(--md-default-fg-color);
}

.md-typeset hr {
  border-bottom: 0.05rem dotted ${ue.palette.divider};
}

.md-typeset details {
  font-size: var(--md-typeset-font-size) !important;
}
.md-typeset details summary {
  padding-left: 2.5rem !important;
}
.md-typeset details summary:before,
.md-typeset details summary:after {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: rotate(0deg) translateY(-50%) !important;
}
.md-typeset details[open] > summary:after {
  transform: rotate(90deg) translateX(-50%) !important;
}

.md-typeset blockquote {
  color: var(--md-default-fg-color--light);
  border-left: 0.2rem solid var(--md-default-fg-color--light);
}

.md-typeset table:not([class]) {
  font-size: var(--md-typeset-font-size);
  border: 1px solid var(--md-default-fg-color);
  border-bottom: none;
  border-collapse: collapse;
}
.md-typeset table:not([class]) th {
  font-weight: bold;
}
.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {
  border-bottom: 1px solid var(--md-default-fg-color);
}

.md-typeset pre > code::-webkit-scrollbar-thumb {
  background-color: hsla(0, 0%, 0%, 0.32);
}
.md-typeset pre > code::-webkit-scrollbar-thumb:hover {
  background-color: hsla(0, 0%, 0%, 0.87);
}
`,ve=()=>`
/*==================  Animations  ==================*/
/*
  Disable CSS animations on link colors as they lead to issues in dark mode.
  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.
*/
.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {
  transition: none;
}
`,Ie=({theme:ue})=>`
/*==================  Extensions  ==================*/

/* HIGHLIGHT */
.highlight .md-clipboard:after {
  content: unset;
}

.highlight .nx {
  color: ${ue.palette.type==="dark"?"#ff53a3":"#ec407a"};
}

/* CODE HILITE */
.codehilite .gd {
  background-color: ${ue.palette.type==="dark"?"rgba(248,81,73,0.65)":"#fdd"};
}

.codehilite .gi {
  background-color: ${ue.palette.type==="dark"?"rgba(46,160,67,0.65)":"#dfd"};
}

/* TABBED */
.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),
.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),
.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),
.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),
.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),
.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),
.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),
.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),
.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),
.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),
.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),
.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),
.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),
.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),
.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),
.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),
.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),
.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),
.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),
.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {
  color: var(--md-accent-fg-color);
  border-color: var(--md-accent-fg-color);
}

/* TASK-LIST */
.task-list-control .task-list-indicator::before {
  background-color: ${ue.palette.action.disabledBackground};
}
.task-list-control [type="checkbox"]:checked + .task-list-indicator:before {
 background-color: ${ue.palette.success.main};
}

/* ADMONITION */
.admonition {
  font-size: var(--md-typeset-font-size) !important;
}
.admonition .admonition-title {
  padding-left: 2.5rem !important;
}

.admonition .admonition-title:before {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: translateY(-50%) !important;
}
`;const lt=[at,Pt,on,He,ve,Ie],$t=()=>(0,u.Pf)(),j=()=>{const ue=$t(),Qe=(0,Z.Z)();return(0,r.useMemo)(()=>{const yt={theme:Qe,sidebar:ue};return lt.reduce((K,$)=>K+$(yt),"")},[Qe,ue])},he=()=>{const ue=j();return(0,r.useCallback)(Qe=>(Qe.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<style>${ue}</style>`),Qe),[ue])},ze=(ue,Qe,yt)=>{const K=ue==="src"&&Qe.endsWith(".svg"),$=!Qe.match(/^([a-z]*:)?\/\//i),T=Qe.startsWith(yt);return K&&($||T)},ht=({techdocsStorageApi:ue,entityId:Qe,path:yt})=>async K=>{const $=await ue.getApiOrigin(),T=async(F,V)=>{for(const Ce of F)if(Ce.hasAttribute(V)){const Re=Ce.getAttribute(V);if(!Re)return;const pe=await ue.getBaseUrl(Re,Qe,yt);if(ze(V,Re,$))try{const tt=await(await fetch(pe,{credentials:"include"})).text();Ce.setAttribute(V,`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(tt)))}`)}catch{Ce.setAttribute("alt",`Error: ${Re}`)}else Ce.setAttribute(V,pe)}};return await Promise.all([T(K.querySelectorAll("img"),"src"),T(K.querySelectorAll("script"),"src"),T(K.querySelectorAll("source"),"src"),T(K.querySelectorAll("link"),"href"),T(K.querySelectorAll("a[download]"),"href")]),K};let sn;sn=Promise.resolve().then(e.t.bind(e,28316,19));function Qt(ue,Qe){sn.then(yt=>{"createRoot"in yt?yt.createRoot(Qe).render(ue):yt.render(ue,Qe)})}const x=ue=>Qe=>{var yt;const K=Qe.querySelector('[title="Edit this page"]');if(!K||!K.href)return Qe;const $=new URL(K.href),T=ue.byUrl($);if((T==null?void 0:T.type)!=="github"&&(T==null?void 0:T.type)!=="gitlab")return Qe;const F=((yt=Qe.querySelector("article>h1"))==null?void 0:yt.childNodes[0].textContent)||"",V=encodeURIComponent(`Documentation Feedback: ${F}`),Ce=encodeURIComponent(`Page source:
${K.href}

Feedback:`),Re=(T==null?void 0:T.type)==="github"?(0,me.BT)($.href,"blob"):$.href,pe=je()(Re),Ne=`/${pe.organization}/${pe.name}`,tt=K.cloneNode();switch(T==null?void 0:T.type){case"gitlab":tt.href=`${$.origin}${Ne}/issues/new?issue[title]=${V}&issue[description]=${Ce}`;break;case"github":tt.href=`${$.origin}${Ne}/issues/new?title=${V}&body=${Ce}`;break;default:return Qe}return Qt(r.createElement(Lt.Z),tt),tt.style.paddingLeft="5px",tt.title="Leave feedback for this page",tt.id="git-feedback-link",K==null||K.insertAdjacentElement("beforebegin",tt),Qe},Y=()=>ue=>{const Qe=ue.querySelector('.md-header label[for="__drawer"]'),yt=ue.querySelector("article");if(!Qe||!yt)return ue;const K=Qe.cloneNode();return Qt(r.createElement(nt.Z),K),K.id="toggle-sidebar",K.title="Toggle Sidebar",K.classList.add("md-content__button"),K.style.setProperty("padding","0 0 0 5px"),K.style.setProperty("margin","0.4rem 0 0.4rem 0.4rem"),yt==null||yt.prepend(K),ue},Ye=()=>ue=>(((yt,K)=>{Array.from(yt).filter($=>$.hasAttribute(K)).forEach($=>{const T=$.getAttribute(K);if(T){T.match(/^https?:\/\//i)&&$.setAttribute("target","_blank");try{const F=Et(window.location.href);$.setAttribute(K,new URL(T,F).toString())}catch{$.replaceWith($.textContent||T)}}})})(Array.from(ue.getElementsByTagName("a")),"href"),ue);function Et(ue){const Qe=new URL(ue);return!Qe.pathname.endsWith("/")&&!Qe.pathname.endsWith(".html")&&(Qe.pathname+="/"),Qe.toString()}const zt=({baseUrl:ue,onClick:Qe})=>yt=>(Array.from(yt.getElementsByTagName("a")).forEach(K=>{K.addEventListener("click",$=>{const F=K.getAttribute("href");F&&F.startsWith(ue)&&!K.hasAttribute("download")&&($.preventDefault(),Qe($,F))})}),yt),Ft=(0,Le.Z)(ue=>({tooltip:{fontSize:"inherit",color:ue.palette.text.primary,margin:0,padding:ue.spacing(.5),backgroundColor:"transparent",boxShadow:"none"}}))(ie.ZP),gn=()=>r.createElement(re.Z,null,r.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})),cn=({text:ue})=>{const[Qe,yt]=(0,r.useState)(!1),[,K]=(0,Te.Z)(),$=(0,r.useCallback)(()=>{K(ue),yt(!0)},[ue,K]),T=(0,r.useCallback)(()=>{yt(!1)},[yt]);return r.createElement(Ft,{title:"Copied to clipboard",placement:"left",open:Qe,onClose:T,leaveDelay:1e3},r.createElement(we.Z,{style:{color:"inherit"},className:"md-clipboard md-icon",onClick:$},r.createElement(gn,null)))},An=ue=>Qe=>{var yt;const K=Qe.querySelectorAll("pre > code");for(const $ of K){const T=$.textContent||"",F=document.createElement("div");(yt=$==null?void 0:$.parentElement)==null||yt.prepend(F),Qt(r.createElement(Q.Z,{theme:ue},r.createElement(cn,{text:T})),F)}return Qe},Fe=()=>ue=>{var Qe;return(Qe=ue.querySelector(".md-header"))==null||Qe.remove(),ue},qe=()=>ue=>{var Qe,yt;return(Qe=ue.querySelector(".md-footer .md-copyright"))==null||Qe.remove(),(yt=ue.querySelector(".md-footer-copyright"))==null||yt.remove(),ue},At=({onLoading:ue,onLoaded:Qe})=>yt=>(ue(),yt.addEventListener(W.Ox,function K(){Qe(),yt.removeEventListener(W.Ox,K)}),yt),tn=()=>ue=>(setTimeout(()=>{const Qe=ue==null?void 0:ue.querySelectorAll("li.md-nav__item--active");Qe.length!==0&&(Qe.forEach(K=>{const $=K==null?void 0:K.querySelector("input");$!=null&&$.checked||$==null||$.click()}),Qe[Qe.length-1].scrollIntoView())},200),ue),ln=async(ue,Qe)=>{let yt;if(typeof ue=="string")yt=new DOMParser().parseFromString(ue,"text/html").documentElement;else if(ue instanceof Element)yt=ue;else throw new Error("dom is not a recognized type");for(const K of Qe)yt=await K(yt);return yt};function dn(ue,Qe){const yt=new URL(Qe),K=`${yt.origin}${yt.pathname.replace(/\/$/,"")}`,$=ue.replace(K,"").replace(/^\/+/,""),T=new URL(`http://localhost/${$}`);return`${T.pathname}${T.search}${T.hash}`}function un(){const ue=(0,m.s0)(),yt=(0,ne.u)(ne.p).getOptionalString("app.baseUrl");return(0,r.useCallback)($=>{let T=$;if(yt)try{T=dn($,yt)}catch{}ue(T)},[ue,yt])}const wn="screen and (max-width: 76.1875em)",Wn=ue=>{const Qe=un(),yt=(0,Z.Z)(),K=(0,H.Z)(wn),$=it(),T=he(),F=(0,oe.z$)(),V=(0,ne.u)(W.Dl),Ce=(0,ne.u)(It.q3),{state:Re,path:pe,content:Ne}=w(),[tt,_t]=(0,r.useState)(null),Ht=(0,W.ux)(tt),en=(0,r.useCallback)(()=>{if(!tt)return;tt.querySelectorAll(".md-sidebar").forEach(En=>{var bn,Ln,qn;if(K)En.style.top="0px";else{const Vn=document==null?void 0:document.querySelector(".techdocs-reader-page"),xn=(bn=Vn==null?void 0:Vn.getBoundingClientRect().top)!=null?bn:0;let Bn=(Ln=tt.getBoundingClientRect().top)!=null?Ln:0;const $n=tt.querySelector(".md-container > .md-tabs"),yn=(qn=$n==null?void 0:$n.getBoundingClientRect().height)!=null?qn:0;Bn<xn&&(Bn=xn),En.style.top=`${Math.max(Bn,0)+yn}px`}En.style.setProperty("opacity","1")})},[tt,K]);(0,r.useEffect)(()=>(window.addEventListener("resize",en),window.addEventListener("scroll",en,!0),()=>{window.removeEventListener("resize",en),window.removeEventListener("scroll",en,!0)}),[tt,en]);const Xt=(0,r.useCallback)(()=>{if(!tt)return;const hn=tt.querySelector(".md-footer");hn&&(hn.style.width=`${tt.getBoundingClientRect().width}px`)},[tt]);(0,r.useEffect)(()=>(window.addEventListener("resize",Xt),()=>{window.removeEventListener("resize",Xt)}),[tt,Xt]),(0,r.useEffect)(()=>{Ht||(Xt(),en())},[Re,Ht,Xt,en]);const mn=(0,r.useCallback)((hn,En)=>ln(hn,[$,ht({techdocsStorageApi:V,entityId:ue,path:En}),Ye(),Y(),Fe(),qe(),x(Ce),T]),[ue,Ce,V,$,T]),_n=(0,r.useCallback)(async hn=>ln(hn,[tn(),An(yt),zt({baseUrl:window.location.origin,onClick:(En,bn)=>{var Ln,qn;const Vn=En.ctrlKey||En.metaKey,xn=new URL(bn),Bn=((Ln=En.target)==null?void 0:Ln.innerText)||bn,$n=bn.replace(window.location.origin,"");F.captureEvent("click",Bn,{attributes:{to:$n}}),xn.hash?Vn?window.open(bn,"_blank"):(Qe(bn),(qn=hn==null?void 0:hn.querySelector(`[id="${xn.hash.slice(1)}"]`))==null||qn.scrollIntoView()):Vn?window.open(bn,"_blank"):Qe(bn)}}),At({onLoading:()=>{},onLoaded:()=>{var En;(En=hn.querySelector(".md-nav__title"))==null||En.removeAttribute("for")}}),At({onLoading:()=>{Array.from(hn.querySelectorAll(".md-sidebar")).forEach(bn=>{bn.style.setProperty("opacity","0")})},onLoaded:()=>{}})]),[yt,Qe,F]);return(0,r.useEffect)(()=>{if(!Ne)return()=>{};let hn=!0;return mn(Ne,pe).then(async En=>{if(!(En!=null&&En.innerHTML)||!hn)return;window.scroll({top:0});const bn=await _n(En);_t(bn)}),()=>{hn=!1}},[Ne,pe,mn,_n]),tt},Gn=()=>{const ue=(0,W.$L)(),{shadowRoot:Qe}=(0,W.x1)(),yt=Qe==null?void 0:Qe.querySelector('[data-md-component="content"]'),K=Qe==null?void 0:Qe.querySelector('div[data-md-component="sidebar"][data-md-type="navigation"], div[data-md-component="navigation"]');let $=K==null?void 0:K.querySelector('[data-techdocs-addons-location="primary sidebar"]');$||($=document.createElement("div"),$.setAttribute("data-techdocs-addons-location","primary sidebar"),K==null||K.prepend($));const T=Qe==null?void 0:Qe.querySelector('div[data-md-component="sidebar"][data-md-type="toc"], div[data-md-component="toc"]');let F=T==null?void 0:T.querySelector('[data-techdocs-addons-location="secondary sidebar"]');return F||(F=document.createElement("div"),F.setAttribute("data-techdocs-addons-location","secondary sidebar"),T==null||T.prepend(F)),r.createElement(r.Fragment,null,r.createElement(S.Z,{container:$},ue.renderComponentsByLocation(W.oZ.PrimarySidebar)),r.createElement(S.Z,{container:yt},ue.renderComponentsByLocation(W.oZ.Content)),r.createElement(S.Z,{container:F},ue.renderComponentsByLocation(W.oZ.SecondarySidebar)))},sa=(0,A.Z)({search:{width:"100%","@media (min-width: 76.1875em)":{width:"calc(100% - 34.4rem)",margin:"0 auto"},"@media print":{display:"none"}}}),Cn=se(ue=>{var Qe;const{withSearch:yt=!0,onReady:K}=ue,$=sa(),{entityMetadata:{value:T,loading:F},entityRef:V,setShadowRoot:Ce}=(0,W.x1)(),Re=Wn(V),pe=window.location.pathname,Ne=window.location.hash,tt=(0,W.ux)(Re),[_t]=(0,W.pV)([`[id="${Ne.slice(1)}"]`]);(0,r.useEffect)(()=>{var en;tt||(Ne?_t&&_t.scrollIntoView():(en=document==null?void 0:document.querySelector("header"))==null||en.scrollIntoView())},[pe,Ne,_t,tt]);const Ht=(0,r.useCallback)(en=>{Ce(en),K instanceof Function&&K()},[Ce,K]);return F===!1&&!T?r.createElement(u.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}):Re?r.createElement(u.VY,null,r.createElement(U.Z,{container:!0},r.createElement(U.Z,{xs:12,item:!0},r.createElement(Xe,null)),yt&&r.createElement(U.Z,{className:$.search,xs:"auto",item:!0},r.createElement(xt,{entityId:V,entityTitle:(Qe=T==null?void 0:T.metadata)==null?void 0:Qe.title})),r.createElement(U.Z,{xs:12,item:!0},r.createElement(W.VA,{element:Re,onAppend:Ht},r.createElement(Gn,null))))):r.createElement(u.VY,null,r.createElement(U.Z,{container:!0},r.createElement(U.Z,{xs:12,item:!0},r.createElement(Xe,null))))}),ea=null,la=r.createElement(ge.Z,{animation:"wave",variant:"text",height:40}),ra=ue=>{const{palette:{common:{white:Qe}}}=(0,Z.Z)(),{children:yt}=ue,K=(0,W.$L)(),$=(0,ne.u)(ne.p),{title:T,setTitle:F,subtitle:V,setSubtitle:Ce,entityRef:Re,metadata:{value:pe,loading:Ne},entityMetadata:{value:tt,loading:_t}}=(0,W.x1)();(0,r.useEffect)(()=>{pe&&(F(pe.site_name),Ce(()=>{let{site_description:Vn}=pe;return(!Vn||Vn==="None")&&(Vn=""),Vn}))},[pe,F,Ce]);const Ht=$.getOptional("app.title")||"Backstage",en=[T,V,Ht].filter(Boolean).join(" | "),{locationMetadata:Xt,spec:mn}=tt||{},_n=mn==null?void 0:mn.lifecycle,hn=tt?(0,G.g)(tt,ce.S4):[],En=(0,oe.tg)(st.r)(),bn=r.createElement(r.Fragment,null,r.createElement(u.i9,{label:(0,le.capitalize)((tt==null?void 0:tt.kind)||"entity"),value:r.createElement(Pe.dx,{color:"inherit",entityRef:Re,title:tt==null?void 0:tt.metadata.title,defaultKind:"Component"})}),hn.length>0&&r.createElement(u.i9,{label:"Owner",value:r.createElement(Pe.rI,{color:"inherit",entityRefs:hn,defaultKind:"group"})}),_n?r.createElement(u.i9,{label:"Lifecycle",value:String(_n)}):null,Xt&&Xt.type!=="dir"&&Xt.type!=="file"?r.createElement(u.i9,{label:"",value:r.createElement(U.Z,{container:!0,direction:"column",alignItems:"center",style:{color:Qe}},r.createElement(U.Z,{style:{padding:0},item:!0},r.createElement(de.Z,{style:{marginTop:"-25px"}})),r.createElement(U.Z,{style:{padding:0},item:!0},"Source")),url:Xt.target}):null);return!_t&&tt===void 0||!Ne&&pe===void 0?null:r.createElement(u.h4,{type:"Documentation",typeLink:En,title:T||la,subtitle:V===""?void 0:V||la},r.createElement(gt.Z,{titleTemplate:"%s"},r.createElement("title",null,en)),bn,yt,K.renderComponentsByLocation(W.oZ.Header))},fa=(0,A.Z)(ue=>({root:{gridArea:"pageSubheader",flexDirection:"column",minHeight:"auto",padding:ue.spacing(3,3,0),"@media print":{display:"none"}}})),Pa=ue=>{const Qe=fa(),[yt,K]=(0,r.useState)(null),$=(0,r.useCallback)(Ne=>{K(Ne.currentTarget)},[]),T=(0,r.useCallback)(()=>{K(null)},[]),{entityMetadata:{value:F,loading:V}}=(0,W.x1)(),Ce=(0,W.$L)(),Re=Ce.renderComponentsByLocation(W.oZ.Subheader),pe=Ce.renderComponentsByLocation(W.oZ.Settings);return!Re&&!pe||V===!1&&!F?null:r.createElement(l.Z,{classes:Qe,...ue.toolbarProps},r.createElement(b.Z,{display:"flex",justifyContent:"flex-end",width:"100%",flexWrap:"wrap"},Re,pe?r.createElement(r.Fragment,null,r.createElement(ie.ZP,{title:"Settings"},r.createElement(we.Z,{"aria-controls":"tech-docs-reader-page-settings","aria-haspopup":"true",onClick:$},r.createElement(Kt.Z,null))),r.createElement(h.Z,{id:"tech-docs-reader-page-settings",getContentAnchorEl:null,anchorEl:yt,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:Boolean(yt),onClose:T,keepMounted:!0},r.createElement("div",null,pe))):null))},ia=ue=>{const{withSearch:Qe,withHeader:yt=!0}=ue;return r.createElement(u.T3,{themeId:"documentation"},yt&&r.createElement(ra,null),r.createElement(Pa,null),r.createElement(Cn,{withSearch:Qe}))},Ra=ue=>{const{kind:Qe,name:yt,namespace:K}=(0,oe.Oi)(st.b),{children:$,entityRef:T={kind:Qe,name:yt,namespace:K}}=ue,F=(0,m.pC)();if(!$){const Re=(F?r.Children.toArray(F.props.children):[]).flatMap(pe=>{var Ne,tt;return(tt=(Ne=pe==null?void 0:pe.props)==null?void 0:Ne.children)!=null?tt:[]}).find(pe=>!(0,oe.IY)(pe,W.Zz)&&!(0,oe.IY)(pe,W.jM));return r.createElement(W.ZS,{entityRef:T},Re||r.createElement(ia,null))}return r.createElement(W.ZS,{entityRef:T},({metadata:V,entityMetadata:Ce,onReady:Re})=>r.createElement("div",{className:"techdocs-reader-page"},r.createElement(u.T3,{themeId:"documentation"},$ instanceof Function?$({entityRef:T,techdocsMetadataValue:V.value,entityMetadataValue:Ce.value,onReady:Re}):$)))}},77529:(Rn,kt,e)=>{"use strict";e.r(kt),e.d(kt,{TechDocsSearchResultListItem:()=>we});var r=e(2784),m=e(79692),u=e(49378),W=e(86136),A=e(90436),o=e(49558),U=e(42054);const We=(0,m.Z)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",marginBottom:"1rem"}}),we=a=>{const{result:te,highlight:q,lineClamp:D=5,asListItem:Z=!0,asLink:Le=!0,title:ie,icon:re}=a,Q=We(),H=({children:b})=>Le?r.createElement(o.rU,{noTrack:!0,to:te.location},b):r.createElement(r.Fragment,null,b),S=()=>{const b=q!=null&&q.fields.title?r.createElement(U.b,{text:q.fields.title,preTag:q.preTag,postTag:q.postTag}):te.title,h=q!=null&&q.fields.entityTitle?r.createElement(U.b,{text:q.fields.entityTitle,preTag:q.preTag,postTag:q.postTag}):te.entityTitle,C=q!=null&&q.fields.name?r.createElement(U.b,{text:q.fields.name,preTag:q.preTag,postTag:q.postTag}):te.name;return te?r.createElement(u.Z,{className:Q.itemText,primaryTypographyProps:{variant:"h6"},primary:r.createElement(H,null,ie||r.createElement(r.Fragment,null,b," | ",h!=null?h:C," docs")),secondary:r.createElement(A.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:D,overflow:"hidden"},color:"textSecondary",variant:"body2"},q!=null&&q.fields.text?r.createElement(U.b,{text:q.fields.text,preTag:q.preTag,postTag:q.postTag}):te.text)}):null},l=({children:b})=>Z?r.createElement(r.Fragment,null,re&&r.createElement(W.Z,null,typeof re=="function"?re(te):re),r.createElement("div",{className:Q.flexContainer},b)):r.createElement(r.Fragment,null,b);return r.createElement(l,null,r.createElement(S,null))}},67266:(Rn,kt,e)=>{"use strict";e.d(kt,{T:()=>We,a:()=>we,b:()=>te,c:()=>q,r:()=>a});var r=e(32272),m=e(76372),u=e.n(m),W=e(30705),A=Object.defineProperty,o=(D,Z,Le)=>Z in D?A(D,Z,{enumerable:!0,configurable:!0,writable:!0,value:Le}):D[Z]=Le,U=(D,Z,Le)=>(o(D,typeof Z!="symbol"?Z+"":Z,Le),Le);class We{constructor(Z){U(this,"configApi"),U(this,"discoveryApi"),U(this,"fetchApi"),this.configApi=Z.configApi,this.discoveryApi=Z.discoveryApi,this.fetchApi=Z.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(Z){const{kind:Le,namespace:ie,name:re}=Z,H=`${await this.getApiOrigin()}/metadata/techdocs/${ie}/${Le}/${re}`,S=await this.fetchApi.fetch(`${H}`);if(!S.ok)throw await r.VL.fromResponse(S);return await S.json()}async getEntityMetadata(Z){const{kind:Le,namespace:ie,name:re}=Z,H=`${await this.getApiOrigin()}/metadata/entity/${ie}/${Le}/${re}`,S=await this.fetchApi.fetch(`${H}`);if(!S.ok)throw await r.VL.fromResponse(S);return await S.json()}}class we{constructor(Z){U(this,"configApi"),U(this,"discoveryApi"),U(this,"identityApi"),U(this,"fetchApi"),this.configApi=Z.configApi,this.discoveryApi=Z.discoveryApi,this.identityApi=Z.identityApi,this.fetchApi=Z.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var Z;return(Z=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?Z:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getString("techdocs.builder")}async getEntityDocs(Z,Le){const{kind:ie,namespace:re,name:Q}=Z,S=`${await this.getStorageUrl()}/${re}/${ie}/${Q}/${Le}`,l=await this.fetchApi.fetch(`${S.endsWith("/")?S:`${S}/`}index.html`);let b="";switch(l.status){case 404:throw b="Page not found. ",Le||(b+="This could be because there is no index.md file in the root of the docs directory of this repository."),new r.dR(b);case 500:throw b="Could not generate documentation or an error in the TechDocs backend. ",new Error(b)}return l.text()}async syncEntityDocs(Z,Le=()=>{}){const{kind:ie,namespace:re,name:Q}=Z,S=`${await this.getApiOrigin()}/sync/${re}/${ie}/${Q}`,{token:l}=await this.identityApi.getCredentials();return new Promise((b,h)=>{const C=new m.EventSourcePolyfill(S,{withCredentials:!0,headers:l?{Authorization:`Bearer ${l}`}:{}});C.addEventListener("log",p=>{p.data&&Le(JSON.parse(p.data))}),C.addEventListener("finish",p=>{let be=!1;p.data&&({updated:be}=JSON.parse(p.data)),b(be?"updated":"cached")}),C.onerror=p=>{switch(C.close(),p.status){case 404:h(new r.dR(p.message));return;default:h(new Error(p.data));return}}})}async getBaseUrl(Z,Le,ie){const{kind:re,namespace:Q,name:H}=Le,l=`${await this.getApiOrigin()}/static/docs/${Q}/${re}/${H}/${ie}`;return new URL(Z,l.endsWith("/")?l:`${l}/`).toString()}}const a=(0,W.NT)({id:"techdocs:index-page"}),te=(0,W.NT)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),q=(0,W.NT)({id:"techdocs:catalog-reader-view"})},60982:(Rn,kt,e)=>{"use strict";e.d(kt,{L:()=>Xe,S:()=>pt,a:()=>Dt,e:()=>Kt});var r=e(73557),m=e(2784),u=e(90436),W=e(77277),A=e(79692),o=e(43434),U=e(38402),We=e(86136),we=e(49378),a=e(80030),te=e(60905),q=e(9520),D=e(11776),Z=e(82938),Le=e(86619),ie=e(61837),re=e(48348),Q=e(12231),H=e(49558),S=e(11640),l=e(57032),b=e(30705),h=e(33375),C=e(64279),p=e(71554),be=e(43054),ge=e(72164),ye=e(59324),ne=e(13737),oe=e(31168),X=e(83487),xe=e(97281),It=e(73495);const P=`auth:
  providers:
    google:
      development:
        clientId: \${AUTH_GOOGLE_CLIENT_ID}
        clientSecret: \${AUTH_GOOGLE_CLIENT_SECRET}
`,Jt=()=>m.createElement(H.ub,{missing:"content",title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:m.createElement(m.Fragment,null,m.createElement(u.Z,{variant:"body1"},"Open ",m.createElement("code",null,"app-config.yaml")," and make the changes as highlighted below:"),m.createElement(H.Oi,{text:P,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6,7,8],customStyle:{background:"inherit",fontSize:"115%"}}),m.createElement(W.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/auth/add-auth-provider"},"Read More"))}),me=(0,A.Z)($e=>({avatar:{width:({size:ot})=>ot,height:({size:ot})=>ot,fontSize:({size:ot})=>ot*.7,border:`1px solid ${$e.palette.textSubtle}`}})),Lt=({size:$e,picture:ot})=>{const{iconSize:Bt}=H.sidebarConfig,_e=me($e?{size:$e}:{size:Bt});return m.createElement(o.Z,{src:ot,className:_e.avatar})},Ct={},je=$e=>{const{title:ot,description:Bt,icon:_e,apiRef:Je}=$e,Ee=(0,l.u)(Je),it=(0,l.u)(l.r),[at,Pt]=(0,m.useState)(!1),[Nt,on]=(0,m.useState)(Ct);return(0,m.useEffect)(()=>{let Ze=!1;const He=Ee.sessionState$().subscribe(ve=>{ve!==l.S.SignedIn&&(on(Ct),Pt(!1)),Ze||Ee.getProfile({optional:!0}).then(Ie=>{Ze||(ve===l.S.SignedIn&&Pt(!0),Ie&&on(Ie))})});return()=>{Ze=!0,He.unsubscribe()}},[Ee]),m.createElement(U.Z,null,m.createElement(We.Z,null,m.createElement(_e,null)),m.createElement(we.Z,{primary:ot,secondary:m.createElement(a.ZP,{placement:"top",arrow:!0,title:Bt},m.createElement(te.Z,{container:!0,spacing:6},m.createElement(te.Z,{item:!0},m.createElement(Lt,{size:48,picture:Nt.picture})),m.createElement(te.Z,{item:!0,xs:12,sm:!0,container:!0},m.createElement(te.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},m.createElement(te.Z,{item:!0,xs:!0},m.createElement(u.Z,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0},Nt.displayName),m.createElement(u.Z,{variant:"body2",color:"textSecondary"},Nt.email),m.createElement(u.Z,{variant:"body2",color:"textSecondary"},Bt)))))),secondaryTypographyProps:{noWrap:!0,style:{width:"80%"}}}),m.createElement(q.Z,null,m.createElement(a.ZP,{placement:"top",arrow:!0,title:at?`Sign out from ${ot}`:`Sign in to ${ot}`},m.createElement(W.Z,{variant:"outlined",color:"primary",onClick:()=>{(at?Ee.signOut():Ee.signIn()).catch(He=>it.post(He))}},at?"Sign out":"Sign in"))))},nt=$e=>{const{configuredProviders:ot}=$e;return m.createElement(m.Fragment,null,ot.includes("google")&&m.createElement(je,{title:"Google",description:"Provides authentication towards Google APIs and identities",apiRef:l.g,icon:S.Z}),ot.includes("microsoft")&&m.createElement(je,{title:"Microsoft",description:"Provides authentication towards Microsoft APIs and identities",apiRef:l.m,icon:S.Z}),ot.includes("github")&&m.createElement(je,{title:"GitHub",description:"Provides authentication towards GitHub APIs",apiRef:l.d,icon:S.Z}),ot.includes("gitlab")&&m.createElement(je,{title:"GitLab",description:"Provides authentication towards GitLab APIs",apiRef:l.e,icon:S.Z}),ot.includes("okta")&&m.createElement(je,{title:"Okta",description:"Provides authentication towards Okta APIs",apiRef:l.o,icon:S.Z}),ot.includes("bitbucket")&&m.createElement(je,{title:"Bitbucket",description:"Provides authentication towards Bitbucket APIs",apiRef:l.i,icon:S.Z}),ot.includes("onelogin")&&m.createElement(je,{title:"OneLogin",description:"Provides authentication towards OneLogin APIs",apiRef:l.h,icon:S.Z}),ot.includes("atlassian")&&m.createElement(je,{title:"Atlassian",description:"Provides authentication towards Atlassian APIs",apiRef:l.k,icon:S.Z}),ot.includes("bitbucketServer")&&m.createElement(je,{title:"Bitbucket Server",description:"Provides authentication towards Bitbucket Server APIs",apiRef:l.j,icon:S.Z}))},Te=$e=>{const{providerSettings:ot}=$e,_e=(0,l.u)(l.p).getOptionalConfig("auth.providers"),Je=(_e==null?void 0:_e.keys())||[],Ee=ot!=null?ot:m.createElement(nt,{configuredProviders:Je});return!ot&&!(Je!=null&&Je.length)?m.createElement(Jt,null):m.createElement(H.rJ,{title:"Available Providers"},m.createElement(D.Z,{dense:!0},Ee))},gt=`import { createPlugin } from '@backstage/core-plugin-api';

export default createPlugin({
  id: 'plugin-name',
  featureFlags: [{ name: 'enable-example-feature' }],
});
`,de=()=>m.createElement(H.ub,{missing:"content",title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:m.createElement(m.Fragment,null,m.createElement(u.Z,{variant:"body1"},"An example for how to add a feature flag is highlighted below:"),m.createElement(H.Oi,{text:gt,language:"typescript",showLineNumbers:!0,highlightedNumbers:[6],customStyle:{background:"inherit",fontSize:"115%"}}),m.createElement(W.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/api/utility-apis"},"Read More"))}),G=$e=>$e.description?$e.description:$e.pluginId?`Registered in ${$e.pluginId} plugin`:"Registered in the application",Pe=({flag:$e,enabled:ot,toggleHandler:Bt})=>m.createElement(U.Z,{divider:!0,button:!0,onClick:()=>Bt($e.name)},m.createElement(We.Z,null,m.createElement(a.ZP,{placement:"top",arrow:!0,title:ot?"Disable":"Enable"},m.createElement(Z.Z,{color:"primary",checked:ot,name:$e.name}))),m.createElement(we.Z,{primary:$e.name,secondary:G($e)})),ce=($e,ot)=>{const Bt=$e.filter(Je=>ot.isActive(Je.name)),_e=$e.filter(Je=>!ot.isActive(Je.name));return[...Bt,..._e]},le=()=>{const $e=(0,l.u)(l.f),ot=m.useRef(),Bt=$e.getRegisteredFlags(),_e=ce(Bt,$e),[Je]=(0,m.useState)(_e),Ee=Object.fromEntries(Je.map(({name:Ie})=>[Ie,$e.isActive(Ie)])),[it,at]=(0,m.useState)(Ee),[Pt,Nt]=(0,m.useState)(""),on=(0,m.useCallback)(Ie=>{const lt=$e.isActive(Ie)?l.F.None:l.F.Active;$e.save({states:{[Ie]:lt},merge:!0}),at($t=>({...$t,[Ie]:lt===l.F.Active}))},[$e]);if(!Je.length)return m.createElement(de,null);const Ze=()=>{var Ie;Nt(""),(Ie=ot==null?void 0:ot.current)==null||Ie.focus()},He=Je.filter(Ie=>Ie.name.toLocaleLowerCase("en-US").includes(Pt.toLocaleLowerCase("en-US"))),ve=()=>m.createElement(te.Z,{container:!0,style:{justifyContent:"space-between"}},m.createElement(te.Z,{item:!0,xs:6,md:8},m.createElement(u.Z,{variant:"h5"},"Feature Flags"),m.createElement(u.Z,{variant:"subtitle1"},"Please refresh the page when toggling feature flags")),Je.length>=10&&m.createElement(te.Z,{item:!0,xs:6,md:4},m.createElement(Le.Z,{label:"Filter",style:{display:"flex",justifyContent:"flex-end"},inputRef:Ie=>Ie&&Ie.focus(),InputProps:{...Pt.length&&{endAdornment:m.createElement(ie.Z,{"aria-label":"Clear filter",onClick:Ze,edge:"end"},m.createElement(h.Z,null))}},onChange:Ie=>Nt(Ie.target.value),value:Pt})));return m.createElement(H.rJ,{title:m.createElement(ve,null)},m.createElement(D.Z,{dense:!0},He.map(Ie=>{const lt=Boolean(it[Ie.name]);return m.createElement(Pe,{key:Ie.name,flag:Ie,enabled:lt,toggleHandler:on})})))},Be=()=>{var $e;const ot=(0,l.u)(l.t),Bt=(0,l.u)(l.l),{value:_e,loading:Je,error:Ee}=(0,C.default)(async()=>({profile:await ot.getProfileInfo(),identity:await ot.getBackstageIdentity()}),[]);return(0,m.useEffect)(()=>{Ee&&Bt.post({message:`Failed to load user identity: ${Ee}`,severity:"error"})},[Ee,Bt]),Je||Ee?{profile:{},displayName:"",loading:Je}:{profile:_e.profile,backstageIdentity:_e.identity,displayName:($e=_e.profile.displayName)!=null?$e:_e.identity.userEntityRef,loading:Je}},st=(0,A.Z)($e=>({avatar:{width:({size:ot})=>ot,height:({size:ot})=>ot,fontSize:({size:ot})=>ot*.7,border:`1px solid ${$e.palette.textSubtle}`}})),Kt=$e=>{const{size:ot}=$e,{iconSize:Bt}=H.sidebarConfig,_e=st(ot?{size:ot}:{size:Bt}),{profile:Je}=Be();return m.createElement(o.Z,{src:Je.picture,className:_e.avatar,alt:"Profile picture"})},ct=()=>{const $e=(0,l.u)(l.r),ot=(0,l.u)(l.t),[Bt,_e]=m.useState(!1),[Je,Ee]=m.useState(void 0),it=Pt=>{Ee(Pt.currentTarget),_e(!0)},at=()=>{Ee(void 0),_e(!1)};return m.createElement(m.Fragment,null,m.createElement(ie.Z,{"data-testid":"user-settings-menu","aria-label":"more",onClick:it},m.createElement(be.Z,null)),m.createElement(re.Z,{anchorEl:Je,open:Bt,onClose:at},m.createElement(Q.Z,{"data-testid":"sign-out",onClick:()=>ot.signOut().catch(Pt=>$e.post(Pt))},m.createElement(We.Z,null,m.createElement(p.Z,null)),"Sign Out")))},Zt=()=>{const{profile:$e,displayName:ot}=Be();return m.createElement(H.rJ,{title:"Profile",variant:"gridItem"},m.createElement(te.Z,{container:!0,spacing:6},m.createElement(te.Z,{item:!0},m.createElement(Kt,{size:96})),m.createElement(te.Z,{item:!0,xs:12,sm:!0,container:!0},m.createElement(te.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},m.createElement(te.Z,{item:!0,xs:!0},m.createElement(u.Z,{variant:"subtitle1",gutterBottom:!0},ot),$e.email&&m.createElement(u.Z,{variant:"body2",color:"textSecondary"},$e.email))),m.createElement(te.Z,{item:!0},m.createElement(ct,null)))))},O=()=>{const{isPinned:$e,toggleSidebarPinState:ot}=(0,H.Pf)();return m.createElement(U.Z,null,m.createElement(we.Z,{primary:"Pin Sidebar",secondary:"Prevent the sidebar from collapsing"}),m.createElement(q.Z,null,m.createElement(a.ZP,{placement:"top",arrow:!0,title:`${$e?"Unpin":"Pin"} Sidebar`},m.createElement(Z.Z,{color:"primary",checked:$e,onChange:()=>ot(),name:"pin",inputProps:{"aria-label":"Pin Sidebar Switch"}}))))},B=({id:$e,activeId:ot,icon:Bt})=>Bt?(0,m.cloneElement)(Bt,{color:ot===$e?"primary":void 0}):m.createElement(ye.Z,{color:ot===$e?"primary":void 0}),w=(0,A.Z)($e=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[$e.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[$e.breakpoints.down("xs")]:{paddingLeft:0}}})),L=({children:$e,title:ot,value:Bt,..._e})=>m.createElement(a.ZP,{placement:"top",arrow:!0,title:ot},m.createElement(ne.Z,{value:Bt,..._e},$e)),se=()=>{const $e=w(),ot=(0,l.u)(l.n),Bt=(0,ge.Z)(ot.activeThemeId$(),ot.getActiveThemeId()),_e=ot.getInstalledThemes(),{t:Je}=(0,X.iH)(xe.a),Ee=(it,at)=>{_e.some(Pt=>Pt.id===at)?ot.setActiveThemeId(at):ot.setActiveThemeId(void 0)};return m.createElement(U.Z,{className:$e.list,classes:{container:$e.container}},m.createElement(we.Z,{className:$e.listItemText,primary:Je("themeToggle.title"),secondary:Je("themeToggle.description")}),m.createElement(q.Z,{className:$e.listItemSecondaryAction},m.createElement(oe.Z,{exclusive:!0,size:"small",value:Bt!=null?Bt:"auto",onChange:Ee},_e.map(it=>{const at=it.id,Pt=it.icon,Nt=it.title||(at==="light"||at==="dark"?Je(`themeToggle.names.${at}`):at);return m.createElement(L,{key:at,title:Je("themeToggle.select",{theme:Nt}),value:at},m.createElement(m.Fragment,null,Nt,"\xA0",m.createElement(B,{id:at,icon:Pt,activeId:Bt})))}),m.createElement(a.ZP,{placement:"top",arrow:!0,title:Je("themeToggle.selectAuto")},m.createElement(ne.Z,{value:"auto",selected:Bt===void 0},Je("themeToggle.names.auto"),"\xA0",m.createElement(ye.Z,{color:Bt===void 0?"primary":void 0}))))))},Me=(0,A.Z)($e=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[$e.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[$e.breakpoints.down("xs")]:{paddingLeft:0}}})),rt=({children:$e,title:ot,value:Bt,..._e})=>m.createElement(a.ZP,{placement:"top",arrow:!0,title:ot},m.createElement(ne.Z,{value:Bt,..._e},$e)),xt=()=>{const $e=Me(),ot=(0,l.u)(X.IB),{t:Bt}=(0,X.iH)(xe.a),[_e]=(0,m.useState)(()=>ot.language$()),{language:Je}=(0,ge.Z)(_e,ot.getLanguage()),{languages:Ee}=ot.getAvailableLanguages();if(Ee.length<=1)return null;const it=(at,Pt)=>{ot.setLanguage(Pt)};return m.createElement(U.Z,{className:$e.list,classes:{container:$e.container}},m.createElement(we.Z,{className:$e.listItemText,primary:Bt("languageToggle.title"),secondary:Bt("languageToggle.description")}),m.createElement(q.Z,{className:$e.listItemSecondaryAction},m.createElement(oe.Z,{exclusive:!0,size:"small",value:Je,onChange:it},Ee.map(at=>m.createElement(rt,{key:at,title:Bt("languageToggle.select",{language:at}),value:at},m.createElement(m.Fragment,null,at))))))},ut=()=>{const{isMobile:$e}=(0,H.Pf)();return m.createElement(H.rJ,{title:"Appearance",variant:"gridItem"},m.createElement(D.Z,{dense:!0},m.createElement(se,null),m.createElement(xt,null),!$e&&m.createElement(O,null)))},et=()=>{const{backstageIdentity:$e}=Be();return $e?m.createElement(te.Z,{container:!0,spacing:1},m.createElement(te.Z,{item:!0,xs:12},m.createElement(u.Z,{variant:"subtitle1",gutterBottom:!0},"User Entity:"," ",m.createElement(It.rI,{entityRefs:[$e.userEntityRef]}))),m.createElement(te.Z,{item:!0,xs:12},m.createElement(u.Z,{variant:"subtitle1"},"Ownership Entities:"," ",m.createElement(It.rI,{entityRefs:$e.ownershipEntityRefs})))):m.createElement(u.Z,null,"No Backstage Identity")},Wt=()=>m.createElement(H.rJ,{title:"Backstage Identity"},m.createElement(et,null)),fe=()=>m.createElement(te.Z,{container:!0,direction:"row",spacing:3},m.createElement(te.Z,{item:!0,xs:12,md:6},m.createElement(Zt,null)),m.createElement(te.Z,{item:!0,xs:12,md:6},m.createElement(ut,null)),m.createElement(te.Z,{item:!0,xs:12,md:6},m.createElement(Wt,null))),Ae="plugin.user-settings.settingsLayout",Xe="plugin.user-settings.settingsLayoutRoute",St=()=>null;(0,b.R5)(St,Xe,!0),(0,b.R5)(St,"core.gatherMountPoints",!0);const pt=$e=>{const{title:ot,children:Bt}=$e,{isMobile:_e}=(0,H.Pf)(),Je=(0,b.vJ)(Bt,Ee=>Ee.selectByComponentData({key:Xe,withStrictError:"Child of SettingsLayout must be an SettingsLayout.Route"}).getElements().map(it=>it.props));return m.createElement(H.T3,{themeId:"home"},!_e&&m.createElement(H.h4,{title:ot!=null?ot:"Settings"}),m.createElement(H.tn,{routes:Je}))};(0,b.R5)(pt,Ae,!0),pt.Route=St;const Tt=$e=>{const{providerSettings:ot,tabs:Bt}=$e;return m.createElement(pt,null,m.createElement(pt.Route,{path:"general",title:"General"},m.createElement(fe,null)),m.createElement(pt.Route,{path:"auth-providers",title:"Authentication Providers"},m.createElement(Te,{providerSettings:ot})),m.createElement(pt.Route,{path:"feature-flags",title:"Feature Flags"},m.createElement(le,null)),Bt)},Dt=$e=>{const{providerSettings:ot}=$e,Bt=(0,r.pC)(),_e=(0,b.vJ)(Bt,Ee=>Ee.selectByComponentData({key:Ae}).getElements()),Je=(0,b.vJ)(Bt,Ee=>Ee.selectByComponentData({key:Xe}).getElements());return m.createElement(m.Fragment,null,_e.length!==0&&_e||m.createElement(Tt,{tabs:Je,providerSettings:ot}))}},97281:(Rn,kt,e)=>{"use strict";e.d(kt,{U:()=>A,a:()=>o,s:()=>u});var r=e(30705),m=e(83487);const u=(0,r.NT)({id:"user-settings"}),A=(0,r.rx)({id:"user-settings",routes:{settingsPage:u}}).provide((0,r.P4)({name:"UserSettingsPage",component:()=>e.e(9716).then(e.bind(e,29716)).then(U=>U.SettingsPage),mountPoint:u})),o=(0,m.FB)({id:"user-settings",messages:{languageToggle:{title:"Language",description:"Change the language",select:"Select language {{language}}"},themeToggle:{title:"Theme",description:"Change the theme mode",select:"Select theme {{theme}}",selectAuto:"Select Auto Theme",names:{light:"Light",dark:"Dark",auto:"Auto"}}}})},43229:(Rn,kt,e)=>{"use strict";e.d(kt,{Zr:()=>Le});var r=e(82394),m=e.n(r),u=e(97281),W=e(2784),A=e(47603),o=e(49558),U=e(30705),We=e(60982),we=Object.defineProperty,a=(Q,H,S)=>H in Q?we(Q,H,{enumerable:!0,configurable:!0,writable:!0,value:S}):Q[H]=S,te=(Q,H,S)=>(a(Q,typeof H!="symbol"?H+"":H,S),S);const q={"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},D=new Map;class Z{constructor(H,S,l,b,h,C){this.namespace=H,this.fetchApi=S,this.discoveryApi=l,this.errorApi=b,this.identityApi=h,this.fallback=C,te(this,"subscribers",new Set),te(this,"observables",new Map)}static create(H){var S;return new Z((S=H.namespace)!=null?S:"default",H.fetchApi,H.discoveryApi,H.errorApi,H.identityApi,WebStorage.create({namespace:H.namespace,errorApi:H.errorApi}))}forBucket(H){const S=`${this.namespace}.${H}`;return D.has(S)||D.set(S,new Z(S,this.fetchApi,this.discoveryApi,this.errorApi,this.identityApi,this.fallback)),D.get(S)}async remove(H){const S=await this.getFetchUrl(H),l=await this.fetchApi.fetch(S,{method:"DELETE"});if(!l.ok&&l.status!==404)throw await ResponseError.fromResponse(l);this.notifyChanges({key:H,presence:"absent"})}async set(H,S){if(!await this.isSignedIn()){await this.fallback.set(H,S),this.notifyChanges({key:H,presence:"present",value:S});return}const l=await this.getFetchUrl(H),b=await this.fetchApi.fetch(l,{method:"PUT",headers:q,body:JSON.stringify({value:S})});if(!b.ok)throw await ResponseError.fromResponse(b);const{value:h}=await b.json();this.notifyChanges({key:H,value:h,presence:"present"})}observe$(H){return this.observables.has(H)||this.observables.set(H,new ObservableImpl(S=>(this.subscribers.add(S),Promise.resolve().then(()=>this.get(H)).then(l=>S.next(l)).catch(l=>this.errorApi.post(l)),()=>{this.subscribers.delete(S)})).filter(({key:S})=>S===H)),this.observables.get(H)}snapshot(H){return{key:H,presence:"unknown"}}async get(H){if(!await this.isSignedIn())return this.fallback.snapshot(H);const S=await this.getFetchUrl(H),l=await this.fetchApi.fetch(S);if(l.status===404)return{key:H,presence:"absent"};if(!l.ok)throw await ResponseError.fromResponse(l);try{const{value:b}=await l.json(),h=JSON.parse(JSON.stringify(b),(C,p)=>(typeof p=="object"&&p!==null&&Object.freeze(p),p));return{key:H,presence:"present",value:h}}catch{return{key:H,presence:"absent"}}}async getFetchUrl(H){const S=await this.discoveryApi.getBaseUrl("user-settings"),l=encodeURIComponent(this.namespace),b=encodeURIComponent(H);return`${S}/buckets/${l}/keys/${b}`}async notifyChanges(H){for(const S of this.subscribers)try{S.next(H)}catch{}}async isSignedIn(){try{const H=await this.identityApi.getCredentials();return!!(H!=null&&H.token)}catch{return!1}}}const Le=Q=>{const H=(0,U.tg)(u.s),S=Q.icon?Q.icon:A.Z;return W.createElement(o.R6,{text:"Settings",to:H(),icon:S})},ie=We.L,re=Q=>W.createElement(We.S.Route,{path:Q.path,title:Q.title},W.createElement(W.Fragment,null,"props.children"));(0,U.R5)(re,ie,"UserSettingsTab")},86287:(Rn,kt,e)=>{"use strict";e.d(kt,{$_:()=>de,IZ:()=>Ct,JZ:()=>Q,Jj:()=>H,Wb:()=>gt,cY:()=>S,jG:()=>Te,np:()=>me});var r=e(73689),m=e(12536),u=e(19219),W=e(41547),A=e(47591),o=e(4707),U=e(3493),We=e(76919),we=e(2784),a=e(68542),te=e(87561);const q=G=>(...Pe)=>{const ce=Pe.length===0?[1]:Pe,le=(Be,st)=>typeof Be=="string"?Be:st*Be;return ce.map(Be=>{const st=le(Be,G);return typeof st=="number"?`${st}px`:st}).join(" ")};function D(G,Pe){if(!Pe||typeof Pe=="string")return;const ce=typeof Pe=="function"?Pe(G):Pe;if(ce)return{"@global":ce}}function Z(G,Pe){if(!(!Pe||typeof Pe=="string")){if(typeof Pe=="object"){const ce={...G},le=G.spacing(1);return typeof le=="number"&&(ce.spacing=q(le)),Object.fromEntries(Object.entries(Pe).map(([Be,st])=>typeof st=="function"?[Be,st({theme:ce})]:[Be,st]))}return Pe}}const Le=/^&.Mui-([\w-]+)$/;function ie(G){let Pe=G;if(!G||typeof G!="object")return Pe;for(const ce of Object.keys(G)){const le=G[ce];if(!(!le||typeof le!="object"))for(const Be of Object.keys(le)){const st=Be,Kt=st.match(Le);if(Kt){const[,ct]=Kt,{[st]:Zt,...O}=le;Zt&&(Pe={...Pe,[ce]:O,[ct]:Zt})}}}return Pe}function re(G,Pe={}){const ce={},le={};for(const Be of Object.keys(Pe)){const st=Pe[Be];st&&("styleOverrides"in st&&(Be==="MuiCssBaseline"?ce[Be]=D(G,st.styleOverrides):ce[Be]=ie(Z(G,st.styleOverrides))),"defaultProps"in st&&(le[Be]=st.defaultProps))}return{overrides:ce,props:le}}const Q={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},H={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function S(G){var Pe;const{colors:ce,shape:le,options:Be}=G,Kt=`linear-gradient(90deg, ${(ce.length===1?[ce[0],ce[0]]:ce).join(", ")})`,ct=`${le},  ${Kt}`,Zt=(Pe=Be==null?void 0:Be.fontColor)!=null?Pe:"#FFFFFF";return{colors:ce,shape:le,backgroundImage:ct,fontColor:Zt}}const l={home:S({colors:H.teal,shape:Q.wave}),documentation:S({colors:H.pinkSea,shape:Q.wave2}),tool:S({colors:H.purpleSky,shape:Q.round}),service:S({colors:H.marineBlue,shape:Q.wave}),website:S({colors:H.veryBlue,shape:Q.wave}),library:S({colors:H.rubyRed,shape:Q.wave}),other:S({colors:H.darkGrey,shape:Q.wave}),app:S({colors:H.toastyOrange,shape:Q.wave}),apis:S({colors:H.teal,shape:Q.wave2}),card:S({colors:H.greens,shape:Q.wave})},b=16,h='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif',C="home";function p(G){const{palette:Pe,htmlFontSize:ce=b,fontFamily:le=h,defaultPageTheme:Be=C,pageTheme:st=l,typography:Kt}=G;if(!st[Be])throw new Error(`${Be} is not defined in pageTheme.`);const ct={htmlFontSize:ce,fontFamily:le,h1:{fontSize:54,fontWeight:700,marginBottom:10},h2:{fontSize:40,fontWeight:700,marginBottom:8},h3:{fontSize:32,fontWeight:700,marginBottom:6},h4:{fontWeight:700,fontSize:28,marginBottom:6},h5:{fontWeight:700,fontSize:24,marginBottom:4},h6:{fontWeight:700,fontSize:20,marginBottom:2}};return{palette:Pe,typography:Kt!=null?Kt:ct,page:st[Be],getPageTheme:({themeId:Zt})=>{var O;return(O=st[Zt])!=null?O:st[Be]}}}const be={MuiCssBaseline:{styleOverrides:G=>({html:{height:"100%",fontFamily:G.typography.fontFamily},body:{height:"100%",fontFamily:G.typography.fontFamily,overscrollBehaviorY:"none",fontSize:"0.875rem",lineHeight:1.43},a:{color:"inherit",textDecoration:"none"}})},MuiGrid:{defaultProps:{spacing:2}},MuiSwitch:{defaultProps:{color:"primary"}},MuiTableRow:{styleOverrides:{root:({theme:G})=>({"&:nth-of-type(odd)":{backgroundColor:G.palette.background.default}}),hover:{"&:hover":{cursor:"pointer"}},head:({theme:G})=>({"&:nth-of-type(odd)":{backgroundColor:G.palette.background.paper}})}},MuiTableCell:{styleOverrides:{root:({theme:G})=>({wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:G.spacing(3,2,3,2.5),borderBottom:0}),sizeSmall:({theme:G})=>({padding:G.spacing(1.5,2,1.5,2.5)}),head:({theme:G})=>({wordBreak:"break-word",overflow:"hidden",color:G.palette.textSubtle,fontWeight:"normal",lineHeight:"1"})}},MuiTabs:{styleOverrides:{root:{minHeight:24}}},MuiTab:{styleOverrides:{root:({theme:G})=>({color:G.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,A._j)(G.palette.link,.3),background:(0,A.$n)(G.palette.link,.95)},[G.breakpoints.up("md")]:{minWidth:120,fontSize:G.typography.pxToRem(14),fontWeight:500}}),textColorPrimary:({theme:G})=>({color:G.palette.link})}},MuiTableSortLabel:{styleOverrides:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"},"&.Mui-active":{fontWeight:"bold",color:"inherit"}}}},MuiListItemText:{styleOverrides:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},MuiButton:{styleOverrides:{text:{padding:void 0}}},MuiChip:{styleOverrides:{root:({theme:G})=>({marginRight:G.spacing(1),marginBottom:G.spacing(1)}),label:({theme:G})=>({lineHeight:G.spacing(2.5),fontWeight:G.typography.fontWeightMedium,fontSize:G.spacing(1.75)}),labelSmall:({theme:G})=>({fontSize:G.spacing(1.5)}),deleteIcon:({theme:G})=>({width:G.spacing(3),height:G.spacing(3),margin:G.spacing(0,.75,0,-.75)}),deleteIconSmall:({theme:G})=>({width:G.spacing(2),height:G.spacing(2),margin:G.spacing(0,.5,0,-.5)})}},MuiCard:{styleOverrides:{root:{display:"flex",flexDirection:"column"}}},MuiCardHeader:{styleOverrides:{root:{paddingBottom:0}}},MuiCardContent:{styleOverrides:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}}},MuiCardActions:{styleOverrides:{root:{justifyContent:"flex-end"}}},MuiLink:{defaultProps:{underline:"hover"}},MuiPaper:{styleOverrides:{root:{backgroundImage:"unset"}}}};var ge=(G,Pe,ce)=>{if(!Pe.has(G))throw TypeError("Cannot "+ce)},ye=(G,Pe,ce)=>(ge(G,Pe,"read from private field"),ce?ce.call(G):Pe.get(G)),ne=(G,Pe,ce)=>{if(Pe.has(G))throw TypeError("Cannot add the same private member more than once");Pe instanceof WeakSet?Pe.add(G):Pe.set(G,ce)},oe=(G,Pe,ce,le)=>(ge(G,Pe,"write to private field"),le?le.call(G,ce):Pe.set(G,ce),ce),X;class xe{constructor(Pe,ce){ne(this,X,new Map),oe(this,X,new Map),Pe&&ye(this,X).set("v4",Pe),ce&&ye(this,X).set("v5",ce)}getTheme(Pe){return ye(this,X).get(Pe)}}X=new WeakMap;function It(G){const Pe=p(G),ce={...be,...G.components},le=(0,o.Z)({...Pe,components:ce}),Be=re(le,ce),st={...(0,r.Z)(Pe),...Be};return new xe(st,le)}function P(G){const Pe=adaptV4Theme(G),ce=createTheme$2(G);return new xe(ce,Pe)}const Jt={light:{type:"light",mode:"light",background:{default:"#F8F8F8",paper:"#FFFFFF"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#1F5493",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#1F5493"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:"#FFD600",navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},dark:{type:"dark",mode:"dark",background:{default:"#333333",paper:"#424242"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:"#FFD600",navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}}},me={light:It({palette:Jt.light}),dark:It({palette:Jt.dark})};a.Z.configure(G=>`v5-${G}`);const Lt=(0,m.Z)({productionPrefix:"jss4-"});function Ct(G){const{children:Pe,theme:ce,noCssBaseline:le=!1}=G,Be=ce.getTheme("v4"),st=ce.getTheme("v5");let Kt;le||(Kt=we.createElement(te.ZP,null));let ct=we.createElement(we.Fragment,null,Kt,Pe);return Be&&(ct=we.createElement(u.ZP,{generateClassName:Lt},we.createElement(W.Z,{theme:Be},ct))),st&&(ct=we.createElement(U.Z,{injectFirst:!0},we.createElement(We.Z,{theme:st},ct))),ct}function je(G){var Pe,ce,le,Be;return{props:{MuiGrid:(ce=(Pe=be)==null?void 0:Pe.MuiGrid)==null?void 0:ce.defaultProps,MuiSwitch:(Be=(le=be)==null?void 0:le.MuiSwitch)==null?void 0:Be.defaultProps},...p(G)}}function nt(G){return re(G,be).overrides}function Te(G){const Pe=je(G),ce=(0,r.Z)(Pe),le=nt(ce);return{...ce,overrides:le}}const gt=Te({palette:Jt.light}),de=Te({palette:Jt.dark})},18473:(Rn,kt,e)=>{"use strict";e.d(kt,{CT:()=>U,EI:()=>o,Vt:()=>We,uW:()=>A});var r=e(2784);function m(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const u=m(),W=a=>`__@backstage/${a}__`;function A(a,te){const q=W(a);let D=u[q];return D||(D=te(),u[q]=D,D)}function o(a){Object.freeze(a);const te={atVersion(q){return a[q]}};return Object.defineProperty(te,"$map",{configurable:!0,enumerable:!0,get(){return a}}),te}function U(a){return A(a,()=>(0,r.createContext)(void 0))}function We(a){return(0,r.useContext)(U(a))}function we(a){return{set(te){globalThis[`__@backstage/${a}__`]=createContext(o(te))},reset(){delete globalThis[`__@backstage/${a}__`]}}}},74439:(Rn,kt,e)=>{"use strict";e.d(kt,{J$:()=>q});var r=e(96279),m=e.n(r),u=e(30195),W=(l=>(l.DENY="DENY",l.ALLOW="ALLOW",l.CONDITIONAL="CONDITIONAL",l))(W||{});function A(l,b){return l.name===b.name}function o(l,b){return"resourceType"in l?!b||l.resourceType===b:!1}function U(l){return l.attributes.action==="create"}function We(l){return l.attributes.action==="read"}function we(l){return l.attributes.action==="update"}function a(l){return l.attributes.action==="delete"}function te(l){return{authorize:async(b,h)=>await l.authorize(b,h),authorizeConditional(b,h){const C=b;return l.authorize(C,h)}}}function q({name:l,attributes:b,resourceType:h}){return h?{type:"resource",name:l,attributes:b,resourceType:h}:{type:"basic",name:l,attributes:b}}var D=Object.defineProperty,Z=(l,b,h)=>b in l?D(l,b,{enumerable:!0,configurable:!0,writable:!0,value:h}):l[b]=h,Le=(l,b,h)=>(Z(l,typeof b!="symbol"?b+"":b,h),h);const ie=u.z.lazy(()=>u.z.object({rule:u.z.string(),resourceType:u.z.string(),params:u.z.record(u.z.any()).optional()}).or(u.z.object({anyOf:u.z.array(ie).nonempty()})).or(u.z.object({allOf:u.z.array(ie).nonempty()})).or(u.z.object({not:ie}))),re=u.z.object({result:u.z.literal(W.ALLOW).or(u.z.literal(W.DENY))}),Q=u.z.union([u.z.object({result:u.z.literal(W.ALLOW).or(u.z.literal(W.DENY))}),u.z.object({result:u.z.literal(W.CONDITIONAL),pluginId:u.z.string(),resourceType:u.z.string(),conditions:ie})]),H=(l,b)=>z.object({items:z.array(z.intersection(z.object({id:z.string()}),l)).refine(h=>h.length===b.size&&h.every(({id:C})=>b.has(C)),{message:"Items in response do not match request"})});class S{constructor(b){Le(this,"enabled"),Le(this,"discovery");var h;this.discovery=b.discovery,this.enabled=(h=b.config.getOptionalBoolean("permission.enabled"))!=null?h:!1}async authorize(b,h){return this.makeRequest(b,re,h)}async authorizeConditional(b,h){return this.makeRequest(b,Q,h)}async makeRequest(b,h,C){if(!this.enabled)return b.map(X=>({result:W.ALLOW}));const p={items:b.map(X=>({id:uuid.v4(),...X}))},be=await this.discovery.getBaseUrl("permission"),ge=await fetch(`${be}/authorize`,{method:"POST",body:JSON.stringify(p),headers:{...this.getAuthorizationHeader(C==null?void 0:C.token),"content-type":"application/json"}});if(!ge.ok)throw await ResponseError.fromResponse(ge);const ye=await ge.json(),oe=H(h,new Set(p.items.map(({id:X})=>X))).parse(ye).items.reduce((X,xe)=>(X[xe.id]=xe,X),{});return p.items.map(X=>oe[X.id])}getAuthorizationHeader(b){return b?{Authorization:`Bearer ${b}`}:{}}}}}]);})();

//# sourceMappingURL=module-backstage.b9368017.js.map