"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3570],{52758:(Ga,yn,v)=>{v.d(yn,{E:()=>Xt,S:()=>cn,a:()=>He,c:()=>jn,g:()=>mn,n:()=>Me,s:()=>ct});var Ae=v(57032),Ue=v(30705),rt=v(38888),ee=v(37004),Fe=v(2784),o=v(23566),re=v(64279),Ve=v(7089),Y=(ke=>(ke.Success="success",ke.AlmostSuccess="almost-success",ke.Partial="partial",ke.AlmostFailure="almost-failure",ke.Failure="failure",ke))(Y||{});const He=(0,Ae.c)({id:"plugin.scoringdata.service"});class lt{constructor({configApi:ue,catalogApi:dt,fetchApi:Ce}){this.configApi=ue,this.catalogApi=dt,this.fetchApi=Ce}async getScore(ue){if(!ue)return;const Ce=`${this.getJsonDataUrl()}${ue.metadata.namespace}/${ue.kind}/${ue.metadata.name}.json`.toLowerCase(),ge=await fetch(Ce).then(j=>{switch(j.status){case 404:return null;case 200:return j.json();default:throw new Error(`error from server (code ${j.status})`)}});if(ge)return this.extendEntityScore(ge,void 0)}async getAllScores(ue){var dt;const ge=`${this.getJsonDataUrl()}all.json`;let j=await fetch(ge).then(xe=>{switch(xe.status){case 404:return;case 200:return xe.json();default:throw new Error(`error from server (code ${xe.status})`)}});if(!j)return;ue&&ue.length&&(j=j.filter(xe=>{var Be;return ue.map(Ze=>Ze.toLocaleLowerCase()).includes((Be=xe.entityRef)==null?void 0:Be.kind.toLowerCase())}));const ve=j.reduce((xe,Be)=>{var Ze;return(Ze=Be.entityRef)!=null&&Ze.name&&xe.add(Be.entityRef.name),xe},new Set),je=(dt=this.configApi.getOptionalBoolean("scorecards.fetchAllEntities"))!=null?dt:!1,J=await this.catalogApi.getEntities({filter:je?ue?{kind:ue}:{}:{"metadata.name":Array.from(ve)},fields:["kind","metadata.name","metadata.namespace","spec.owner","relations"]}),pe=je?J.items.filter(xe=>ve.has(xe.metadata.name)):J.items;return j.map(xe=>this.extendEntityScore(xe,pe))}getJsonDataUrl(){var ue;return(ue=this.configApi.getOptionalString("scorecards.jsonDataUrl"))!=null?ue:"https://unknown-url-please-configure"}extendEntityScore(ue,dt){var Ce,ge,j,ve,je,J;if(ue===null)throw new Error("can not extend null entity score.");if(typeof ue=="undefined")throw new Error("can not extend undefined entity score.");const pe=dt?dt.find(Ge=>{var Ee,gt,Lt,Dt,Ht;return Ge.metadata.name===((Ee=ue.entityRef)==null?void 0:Ee.name)&&(!((gt=ue.entityRef)!=null&&gt.kind)||Ge.kind.toLowerCase()===((Lt=ue.entityRef)==null?void 0:Lt.kind.toLowerCase()))&&(!((Dt=ue.entityRef)!=null&&Dt.namespace)||(Ge.metadata.namespace||"default").toLowerCase()==((Ht=ue.entityRef)==null?void 0:Ht.namespace.toLowerCase()))}):void 0,xe=(ge=(Ce=pe==null?void 0:pe.relations)==null?void 0:Ce.find(Ge=>Ge.type===ee.S4))==null?void 0:ge.targetRef;let Be;if(ue.scoringReviewer&&!((j=ue.scoringReviewer)!=null&&j.name))Be={name:ue.scoringReviewer,kind:"User",namespace:"default"};else if((ve=ue.scoringReviewer)!=null&&ve.name){const Ge=ue.scoringReviewer;Be={name:Ge.name,kind:(je=Ge==null?void 0:Ge.kind)!=null?je:"User",namespace:(J=Ge==null?void 0:Ge.namespace)!=null?J:"default"}}const Ze=ue.scoringReviewDate?new Date(ue.scoringReviewDate):void 0;return{owner:xe?(0,ee.of)(xe):void 0,reviewer:Be,reviewDate:Ze,...ue}}}const Ye=(0,Ue.NT)({id:"score-card"}),tt=/^\S+\s+#[0-9a-f]{6,8}\s+#[0-9a-f]{6,8}$/i,xt=/^#[0-9a-f]{6,8}\s+#[0-9a-f]{6,8}$/i,wt={"extra-details-failure":["#555555","#CCCCCC"],"extra-details-almost-failure":["#555555","#CCCCCC"],"extra-details-partial":["#555555","#CCCCCC"],"extra-details-almost-success":["#555555","#CCCCCC"],"extra-details-success":["#555555","#CCCCCC"],"extra-details-unknown":["#555555","#CCCCCC"],"score-success":["rgba(0, 0, 0, 0.87)","rgb(114, 175, 80)"],"score-almost-success":["rgba(0, 0, 0, 0.87)","rgb(172, 191, 140)"],"score-partial":["rgba(0, 0, 0, 0.87)","rgb(226, 232, 179)"],"score-almost-failure":["rgba(0, 0, 0, 0.87)","rgb(255, 192, 85)"],"score-failure":["rgba(0, 0, 0, 0.87)","rgb(235, 111, 53)"],"score-unknown":["rgba(0, 0, 0, 0.87)","rgb(158, 158, 158)"],white:["#000000","#FFFFFF"],snow:["#FFFFFF","#001F3F"],graphite:["#555555","#CCCCCC"],arctic:["#34495E","#ECF0F1"],"steel-blue":["#266294","#B0C4DE"],emerald:["#23894e","#D0ECE7"],iceberg:["#3c9366","#DFF0E2"],sapphire:["#3498DB","#D5EAF8"],periwinkle:["#8E44AD","#D2B4DE"],lavender:["#6A5ACD","#dddded"],sky:["#3498DB","#c7e1f3"],azure:["#0074D9","#F0FFFF"],teal:["#00877a","#B2DFDB"],cerulean:["#003366","#00BFFF"],indigo:["#4B0082","#A9A9F5"],olive:["#808000","#DAF7A6"],royal:["#88bcff","#273746"],turquoise:["#16A085","#E8F8F5"],sage:["#5F6A6A","#A9DFBF"],seafoam:["#4fa573","#E0F8D8"],lilac:["#aa71c1","#F4ECF7"]};let ln;const bt=()=>{if(ln)return ln;let ke=wt;const dt=(0,Ae.u)(Ae.p).getOptionalString("scorecards.colorCombinations");if(dt){console.debug("Custom color combinations loaded: %s",dt);const Ce=dt.split(`
`).reduce((ge,j)=>{if(j.match(tt)){const ve=j.split(/\s+/);ge[ve[0]]=[ve[1],ve[2]]}else console.warn("Could not match scorecards.colorCombinations line [%s] with regexp [%s], which is the supported configuration format.. please follow it!",j,tt);return ge},{});ke={...ke,...Ce}}return ln=ke,ln},Me=ke=>{const ue=bt();if(ke&&ke in ue)return{foreground:ue[ke][0],background:ue[ke][1]};if(ke!=null&&ke.match(xt)){const dt=ke.split(/\s+/);return{foreground:dt[0],background:dt[1]}}return Me("white")},ct=ke=>{if(typeof ke=="undefined")return Me("score-unknown");switch(ke){case Y.Success:case Y.AlmostSuccess:case Y.Partial:case Y.AlmostFailure:case Y.Failure:return Me(`score-${ke}`);default:return Me("score-unknown")}},mn=ke=>Fe.createElement(o.Gk,{error:ke,title:"Could not load data",defaultExpanded:!0,key:"error"}),fn=ke=>{const ue=(0,Ae.u)(Ae.r),dt=(0,Ae.u)(He),{error:Ce,value:ge,loading:j}=(0,re.default)(async()=>dt.getAllScores(ke),[dt]);return(0,Fe.useEffect)(()=>{Ce&&ue.post(Ce)},[Ce,ue]),{loading:j,value:ge,error:Ce}},ye=({title:ke,scores:ue,excludedColumns:dt,entityLinkPath:Ce})=>{let ge=[{title:"Name",field:"entityRef.name",render:J=>{var pe,xe;return(pe=J.entityRef)!=null&&pe.name?Fe.createElement(o.rU,{to:`/catalog/${(xe=J.entityRef.namespace)!=null?xe:ee.zG}/${J.entityRef.kind}/${J.entityRef.name}/${Ce!=null?Ce:"score"}`,"data-id":J.entityRef.name},J.entityRef.name):Fe.createElement(Fe.Fragment,null,"Missing entityRef.name key")}},{title:"Kind",field:"entityRef.kind",render:J=>Fe.createElement(Fe.Fragment,null,J.entityRef.kind)},{title:"Owner",field:"owner.name",render:J=>J.owner?Fe.createElement(Fe.Fragment,null,Fe.createElement(rt.dx,{entityRef:J.owner},J.owner.name)):null},{title:"Reviewer",field:"scoringReviewer",render:J=>{var pe;return J.reviewer?Fe.createElement(Fe.Fragment,null,Fe.createElement(rt.dx,{entityRef:J.reviewer},(pe=J.reviewer)==null?void 0:pe.name)):null}},{title:"Date",field:"scoringReviewDate",render:J=>J.reviewDate?Fe.createElement(Fe.Fragment,null,J.reviewDate.toLocaleDateString()):null}];ue.flatMap(J=>{var pe;return(pe=J.areaScores)!=null?pe:[]}).reduce((J,pe)=>(!pe||!pe.title||J.findIndex(xe=>xe===pe.title)!==-1||(J.push(pe.title),ge.push({title:Fe.createElement("div",{style:{textAlign:"center",marginLeft:"18px"}}," ",pe.title,pe.scoreWeight&&Fe.createElement("div",{style:{opacity:"0.8",fontWeight:"normal",fontSize:"12px",height:"auto",marginTop:"4px",fontVariant:"small-caps"}},pe.scoreWeight)),field:"n/a",customSort:(xe,Be)=>{var Ze,Ge;const Ee=xe!=null&&xe.areaScores?(Ze=xe.areaScores.find(Lt=>Lt.title===pe.title))==null?void 0:Ze.scorePercent:void 0,gt=Be!=null&&Be.areaScores?(Ge=Be.areaScores.find(Lt=>Lt.title===pe.title))==null?void 0:Ge.scorePercent:void 0;return!Ee||Ee<(gt!=null?gt:0)?-1:!gt||gt<Ee?1:0},align:"center",render:xe=>{var Be;const Ze=xe!=null&&xe.areaScores?xe.areaScores.find(gt=>gt.title===pe.title):void 0,Ge={margin:0,backgroundColor:ct(Ze==null?void 0:Ze.scoreSuccess).background,color:ct(Ze==null?void 0:Ze.scoreSuccess).foreground,minWidth:"4rem"},Ee=(Be=Ze==null?void 0:Ze.scoreLabel)!=null?Be:`${Ze==null?void 0:Ze.scorePercent} %`;return typeof(Ze==null?void 0:Ze.scorePercent)!="undefined"?Fe.createElement(Ve.Z,{label:Ee,style:Ge}):null}})),J),[]),ge.push({title:"Total",align:"right",field:"scorePercent",render:J=>{var pe;const xe={margin:0,backgroundColor:ct(J==null?void 0:J.scoreSuccess).background,color:ct(J==null?void 0:J.scoreSuccess).foreground,float:"right",minWidth:"4rem"},Be=(pe=J==null?void 0:J.scoreLabel)!=null?pe:`${J==null?void 0:J.scorePercent} %`;return typeof J.scorePercent!="undefined"?Fe.createElement(Ve.Z,{label:Be,style:xe}):null}}),dt&&(ge=ge.filter(J=>J.title&&dt.indexOf(J.title.toString().toLocaleLowerCase())===-1));const j=ue.length>=10?ue.length:10,ve=ue.length<100?j:100,je=j>ve?ve:j;return Fe.createElement("div",{"data-testid":"score-board-table"},Fe.createElement(o.iA,{title:ke!=null?ke:"Entities scores overview",options:{search:!0,paging:!0,padding:"dense",pageSize:je,pageSizeOptions:[je,20,50,100,200]},columns:ge,data:ue}))},cn=({title:ke,entityKindFilter:ue,excludedColumns:dt,entityLinkPath:Ce})=>{const{loading:ge,error:j,value:ve}=fn(ue);return ge?Fe.createElement(o.Ex,null):j?mn(j):Fe.createElement(ye,{excludedColumns:dt,entityLinkPath:Ce,title:ke,scores:ve||[]})},Nn=(0,Ue.rx)({id:"score-card",routes:{root:Ye},apis:[(0,Ue.ni)({api:He,deps:{configApi:Ae.p,catalogApi:rt.Ah,fetchApi:Ae.s},factory:({configApi:ke,catalogApi:ue,fetchApi:dt})=>new lt({configApi:ke,catalogApi:ue,fetchApi:dt})})]}),jn=Nn.provide((0,Ue.P4)({name:"score-board-page",component:()=>v.e(8980).then(v.bind(v,28980)).then(ke=>ke.ScoreBoardPage),mountPoint:Ye})),Xt=Nn.provide((0,Ue.CO)({name:"score-board-card",component:{lazy:()=>v.e(2787).then(v.bind(v,32787)).then(ke=>ke.ScoreCard)}}))},96290:(Ga,yn,v)=>{v.d(yn,{hD:()=>Ae.c,pF:()=>Ae.E});var Ae=v(52758),Ue=v(2784),rt=v(23566)},37004:(Ga,yn,v)=>{v.d(yn,{S4:()=>ca,cz:()=>Le,eE:()=>Xt,of:()=>jn,zG:()=>tt});var Ae=v(76635),Ue=v.n(Ae),rt=v(27991),ee=v.n(rt);function Fe(Z){return Z.kind.toLocaleUpperCase("en-US")==="API"}function o(Z){return Z.kind.toLocaleUpperCase("en-US")==="COMPONENT"}function re(Z){return Z.kind.toLocaleUpperCase("en-US")==="DOMAIN"}function Ve(Z){return Z.kind.toLocaleUpperCase("en-US")==="GROUP"}function Y(Z){return Z.kind.toLocaleUpperCase("en-US")==="LOCATION"}function He(Z){return Z.kind.toLocaleUpperCase("en-US")==="RESOURCE"}function lt(Z){return Z.kind.toLocaleUpperCase("en-US")==="SYSTEM"}function Ye(Z){return Z.kind.toLocaleUpperCase("en-US")==="USER"}const tt="default",xt="backstage.io/view-url",wt="backstage.io/edit-url",ln="kubernetes.io/api-server",bt="kubernetes.io/api-server-certificate-authority",Me="kubernetes.io/auth-provider";var ct=Object.defineProperty,mn=(Z,T,$)=>T in Z?ct(Z,T,{enumerable:!0,configurable:!0,writable:!0,value:$}):Z[T]=$,fn=(Z,T,$)=>(mn(Z,typeof T!="symbol"?T+"":T,$),$);class ye{constructor(T=tt){fn(this,"namespace"),this.namespace=T}async enforce(T){return T.metadata.namespace?T:lodash.merge({metadata:{namespace:this.namespace}},T)}}function cn(Z){let T=Z.indexOf(":");const $=Z.indexOf("/");$!==-1&&$<T&&(T=-1);const fe=T===-1?void 0:Z.slice(0,T),Oe=$===-1?void 0:Z.slice(T+1,$),Qe=Z.slice(Math.max(T+1,$+1));if(fe===""||Oe===""||Qe==="")throw new TypeError(`Entity reference "${Z}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:fe,namespace:Oe,name:Qe}}function Nn(Z){return{kind:Z.kind,namespace:Z.metadata.namespace||tt,name:Z.metadata.name}}function jn(Z,T){var $,fe,Oe,Qe;if(!Z)throw new Error("Entity reference must not be empty");const kt=T==null?void 0:T.defaultKind,Bt=(T==null?void 0:T.defaultNamespace)||tt;let ce,Wt,rn;if(typeof Z=="string"){const Zt=cn(Z);ce=($=Zt.kind)!=null?$:kt,Wt=(fe=Zt.namespace)!=null?fe:Bt,rn=Zt.name}else ce=(Oe=Z.kind)!=null?Oe:kt,Wt=(Qe=Z.namespace)!=null?Qe:Bt,rn=Z.name;if(ce)if(Wt){if(!rn){const Zt=JSON.stringify(Z);throw new Error(`Entity reference ${Zt} had missing or empty name`)}}else{const Zt=JSON.stringify(Z);throw new Error(`Entity reference ${Zt} had missing or empty namespace`)}else{const Zt=JSON.stringify(Z);throw new Error(`Entity reference ${Zt} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:ce,namespace:Wt,name:rn}}function Xt(Z){var T,$;let fe,Oe,Qe;return"metadata"in Z?(fe=Z.kind,Oe=(T=Z.metadata.namespace)!=null?T:tt,Qe=Z.metadata.name):(fe=Z.kind,Oe=($=Z.namespace)!=null?$:tt,Qe=Z.name),`${fe.toLocaleLowerCase("en-US")}:${Oe.toLocaleLowerCase("en-US")}/${Qe.toLocaleLowerCase("en-US")}`}var ke=Object.defineProperty,ue=(Z,T,$)=>T in Z?ke(Z,T,{enumerable:!0,configurable:!0,writable:!0,value:$}):Z[T]=$,dt=(Z,T,$)=>(ue(Z,typeof T!="symbol"?T+"":T,$),$);class Ce{constructor(T){dt(this,"parentRef");const{kind:$,namespace:fe,name:Oe}=jn(T,{defaultKind:"Group",defaultNamespace:tt});if($.toLocaleUpperCase("en-US")!=="GROUP")throw new TypeError("group parent must be a group");this.parentRef=Xt({kind:$,namespace:fe,name:Oe})}async enforce(T){if(T.kind!=="Group")return T;const $=T;return $.spec.parent||Xt($)!==this.parentRef&&($.spec.parent=this.parentRef),$}}class ge{static isValidPrefixAndOrSuffix(T,$,fe,Oe){if(typeof T!="string")return!1;const Qe=T.split($);return Qe.length===1?Oe(Qe[0]):Qe.length===2?fe(Qe[0])&&Oe(Qe[1]):!1}static isJsonSafe(T){try{return Ue().isEqual(T,JSON.parse(JSON.stringify(T)))}catch{return!1}}static isValidDnsSubdomain(T){return typeof T=="string"&&T.length>=1&&T.length<=253&&T.split(".").every(ge.isValidDnsLabel)}static isValidDnsLabel(T){return typeof T=="string"&&T.length>=1&&T.length<=63&&/^[a-z0-9]+(?:\-+[a-z0-9]+)*$/.test(T)}static isValidTag(T){return typeof T=="string"&&T.length>=1&&T.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(T)}static isValidUrl(T){if(typeof T!="string")return!1;try{return new URL(T),!0}catch{return!1}}static isValidString(T){var $;return typeof T=="string"&&(($=T==null?void 0:T.trim())==null?void 0:$.length)>=1}static isNonEmptyString(T){var $;return typeof T=="string"&&(($=T==null?void 0:T.trim())==null?void 0:$.length)>=1}}var j="http://json-schema.org/draft-07/schema",ve="EntityEnvelope",je="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",J=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],pe="object",xe=["apiVersion","kind","metadata"],Be=!0,Ze={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},Ge={$schema:j,$id:ve,description:je,examples:J,type:pe,required:xe,additionalProperties:Be,properties:Ze},Ee="http://json-schema.org/draft-07/schema",gt="Entity",Lt="The parts of the format that's common to all versions/kinds of entity.",Dt=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],Ht="object",Pn=["apiVersion","kind","metadata"],vn=!1,Nt={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},qt={$schema:Ee,$id:gt,description:Lt,examples:Dt,type:Ht,required:Pn,additionalProperties:vn,properties:Nt},zn="http://json-schema.org/draft-07/schema",en="EntityMeta",Ln="Metadata fields common to all versions/kinds of entity.",U=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],_="object",V=["name"],le=!0,he={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},type:{type:"string",description:"An optional value to categorize links into specific groups.",examples:["runbook","documentation","logs","dashboard"],minLength:1}}}}},Je={$schema:zn,$id:en,description:Ln,examples:U,type:_,required:V,additionalProperties:le,properties:he},Et="http://json-schema.org/draft-07/schema",St="common",gn="object",Kt="Common definitions to import from other schemas",Un={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","targetRef"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference",deprecated:!0},targetRef:{type:"string",minLength:1,description:"The entity ref of the target of this relation."}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},ha={$schema:Et,$id:St,type:gn,description:Kt,definitions:Un};const ya=new Map,Ca=[Ge,qt,Je,ha];function wn(Z){if(!(Z!=null&&Z.length))throw new TypeError("Unknown error");const T=Z[0];throw new TypeError(`${T.instancePath||"<root>"} ${T.message}${T.params?` - ${Object.entries(T.params).map(([$,fe])=>`${$}: ${fe}`).join(", ")}`:""}`)}function Vn(Z,T={}){var $;const fe=($=T==null?void 0:T.disableCache)!=null?$:!1,Oe=fe?"":JSON.stringify(Z);if(!fe){const ce=ya.get(Oe);if(ce)return ce}const Qe=kn(Z),kt=new(ee())({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});Qe.length&&kt.addSchema(Qe,void 0,void 0,!0);const Bt=kt.compile(Z);return fe||ya.set(Oe,Bt),Bt}function kn(Z){if(typeof Z!="object")return[];const T=new Set;Z.$id&&T.add(Z.$id);const $=new Array,fe=[Z];for(;fe.length;){const Oe=fe.pop();for(const Qe of Hn(Oe))if(!T.has(Qe)){T.add(Qe);const kt=Ca.find(Bt=>Bt.$id===Qe);kt&&($.push(kt),fe.push(kt))}}return $}function*Hn(Z){const T=[Z];for(;T.length;){const $=T.pop();if(typeof $=="object"&&$)for(const[fe,Oe]of Object.entries($))fe==="$ref"&&typeof Oe=="string"?yield Oe.split("#")[0]:T.push(Oe)}}function tn(Z){const T=Vn(Z||Ge);return $=>{if(T($)===!0)return $;throw wn(T.errors)}}function ia(Z){const T=Vn(Z);return $=>{var fe;if(T($)===!0)return $;const Qe=(fe=T.errors)==null?void 0:fe.filter(kt=>["/kind","/apiVersion"].includes(kt.instancePath));if(Qe!=null&&Qe.length&&Qe.every(kt=>kt.keyword==="enum"))return!1;throw wn(T.errors)}}function va(Z){const T=Vn(Z||qt);return $=>{if(T($)===!0)return $;throw wn(T.errors)}}class Mt{static isValidApiVersion(T){return ge.isValidPrefixAndOrSuffix(T,"/",ge.isValidDnsSubdomain,$=>$.length>=1&&$.length<=63&&/^[a-z0-9A-Z]+$/.test($))}static isValidKind(T){return typeof T=="string"&&T.length>=1&&T.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(T)}static isValidObjectName(T){return typeof T=="string"&&T.length>=1&&T.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(T)}static isValidNamespace(T){return ge.isValidDnsLabel(T)}static isValidLabelKey(T){return ge.isValidPrefixAndOrSuffix(T,"/",ge.isValidDnsSubdomain,Mt.isValidObjectName)}static isValidLabelValue(T){return T===""||Mt.isValidObjectName(T)}static isValidAnnotationKey(T){return ge.isValidPrefixAndOrSuffix(T,"/",ge.isValidDnsSubdomain,Mt.isValidObjectName)}static isValidAnnotationValue(T){return typeof T=="string"}}const Gn={isValidApiVersion:Mt.isValidApiVersion,isValidKind:Mt.isValidKind,isValidEntityName:Mt.isValidObjectName,isValidNamespace:Mt.isValidNamespace,isValidLabelKey:Mt.isValidLabelKey,isValidLabelValue:Mt.isValidLabelValue,isValidAnnotationKey:Mt.isValidAnnotationKey,isValidAnnotationValue:Mt.isValidAnnotationValue,isValidTag:Z=>typeof Z=="string"&&Z.length>=1&&Z.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(Z)};function xr(Z={}){return{...Gn,...Z}}var En=Object.defineProperty,Sr=(Z,T,$)=>T in Z?En(Z,T,{enumerable:!0,configurable:!0,writable:!0,value:$}):Z[T]=$,nr=(Z,T,$)=>(Sr(Z,typeof T!="symbol"?T+"":T,$),$);class ar{constructor(T=xr()){nr(this,"validators"),this.validators=T}async enforce(T){var $,fe,Oe,Qe,kt,Bt,ce;function Wt(ht,Rn,pa){if(Rn==null)throw new Error(`${ht} must have a value`);let Pa;try{Pa=pa(Rn)}catch(Ft){throw new Error(`${ht} could not be validated, ${Ft}`)}if(!Pa){let Ft;switch(pa.name){case"isValidLabelValue":case"isValidObjectName":Ft="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":Ft="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":Ft="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":Ft="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":Ft="a string";break;case"isValidKind":Ft="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":Ft="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":Ft="a non empty string";break;default:Ft=void 0;break}const qn=Ft?` expected ${Ft} but found "${Rn}".`:"";throw new Error(`"${ht}" is not valid;${qn} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function rn(ht,Rn,pa){return Rn===void 0||Wt(ht,Rn,pa)}Wt("apiVersion",T.apiVersion,this.validators.isValidApiVersion),Wt("kind",T.kind,this.validators.isValidKind),Wt("metadata.name",T.metadata.name,this.validators.isValidEntityName),rn("metadata.namespace",T.metadata.namespace,this.validators.isValidNamespace);for(const[ht,Rn]of Object.entries(($=T.metadata.labels)!=null?$:[]))Wt(`labels.${ht}`,ht,this.validators.isValidLabelKey),Wt(`labels.${ht}`,Rn,this.validators.isValidLabelValue);for(const[ht,Rn]of Object.entries((fe=T.metadata.annotations)!=null?fe:[]))Wt(`annotations.${ht}`,ht,this.validators.isValidAnnotationKey),Wt(`annotations.${ht}`,Rn,this.validators.isValidAnnotationValue);const Zt=(Oe=T.metadata.tags)!=null?Oe:[];for(let ht=0;ht<Zt.length;++ht)Wt(`tags.${ht}`,Zt[ht],this.validators.isValidTag);const xa=(Qe=T.metadata.links)!=null?Qe:[];for(let ht=0;ht<xa.length;++ht)Wt(`links.${ht}.url`,(kt=xa[ht])==null?void 0:kt.url,ge.isValidUrl),rn(`links.${ht}.title`,(Bt=xa[ht])==null?void 0:Bt.title,ge.isNonEmptyString),rn(`links.${ht}.icon`,(ce=xa[ht])==null?void 0:ce.icon,Mt.isValidObjectName);return T}}var wa=Object.defineProperty,Ea=(Z,T,$)=>T in Z?wa(Z,T,{enumerable:!0,configurable:!0,writable:!0,value:$}):Z[T]=$,Ka=(Z,T,$)=>(Ea(Z,typeof T!="symbol"?T+"":T,$),$);const ss=null;class os{constructor(T=ss){Ka(this,"knownFields"),this.knownFields=T}async enforce(T){for(const $ of Object.keys(T))if(!this.knownFields.includes($))throw new Error(`Unknown field ${$}`);return T}}var Cr=Object.defineProperty,wr=(Z,T,$)=>T in Z?Cr(Z,T,{enumerable:!0,configurable:!0,writable:!0,value:$}):Z[T]=$,rr=(Z,T,$)=>(wr(Z,typeof T!="symbol"?T+"":T,$),$);class is{constructor(){rr(this,"validate")}async enforce(T){if(!this.validate){const Oe=new Ajv({allowUnionTypes:!0});this.validate=Oe.addSchema([ha,Je],void 0,void 0,!0).compile(qt)}if(this.validate(T)===!0)return T;const[fe]=this.validate.errors||[];throw fe?new Error(`Malformed envelope, ${fe.instancePath||"<root>"} ${fe.message}`):new Error("Malformed envelope, Unknown error")}}class sr{constructor(T){this.policies=T}async enforce(T){let $=T;for(const fe of this.policies){const Oe=await fe.enforce($);if(!Oe)throw new Error(`Policy ${fe.constructor.name} did not return a result`);$=Oe}return $}}class or{constructor(T){this.policies=T}async enforce(T){for(const $ of this.policies){const fe=await $.enforce(T);if(fe)return fe}throw new Error("The entity did not match any known policy")}}const Fr={allOf(Z){return new sr(Z)},oneOf(Z){return new or(Z)}};var ir="http://json-schema.org/draft-07/schema",jr="ApiV1alpha1",ka="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",lr=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],ut=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc","trpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],ba={$schema:ir,$id:jr,description:ka,examples:lr,allOf:ut};function te(Z){let T;return{async check($){return T||(T=ia(Z)),T($)===$}}}const la=te(ba);var K="http://json-schema.org/draft-07/schema",cr="ComponentV1alpha1",Tn='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',Ta=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],dr=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],$a={$schema:K,$id:cr,description:Tn,examples:Ta,allOf:dr};const Ya=te($a);var Ia="http://json-schema.org/draft-07/schema",kr="DomainV1alpha1",oe="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",Yt=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],Ne=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],Ja={$schema:Ia,$id:kr,description:oe,examples:Yt,allOf:Ne};const dn=te(Ja);var Qa="http://json-schema.org/draft-07/schema",Aa="GroupV1alpha1",_a="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",Kn=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],be=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],On={$schema:Qa,$id:Aa,description:_a,examples:Kn,allOf:be};const Tr=te(On);var Pe="http://json-schema.org/draft-07/schema",$e="LocationV1alpha1",ur="A location is a marker that references other places to look for catalog data.",zr=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],pr=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],Rt={$schema:Pe,$id:$e,description:ur,examples:zr,allOf:pr};const ie=te(Rt),ca="ownedBy",X="ownerOf",Ur="consumesApi",ta="apiConsumedBy",Da="providesApi",Xa="apiProvidedBy",Bn="dependsOn",mr="dependencyOf",Yn="parentOf",da="childOf",me="memberOf",Pt="hasMember",Le="partOf",Ma="hasPart";var Ot="http://json-schema.org/draft-07/schema",na="ResourceV1alpha1",Jn="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",bn=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],Ra=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],nn={$schema:Ot,$id:na,description:Jn,examples:bn,allOf:Ra};const Te=te(nn);var nt="http://json-schema.org/draft-07/schema",Qn="SystemV1alpha1",ze="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",_e=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],Wa=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],Na={$schema:nt,$id:Qn,description:ze,examples:_e,allOf:Wa};const Xn=te(Na);var un="http://json-schema.org/draft-07/schema",Fa="UserV1alpha1",hn="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",Zn=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],aa=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],$n={$schema:un,$id:Fa,description:hn,examples:Zn,allOf:aa};const ja=te($n),In="backstage.io/managed-by-location",_n="backstage.io/managed-by-origin-location",Gt="backstage.io/source-location",Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function An(Z){if(typeof Z!="string")throw new TypeError(`Unable to parse location ref '${Z}', unexpected argument ${typeof Z}`);const T=Z.indexOf(":");if(T<0)throw new TypeError(`Unable to parse location ref '${Z}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const $=Z.substring(0,T).trim(),fe=Z.substring(T+1).trim();if(!$||!fe)throw new TypeError(`Unable to parse location ref '${Z}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if($==="http"||$==="https")throw new TypeError(`Invalid location ref '${Z}', please prefix it with 'url:', e.g. 'url:${Z}'`);if(Tt.test(fe))throw new TypeError(`Invalid location ref '${Z}', target is a javascript: URL`);return{type:$,target:fe}}function an(Z){const{type:T,target:$}=Z;if(T){if(!$)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");if(Tt.test($))throw new TypeError(`Invalid location ref '${T}:${$}', target is a javascript: URL`);return`${T}:${$}`}function ua(Z){var T,$,fe,Oe,Qe;const kt=(Qe=($=(T=Z.metadata)==null?void 0:T.annotations)==null?void 0:$[Gt])!=null?Qe:(Oe=(fe=Z.metadata)==null?void 0:fe.annotations)==null?void 0:Oe[In];if(!kt)throw new Error(`Entity '${Xt(Z)}' is missing location`);return An(kt)}},23566:(Ga,yn,v)=>{v.d(yn,{VY:()=>ts,yW:()=>li,ub:()=>no,h4:()=>ns,i9:()=>Cc,rJ:()=>yr,rU:()=>ra,SA:()=>il,T3:()=>Vs,Ex:()=>Or,Gk:()=>Ki,qt:()=>_l,iA:()=>dc});var Ae=v(57032),Ue=v(30705),rt=v(61837),ee=v(90436),Fe=v(19928),o=v(2784),re=v(79692),Ve=v(60364),Y=v(41128),He=v(15459),lt=v(12420),Ye=v(76600),tt=v(41547),xt=v(77277),wt=v(86689),ln=v(72779),bt=v.n(ln),Me=v(76635),ct=v(73557),mn=v(39857),fn=v(16060),ye=v(95544),cn=v(56553),Nn=v(26639),jn=v(39595),Xt=v(80030),ke=v(19353),ue=v(95074),dt=v(41156),Ce=v(70367),ge=v(46506),j=v(54073),ve=v(10368),je=v(19574),J=v(60905);const pe=v.p+"static/missingAnnotation.67f79e98..svg",xe=v.p+"static/noInformation.4b426325..svg",Be=v.p+"static/createComponent.975d1e1e..svg",Ze=v.p+"static/noBuild.1715fa71..svg";var Ge=v(11776),Ee=v(38402),gt=v(49378),Lt=v(27616),Dt=v(8284),Ht=v(70660),Pn=v(91750),vn=v(38016),Nt=v(85256),qt=v(1292),zn=v(28316),en=v(48049),Ln=v(51209),U=v(6466),_=v(41779),V=v(49429),le=v(32272),he=v(15277),Je=v(67358),Et=v(94339),St=v(14503),gn=v(24579),Kt=v(32552),Un=v(27597),ha=v(7896),ya=v(59740),Ca={className:"",percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,style:{},trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},wn=function(){var a=(0,o.useRef)([]),s=(0,o.useRef)(null);return(0,o.useEffect)(function(){var l=Date.now(),c=!1;a.current.forEach(function(p){if(p){c=!0;var g=p.style;g.transitionDuration=".3s, .3s, .3s, .06s",s.current&&l-s.current<100&&(g.transitionDuration="0s, 0s")}}),c&&(s.current=Date.now())}),a.current},Vn=["className","percent","prefixCls","strokeColor","strokeLinecap","strokeWidth","style","trailColor","trailWidth","transition"],kn=function(a){var s=a.className,l=a.percent,c=a.prefixCls,p=a.strokeColor,g=a.strokeLinecap,E=a.strokeWidth,w=a.style,S=a.trailColor,P=a.trailWidth,O=a.transition,M=(0,ya.Z)(a,Vn);delete M.gapPosition;var F=Array.isArray(l)?l:[l],ae=Array.isArray(p)?p:[p],Q=wn(),Re=E/2,yt=100-E/2,at="M ".concat(g==="round"?Re:0,",").concat(Re,`
         L `).concat(g==="round"?yt:100,",").concat(Re),mt="0 0 100 ".concat(E),we=0;return o.createElement("svg",(0,ha.Z)({className:bt()("".concat(c,"-line"),s),viewBox:mt,preserveAspectRatio:"none",style:w},M),o.createElement("path",{className:"".concat(c,"-line-trail"),d:at,strokeLinecap:g,stroke:S,strokeWidth:P||E,fillOpacity:"0"}),F.map(function(st,ot){var Sn=1;switch(g){case"round":Sn=1-E/100;break;case"square":Sn=1-E/2/100;break;default:Sn=1;break}var Qt={strokeDasharray:"".concat(st*Sn,"px, 100px"),strokeDashoffset:"-".concat(we,"px"),transition:O||"stroke-dashoffset 0.3s ease 0s, stroke-dasharray .3s ease 0s, stroke 0.3s linear"},sn=ae[ot]||ae[ae.length-1];return we+=st,o.createElement("path",{key:ot,className:"".concat(c,"-line-path"),d:at,strokeLinecap:g,stroke:sn,strokeWidth:E,fillOpacity:"0",ref:function(Ua){Q[ot]=Ua},style:Qt})}))};kn.defaultProps=Ca,kn.displayName="Line";const Hn=kn;var tn=v(86522),ia=v(96234),va=v(39588),Mt=0,Gn=(0,va.Z)();function xr(){var t;return Gn?(t=Mt,Mt+=1):t="TEST_OR_SSR",t}const En=function(t){var a=o.useState(),s=(0,ia.Z)(a,2),l=s[0],c=s[1];return o.useEffect(function(){c("rc_progress_".concat(xr()))},[]),t||l};var Sr=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function nr(t){return+t.replace("%","")}function ar(t){var a=t!=null?t:[];return Array.isArray(a)?a:[a]}var wa=100,Ea=function(a,s,l,c,p,g,E,w,S,P){var O=arguments.length>10&&arguments[10]!==void 0?arguments[10]:0,M=l/100*360*((360-g)/360),F=g===0?0:{bottom:0,top:180,left:90,right:-90}[E],ae=(100-c)/100*s;return S==="round"&&c!==100&&(ae+=P/2,ae>=s&&(ae=s-.01)),{stroke:typeof w=="string"?w:void 0,strokeDasharray:"".concat(s,"px ").concat(a),strokeDashoffset:ae+O,transform:"rotate(".concat(p+M+F,"deg)"),transformOrigin:"0 0",transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},Ka=function(a){var s=a.id,l=a.prefixCls,c=a.steps,p=a.strokeWidth,g=a.trailWidth,E=a.gapDegree,w=E===void 0?0:E,S=a.gapPosition,P=a.trailColor,O=a.strokeLinecap,M=a.style,F=a.className,ae=a.strokeColor,Q=a.percent,Re=(0,ya.Z)(a,Sr),yt=En(s),at="".concat(yt,"-gradient"),mt=wa/2-p/2,we=Math.PI*2*mt,st=w>0?90+w/2:-90,ot=we*((360-w)/360),Sn=(0,tn.Z)(c)==="object"?c:{count:c,space:2},Qt=Sn.count,sn=Sn.space,oa=Ea(we,ot,0,100,st,w,S,P,O,p),Ua=ar(Q),Wn=ar(ae),Va=Wn.find(function(it){return it&&(0,tn.Z)(it)==="object"}),vt=wn(),Ha=function(){var It=0;return Ua.map(function(Ke,At){var Ut=Wn[At]||Wn[Wn.length-1],Cn=Ut&&(0,tn.Z)(Ut)==="object"?"url(#".concat(at,")"):void 0,ft=Ea(we,ot,It,Ke,st,w,S,Ut,O,p);return It+=Ke,o.createElement("circle",{key:At,className:"".concat(l,"-circle-path"),r:mt,cx:0,cy:0,stroke:Cn,strokeLinecap:O,strokeWidth:p,opacity:Ke===0?0:1,style:ft,ref:function(Oa){vt[At]=Oa}})}).reverse()},br=function(){var It=Math.round(Qt*(Ua[0]/100)),Ke=100/Qt,At=0;return new Array(Qt).fill(null).map(function(Ut,Cn){var ft=Cn<=It-1?Wn[0]:P,Vt=ft&&(0,tn.Z)(ft)==="object"?"url(#".concat(at,")"):void 0,Oa=Ea(we,ot,At,Ke,st,w,S,ft,"butt",p,sn);return At+=(ot-Oa.strokeDashoffset+sn)*100/ot,o.createElement("circle",{key:Cn,className:"".concat(l,"-circle-path"),r:mt,cx:0,cy:0,stroke:Vt,strokeWidth:p,opacity:1,style:Oa,ref:function(Wr){vt[Cn]=Wr}})})};return o.createElement("svg",(0,ha.Z)({className:bt()("".concat(l,"-circle"),F),viewBox:"".concat(-wa/2," ").concat(-wa/2," ").concat(wa," ").concat(wa),style:M,id:s,role:"presentation"},Re),Va&&o.createElement("defs",null,o.createElement("linearGradient",{id:at,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},Object.keys(Va).sort(function(it,It){return nr(it)-nr(It)}).map(function(it,It){return o.createElement("stop",{key:It,offset:it,stopColor:Va[it]})}))),!Qt&&o.createElement("circle",{className:"".concat(l,"-circle-trail"),r:mt,cx:0,cy:0,stroke:P,strokeLinecap:O,strokeWidth:g||p,style:oa}),Qt?br():Ha())};Ka.defaultProps=Ca,Ka.displayName="Circle";const os={Line:Hn,Circle:Ka};var Cr=v(21324),wr=v(7089),rr=v(42494),is=v(74603),sr=v(56939),or=v(12231),Fr=v(73698),ir=v(72379),jr=v(74600),ka=v(15584),lr=v(86136),ut=v(79784),ba=v(37794),te=v.n(ba),la=v(80079),K=v(18671),cr=v(18473),Tn=v(57998),Ta=v(6487),dr=v(99152),$a=v(67222),Ya=v(21070),Ia=v(90324),kr=v(98281),oe=v(33375),Yt=v(44233),Ne=v(27604),Ja=v(36444),dn=v(37971),Qa=v(59709),Aa=v(17373),_a=v(3702),Kn=v(93111),be=v(44311),On=v(83543),Tr=v(59797),Pe=v(26739),$e=v(86619),ur=v(98989);const zr=v.p+"static/mic-drop.fe3ef4d0..svg";var pr=v(16173),Rt;(function(t){t.assertEqual=c=>c;function a(c){}t.assertIs=a;function s(c){throw new Error}t.assertNever=s,t.arrayToEnum=c=>{const p={};for(const g of c)p[g]=g;return p},t.getValidEnumValues=c=>{const p=t.objectKeys(c).filter(E=>typeof c[c[E]]!="number"),g={};for(const E of p)g[E]=c[E];return t.objectValues(g)},t.objectValues=c=>t.objectKeys(c).map(function(p){return c[p]}),t.objectKeys=typeof Object.keys=="function"?c=>Object.keys(c):c=>{const p=[];for(const g in c)Object.prototype.hasOwnProperty.call(c,g)&&p.push(g);return p},t.find=(c,p)=>{for(const g of c)if(p(g))return g},t.isInteger=typeof Number.isInteger=="function"?c=>Number.isInteger(c):c=>typeof c=="number"&&isFinite(c)&&Math.floor(c)===c;function l(c,p=" | "){return c.map(g=>typeof g=="string"?`'${g}'`:g).join(p)}t.joinValues=l})(Rt||(Rt={}));const ie=Rt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ca=t=>{switch(typeof t){case"undefined":return ie.undefined;case"string":return ie.string;case"number":return isNaN(t)?ie.nan:ie.number;case"boolean":return ie.boolean;case"function":return ie.function;case"bigint":return ie.bigint;case"object":return Array.isArray(t)?ie.array:t===null?ie.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ie.promise:typeof Map!="undefined"&&t instanceof Map?ie.map:typeof Set!="undefined"&&t instanceof Set?ie.set:typeof Date!="undefined"&&t instanceof Date?ie.date:ie.object;default:return ie.unknown}},X=Rt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of"]),Ur=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ta extends Error{constructor(a){super(),this.issues=[],this.addIssue=l=>{this.issues=[...this.issues,l]},this.addIssues=(l=[])=>{this.issues=[...this.issues,...l]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=a}get errors(){return this.issues}format(a){const s=a||function(p){return p.message},l={_errors:[]},c=p=>{for(const g of p.issues)if(g.code==="invalid_union")g.unionErrors.map(c);else if(g.code==="invalid_return_type")c(g.returnTypeError);else if(g.code==="invalid_arguments")c(g.argumentsError);else if(g.path.length===0)l._errors.push(s(g));else{let E=l,w=0;for(;w<g.path.length;){const S=g.path[w];w===g.path.length-1?(E[S]=E[S]||{_errors:[]},E[S]._errors.push(s(g))):E[S]=E[S]||{_errors:[]},E=E[S],w++}}};return c(this),l}toString(){return this.message}get message(){return JSON.stringify(this.issues,nn,2)}get isEmpty(){return this.issues.length===0}flatten(a=s=>s.message){const s={},l=[];for(const c of this.issues)c.path.length>0?(s[c.path[0]]=s[c.path[0]]||[],s[c.path[0]].push(a(c))):l.push(a(c));return{formErrors:l,fieldErrors:s}}get formErrors(){return this.flatten()}}ta.create=t=>new ta(t);const Da=(t,a)=>{let s;switch(t.code){case X.invalid_type:t.received===ie.undefined?s="Required":s=`Expected ${t.expected}, received ${t.received}`;break;case X.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(t.expected,nn)}`;break;case X.unrecognized_keys:s=`Unrecognized key(s) in object: ${Rt.joinValues(t.keys,", ")}`;break;case X.invalid_union:s="Invalid input";break;case X.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${Rt.joinValues(t.options)}`;break;case X.invalid_enum_value:s=`Invalid enum value. Expected ${Rt.joinValues(t.options)}, received '${t.received}'`;break;case X.invalid_arguments:s="Invalid function arguments";break;case X.invalid_return_type:s="Invalid function return type";break;case X.invalid_date:s="Invalid date";break;case X.invalid_string:typeof t.validation=="object"?"startsWith"in t.validation?s=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?s=`Invalid input: must end with "${t.validation.endsWith}"`:Rt.assertNever(t.validation):t.validation!=="regex"?s=`Invalid ${t.validation}`:s="Invalid";break;case X.too_small:t.type==="array"?s=`Array must contain ${t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?s=`String must contain ${t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?s=`Number must be greater than ${t.inclusive?"or equal to ":""}${t.minimum}`:t.type==="date"?s=`Date must be greater than ${t.inclusive?"or equal to ":""}${new Date(t.minimum)}`:s="Invalid input";break;case X.too_big:t.type==="array"?s=`Array must contain ${t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?s=`String must contain ${t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?s=`Number must be less than ${t.inclusive?"or equal to ":""}${t.maximum}`:t.type==="date"?s=`Date must be smaller than ${t.inclusive?"or equal to ":""}${new Date(t.maximum)}`:s="Invalid input";break;case X.custom:s="Invalid input";break;case X.invalid_intersection_types:s="Intersection results could not be merged";break;case X.not_multiple_of:s=`Number must be a multiple of ${t.multipleOf}`;break;default:s=a.defaultError,Rt.assertNever(t)}return{message:s}};let Xa=Da;function Bn(t){Xa=t}function mr(){return Xa}const Yn=t=>{const{data:a,path:s,errorMaps:l,issueData:c}=t,p=[...s,...c.path||[]],g={...c,path:p};let E="";const w=l.filter(S=>!!S).slice().reverse();for(const S of w)E=S(g,{data:a,defaultError:E}).message;return{...c,path:p,message:c.message||E}},da=[];function me(t,a){const s=Yn({issueData:a,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,mr(),Da].filter(l=>!!l)});t.common.issues.push(s)}class Pt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(a,s){const l=[];for(const c of s){if(c.status==="aborted")return Le;c.status==="dirty"&&a.dirty(),l.push(c.value)}return{status:a.value,value:l}}static async mergeObjectAsync(a,s){const l=[];for(const c of s)l.push({key:await c.key,value:await c.value});return Pt.mergeObjectSync(a,l)}static mergeObjectSync(a,s){const l={};for(const c of s){const{key:p,value:g}=c;if(p.status==="aborted"||g.status==="aborted")return Le;p.status==="dirty"&&a.dirty(),g.status==="dirty"&&a.dirty(),(typeof g.value!="undefined"||c.alwaysSet)&&(l[p.value]=g.value)}return{status:a.value,value:l}}}const Le=Object.freeze({status:"aborted"}),Ma=t=>({status:"dirty",value:t}),Ot=t=>({status:"valid",value:t}),na=t=>t.status==="aborted",Jn=t=>t.status==="dirty",bn=t=>t.status==="valid",Ra=t=>typeof Promise!==void 0&&t instanceof Promise,nn=(t,a)=>typeof a=="bigint"?a.toString():a;var Te;(function(t){t.errToObj=a=>typeof a=="string"?{message:a}:a||{},t.toString=a=>typeof a=="string"?a:a==null?void 0:a.message})(Te||(Te={}));class nt{constructor(a,s,l,c){this.parent=a,this.data=s,this._path=l,this._key=c}get path(){return this._path.concat(this._key)}}const Qn=(t,a)=>{if(bn(a))return{success:!0,data:a.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new ta(t.common.issues)}};function ze(t){if(!t)return{};const{errorMap:a,invalid_type_error:s,required_error:l,description:c}=t;if(a&&(s||l))throw new Error(`Can't use "invalid" or "required" in conjunction with custom error map.`);return a?{errorMap:a,description:c}:{errorMap:(g,E)=>g.code!=="invalid_type"?{message:E.defaultError}:typeof E.data=="undefined"?{message:l!=null?l:E.defaultError}:{message:s!=null?s:E.defaultError},description:c}}class _e{constructor(a){this.spa=this.safeParseAsync,this.superRefine=this._refinement,this._def=a,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.default=this.default.bind(this),this.describe=this.describe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(a){return ca(a.data)}_getOrReturnCtx(a,s){return s||{common:a.parent.common,data:a.data,parsedType:ca(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}_processInputParams(a){return{status:new Pt,ctx:{common:a.parent.common,data:a.data,parsedType:ca(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}}_parseSync(a){const s=this._parse(a);if(Ra(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(a){const s=this._parse(a);return Promise.resolve(s)}parse(a,s){const l=this.safeParse(a,s);if(l.success)return l.data;throw l.error}safeParse(a,s){var l;const c={common:{issues:[],async:(l=s==null?void 0:s.async)!==null&&l!==void 0?l:!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:ca(a)},p=this._parseSync({data:a,path:c.path,parent:c});return Qn(c,p)}async parseAsync(a,s){const l=await this.safeParseAsync(a,s);if(l.success)return l.data;throw l.error}async safeParseAsync(a,s){const l={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:ca(a)},c=this._parse({data:a,path:[],parent:l}),p=await(Ra(c)?c:Promise.resolve(c));return Qn(l,p)}refine(a,s){const l=c=>typeof s=="string"||typeof s=="undefined"?{message:s}:typeof s=="function"?s(c):s;return this._refinement((c,p)=>{const g=a(c),E=()=>p.addIssue({code:X.custom,...l(c)});return typeof Promise!="undefined"&&g instanceof Promise?g.then(w=>w?!0:(E(),!1)):g?!0:(E(),!1)})}refinement(a,s){return this._refinement((l,c)=>a(l)?!0:(c.addIssue(typeof s=="function"?s(l,c):s),!1))}_refinement(a){return new qn({schema:this,typeName:I.ZodEffects,effect:{type:"refinement",refinement:a}})}optional(){return ma.create(this)}nullable(){return m.create(this)}nullish(){return this.optional().nullable()}array(){return an.create(this)}promise(){return Ft.create(this)}or(a){return fe.create([this,a])}and(a){return kt.create(this,a)}transform(a){return new qn({schema:this,typeName:I.ZodEffects,effect:{type:"transform",transform:a}})}default(a){const s=typeof a=="function"?a:()=>a;return new y({innerType:this,defaultValue:s,typeName:I.ZodDefault})}brand(){return new k({typeName:I.ZodBranded,type:this,...ze(void 0)})}describe(a){const s=this.constructor;return new s({...this._def,description:a})}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Wa=/^c[^\s-]{8,}$/i,Na=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Xn=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;class un extends _e{constructor(){super(...arguments),this._regex=(a,s,l)=>this.refinement(c=>a.test(c),{validation:s,code:X.invalid_string,...Te.errToObj(l)}),this.nonempty=a=>this.min(1,Te.errToObj(a)),this.trim=()=>new un({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(a){if(this._getType(a)!==ie.string){const p=this._getOrReturnCtx(a);return me(p,{code:X.invalid_type,expected:ie.string,received:p.parsedType}),Le}const l=new Pt;let c;for(const p of this._def.checks)if(p.kind==="min")a.data.length<p.value&&(c=this._getOrReturnCtx(a,c),me(c,{code:X.too_small,minimum:p.value,type:"string",inclusive:!0,message:p.message}),l.dirty());else if(p.kind==="max")a.data.length>p.value&&(c=this._getOrReturnCtx(a,c),me(c,{code:X.too_big,maximum:p.value,type:"string",inclusive:!0,message:p.message}),l.dirty());else if(p.kind==="email")Xn.test(a.data)||(c=this._getOrReturnCtx(a,c),me(c,{validation:"email",code:X.invalid_string,message:p.message}),l.dirty());else if(p.kind==="uuid")Na.test(a.data)||(c=this._getOrReturnCtx(a,c),me(c,{validation:"uuid",code:X.invalid_string,message:p.message}),l.dirty());else if(p.kind==="cuid")Wa.test(a.data)||(c=this._getOrReturnCtx(a,c),me(c,{validation:"cuid",code:X.invalid_string,message:p.message}),l.dirty());else if(p.kind==="url")try{new URL(a.data)}catch{c=this._getOrReturnCtx(a,c),me(c,{validation:"url",code:X.invalid_string,message:p.message}),l.dirty()}else p.kind==="regex"?(p.regex.lastIndex=0,p.regex.test(a.data)||(c=this._getOrReturnCtx(a,c),me(c,{validation:"regex",code:X.invalid_string,message:p.message}),l.dirty())):p.kind==="trim"?a.data=a.data.trim():p.kind==="startsWith"?a.data.startsWith(p.value)||(c=this._getOrReturnCtx(a,c),me(c,{code:X.invalid_string,validation:{startsWith:p.value},message:p.message}),l.dirty()):p.kind==="endsWith"?a.data.endsWith(p.value)||(c=this._getOrReturnCtx(a,c),me(c,{code:X.invalid_string,validation:{endsWith:p.value},message:p.message}),l.dirty()):Rt.assertNever(p);return{status:l.value,value:a.data}}_addCheck(a){return new un({...this._def,checks:[...this._def.checks,a]})}email(a){return this._addCheck({kind:"email",...Te.errToObj(a)})}url(a){return this._addCheck({kind:"url",...Te.errToObj(a)})}uuid(a){return this._addCheck({kind:"uuid",...Te.errToObj(a)})}cuid(a){return this._addCheck({kind:"cuid",...Te.errToObj(a)})}regex(a,s){return this._addCheck({kind:"regex",regex:a,...Te.errToObj(s)})}startsWith(a,s){return this._addCheck({kind:"startsWith",value:a,...Te.errToObj(s)})}endsWith(a,s){return this._addCheck({kind:"endsWith",value:a,...Te.errToObj(s)})}min(a,s){return this._addCheck({kind:"min",value:a,...Te.errToObj(s)})}max(a,s){return this._addCheck({kind:"max",value:a,...Te.errToObj(s)})}length(a,s){return this.min(a,s).max(a,s)}get isEmail(){return!!this._def.checks.find(a=>a.kind==="email")}get isURL(){return!!this._def.checks.find(a=>a.kind==="url")}get isUUID(){return!!this._def.checks.find(a=>a.kind==="uuid")}get isCUID(){return!!this._def.checks.find(a=>a.kind==="cuid")}get minLength(){let a=null;for(const s of this._def.checks)s.kind==="min"&&(a===null||s.value>a)&&(a=s.value);return a}get maxLength(){let a=null;for(const s of this._def.checks)s.kind==="max"&&(a===null||s.value<a)&&(a=s.value);return a}}un.create=t=>new un({checks:[],typeName:I.ZodString,...ze(t)});function Fa(t,a){const s=(t.toString().split(".")[1]||"").length,l=(a.toString().split(".")[1]||"").length,c=s>l?s:l,p=parseInt(t.toFixed(c).replace(".","")),g=parseInt(a.toFixed(c).replace(".",""));return p%g/Math.pow(10,c)}class hn extends _e{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(a){if(this._getType(a)!==ie.number){const p=this._getOrReturnCtx(a);return me(p,{code:X.invalid_type,expected:ie.number,received:p.parsedType}),Le}let l;const c=new Pt;for(const p of this._def.checks)p.kind==="int"?Rt.isInteger(a.data)||(l=this._getOrReturnCtx(a,l),me(l,{code:X.invalid_type,expected:"integer",received:"float",message:p.message}),c.dirty()):p.kind==="min"?(p.inclusive?a.data<p.value:a.data<=p.value)&&(l=this._getOrReturnCtx(a,l),me(l,{code:X.too_small,minimum:p.value,type:"number",inclusive:p.inclusive,message:p.message}),c.dirty()):p.kind==="max"?(p.inclusive?a.data>p.value:a.data>=p.value)&&(l=this._getOrReturnCtx(a,l),me(l,{code:X.too_big,maximum:p.value,type:"number",inclusive:p.inclusive,message:p.message}),c.dirty()):p.kind==="multipleOf"?Fa(a.data,p.value)!==0&&(l=this._getOrReturnCtx(a,l),me(l,{code:X.not_multiple_of,multipleOf:p.value,message:p.message}),c.dirty()):Rt.assertNever(p);return{status:c.value,value:a.data}}gte(a,s){return this.setLimit("min",a,!0,Te.toString(s))}gt(a,s){return this.setLimit("min",a,!1,Te.toString(s))}lte(a,s){return this.setLimit("max",a,!0,Te.toString(s))}lt(a,s){return this.setLimit("max",a,!1,Te.toString(s))}setLimit(a,s,l,c){return new hn({...this._def,checks:[...this._def.checks,{kind:a,value:s,inclusive:l,message:Te.toString(c)}]})}_addCheck(a){return new hn({...this._def,checks:[...this._def.checks,a]})}int(a){return this._addCheck({kind:"int",message:Te.toString(a)})}positive(a){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Te.toString(a)})}negative(a){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Te.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Te.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Te.toString(a)})}multipleOf(a,s){return this._addCheck({kind:"multipleOf",value:a,message:Te.toString(s)})}get minValue(){let a=null;for(const s of this._def.checks)s.kind==="min"&&(a===null||s.value>a)&&(a=s.value);return a}get maxValue(){let a=null;for(const s of this._def.checks)s.kind==="max"&&(a===null||s.value<a)&&(a=s.value);return a}get isInt(){return!!this._def.checks.find(a=>a.kind==="int")}}hn.create=t=>new hn({checks:[],typeName:I.ZodNumber,...ze(t)});class Zn extends _e{_parse(a){if(this._getType(a)!==ie.bigint){const l=this._getOrReturnCtx(a);return me(l,{code:X.invalid_type,expected:ie.bigint,received:l.parsedType}),Le}return Ot(a.data)}}Zn.create=t=>new Zn({typeName:I.ZodBigInt,...ze(t)});class aa extends _e{_parse(a){if(this._getType(a)!==ie.boolean){const l=this._getOrReturnCtx(a);return me(l,{code:X.invalid_type,expected:ie.boolean,received:l.parsedType}),Le}return Ot(a.data)}}aa.create=t=>new aa({typeName:I.ZodBoolean,...ze(t)});class $n extends _e{_parse(a){if(this._getType(a)!==ie.date){const p=this._getOrReturnCtx(a);return me(p,{code:X.invalid_type,expected:ie.date,received:p.parsedType}),Le}if(isNaN(a.data.getTime())){const p=this._getOrReturnCtx(a);return me(p,{code:X.invalid_date}),Le}const l=new Pt;let c;for(const p of this._def.checks)p.kind==="min"?a.data.getTime()<p.value&&(c=this._getOrReturnCtx(a,c),me(c,{code:X.too_small,message:p.message,inclusive:!0,minimum:p.value,type:"date"}),l.dirty()):p.kind==="max"?a.data.getTime()>p.value&&(c=this._getOrReturnCtx(a,c),me(c,{code:X.too_big,message:p.message,inclusive:!0,maximum:p.value,type:"date"}),l.dirty()):Rt.assertNever(p);return{status:l.value,value:new Date(a.data.getTime())}}_addCheck(a){return new $n({...this._def,checks:[...this._def.checks,a]})}min(a,s){return this._addCheck({kind:"min",value:a.getTime(),message:Te.toString(s)})}max(a,s){return this._addCheck({kind:"max",value:a.getTime(),message:Te.toString(s)})}get minDate(){let a=null;for(const s of this._def.checks)s.kind==="min"&&(a===null||s.value>a)&&(a=s.value);return a!=null?new Date(a):null}get maxDate(){let a=null;for(const s of this._def.checks)s.kind==="max"&&(a===null||s.value<a)&&(a=s.value);return a!=null?new Date(a):null}}$n.create=t=>new $n({checks:[],typeName:I.ZodDate,...ze(t)});class ja extends _e{_parse(a){if(this._getType(a)!==ie.undefined){const l=this._getOrReturnCtx(a);return me(l,{code:X.invalid_type,expected:ie.undefined,received:l.parsedType}),Le}return Ot(a.data)}}ja.create=t=>new ja({typeName:I.ZodUndefined,...ze(t)});class In extends _e{_parse(a){if(this._getType(a)!==ie.null){const l=this._getOrReturnCtx(a);return me(l,{code:X.invalid_type,expected:ie.null,received:l.parsedType}),Le}return Ot(a.data)}}In.create=t=>new In({typeName:I.ZodNull,...ze(t)});class _n extends _e{constructor(){super(...arguments),this._any=!0}_parse(a){return Ot(a.data)}}_n.create=t=>new _n({typeName:I.ZodAny,...ze(t)});class Gt extends _e{constructor(){super(...arguments),this._unknown=!0}_parse(a){return Ot(a.data)}}Gt.create=t=>new Gt({typeName:I.ZodUnknown,...ze(t)});class Tt extends _e{_parse(a){const s=this._getOrReturnCtx(a);return me(s,{code:X.invalid_type,expected:ie.never,received:s.parsedType}),Le}}Tt.create=t=>new Tt({typeName:I.ZodNever,...ze(t)});class An extends _e{_parse(a){if(this._getType(a)!==ie.undefined){const l=this._getOrReturnCtx(a);return me(l,{code:X.invalid_type,expected:ie.void,received:l.parsedType}),Le}return Ot(a.data)}}An.create=t=>new An({typeName:I.ZodVoid,...ze(t)});class an extends _e{_parse(a){const{ctx:s,status:l}=this._processInputParams(a),c=this._def;if(s.parsedType!==ie.array)return me(s,{code:X.invalid_type,expected:ie.array,received:s.parsedType}),Le;if(c.minLength!==null&&s.data.length<c.minLength.value&&(me(s,{code:X.too_small,minimum:c.minLength.value,type:"array",inclusive:!0,message:c.minLength.message}),l.dirty()),c.maxLength!==null&&s.data.length>c.maxLength.value&&(me(s,{code:X.too_big,maximum:c.maxLength.value,type:"array",inclusive:!0,message:c.maxLength.message}),l.dirty()),s.common.async)return Promise.all(s.data.map((g,E)=>c.type._parseAsync(new nt(s,g,s.path,E)))).then(g=>Pt.mergeArray(l,g));const p=s.data.map((g,E)=>c.type._parseSync(new nt(s,g,s.path,E)));return Pt.mergeArray(l,p)}get element(){return this._def.type}min(a,s){return new an({...this._def,minLength:{value:a,message:Te.toString(s)}})}max(a,s){return new an({...this._def,maxLength:{value:a,message:Te.toString(s)}})}length(a,s){return this.min(a,s).max(a,s)}nonempty(a){return this.min(1,a)}}an.create=(t,a)=>new an({type:t,minLength:null,maxLength:null,typeName:I.ZodArray,...ze(a)});var ua;(function(t){t.mergeShapes=(a,s)=>({...a,...s})})(ua||(ua={}));const Z=t=>a=>new $({...t,shape:()=>({...t.shape(),...a})});function T(t){if(t instanceof $){const a={};for(const s in t.shape){const l=t.shape[s];a[s]=ma.create(T(l))}return new $({...t._def,shape:()=>a})}else return t instanceof an?an.create(T(t.element)):t instanceof ma?ma.create(T(t.unwrap())):t instanceof m?m.create(T(t.unwrap())):t instanceof Bt?Bt.create(t.items.map(a=>T(a))):t}class $ extends _e{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=Z(this._def),this.extend=Z(this._def)}_getCached(){if(this._cached!==null)return this._cached;const a=this._def.shape(),s=Rt.objectKeys(a);return this._cached={shape:a,keys:s}}_parse(a){if(this._getType(a)!==ie.object){const S=this._getOrReturnCtx(a);return me(S,{code:X.invalid_type,expected:ie.object,received:S.parsedType}),Le}const{status:l,ctx:c}=this._processInputParams(a),{shape:p,keys:g}=this._getCached(),E=[];for(const S in c.data)g.includes(S)||E.push(S);const w=[];for(const S of g){const P=p[S],O=c.data[S];w.push({key:{status:"valid",value:S},value:P._parse(new nt(c,O,c.path,S)),alwaysSet:S in c.data})}if(this._def.catchall instanceof Tt){const S=this._def.unknownKeys;if(S==="passthrough")for(const P of E)w.push({key:{status:"valid",value:P},value:{status:"valid",value:c.data[P]}});else if(S==="strict")E.length>0&&(me(c,{code:X.unrecognized_keys,keys:E}),l.dirty());else if(S!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const S=this._def.catchall;for(const P of E){const O=c.data[P];w.push({key:{status:"valid",value:P},value:S._parse(new nt(c,O,c.path,P)),alwaysSet:P in c.data})}}return c.common.async?Promise.resolve().then(async()=>{const S=[];for(const P of w){const O=await P.key;S.push({key:O,value:await P.value,alwaysSet:P.alwaysSet})}return S}).then(S=>Pt.mergeObjectSync(l,S)):Pt.mergeObjectSync(l,w)}get shape(){return this._def.shape()}strict(a){return Te.errToObj,new $({...this._def,unknownKeys:"strict",...a!==void 0?{errorMap:(s,l)=>{var c,p,g,E;const w=(g=(p=(c=this._def).errorMap)===null||p===void 0?void 0:p.call(c,s,l).message)!==null&&g!==void 0?g:l.defaultError;return s.code==="unrecognized_keys"?{message:(E=Te.errToObj(a).message)!==null&&E!==void 0?E:w}:{message:w}}}:{}})}strip(){return new $({...this._def,unknownKeys:"strip"})}passthrough(){return new $({...this._def,unknownKeys:"passthrough"})}setKey(a,s){return this.augment({[a]:s})}merge(a){return new $({unknownKeys:a._def.unknownKeys,catchall:a._def.catchall,shape:()=>ua.mergeShapes(this._def.shape(),a._def.shape()),typeName:I.ZodObject})}catchall(a){return new $({...this._def,catchall:a})}pick(a){const s={};return Rt.objectKeys(a).map(l=>{this.shape[l]&&(s[l]=this.shape[l])}),new $({...this._def,shape:()=>s})}omit(a){const s={};return Rt.objectKeys(this.shape).map(l=>{Rt.objectKeys(a).indexOf(l)===-1&&(s[l]=this.shape[l])}),new $({...this._def,shape:()=>s})}deepPartial(){return T(this)}partial(a){const s={};if(a)return Rt.objectKeys(this.shape).map(l=>{Rt.objectKeys(a).indexOf(l)===-1?s[l]=this.shape[l]:s[l]=this.shape[l].optional()}),new $({...this._def,shape:()=>s});for(const l in this.shape){const c=this.shape[l];s[l]=c.optional()}return new $({...this._def,shape:()=>s})}required(){const a={};for(const s in this.shape){let c=this.shape[s];for(;c instanceof ma;)c=c._def.innerType;a[s]=c}return new $({...this._def,shape:()=>a})}keyof(){return Rn(Rt.objectKeys(this.shape))}}$.create=(t,a)=>new $({shape:()=>t,unknownKeys:"strip",catchall:Tt.create(),typeName:I.ZodObject,...ze(a)}),$.strictCreate=(t,a)=>new $({shape:()=>t,unknownKeys:"strict",catchall:Tt.create(),typeName:I.ZodObject,...ze(a)}),$.lazycreate=(t,a)=>new $({shape:t,unknownKeys:"strip",catchall:Tt.create(),typeName:I.ZodObject,...ze(a)});class fe extends _e{_parse(a){const{ctx:s}=this._processInputParams(a),l=this._def.options;function c(p){for(const E of p)if(E.result.status==="valid")return E.result;for(const E of p)if(E.result.status==="dirty")return s.common.issues.push(...E.ctx.common.issues),E.result;const g=p.map(E=>new ta(E.ctx.common.issues));return me(s,{code:X.invalid_union,unionErrors:g}),Le}if(s.common.async)return Promise.all(l.map(async p=>{const g={...s,common:{...s.common,issues:[]},parent:null};return{result:await p._parseAsync({data:s.data,path:s.path,parent:g}),ctx:g}})).then(c);{let p;const g=[];for(const w of l){const S={...s,common:{...s.common,issues:[]},parent:null},P=w._parseSync({data:s.data,path:s.path,parent:S});if(P.status==="valid")return P;P.status==="dirty"&&!p&&(p={result:P,ctx:S}),S.common.issues.length&&g.push(S.common.issues)}if(p)return s.common.issues.push(...p.ctx.common.issues),p.result;const E=g.map(w=>new ta(w));return me(s,{code:X.invalid_union,unionErrors:E}),Le}}get options(){return this._def.options}}fe.create=(t,a)=>new fe({options:t,typeName:I.ZodUnion,...ze(a)});class Oe extends _e{_parse(a){const{ctx:s}=this._processInputParams(a);if(s.parsedType!==ie.object)return me(s,{code:X.invalid_type,expected:ie.object,received:s.parsedType}),Le;const l=this.discriminator,c=s.data[l],p=this.options.get(c);return p?s.common.async?p._parseAsync({data:s.data,path:s.path,parent:s}):p._parseSync({data:s.data,path:s.path,parent:s}):(me(s,{code:X.invalid_union_discriminator,options:this.validDiscriminatorValues,path:[l]}),Le)}get discriminator(){return this._def.discriminator}get validDiscriminatorValues(){return Array.from(this.options.keys())}get options(){return this._def.options}static create(a,s,l){const c=new Map;try{s.forEach(p=>{const g=p.shape[a].value;c.set(g,p)})}catch{throw new Error("The discriminator value could not be extracted from all the provided schemas")}if(c.size!==s.length)throw new Error("Some of the discriminator values are not unique");return new Oe({typeName:I.ZodDiscriminatedUnion,discriminator:a,options:c,...ze(l)})}}function Qe(t,a){const s=ca(t),l=ca(a);if(t===a)return{valid:!0,data:t};if(s===ie.object&&l===ie.object){const c=Rt.objectKeys(a),p=Rt.objectKeys(t).filter(E=>c.indexOf(E)!==-1),g={...t,...a};for(const E of p){const w=Qe(t[E],a[E]);if(!w.valid)return{valid:!1};g[E]=w.data}return{valid:!0,data:g}}else if(s===ie.array&&l===ie.array){if(t.length!==a.length)return{valid:!1};const c=[];for(let p=0;p<t.length;p++){const g=t[p],E=a[p],w=Qe(g,E);if(!w.valid)return{valid:!1};c.push(w.data)}return{valid:!0,data:c}}else return s===ie.date&&l===ie.date&&+t==+a?{valid:!0,data:t}:{valid:!1}}class kt extends _e{_parse(a){const{status:s,ctx:l}=this._processInputParams(a),c=(p,g)=>{if(na(p)||na(g))return Le;const E=Qe(p.value,g.value);return E.valid?((Jn(p)||Jn(g))&&s.dirty(),{status:s.value,value:E.data}):(me(l,{code:X.invalid_intersection_types}),Le)};return l.common.async?Promise.all([this._def.left._parseAsync({data:l.data,path:l.path,parent:l}),this._def.right._parseAsync({data:l.data,path:l.path,parent:l})]).then(([p,g])=>c(p,g)):c(this._def.left._parseSync({data:l.data,path:l.path,parent:l}),this._def.right._parseSync({data:l.data,path:l.path,parent:l}))}}kt.create=(t,a,s)=>new kt({left:t,right:a,typeName:I.ZodIntersection,...ze(s)});class Bt extends _e{_parse(a){const{status:s,ctx:l}=this._processInputParams(a);if(l.parsedType!==ie.array)return me(l,{code:X.invalid_type,expected:ie.array,received:l.parsedType}),Le;if(l.data.length<this._def.items.length)return me(l,{code:X.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),Le;!this._def.rest&&l.data.length>this._def.items.length&&(me(l,{code:X.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),s.dirty());const p=l.data.map((g,E)=>{const w=this._def.items[E]||this._def.rest;return w?w._parse(new nt(l,g,l.path,E)):null}).filter(g=>!!g);return l.common.async?Promise.all(p).then(g=>Pt.mergeArray(s,g)):Pt.mergeArray(s,p)}get items(){return this._def.items}rest(a){return new Bt({...this._def,rest:a})}}Bt.create=(t,a)=>new Bt({items:t,typeName:I.ZodTuple,rest:null,...ze(a)});class ce extends _e{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){const{status:s,ctx:l}=this._processInputParams(a);if(l.parsedType!==ie.object)return me(l,{code:X.invalid_type,expected:ie.object,received:l.parsedType}),Le;const c=[],p=this._def.keyType,g=this._def.valueType;for(const E in l.data)c.push({key:p._parse(new nt(l,E,l.path,E)),value:g._parse(new nt(l,l.data[E],l.path,E))});return l.common.async?Pt.mergeObjectAsync(s,c):Pt.mergeObjectSync(s,c)}get element(){return this._def.valueType}static create(a,s,l){return s instanceof _e?new ce({keyType:a,valueType:s,typeName:I.ZodRecord,...ze(l)}):new ce({keyType:un.create(),valueType:a,typeName:I.ZodRecord,...ze(s)})}}class Wt extends _e{_parse(a){const{status:s,ctx:l}=this._processInputParams(a);if(l.parsedType!==ie.map)return me(l,{code:X.invalid_type,expected:ie.map,received:l.parsedType}),Le;const c=this._def.keyType,p=this._def.valueType,g=[...l.data.entries()].map(([E,w],S)=>({key:c._parse(new nt(l,E,l.path,[S,"key"])),value:p._parse(new nt(l,w,l.path,[S,"value"]))}));if(l.common.async){const E=new Map;return Promise.resolve().then(async()=>{for(const w of g){const S=await w.key,P=await w.value;if(S.status==="aborted"||P.status==="aborted")return Le;(S.status==="dirty"||P.status==="dirty")&&s.dirty(),E.set(S.value,P.value)}return{status:s.value,value:E}})}else{const E=new Map;for(const w of g){const S=w.key,P=w.value;if(S.status==="aborted"||P.status==="aborted")return Le;(S.status==="dirty"||P.status==="dirty")&&s.dirty(),E.set(S.value,P.value)}return{status:s.value,value:E}}}}Wt.create=(t,a,s)=>new Wt({valueType:a,keyType:t,typeName:I.ZodMap,...ze(s)});class rn extends _e{_parse(a){const{status:s,ctx:l}=this._processInputParams(a);if(l.parsedType!==ie.set)return me(l,{code:X.invalid_type,expected:ie.set,received:l.parsedType}),Le;const c=this._def;c.minSize!==null&&l.data.size<c.minSize.value&&(me(l,{code:X.too_small,minimum:c.minSize.value,type:"set",inclusive:!0,message:c.minSize.message}),s.dirty()),c.maxSize!==null&&l.data.size>c.maxSize.value&&(me(l,{code:X.too_big,maximum:c.maxSize.value,type:"set",inclusive:!0,message:c.maxSize.message}),s.dirty());const p=this._def.valueType;function g(w){const S=new Set;for(const P of w){if(P.status==="aborted")return Le;P.status==="dirty"&&s.dirty(),S.add(P.value)}return{status:s.value,value:S}}const E=[...l.data.values()].map((w,S)=>p._parse(new nt(l,w,l.path,S)));return l.common.async?Promise.all(E).then(w=>g(w)):g(E)}min(a,s){return new rn({...this._def,minSize:{value:a,message:Te.toString(s)}})}max(a,s){return new rn({...this._def,maxSize:{value:a,message:Te.toString(s)}})}size(a,s){return this.min(a,s).max(a,s)}nonempty(a){return this.min(1,a)}}rn.create=(t,a)=>new rn({valueType:t,minSize:null,maxSize:null,typeName:I.ZodSet,...ze(a)});class Zt extends _e{constructor(){super(...arguments),this.validate=this.implement}_parse(a){const{ctx:s}=this._processInputParams(a);if(s.parsedType!==ie.function)return me(s,{code:X.invalid_type,expected:ie.function,received:s.parsedType}),Le;function l(E,w){return Yn({data:E,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,mr(),Da].filter(S=>!!S),issueData:{code:X.invalid_arguments,argumentsError:w}})}function c(E,w){return Yn({data:E,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,mr(),Da].filter(S=>!!S),issueData:{code:X.invalid_return_type,returnTypeError:w}})}const p={errorMap:s.common.contextualErrorMap},g=s.data;return this._def.returns instanceof Ft?Ot(async(...E)=>{const w=new ta([]),S=await this._def.args.parseAsync(E,p).catch(M=>{throw w.addIssue(l(E,M)),w}),P=await g(...S);return await this._def.returns._def.type.parseAsync(P,p).catch(M=>{throw w.addIssue(c(P,M)),w})}):Ot((...E)=>{const w=this._def.args.safeParse(E,p);if(!w.success)throw new ta([l(E,w.error)]);const S=g(...w.data),P=this._def.returns.safeParse(S,p);if(!P.success)throw new ta([c(S,P.error)]);return P.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...a){return new Zt({...this._def,args:Bt.create(a).rest(Gt.create())})}returns(a){return new Zt({...this._def,returns:a})}implement(a){return this.parse(a)}strictImplement(a){return this.parse(a)}}Zt.create=(t,a,s)=>new Zt({args:t?t.rest(Gt.create()):Bt.create([]).rest(Gt.create()),returns:a||Gt.create(),typeName:I.ZodFunction,...ze(s)});class xa extends _e{get schema(){return this._def.getter()}_parse(a){const{ctx:s}=this._processInputParams(a);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}xa.create=(t,a)=>new xa({getter:t,typeName:I.ZodLazy,...ze(a)});class ht extends _e{_parse(a){if(a.data!==this._def.value){const s=this._getOrReturnCtx(a);return me(s,{code:X.invalid_literal,expected:this._def.value}),Le}return{status:"valid",value:a.data}}get value(){return this._def.value}}ht.create=(t,a)=>new ht({value:t,typeName:I.ZodLiteral,...ze(a)});function Rn(t,a){return new pa({values:t,typeName:I.ZodEnum,...ze(a)})}class pa extends _e{_parse(a){if(typeof a.data!="string"){const s=this._getOrReturnCtx(a),l=this._def.values;return me(s,{expected:Rt.joinValues(l),received:s.parsedType,code:X.invalid_type}),Le}if(this._def.values.indexOf(a.data)===-1){const s=this._getOrReturnCtx(a),l=this._def.values;return me(s,{received:s.data,code:X.invalid_enum_value,options:l}),Le}return Ot(a.data)}get options(){return this._def.values}get enum(){const a={};for(const s of this._def.values)a[s]=s;return a}get Values(){const a={};for(const s of this._def.values)a[s]=s;return a}get Enum(){const a={};for(const s of this._def.values)a[s]=s;return a}}pa.create=Rn;class Pa extends _e{_parse(a){const s=Rt.getValidEnumValues(this._def.values),l=this._getOrReturnCtx(a);if(l.parsedType!==ie.string&&l.parsedType!==ie.number){const c=Rt.objectValues(s);return me(l,{expected:Rt.joinValues(c),received:l.parsedType,code:X.invalid_type}),Le}if(s.indexOf(a.data)===-1){const c=Rt.objectValues(s);return me(l,{received:l.data,code:X.invalid_enum_value,options:c}),Le}return Ot(a.data)}get enum(){return this._def.values}}Pa.create=(t,a)=>new Pa({values:t,typeName:I.ZodNativeEnum,...ze(a)});class Ft extends _e{_parse(a){const{ctx:s}=this._processInputParams(a);if(s.parsedType!==ie.promise&&s.common.async===!1)return me(s,{code:X.invalid_type,expected:ie.promise,received:s.parsedType}),Le;const l=s.parsedType===ie.promise?s.data:Promise.resolve(s.data);return Ot(l.then(c=>this._def.type.parseAsync(c,{path:s.path,errorMap:s.common.contextualErrorMap})))}}Ft.create=(t,a)=>new Ft({type:t,typeName:I.ZodPromise,...ze(a)});class qn extends _e{innerType(){return this._def.schema}_parse(a){const{status:s,ctx:l}=this._processInputParams(a),c=this._def.effect||null;if(c.type==="preprocess"){const g=c.transform(l.data);return l.common.async?Promise.resolve(g).then(E=>this._def.schema._parseAsync({data:E,path:l.path,parent:l})):this._def.schema._parseSync({data:g,path:l.path,parent:l})}const p={addIssue:g=>{me(l,g),g.fatal?s.abort():s.dirty()},get path(){return l.path}};if(p.addIssue=p.addIssue.bind(p),c.type==="refinement"){const g=E=>{const w=c.refinement(E,p);if(l.common.async)return Promise.resolve(w);if(w instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return E};if(l.common.async===!1){const E=this._def.schema._parseSync({data:l.data,path:l.path,parent:l});return E.status==="aborted"?Le:(E.status==="dirty"&&s.dirty(),g(E.value),{status:s.value,value:E.value})}else return this._def.schema._parseAsync({data:l.data,path:l.path,parent:l}).then(E=>E.status==="aborted"?Le:(E.status==="dirty"&&s.dirty(),g(E.value).then(()=>({status:s.value,value:E.value}))))}if(c.type==="transform")if(l.common.async===!1){const g=this._def.schema._parseSync({data:l.data,path:l.path,parent:l});if(!bn(g))return g;const E=c.transform(g.value,p);if(E instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:E}}else return this._def.schema._parseAsync({data:l.data,path:l.path,parent:l}).then(g=>bn(g)?Promise.resolve(c.transform(g.value,p)).then(E=>({status:s.value,value:E})):g);Rt.assertNever(c)}}qn.create=(t,a,s)=>new qn({schema:t,typeName:I.ZodEffects,effect:a,...ze(s)}),qn.createWithPreprocess=(t,a,s)=>new qn({schema:a,effect:{type:"preprocess",transform:t},typeName:I.ZodEffects,...ze(s)});class ma extends _e{_parse(a){return this._getType(a)===ie.undefined?Ot(void 0):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}ma.create=(t,a)=>new ma({innerType:t,typeName:I.ZodOptional,...ze(a)});class m extends _e{_parse(a){return this._getType(a)===ie.null?Ot(null):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}m.create=(t,a)=>new m({innerType:t,typeName:I.ZodNullable,...ze(a)});class y extends _e{_parse(a){const{ctx:s}=this._processInputParams(a);let l=s.data;return s.parsedType===ie.undefined&&(l=this._def.defaultValue()),this._def.innerType._parse({data:l,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}y.create=(t,a)=>new ma({innerType:t,typeName:I.ZodOptional,...ze(a)});class b extends _e{_parse(a){if(this._getType(a)!==ie.nan){const l=this._getOrReturnCtx(a);return me(l,{code:X.invalid_type,expected:ie.nan,received:l.parsedType}),Le}return{status:"valid",value:a.data}}}b.create=t=>new b({typeName:I.ZodNaN,...ze(t)});const R=Symbol("zod_brand");class k extends _e{_parse(a){const{ctx:s}=this._processInputParams(a),l=s.data;return this._def.type._parse({data:l,path:s.path,parent:s})}unwrap(){return this._def.type}}const N=(t,a={},s)=>t?_n.create().superRefine((l,c)=>{if(!t(l)){const p=typeof a=="function"?a(l):a,g=typeof p=="string"?{message:p}:p;c.addIssue({code:"custom",...g,fatal:s})}}):_n.create(),L={object:$.lazycreate};var I;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded"})(I||(I={}));const D=(t,a={message:`Input not instance of ${t.name}`})=>N(s=>s instanceof t,a,!0),G=un.create,z=hn.create,q=b.create,de=Zn.create,se=aa.create,Ie=$n.create,qe=ja.create,Se=In.create,pt=_n.create,Ct=Gt.create,De=Tt.create,We=An.create,Xe=an.create,jt=$.create,$t=$.strictCreate,zt=fe.create,_t=Oe.create,Jt=kt.create,Ir=Bt.create,ls=ce.create,Dn=Wt.create,vi=rn.create,Gs=Zt.create,Ei=xa.create,bi=ht.create,Bc=pa.create,Ri=Pa.create,xi=Ft.create,Ks=qn.create,Si=ma.create,Ci=m.create,Ar=qn.createWithPreprocess;var Mn=Object.freeze({__proto__:null,getParsedType:ca,ZodParsedType:ie,makeIssue:Yn,EMPTY_PATH:da,addIssueToContext:me,ParseStatus:Pt,INVALID:Le,DIRTY:Ma,OK:Ot,isAborted:na,isDirty:Jn,isValid:bn,isAsync:Ra,jsonStringifyReplacer:nn,ZodType:_e,ZodString:un,ZodNumber:hn,ZodBigInt:Zn,ZodBoolean:aa,ZodDate:$n,ZodUndefined:ja,ZodNull:In,ZodAny:_n,ZodUnknown:Gt,ZodNever:Tt,ZodVoid:An,ZodArray:an,get objectUtil(){return ua},ZodObject:$,ZodUnion:fe,ZodDiscriminatedUnion:Oe,ZodIntersection:kt,ZodTuple:Bt,ZodRecord:ce,ZodMap:Wt,ZodSet:rn,ZodFunction:Zt,ZodLazy:xa,ZodLiteral:ht,ZodEnum:pa,ZodNativeEnum:Pa,ZodPromise:Ft,ZodEffects:qn,ZodTransformer:qn,ZodOptional:ma,ZodNullable:m,ZodDefault:y,ZodNaN:b,BRAND:R,ZodBranded:k,custom:N,Schema:_e,ZodSchema:_e,late:L,get ZodFirstPartyTypeKind(){return I},any:pt,array:Xe,bigint:de,boolean:se,date:Ie,discriminatedUnion:_t,effect:Ks,enum:Bc,function:Gs,instanceof:D,intersection:Jt,lazy:Ei,literal:bi,map:Dn,nan:q,nativeEnum:Ri,never:De,null:Se,nullable:Ci,number:z,object:jt,oboolean:()=>se().optional(),onumber:()=>z().optional(),optional:Si,ostring:()=>G().optional(),preprocess:Ar,promise:xi,record:ls,set:vi,strictObject:$t,string:G,transformer:Ks,tuple:Ir,undefined:qe,union:zt,unknown:Ct,void:We,ZodIssueCode:X,quotelessJson:Ur,ZodError:ta,defaultErrorMap:Da,setErrorMap:Bn,getErrorMap:mr}),wi=v(63955),Ys=v(74828),_c=v(45455),ki=v.n(_c);function Dc(t){const[a,s]=useState([]),l=useApi(alertApiRef),{anchorOrigin:c={vertical:"top",horizontal:"center"},transientTimeoutMs:p}=t,g=p!=null?p:5e3;useEffect(()=>{const S=l.alert$().subscribe(P=>s(O=>O.concat(P)));return()=>{S.unsubscribe()}},[l]);const[E]=a;if(useEffect(()=>{if(E&&E.display==="transient"){const S=setTimeout(()=>{s(P=>{const O=P.filter(M=>M!==E);return O.length===P.length?P:O})},g);return()=>clearTimeout(S)}},[E,g]),a.length===0)return null;const w=()=>{s(S=>S.filter(P=>P!==E))};return React.createElement(Snackbar,{open:!0,anchorOrigin:c},React.createElement(Alert,{action:React.createElement(IconButton,{color:"inherit",size:"small",onClick:w,"data-testid":"error-button-close"},React.createElement(CloseIcon,null)),severity:E.severity},React.createElement(Typography,{component:"span"},String(E.message),a.length>1&&React.createElement("em",null,` (${a.length-1} older ${pluralize("message",a.length-1)})`))))}function Js(t){let a=0;for(let l=0;l<t.length;l++)a=t.charCodeAt(l)+((a<<5)-a);let s="#";for(let l=0;l<3;l++){const c=a>>l*8&255;s+=`00${c.toString(16)}`.slice(-2)}return s}function Qs(t){var a;return(a=t.match(/\b\w/g))==null?void 0:a.join("").slice(0,2)}const cs=(0,re.Z)(t=>({avatar:{width:"4rem",height:"4rem",color:t.palette.common.white},avatarText:{fontWeight:t.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function Mc(t){const{displayName:a,picture:s,customStyles:l}=t,c=cs();let p={...l};const g={fontFamily:p.fontFamily,fontSize:p.fontSize,fontWeight:p.fontWeight};return s||(p={backgroundColor:Js(a||""),...l}),React.createElement(MaterialAvatar,{alt:a,src:s,className:c.avatar,style:p},a&&React.createElement(Typography,{variant:"h6",component:"span",className:c.avatarText,style:g},Qs(a)))}function Ti(){const[t]=(0,ct.is)(o.createElement(ct.AW,{index:!0,element:o.createElement("div",null)}));return!t.index}const Ii=(0,re.Z)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),Vr=t=>/^([a-z+.-]+):/.test(t),xn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,ds=window.open;if(ds&&!ds.__backstage){const t=function(...s){const l=String(s[0]);if(xn.test(l))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return ds.apply(this,s)};t.__backstage=!0,window.open=t}const us=()=>{try{return(0,Ae.u)(Ae.p).getOptionalString("app.baseUrl")}catch{return}},Wc=()=>{var t;const a="http://sample.dev",s=(t=us())!=null?t:"/",{pathname:l}=new URL(s,a);return(0,Me.trimEnd)(l,"/")},Nr=t=>{let a=String(t);const s=Wc(),l=Vr(a),c=a.startsWith(s);return!l&&!c&&(a=s.concat(a)),a},fr=t=>{var a;return t instanceof Array?t.map(fr).join(" ").trim():typeof t=="object"&&t?fr((a=t==null?void 0:t.props)==null?void 0:a.children):["string","number"].includes(typeof t)?String(t):""},ra=o.forwardRef(({onClick:t,noTrack:a,...s},l)=>{const c=Ii(),p=(0,Ue.z$)(),g=Ti()?Nr(s.to):s.to,E=fr(s.children)||g,w=Vr(g),S=w&&!!/^https?:/.exec(g);if(xn.test(g))throw new Error("Link component rejected javascript: URL as a security precaution");const P=O=>{t==null||t(O),a||p.captureEvent("click",E,{attributes:{to:g}})};return w?o.createElement(wt.Z,{...S?{target:"_blank",rel:"noopener"}:{},...s,ref:l,href:g,onClick:P,className:bt()(c.externalLink,s.className)},s.children,o.createElement(ee.Z,{component:"span",className:c.visuallyHidden},", Opens in a new window")):o.createElement(wt.Z,{...s,ref:l,component:mn.rU,to:g,onClick:P})}),Pr=o.forwardRef((t,a)=>o.createElement(ra,{ref:a,...t,color:"initial"})),ps=o.forwardRef((t,a)=>o.createElement(xt.Z,{ref:a,component:Pr,...t})),Fc=null;function gr(t){const{text:a,tooltipDelay:s=1e3,tooltipText:l="Text copied to clipboard","aria-label":c="Copy text"}=t,p=(0,Ae.u)(Ae.r),[g,E]=(0,o.useState)(!1),[{error:w},S]=(0,ue.Z)();(0,o.useEffect)(()=>{w&&p.post(w)},[w,p]);const P=O=>{O.stopPropagation(),E(!0),S(a)};return o.createElement(o.Fragment,null,o.createElement(Xt.ZP,{id:"copy-test-tooltip",title:l,placement:"top",leaveDelay:s,onClose:()=>E(!1),open:g},o.createElement(rt.Z,{onClick:P,"aria-label":c},o.createElement(ke.Z,null))))}function ms(t){const{text:a,language:s,showLineNumbers:l=!1,highlightedNumbers:c,customStyle:p,showCopyCodeButton:g=!1}=t,E=(0,Ve.Z)(),w=E.palette.type==="dark"?Nn.Z:jn.Z,S=E.palette.type==="dark"?"#256bf3":"#e6ffed";return o.createElement(ye.Z,{position:"relative"},o.createElement(cn.Z,{customStyle:p,language:s,style:w,showLineNumbers:l,wrapLines:!0,lineNumberStyle:{color:E.palette.textVerySubtle},lineProps:P=>c!=null&&c.includes(P)?{style:{backgroundColor:S}}:{}},a),g&&o.createElement(ye.Z,{position:"absolute",top:0,right:0},o.createElement(gr,{text:a})))}function jc(t){const{title:a,to:s}=t,l=useMediaQuery(c=>c.breakpoints.down("xs"));return s?l?React.createElement(IconButton,{component:Link$1,color:"primary",title:a,size:"small",to:s},React.createElement(AddCircleOutline,null)):React.createElement(Button$1,{component:Link$1,variant:"contained",color:"primary",to:s},a):null}var fs=(t=>(t.TOP_BOTTOM="TB",t.BOTTOM_TOP="BT",t.LEFT_RIGHT="LR",t.RIGHT_LEFT="RL",t))(fs||{}),Xs=(t=>(t.UP_LEFT="UL",t.UP_RIGHT="UR",t.DOWN_LEFT="DL",t.DOWN_RIGHT="DR",t))(Xs||{}),gs=(t=>(t.NETWORK_SIMPLEX="network-simplex",t.TIGHT_TREE="tight-tree",t.LONGEST_PATH="longest-path",t))(gs||{}),hs=(t=>(t.LEFT="l",t.RIGHT="r",t.CENTER="c",t))(hs||{}),zc=Object.freeze({__proto__:null,Direction:fs,Alignment:Xs,Ranker:gs,LabelPosition:hs});const Ai=(0,re.Z)(t=>({node:{fill:t.palette.primary.light,stroke:t.palette.primary.light},text:{fill:t.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function Ni({node:{id:t}}){const a=Ai(),[s,l]=React.useState(0),[c,p]=React.useState(0),g=React.useRef(null);React.useLayoutEffect(()=>{if(g.current){let{height:P,width:O}=g.current.getBBox();P=Math.round(P),O=Math.round(O),(P!==c||O!==s)&&(l(O),p(P))}},[s,c]);const E=10,w=s+E*2,S=c+E*2;return React.createElement("g",null,React.createElement("rect",{className:a.node,width:w,height:S,rx:10}),React.createElement("text",{ref:g,className:a.text,y:S/2,x:w/2,textAnchor:"middle",alignmentBaseline:"middle"},t))}const Pi="arrow-marker",Li="node",eo="edge",Uc="label",Oi=(0,ve.Z)(t=>({node:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),Vc=t=>React.createElement(Ni,{...t});function Bi({render:t=Vc,setNode:a,node:s}){const{width:l,height:c,x:p=0,y:g=0}=s,E=s,w=Oi(),S=React.useRef(null);return React.useLayoutEffect(()=>{if(S.current){let{height:P,width:O}=S.current.getBBox();P=Math.round(P),O=Math.round(O),(P!==c||O!==l)&&a(s.id,{...s,height:P,width:O})}},[s,l,c,a]),React.createElement("g",{ref:S,"data-testid":Li,className:w.node,transform:`translate(${p-l/2},${g-c/2})`},t({node:E}))}const Zi=(0,ve.Z)(t=>({text:{fill:t.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function $i({edge:{label:t}}){const a=Zi();return React.createElement("text",{className:a.text,textAnchor:"middle"},t)}const _i=(0,ve.Z)(t=>({path:{strokeWidth:1,stroke:t.palette.textSubtle,fill:"none",transition:`${t.transitions.duration.shortest}ms`},label:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),ys=t=>React.createElement($i,{...t});function to({render:t=ys,setEdge:a,id:s,edge:l,curve:c}){const{x:p=0,y:g=0,width:E,height:w,points:S}=l,P=l,O=_i(),M=React.useRef(null);React.useLayoutEffect(()=>{if(M.current){let{height:Q,width:Re}=M.current.getBBox();Q=Math.round(Q),Re=Math.round(Re),(Q!==w||Re!==E)&&a(s,{...l,height:Q,width:Re})}},[l,w,E,a,s]);let F="";const ae=React.useMemo(()=>d3Shape.line().x(Q=>Q.x).y(Q=>Q.y).curve(d3Shape[c]),[c]);if(S){const Q=S.filter(Re=>isFinite(Re.x)&&isFinite(Re.y));F=ae(Q)||""}return React.createElement(React.Fragment,null,F&&React.createElement("path",{"data-testid":eo,className:O.path,d:F}),P.label?React.createElement("g",{ref:M,"data-testid":Uc,className:O.label,transform:`translate(${p},${g})`},t({edge:P})):null)}const vs="workspace";function Hc(t){var a,s;const{edges:l,nodes:c,renderNode:p,direction:g=fs.TOP_BOTTOM,align:E,nodeMargin:w=50,edgeMargin:S=10,rankMargin:P=50,paddingX:O=0,paddingY:M=0,acyclicer:F,ranker:ae=gs.NETWORK_SIMPLEX,labelPosition:Q=hs.RIGHT,labelOffset:Re=10,edgeRanks:yt=1,edgeWeight:at=1,renderLabel:mt,defs:we,zoom:st="enabled",curve:ot="curveMonotoneX",fit:Sn="grow",...Qt}=t,sn=useTheme$1(),[oa,Ua]=React.useState(100),[Wn,Va]=React.useState(100),vt=React.useRef(new dagre.graphlib.Graph),[Ha,br]=React.useState(((a=vt.current.graph())==null?void 0:a.width)||0),[it,It]=React.useState(((s=vt.current.graph())==null?void 0:s.height)||0),[Ke,At]=React.useState([]),[Ut,Cn]=React.useState([]),ft=Math.max(Ha,oa),Vt=Math.max(it,Wn),Oa=Math.min(it,Wn),Rr=Sn==="grow"?Vt:Oa,Wr=React.useMemo(()=>debounce(pn=>{if(!pn)return;const Fn=d3Selection.select(pn),on=d3Selection.select(pn.getElementById(vs));function Ba(){Fn.call(d3Zoom.zoom().scaleExtent([1,10]).on("zoom",tr=>{tr.transform.x=Math.min(0,Math.max(tr.transform.x,ft-ft*tr.transform.k)),tr.transform.y=Math.min(0,Math.max(tr.transform.y,Vt-Vt*tr.transform.k)),on.attr("transform",tr.transform)}))}st==="enabled"?Ba():st==="enable-on-click"&&Fn.on("click",()=>Ba());const{width:Za,height:yi}=pn.getBoundingClientRect();oa!==Za&&Ua(Za),Wn!==yi&&Va(yi)},100),[Wn,oa,ft,Vt,st]),eu=React.useCallback(()=>{const pn=vt.current.nodes(),Fn=vt.current.edges();pn.forEach(on=>{c.some(Za=>Za.id===on)||vt.current.removeNode(on)}),Fn.forEach(on=>{l.some(Za=>Za.from===on.v&&Za.to===on.w)||vt.current.removeEdge(on.v,on.w)}),c.forEach(on=>{const Ba=vt.current.nodes().find(Za=>on.id===Za);if(Ba&&vt.current.node(Ba)){const{width:Za,height:yi,x:tr,y:hu}=vt.current.node(Ba);vt.current.setNode(Ba,{...on,width:Za,height:yi,x:tr,y:hu})}else vt.current.setNode(on.id,{...on,width:0,height:0})}),l.forEach(on=>{vt.current.setEdge(on.from,on.to,{...on,label:on.label,width:0,height:0,labelpos:Q,labeloffset:Re,weight:at,minlen:yt})})},[l,c,Q,Re,at,yt]),Hs=React.useMemo(()=>debounce(()=>{dagre.layout(vt.current);const{height:pn,width:Fn}=vt.current.graph(),on=Math.max(0,pn||0),Ba=Math.max(0,Fn||0);br(Ba),It(on),At(vt.current.nodes()),Cn(vt.current.edges())},250,{leading:!0}),[]);React.useEffect(()=>(vt.current.setGraph({rankdir:g,align:E,nodesep:w,edgesep:S,ranksep:P,marginx:O,marginy:M,acyclicer:F,ranker:ae}),eu(),Hs(),Hs.cancel),[F,E,g,S,O,M,w,P,ae,eu,Hs]);function fu(pn,Fn){return vt.current.setNode(pn,Fn),Hs(),vt.current}function gu(pn,Fn){return vt.current.setEdge(pn,Fn),Hs(),vt.current}return React.createElement("svg",{ref:Wr,...Qt,width:"100%",height:Rr,viewBox:`0 0 ${ft} ${Vt}`},React.createElement("defs",null,React.createElement("marker",{id:Pi,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},React.createElement("path",{fill:sn.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),we),React.createElement("g",{id:vs},React.createElement("svg",{width:Ha,height:it,y:Vt/2-it/2,x:ft/2-Ha/2,viewBox:`0 0 ${Ha} ${it}`},Ut.map(pn=>{const Fn=vt.current.edge(pn);return Fn?React.createElement(to,{key:`${pn.v}-${pn.w}`,id:pn,setEdge:gu,render:mt,edge:Fn,curve:ot}):null}),Ke.map(pn=>{const Fn=vt.current.node(pn);return Fn?React.createElement(Bi,{key:pn,setNode:fu,render:p,node:Fn}):null}))))}const Di=(0,re.Z)(t=>{var a;return{root:{padding:t.spacing(0),marginBottom:t.spacing(0),marginTop:t.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:t.spacing(6),marginTop:-t.spacing(3),zIndex:"unset"},icon:{fontSize:t.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap"},message:{display:"flex",alignItems:"center",color:t.palette.banner.text,"& a":{color:t.palette.banner.link}},info:{backgroundColor:t.palette.banner.info},error:{backgroundColor:t.palette.banner.error},warning:{backgroundColor:(a=t.palette.banner.warning)!=null?a:t.palette.banner.error}}},{name:"BackstageDismissableBanner"}),Gc=t=>{var a;const{variant:s,message:l,id:c,fixed:p=!1}=t,g=Di(),w=useApi(storageApiRef).forBucket("notifications"),S=(a=w.snapshot("dismissedBanners").value)!=null?a:[],[P,O]=useState(new Set(S)),M=useObservable(w.observe$("dismissedBanners"));useEffect(()=>{var ae;if(M!=null&&M.value){const Q=(ae=M==null?void 0:M.value)!=null?ae:[];O(new Set(Q))}},[M==null?void 0:M.value]);const F=()=>{w.set("dismissedBanners",[...P,c])};return React.createElement(Snackbar,{anchorOrigin:p?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!P.has(c),classes:{root:classNames(g.root,!p&&g.topPosition)}},React.createElement(SnackbarContent,{classes:{root:classNames(g.content,g[s]),message:g.message},message:l,action:[React.createElement(IconButton,{key:"dismiss",title:"Permanently dismiss this message",color:"inherit",onClick:F},React.createElement(CloseIcon,{className:g.icon}))]}))},Mi=(0,re.Z)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),Wi=({missing:t})=>{const a=Mi();switch(t){case"field":return o.createElement("img",{src:pe,className:a.generalImg,alt:"annotation is missing"});case"info":return o.createElement("img",{src:xe,alt:"no Information",className:a.generalImg});case"content":return o.createElement("img",{src:Be,alt:"create Component",className:a.generalImg});case"data":return o.createElement("img",{src:Ze,alt:"no Build",className:a.generalImg});default:return null}},Kc=(0,re.Z)(t=>({root:{backgroundColor:t.palette.background.default,padding:t.spacing(2,0,0,0)},action:{marginTop:t.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function no(t){const{title:a,description:s,missing:l,action:c}=t,p=Kc();return o.createElement(J.Z,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:p.root,spacing:2},o.createElement(J.Z,{item:!0,xs:12,md:6},o.createElement(J.Z,{container:!0,direction:"column"},o.createElement(J.Z,{item:!0,xs:!0},o.createElement(ee.Z,{variant:"h5"},a)),o.createElement(J.Z,{item:!0,xs:!0},o.createElement(ee.Z,{variant:"body1"},s)),o.createElement(J.Z,{item:!0,xs:!0,className:p.action},c))),o.createElement(J.Z,{item:!0,xs:12,md:6,className:p.imageContainer},typeof l=="string"?o.createElement(Wi,{missing:l}):l.customImage))}const Hr=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,qa=/^.*ANNOTATION.*$/m,ao=Hr.match(qa)[0],Fi=Hr.split(`
`).findIndex(t=>qa.test(t)),Gr=(0,re.Z)(t=>({code:{borderRadius:6,margin:`${t.spacing(2)}px 0px`,background:t.palette.type==="dark"?"#444":t.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function ro(t){return Array.from(Array(t+1).keys(),a=>a+Fi)}function so(t){const a=t.map(s=>ao.replace("ANNOTATION",s)).join(`
`);return Hr.replace(ao,a)}function ji(t){const a=t.length<=1;return React.createElement(React.Fragment,null,"The ",a?"annotation":"annotations"," ",t.map(s=>React.createElement("code",null,s)).reduce((s,l)=>React.createElement(React.Fragment,null,s,", ",l))," ",a?"is":"are"," missing. You need to add the"," ",a?"annotation":"annotations"," to your component if you want to enable this tool.")}function Yc(t){const{annotation:a,readMoreUrl:s}=t,l=Array.isArray(a)?a:[a],c=s||"https://backstage.io/docs/features/software-catalog/well-known-annotations",p=Gr();return React.createElement(no,{missing:"field",title:"Missing Annotation",description:ji(l),action:React.createElement(React.Fragment,null,React.createElement(Typography,{variant:"body1"},"Add the annotation to your component YAML as shown in the highlighted example below:"),React.createElement(Box,{className:p.code},React.createElement(ms,{text:so(l),language:"yaml",showLineNumbers:!0,highlightedNumbers:ro(l.length),customStyle:{background:"inherit",fontSize:"115%"}})),React.createElement(Button$1,{color:"primary",component:ra,to:c},"Read more"))})}const Kr=(t,a)=>(a.palette.type==="light"?Y._j:Y.$n)(a.palette[t].light,.6),oo=(t,a)=>(a.palette.type==="light"?Y.$n:Y._j)(a.palette[t].light,.9),io=(0,re.Z)(t=>({root:{marginRight:t.spacing(1),fill:({severity:a})=>Kr(a,t)}})),zi=({severity:t})=>{const a=io({severity:t});return o.createElement(Pn.Z,{classes:a})},Ui=({severity:t})=>{const a=io({severity:t});return o.createElement(vn.Z,{classes:a})},Yr=(0,re.Z)(t=>({panel:{backgroundColor:({severity:a})=>oo(a,t),color:({severity:a})=>Kr(a,t),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:a})=>Kr(a,t),fontWeight:t.typography.fontWeightBold},message:{width:"100%",display:"block",color:({severity:a})=>Kr(a,t),backgroundColor:({severity:a})=>oo(a,t)},details:{width:"100%",display:"block",color:t.palette.textContrast,backgroundColor:t.palette.background.default,border:`1px solid ${t.palette.border}`,padding:t.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),Vi=t=>t.charAt(0).toLocaleUpperCase("en-US")+t.slice(1);function Jc(t){const{severity:a="warning",title:s,message:l,children:c,defaultExpanded:p}=t,g=Yr({severity:a}),E=Vi(a)+(s?`: ${s}`:"");return o.createElement(Lt.Z,{defaultExpanded:p!=null?p:!1,className:g.panel,role:"alert"},o.createElement(Dt.Z,{expandIcon:o.createElement(Ui,{severity:a}),className:g.summary},o.createElement(zi,{severity:a}),o.createElement(ee.Z,{className:g.summaryText,variant:"subtitle1"},E)),(l||c)&&o.createElement(Ht.Z,null,o.createElement(J.Z,{container:!0},l&&o.createElement(J.Z,{item:!0,xs:12},o.createElement(ee.Z,{className:g.message,variant:"body1"},l)),c&&o.createElement(J.Z,{item:!0,xs:12,className:g.details},c))))}const Hi=(0,re.Z)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageErrorPanel"}),Gi=({error:t,message:a,stack:s,children:l})=>{const c=Hi();return o.createElement(Ge.Z,{dense:!0},o.createElement(Ee.Z,{alignItems:"flex-start"},o.createElement(gt.Z,{classes:{secondary:c.text},primary:"Error",secondary:t}),o.createElement(gr,{text:t})),o.createElement(Ee.Z,{alignItems:"flex-start"},o.createElement(gt.Z,{classes:{secondary:c.text},primary:"Message",secondary:a}),o.createElement(gr,{text:a})),s&&o.createElement(Ee.Z,{alignItems:"flex-start"},o.createElement(gt.Z,{classes:{secondary:c.text},primary:"Stack Trace",secondary:s}),o.createElement(gr,{text:s})),l)};function Jr(t){const{title:a,error:s,defaultExpanded:l,children:c}=t;return o.createElement(Jc,{severity:"error",title:a!=null?a:s.message,defaultExpanded:l},o.createElement(Gi,{error:s.name,message:s.message,stack:s.stack,children:c}))}const Es=(0,re.Z)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function Ki(t){var a;const{title:s,error:l,defaultExpanded:c}=t,p=Es();if(l.name!=="ResponseError")return o.createElement(Jr,{title:s!=null?s:l.message,defaultExpanded:c,error:l});const{body:g,cause:E}=l,{request:w,response:S}=g,P=`${S.statusCode}: ${E.name}`,O=w&&`${w.method} ${w.url}`,M=E.message.replace(/\\n/g,`
`),F=(a=E.stack)==null?void 0:a.replace(/\\n/g,`
`),ae=JSON.stringify(g,void 0,2);return o.createElement(Jr,{title:s!=null?s:l.message,defaultExpanded:c,error:{name:P,message:M,stack:F}},O&&o.createElement(Ee.Z,{alignItems:"flex-start"},o.createElement(gt.Z,{classes:{secondary:p.text},primary:"Request",secondary:w?`${O}`:void 0}),o.createElement(gr,{text:O})),o.createElement(o.Fragment,null,o.createElement(Nt.Z,{component:"li",className:p.divider}),o.createElement(Ee.Z,{alignItems:"flex-start"},o.createElement(gt.Z,{classes:{secondary:p.text},primary:"Full Error as JSON"})),o.createElement(ms,{language:"json",text:ae,showCopyCodeButton:!0})))}function Yi(t){const a=document.createElement("div");return a.setAttribute("id",t),a}function Ji(t){document.body.insertBefore(t,document.body.lastElementChild.nextElementSibling)}function Qi(t){const a=useRef(null);useEffect(function(){const c=document.querySelector(`#${t}`),p=c||Yi(t);return c||Ji(p),p.appendChild(a.current),function(){a.current.remove(),p.childNodes.length===-1&&p.remove()}},[t]);function s(){return a.current||(a.current=document.createElement("div")),a.current}return s()}const lo="core.calloutSeen";function Xi(){const[t,a]=useState(()=>{const l=localStorage.getItem(lo);return l?JSON.parse(l):{}}),s=useCallback((l,c)=>{const p=localStorage.getItem(lo),E={...p?JSON.parse(p):{},[l]:c};a(E),localStorage.setItem(lo,JSON.stringify(E))},[]);return{states:t,setState:s}}function qi(t){const{states:a,setState:s}=Xi(),l=useCallback(()=>{s(t,!0)},[s,t]);return{seen:a[t]===!0,markSeen:l}}function el(t){const{seen:a,markSeen:s}=qi(t);return{show:a===!1,hide:s}}const Qc=(0,re.Z)(t=>({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:`2px solid ${t.palette.common.white}`,zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:t.palette.common.white,zIndex:2003}}),{name:"BackstageFeatureCalloutCircular"});function tl(t){const{featureId:a,title:s,description:l,children:c}=t,{show:p,hide:g}=el(a),E=Qi("core.callout"),w=useRef(null),[S,P]=useState(),O=Qc(),M=useCallback(()=>{if(w.current){const F=w.current.getBoundingClientRect(),ae=Math.max(F.width,F.height),Q=800,Re=F.x-(ae-F.width)/2-Q,yt=F.y-(ae-F.height)/2-Q,at=ae+2*Q,mt=450,we=F.x+F.width/2-mt,st=F.y-(ae-F.height)/2+ae+20;P({dotLeft:Re,dotTop:yt,dotSize:at,borderWidth:Q,textTop:st,textLeft:we,textWidth:mt})}},[]);return useEffect(()=>(window.addEventListener("resize",M),window.addEventListener("scroll",M),()=>{window.removeEventListener("resize",M),window.removeEventListener("scroll",M)}),[M]),useLayoutEffect(M,[w.current,M]),p?React.createElement(React.Fragment,null,React.createElement(Box,{className:O.featureWrapper,ref:w},c),createPortal(React.createElement(Box,{className:O.backdrop},React.createElement(ClickAwayListener,{onClickAway:g},React.createElement(React.Fragment,null,React.createElement(Box,{className:O.dot,"data-testid":"dot",style:{left:S==null?void 0:S.dotLeft,top:S==null?void 0:S.dotTop,width:S==null?void 0:S.dotSize,height:S==null?void 0:S.dotSize,borderWidth:S==null?void 0:S.borderWidth},onClick:g,onKeyDown:g,role:"button",tabIndex:0},React.createElement(Box,{className:O.pulseCircle})),React.createElement(Box,{className:O.text,"data-testid":"text",style:{left:S==null?void 0:S.textLeft,top:S==null?void 0:S.textTop,width:S==null?void 0:S.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},s),React.createElement(Typography,null,l))))),E)):React.createElement(React.Fragment,null,c)}const nl=(0,re.Z)(t=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:t.palette.text.secondary,cursor:"default"},primary:{color:t.palette.primary.main},secondary:{color:t.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function bs({color:t="primary",disabled:a=!1,href:s="#",icon:l=React.createElement(LinkIcon,null),label:c,onClick:p,title:g}){const E=nl();return a?React.createElement(Box,{title:g,className:classNames(E.link,E.disabled)},l,React.createElement(Typography,{variant:"caption",component:"span",className:E.label},c)):React.createElement(ra,{title:g,className:classNames(E.link,E[t]),to:s,onClick:p},l,React.createElement(Typography,{variant:"caption",component:"span",className:E.label},c))}const al=(0,re.Z)(t=>({links:{margin:t.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:t.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function Xc(t){const{links:a}=t,s=al();return React.createElement("nav",{className:s.links},a.map((l,c)=>React.createElement(bs,{key:c+1,...l})))}const co=t=>{const a=t==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${a}) 0%,
    hsla(0, 0%, ${a}, 0.987) 8.1%,
    hsla(0, 0%, ${a}, 0.951) 15.5%,
    hsla(0, 0%, ${a}, 0.896) 22.5%,
    hsla(0, 0%, ${a}, 0.825) 29%,
    hsla(0, 0%, ${a}, 0.741) 35.3%,
    hsla(0, 0%, ${a}, 0.648) 41.2%,
    hsla(0, 0%, ${a}, 0.55) 47.1%,
    hsla(0, 0%, ${a}, 0.45) 52.9%,
    hsla(0, 0%, ${a}, 0.352) 58.8%,
    hsla(0, 0%, ${a}, 0.259) 64.7%,
    hsla(0, 0%, ${a}, 0.175) 71%,
    hsla(0, 0%, ${a}, 0.104) 77.5%,
    hsla(0, 0%, ${a}, 0.049) 84.5%,
    hsla(0, 0%, ${a}, 0.013) 91.9%,
    hsla(0, 0%, ${a}, 0) 100%
  `},qc=100,Rs=10,ed=(0,re.Z)(t=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:qc,height:`calc(100% + ${Rs}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-Rs,background:`linear-gradient(90deg, ${co(t.palette.type)})`},fadeRight:{right:-Rs,background:`linear-gradient(270deg, ${co(t.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-t.spacing(2)},buttonRight:{right:-t.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function rl(t){const[[a,s],l]=React.useState([0,0]);return React.useLayoutEffect(()=>{const c=t.current;if(!c){l([0,0]);return}const p=()=>{const g=c.scrollLeft,E=c.scrollWidth-c.offsetWidth-c.scrollLeft;l([g,E])};return p(),c.addEventListener("scroll",p),window.addEventListener("resize",p),()=>{c.removeEventListener("scroll",p),window.removeEventListener("resize",p)}},[t]),[a,s]}function td(t,a,s){const[l,c]=React.useState(0);return React.useLayoutEffect(()=>{if(l===0)return;const p=window.performance.now(),g=requestAnimationFrame(E=>{if(!t.current)return;const w=E-p,S=Math.abs(l)*w/a,O=Math.max(s,S)*Math.sign(l);t.current.scrollBy({left:O});const M=l-O;Math.sign(l)!==Math.sign(M)?c(0):c(M)});return()=>cancelAnimationFrame(g)},[t,l,a,s]),c}function nd(t){const{scrollStep:a=100,scrollSpeed:s=50,minScrollDistance:l=5,children:c,...p}=t,g=ed(t),E=React.useRef(),[w,S]=rl(E),P=td(E,s,l),O=M=>{E.current&&P(M?a:-a)};return React.createElement(Box,{...p,className:g.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:g.container,ref:E},c),React.createElement(Box,{className:classNames(g.fade,g.fadeLeft,{[g.fadeHidden]:w===0})}),React.createElement(Box,{className:classNames(g.fade,g.fadeRight,{[g.fadeHidden]:S===0})}),w>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>O(!1),className:classNames(g.button,g.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),S>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>O(!0),className:classNames(g.button,g.buttonRight,{})},React.createElement(ChevronRight,null)))}const sl=(0,re.Z)(t=>({alpha:{color:t.palette.common.white,fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}}),{name:"BackstageLifecycle"});function ad(t){const a=sl(t),{shorthand:s,alpha:l}=t;return s?React.createElement(Typography,{component:"span",className:a[l?"alpha":"beta"],style:{fontSize:"120%"}},l?React.createElement(React.Fragment,null,"\u03B1"):React.createElement(React.Fragment,null,"\u03B2")):React.createElement(Typography,{component:"span",className:a[l?"alpha":"beta"]},l?"Alpha":"Beta")}const rd=(0,o.lazy)(()=>Promise.all([v.e(7996),v.e(9992)]).then(v.bind(v,79992)).then(t=>({default:t.RealLogViewer})));function sd(t){const{Progress:a}=useApp().getComponents();return React.createElement(Suspense,{fallback:React.createElement(a,null)},React.createElement(rd,{...t}))}const ol=(0,re.Z)(t=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${t.palette.border}`},"& th, & td":{border:`1px solid ${t.palette.border}`,padding:t.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:t.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:t.palette.background.paper},"& tr":{backgroundColor:t.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:t.palette.background.default},"& a":{color:t.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),Qr=(t,a)=>a?typeof a=="string"?t+a:o.Children.toArray(a.props.children).reduce(Qr,t):t,hr=({level:t,children:a})=>{const c=o.Children.toArray(a).reduce(Qr,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return o.createElement(`h${t}`,{id:c},a)},uo={code:({inline:t,className:a,children:s,...l})=>{const c=String(s).replace(/\n+$/,""),p=/language-(\w+)/.exec(a||"");return!t&&p?o.createElement(ms,{language:p[1],text:c}):o.createElement("code",{className:a,...l},s)},h1:hr,h2:hr,h3:hr,h4:hr,h5:hr,h6:hr};function il(t){const{content:a,dialect:s="gfm",linkTarget:l,transformLinkUri:c,transformImageUri:p,className:g}=t,E=ol();return o.createElement(U.D,{remarkPlugins:s==="gfm"?[_.Z]:[],className:`${E.markdown} ${g}`,children:a,components:uo,linkTarget:l,transformLinkUri:c,transformImageUri:p})}const po=(0,re.Z)(t=>({root:{paddingLeft:t.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),ll=({request:t,busy:a,setBusy:s})=>{const l=po(),[c,p]=useState(),g=async()=>{s(!0);try{await t.trigger()}catch(w){p(isError(w)?w.message:"An unspecified error occurred")}finally{s(!1)}},E=t.provider.icon;return React.createElement(ListItem,{disabled:a,classes:{root:l.root}},React.createElement(ListItemAvatar,null,React.createElement(E,{fontSize:"large"})),React.createElement(ListItemText,{primary:t.provider.title,secondary:c&&React.createElement(Typography,{color:"error"},c)}),React.createElement(Button$1,{color:"primary",variant:"contained",onClick:g},"Log in"))},cl=(0,re.Z)(t=>({dialog:{paddingTop:t.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:t.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:t.spacing(2,0)}}),{name:"OAuthRequestDialog"});function dl(t){const a=cl(),[s,l]=useState(!1),c=useApi(oauthRequestApiRef),p=useObservable(useMemo(()=>c.authRequest$(),[c]),[]),g=()=>{p.forEach(E=>E.reject())};return React.createElement(Dialog,{open:Boolean(p.length),fullWidth:!0,maxWidth:"xs",classes:{paper:a.dialog},"aria-labelledby":"oauth-req-dialog-title"},React.createElement("main",null,React.createElement(DialogTitle,{classes:{root:a.title},id:"oauth-req-dialog-title"},React.createElement(Typography,{className:a.titleHeading,variant:"h1"},"Login Required")),React.createElement(DialogContent,{dividers:!0,classes:{root:a.contentList}},React.createElement(List,null,p.map(E=>React.createElement(ll,{key:E.provider.title,request:E,busy:s,setBusy:l}))))),React.createElement(DialogActions,{classes:{root:a.actionButtons}},React.createElement(Button$1,{onClick:g},"Reject All")))}const Lr=(0,re.Z)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function od(t){var a;const[s,l]=useState(!1),c=useIsMounted(),p=Lr(),g=E=>{c()&&l(E)};return React.createElement(Tooltip,{title:(a=t.title)!=null?a:t.text||"",placement:t.placement,disableHoverListener:!s},React.createElement(TextTruncate,{text:t.text,line:t.line,onToggled:g,containerClassName:p.container}))}function Or(t){const a=(0,Ve.Z)(),[s,l]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{const c=setTimeout(()=>l(!0),a.transitions.duration.short);return()=>clearTimeout(c)},[a.transitions.duration.short]),s?o.createElement(Je.Z,{...t,"data-testid":"progress"}):o.createElement(ye.Z,{display:"none"})}const mo=(0,re.Z)(t=>({root:{maxWidth:"fit-content",padding:t.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:t.palette.textSubtle},arrow:{color:t.palette.textSubtle}}),{name:"BackstageBottomLink"});function fo(t){const{link:a,title:s,onClick:l}=t,c=mo();return o.createElement(ye.Z,null,o.createElement(Nt.Z,null),o.createElement(ra,{to:a,onClick:l,underline:"none"},o.createElement(ye.Z,{display:"flex",alignItems:"center",className:c.root},o.createElement(ye.Z,{className:c.boxTitle,fontWeight:"fontWeightBold",m:1},o.createElement(ee.Z,null,o.createElement("strong",null,s))),o.createElement(Un.Z,{className:c.arrow}))))}const ul=t=>{const{slackChannel:a}=t;if(a){if(typeof a=="string")return o.createElement(ee.Z,null,"Please contact ",a," for help.");if(!a.href)return o.createElement(ee.Z,null,"Please contact ",a.name," for help.")}else return null;return o.createElement(ps,{to:a.href,variant:"contained"},a.name)},pl=class extends o.Component{constructor(a){super(a),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(a,s){console.error(`ErrorBoundary, error: ${a}, info: ${s}`),this.setState({error:a,errorInfo:s})}render(){const{slackChannel:a,children:s}=this.props,{error:l}=this.state;return l?o.createElement(Jr,{title:"Something Went Wrong",error:l},o.createElement(ul,{slackChannel:a})):s}},id=(0,re.Z)(t=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:t.spacing(2,2,2,2.5)},headerTitle:{fontWeight:t.typography.fontWeightBold},headerSubheader:{paddingTop:t.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),ml=(0,He.Z)(t=>({root:{display:"inline-block",padding:t.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(St.Z),go={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px"}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function yr(t){const{title:a,subheader:s,divider:l=!0,deepLink:c,slackChannel:p,errorBoundaryProps:g,variant:E,children:w,headerStyle:S,headerProps:P,icon:O,action:M,actionsClassName:F,actions:ae,cardClassName:Q,actionsTopRight:Re,className:yt,noPadding:at,titleTypographyProps:mt}=t,we=id();let st={},ot={};E&&E.split(/[\s]+/g).forEach(oa=>{st={...st,...go.card[oa]},ot={...ot,...go.cardContent[oa]}});const Sn=()=>!s&&!O?null:o.createElement("div",{className:we.headerSubheader,"data-testid":"info-card-subheader"},s&&o.createElement("div",{className:we.subheader},s),O),Qt=g||(p?{slackChannel:p}:{});return o.createElement(Et.Z,{style:st,className:yt},o.createElement(pl,{...Qt},a&&o.createElement(Kt.Z,{classes:{root:we.header,title:we.headerTitle,subheader:we.headerSubheader,avatar:we.headerAvatar,action:we.headerAction,content:we.headerContent},title:a,subheader:Sn(),action:M,style:{...S},titleTypographyProps:mt,...P}),Re&&o.createElement(ml,null,Re),l&&o.createElement(Nt.Z,null),o.createElement(gn.Z,{className:bt()(Q,{[we.noPadding]:at}),style:ot},w),ae&&o.createElement(St.Z,{className:F},ae),c&&o.createElement(fo,{...c})))}const fl=(0,re.Z)(t=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:t.typography.pxToRem(45),fontWeight:t.typography.fontWeightBold,color:t.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),ho={fractional:!0,inverse:!1,unit:"%",max:100},yo=({palette:t,value:a,inverse:s,max:l})=>{if(isNaN(a))return"#ddd";const c=l||ho.max,p=s?c-a:a;return p<c/3?t.status.error:p<c*(2/3)?t.status.warning:t.status.ok};function gl(t){const[a,s]=useState(null),{getColor:l=yo}=t,c=fl(t),{palette:p}=useTheme(),{value:g,fractional:E,inverse:w,unit:S,max:P,description:O}={...ho,...t},M=E?Math.round(g*P):g,F=P!==100?Math.round(g):M,[ae,Q]=useState(!1);return useEffect(()=>{const Re=a,yt=()=>Q(!0),at=()=>Q(!1);return Re&&O?(Re.addEventListener("mouseenter",yt),Re.addEventListener("mouseleave",at),()=>{Re.removeEventListener("mouseenter",yt),Re.removeEventListener("mouseleave",at)}):()=>{Q(!1)}},[O,a]),React.createElement(Box,{ref:s,className:c.root},React.createElement(Circle,{strokeLinecap:"butt",percent:M,strokeWidth:12,trailWidth:12,strokeColor:l({palette:p,value:F,inverse:w,max:P}),className:c.circle}),O&&ae?React.createElement(Box,{className:c.description},O):React.createElement(Box,{className:c.overlay},isNaN(g)?"N/A":`${F}${S}`))}const xs=(0,re.Z)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function hl(t){const a=xs(t),{title:s,subheader:l,progress:c,inverse:p,deepLink:g,description:E,icon:w,variant:S,getColor:P}=t,O={inverse:p,description:E,getColor:P,value:c};return React.createElement(Box,{className:a.root},React.createElement(yr,{title:s,subheader:l,deepLink:g,variant:S,icon:w},React.createElement(gl,{...O})))}function nu(t){const{value:a,getColor:s=yo}=t,{palette:l}=useTheme();if(isNaN(a))return null;let c=Math.round(a*100*100)/100;c>100&&(c=100);const p=s({palette:l,value:c,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${c}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:c,strokeWidth:4,trailWidth:4,strokeColor:p})))}const yl=(0,re.Z)(t=>(0,lt.Z)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none"}}),{name:"BackstageClosedDropdown"}),vl=()=>{const t=yl();return o.createElement(ir.Z,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"#616161"}))},El=(0,re.Z)(t=>(0,lt.Z)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none"}}),{name:"BackstageOpenedDropdown"}),bl=()=>{const t=El();return o.createElement(ir.Z,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"#616161"}))},Rl=(0,He.Z)(t=>(0,lt.Z)({root:{"label + &":{marginTop:t.spacing(3)}},input:{borderRadius:t.shape.borderRadius,position:"relative",backgroundColor:t.palette.background.paper,border:"1px solid #ced4da",fontSize:t.typography.body1.fontSize,padding:t.spacing(1.25,3.25,1.25,1.5),transition:t.transitions.create(["border-color","box-shadow"]),fontFamily:"Helvetica Neue","&:focus":{background:t.palette.background.paper,borderRadius:t.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(is.Z),vo=(0,re.Z)(t=>(0,lt.Z)({formControl:{margin:`${t.spacing(1)} 0px`,maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function xl(t){const{multiple:a,items:s,label:l,placeholder:c,selected:p,onChange:g,triggerReset:E,native:w=!1,disabled:S=!1,margin:P}=t,O=vo(),[M,F]=(0,o.useState)(p||(a?[]:"")),[ae,Q]=(0,o.useState)(!1);(0,o.useEffect)(()=>{F(a?[]:"")},[E,a]),(0,o.useEffect)(()=>{p!==void 0&&F(p)},[p]);const Re=we=>{F(we.target.value),g(we.target.value)},yt=we=>{if(S){we.preventDefault();return}Q(st=>a&&!(we.target instanceof HTMLElement)?!0:!st)},at=()=>{Q(!1)},mt=we=>()=>{const st=M.filter(ot=>ot!==we);F(st),g(st)};return o.createElement(ye.Z,{className:O.root},o.createElement(qt.Z,{onClickAway:at},o.createElement(rr.Z,{className:O.formControl},o.createElement(sr.Z,{className:O.formLabel},l),o.createElement(Fr.Z,{"aria-label":l,value:M,native:w,disabled:S,"data-testid":"select",displayEmpty:!0,multiple:a,margin:P,onChange:Re,onClick:yt,open:ae,input:o.createElement(Rl,null),label:l,tabIndex:0,renderValue:we=>{var st;return a&&M.length!==0?o.createElement(ye.Z,{className:O.chips},we.map(ot=>{var Sn,Qt;return o.createElement(wr.Z,{key:(Sn=s.find(sn=>sn.value===ot))==null?void 0:Sn.value,label:(Qt=s.find(sn=>sn.value===ot))==null?void 0:Qt.label,clickable:!0,onDelete:mt(ot),className:O.chip})})):o.createElement(ee.Z,null,M.length===0?c||"":(st=s.find(ot=>ot.value===we))==null?void 0:st.label)},IconComponent:()=>ae?o.createElement(bl,null):o.createElement(vl,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},c&&!a&&o.createElement(or.Z,{value:[]},c),w?s&&s.map(we=>o.createElement("option",{value:we.value,key:we.value},we.label)):s&&s.map(we=>o.createElement(or.Z,{key:we.value,value:we.value},a&&o.createElement(Cr.Z,{color:"primary",checked:M.includes(we.value)||!1,className:O.checkbox}),we.label))))))}const Eo=()=>{},er=o.createContext({stepperLength:0,stepIndex:0,setStepIndex:Eo,stepHistory:[],setStepHistory:Eo,onStepChange:Eo});function au(t){const{children:a,elevated:s,onStepChange:l,activeStep:c=0}=t,[p,g]=useState(c),[E,w]=useState([0]);useEffect(()=>{g(c)},[c]);const S=[];let P;return Children.forEach(a,O=>{isValidElement(O)&&(O.props.end?P=O:S.push(O))}),React.createElement(React.Fragment,null,React.createElement(er.Provider,{value:{stepIndex:p,setStepIndex:g,stepHistory:E,setStepHistory:w,onStepChange:l,stepperLength:Children.count(a)}},React.createElement(MuiStepper,{activeStep:p,orientation:"vertical",elevation:s?2:0},S)),p>=Children.count(a)-1&&P)}const ld=(0,re.Z)(t=>({root:{marginTop:t.spacing(3),"& button":{marginRight:t.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),cd=({text:t,handleClick:a})=>React.createElement(Button$1,{onClick:a},t||"Reset"),dd=({text:t,handleClick:a,disabled:s,last:l,stepIndex:c})=>React.createElement(Button$1,{variant:"contained",color:"primary",disabled:s,"data-testid":`nextButton-${c}`,onClick:a},t||(l?"Finish":"Next")),ud=({text:t,handleClick:a,disabled:s,stepIndex:l})=>React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:s,"data-testid":`skipButton-${l}`,onClick:a},t||"Skip"),pd=({text:t,handleClick:a,disabled:s,stepIndex:l})=>React.createElement(Button$1,{onClick:a,"data-testid":`backButton-${l}`,disabled:s},t||"Back"),bo=({actions:t={},children:a})=>{const s=ld(),{stepperLength:l,stepIndex:c,setStepIndex:p,stepHistory:g,setStepHistory:E,onStepChange:w}=useContext(er),S=(F,ae)=>{ae&&ae(),w&&w(c,F),p(F)},P=()=>{const F=t.nextStep?t.nextStep(c,l-1):c+1;S(F,t.onNext),E([...g,F])},O=()=>{g.pop(),S(g[g.length-1],t.onBack),E([...g])},M=()=>{S(0,t.onRestart),E([0])};return React.createElement(Box,{className:s.root},[void 0,!0].includes(t.showBack)&&c!==0&&React.createElement(pd,{text:t.backText,handleClick:O,disabled:c===0,stepIndex:c}),t.showSkip&&React.createElement(ud,{text:t.skipText,handleClick:P,disabled:!!l&&c>=l||!!t.canSkip&&!t.canSkip(),stepIndex:c}),[void 0,!0].includes(t.showNext)&&React.createElement(dd,{text:t.nextText,handleClick:P,disabled:!!l&&c>=l||!!t.canNext&&!t.canNext(),stepIndex:c}),t.showRestart&&c!==0&&React.createElement(cd,{text:t.restartText,handleClick:M,stepIndex:c}),a)},Sl=(0,re.Z)(t=>({end:{padding:t.spacing(3)}}),{name:"SimpleStepperStep"});function md(t){const{title:a,children:s,end:l,actions:c,...p}=t,g=Sl();return l?React.createElement(Box,{className:g.end},React.createElement(Typography,{variant:"h6"},a),s,React.createElement(bo,{actions:{...c||{},showNext:!1}})):React.createElement(MuiStep,{...p},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},a)),React.createElement(StepContent,null,s,React.createElement(bo,{actions:c})))}const vr=(0,re.Z)(t=>({status:{fontWeight:t.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:t.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:t.palette.status.ok}},warning:{"&::before":{backgroundColor:t.palette.status.warning}},error:{"&::before":{backgroundColor:t.palette.status.error}},pending:{"&::before":{backgroundColor:t.palette.status.pending}},running:{"&::before":{backgroundColor:t.palette.status.running}},aborted:{"&::before":{backgroundColor:t.palette.status.aborted}}}),{name:"BackstageStatus"});function fd(t){const a=vr(t);return React.createElement(Typography,{component:"span",className:classNames(a.status,a.ok),"aria-label":"Status ok","aria-hidden":"true",...t})}function gd(t){const a=vr(t);return React.createElement(Typography,{component:"span",className:classNames(a.status,a.warning),"aria-label":"Status warning","aria-hidden":"true",...t})}function hd(t){const a=vr(t);return React.createElement(Typography,{component:"span",className:classNames(a.status,a.error),"aria-label":"Status error","aria-hidden":"true",...t})}function yd(t){const a=vr(t);return React.createElement(Typography,{component:"span",className:classNames(a.status,a.pending),"aria-label":"Status pending","aria-hidden":"true",...t})}function Cl(t){const a=vr(t);return React.createElement(Typography,{component:"span",className:classNames(a.status,a.running),"aria-label":"Status running","aria-hidden":"true",...t})}function wl(t){const a=vr(t);return React.createElement(Typography,{component:"span",className:classNames(a.status,a.aborted),"aria-label":"Status aborted","aria-hidden":"true",...t})}const Ro=t=>(0,lt.Z)({root:{fontWeight:t.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:t.spacing(4),border:"0",verticalAlign:"top"}}),kl={root:{border:"0",verticalAlign:"top"}},xo=t=>(0,lt.Z)({root:{margin:t.spacing(0,0,-1,0)}}),So=t=>(0,lt.Z)({root:{padding:t.spacing(0,0,1,0)},random:{}}),Tl=(0,He.Z)(Ro,{name:"BackstageMetadataTableTitleCell"})(ka.Z),Il=(0,He.Z)(kl,{name:"BackstageMetadataTableCell"})(ka.Z),Ss=({dense:t,children:a})=>React.createElement(Table$1,{size:t?"small":"medium"},React.createElement(TableBody,null,a)),Al=({title:t,children:a,...s})=>React.createElement(TableRow,null,t&&React.createElement(Tl,null,t),React.createElement(Il,{colSpan:t?1:2,...s},a)),Co=(0,He.Z)(xo,{name:"BackstageMetadataTableList"})(({classes:t,children:a})=>o.createElement(Ge.Z,{disablePadding:!0,className:t.root},a)),wo=(0,He.Z)(So,{name:"BackstageMetadataTableListItem"})(({classes:t,children:a})=>o.createElement(Ee.Z,{className:t.root},a)),Nl=(0,lt.Z)({root:{margin:"0 0",listStyleType:"none"}}),Pl=t=>(0,lt.Z)({root:{...Nl.root,paddingLeft:t.spacing(1)}}),Cs=(0,He.Z)(Nl,{name:"BackstageStructuredMetadataTableList"})(({classes:t,children:a})=>o.createElement(Co,{classes:t},a)),ws=(0,He.Z)(Pl,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:t,children:a})=>o.createElement(Co,{classes:t},a));function Ll(t,a){const s=t.map((l,c)=>React.createElement(wo,{key:c},ks(l)));return a?React.createElement(ws,null,s):React.createElement(Cs,null,s)}function vd(t,a,s){const l=Object.keys(t).map(c=>{const p=ks(t[c],!0),g=s&&s.titleFormat?s.titleFormat(c):startCase(c);return React.createElement(wo,{key:c},React.createElement(Typography,{variant:"body2",component:"span"},`${g}: `),p)});return a?React.createElement(ws,null,l):React.createElement(Cs,null,l)}function ks(t,a,s){return React.isValidElement(t)?React.createElement(Fragment,null,t):typeof t=="object"&&!Array.isArray(t)?vd(t,a,s):Array.isArray(t)?Ll(t,s):typeof t=="boolean"?React.createElement(Fragment,null,t?"\u2705":"\u274C"):React.createElement(Typography,{variant:"body2",component:"span"},t)}const ko=({value:t,options:a})=>React.createElement(Fragment,null,ks(t,a)),fa=({title:t,value:a,options:s})=>React.createElement(Al,{title:s&&s.titleFormat?s.titleFormat(t):startCase(t)},React.createElement(ko,{value:a,options:s}));function Ed(t,a){return Object.keys(t).map(s=>React.createElement(fa,{key:s,title:s,value:t[s],options:a}))}function ru(t){const{metadata:a,dense:s=!0,options:l}=t,c=Ed(a,l||{});return React.createElement(Ss,{dense:s},c)}function bd(t){return qs.stringify(t,{strictNullHandling:!0})}function Ol(t){return qs.parse(t,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function Bl(t,a){return Ol(t)[a]}function Rd(t,a,s){const l={...Ol(t),[a]:s};return bd(l)}function su(t,a=250){const[s,l]=useSearchParams(),c=s.toString(),[p,g]=useState(Bl(c,t));return useEffect(()=>{const E=Bl(c,t);g(w=>isEqual(E,w)?w:E)},[c,g,t]),useDebouncedEffect(()=>{const E=Rd(c,t,p);c!==E&&l(E,{replace:!0})},[l,p,c,t],a),[p,g]}const xd={url:"https://github.com/backstage/backstage/issues",items:[{title:"Support Not Configured",icon:"warning",links:[{title:"Add `app.support` config key",url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]};function Br(){const a=(0,Ae.b)().get(Ae.p),s=a==null?void 0:a.getOptionalConfig("app.support");return s?{url:s.getString("url"),items:s.getConfigArray("items").flatMap(l=>{var c;return{title:l.getString("title"),icon:l.getOptionalString("icon"),links:((c=l.getOptionalConfigArray("links"))!=null?c:[]).flatMap(p=>({url:p.getString("url"),title:p.getString("title")}))}})}:xd}function Sa(t,a){const l=(0,Ue.qD)().getSystemIcon(t);return l?o.createElement(l,{...a}):o.createElement(la.Z,{...a})}function ou(t){return Sa("brokenImage",t)}function Sd(t){return Sa("catalog",t)}function Cd(t){return Sa("chat",t)}function wd(t){return Sa("dashboard",t)}function kd(t){return Sa("docs",t)}function iu(t){return Sa("email",t)}function Td(t){return Sa("github",t)}function To(t){return Sa("group",t)}function Xr(t){return Sa("help",t)}function Id(t){return Sa("user",t)}function Ad(t){return Sa("warning",t)}const Zl=(0,re.Z)({popoverList:{minWidth:260,maxWidth:400}},{name:"BackstageSupportButton"}),Ts=({icon:t})=>{var a;const s=(0,Ue.qD)(),l=t&&(a=s.getSystemIcon(t))!=null?a:Xr;return o.createElement(l,null)},Io=({link:t})=>{var a;return o.createElement(ra,{to:t.url},(a=t.title)!=null?a:t.url)},$l=({item:t})=>{var a;return o.createElement(Ee.Z,null,o.createElement(lr.Z,null,o.createElement(Ts,{icon:t.icon})),o.createElement(gt.Z,{primary:t.title,secondary:(a=t.links)==null?void 0:a.reduce((s,l,c)=>[...s,c>0&&o.createElement("br",{key:c}),o.createElement(Io,{link:l,key:l.url})],[])}))};function _l(t){const{title:a,items:s,children:l}=t,{items:c}=Br(),[p,g]=(0,o.useState)(!1),[E,w]=(0,o.useState)(null),S=Zl(),P=(0,dt.Z)(F=>F.breakpoints.down("sm")),O=F=>{w(F.currentTarget),g(!0)},M=()=>{g(!1)};return o.createElement(o.Fragment,null,o.createElement(ye.Z,{display:"flex",ml:1},P?o.createElement(rt.Z,{color:"primary",size:"small",onClick:O,"data-testid":"support-button","aria-label":"Support"},o.createElement(Xr,null)):o.createElement(xt.Z,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:O,startIcon:o.createElement(Xr,null)},"Support")),o.createElement(ut.ZP,{"data-testid":"support-button-popover",open:p,anchorEl:E,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:M},o.createElement(Ge.Z,{className:S.popoverList},a&&o.createElement(Ee.Z,{alignItems:"flex-start"},o.createElement(ee.Z,{variant:"subtitle1"},a)),o.Children.map(l,(F,ae)=>o.createElement(Ee.Z,{alignItems:"flex-start",key:`child-${ae}`},F)),(s!=null?s:c).map((F,ae)=>o.createElement($l,{item:F,key:`item-${ae}`}))),o.createElement(V.Z,null,o.createElement(xt.Z,{color:"primary",onClick:M,"aria-label":"Close"},"Close"))))}const Is=72,Ao=24,No=18,za={drawerWidthClosed:Is,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:Is,iconSize:Is-Ao*2,iconPadding:Ao,selectedIndicatorWidth:3,userBadgePadding:No,userBadgeDiameter:Is-No*2,mobileSidebarHeight:56},Po=t=>({...za,...t,iconContainerWidth:za.drawerWidthClosed,iconSize:za.drawerWidthClosed-za.iconPadding*2,userBadgeDiameter:za.drawerWidthClosed-za.userBadgePadding*2}),As={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:za.defaultOpenDelayMs+200},Dl=t=>({...As,...t}),Lo="@backstage/core/sidebar-intro-dismissed",ea=(0,o.createContext)({sidebarConfig:za,submenuConfig:As}),Ns=(0,o.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),Oo={isOpen:!1,setOpen:()=>{}},Bo=(0,o.createContext)(Oo),Ps=(0,cr.CT)("sidebar-open-state-context");function Zo(t){const{children:a,value:s}=t;return React.createElement(Bo.Provider,{value:s},React.createElement(Ps.Provider,{value:createVersionedValueMap({1:s})},a))}const Zr=()=>{const t=(0,o.useContext)(Ps),a=(0,o.useContext)(Bo);if(t===void 0)return a||Oo;const s=t.atVersion(1);if(s===void 0)throw new Error("No context found for version 1.");return s},$o={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},_o=(0,o.createContext)($o),Do=(0,cr.CT)("sidebar-pin-state-context");function Nd(t){const{children:a,value:s}=t;return React.createElement(_o.Provider,{value:s},React.createElement(Do.Provider,{value:createVersionedValueMap({1:s})},a))}const Ls=()=>{const t=(0,o.useContext)(Do),a=(0,o.useContext)(_o);if(t===void 0)return a||$o;const s=t.atVersion(1);if(s===void 0)throw new Error("No context found for version 1.");return s},Ml=(0,re.Z)(t=>({root:{flexGrow:0,margin:t.spacing(0,2),color:t.palette.navigation.color},selected:a=>({color:`${t.palette.navigation.selectedColor}!important`,borderTop:`solid ${a.sidebarConfig.selectedIndicatorWidth}px ${t.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),Wl=t=>{const{to:a,label:s,icon:l,value:c}=t,{sidebarConfig:p}=(0,o.useContext)(ea),g=Ml({sidebarConfig:p}),E=(0,ct.TH)(),{selectedMenuItemIndex:w,setSelectedMenuItemIndex:S}=(0,o.useContext)(Ul),P=(M,F)=>{S(F===w?-1:F)},O=c===w&&w>=0||c!==w&&!(w>=0)&&a===E.pathname;return o.createElement(Tn.Z,{"aria-label":s,label:s,icon:l,component:ra,to:a||E.pathname,onChange:P,value:c,selected:O,classes:g})},Mo=t=>{const{children:a,to:s,label:l,icon:c,value:p}=t,{isMobile:g}=Ls();return g?o.createElement(Wl,{to:s,label:l,icon:c,value:p}):o.createElement(o.Fragment,null,a)},Wo=(0,re.Z)(t=>({root:{position:"fixed",backgroundColor:t.palette.navigation.background,color:t.palette.navigation.color,bottom:0,left:0,right:0,zIndex:t.zIndex.snackbar,borderTop:"1px solid #383838"},overlay:a=>({background:t.palette.navigation.background,width:"100%",bottom:`${a.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${a.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:t.palette.text.primary,alignItems:"center",justifyContent:"space-between",padding:t.spacing(2,3)},overlayHeaderClose:{color:t.palette.text.primary},marginMobileSidebar:a=>({marginBottom:`${a.sidebarConfig.mobileSidebarHeight}px`})})),Fl=t=>orderBy(t,({props:{priority:a}})=>Number.isInteger(a)?a:-1,"desc"),jl=o.createElement(Mo).type,zl=({children:t,label:a="Menu",open:s,onClose:l})=>{const{sidebarConfig:c}=useContext(ea),p=Wo({sidebarConfig:c});return React.createElement(Drawer,{anchor:"bottom",open:s,onClose:l,ModalProps:{BackdropProps:{classes:{root:p.marginMobileSidebar}}},classes:{root:p.marginMobileSidebar,paperAnchorBottom:p.overlay}},React.createElement(Box,{className:p.overlayHeader},React.createElement(Typography,{variant:"h3"},a),React.createElement(IconButton,{onClick:l,classes:{root:p.overlayHeaderClose}},React.createElement(CloseIcon,null))),React.createElement(Box,{component:"nav"},t))},Ul=(0,o.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),Vl=t=>{const{sidebarConfig:a}=useContext(ea),{children:s}=t,l=Wo({sidebarConfig:a}),c=useLocation(),[p,g]=useState(-1);useEffect(()=>{g(-1)},[c.pathname]);let E=useElementFilter(s,S=>S.getElements().filter(P=>P.type===jl));if(s)E.length?E=Fl(E):E.push(React.createElement(Mo,{key:"default_menu",icon:React.createElement(MenuIcon,null)},s));else return null;const w=p>=0&&!E[p].props.to;return React.createElement(Zo,{value:{isOpen:!0,setOpen:()=>{}}},React.createElement(Ul.Provider,{value:{selectedMenuItemIndex:p,setSelectedMenuItemIndex:g}},React.createElement(zl,{label:E[p]&&E[p].props.label,open:w,onClose:()=>g(-1)},E[p]&&E[p].props.children),React.createElement(BottomNavigation,{className:l.root,"data-testid":"mobile-sidebar-root",component:"nav"},E)))},qr={getSidebarPinState(){let t;try{t=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!t},setSidebarPinState(t){return window.localStorage.setItem("sidebarPinState",JSON.stringify(t))}},Hl=(0,re.Z)(t=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[t.breakpoints.up("sm")]:{paddingLeft:a=>a.isPinned?a.sidebarConfig.drawerWidthOpen:a.sidebarConfig.drawerWidthClosed},[t.breakpoints.down("xs")]:{paddingBottom:a=>a.sidebarConfig.mobileSidebarHeight}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),$r=(0,o.createContext)({content:{contentRef:void 0}});function Gl(t){const[a,s]=useState(()=>qr.getSidebarPinState()),{sidebarConfig:l}=useContext(ea),c=useRef(null),p=useMemo(()=>({content:{contentRef:c}}),[c]);useEffect(()=>{qr.setSidebarPinState(a)},[a]);const g=useMediaQuery(S=>S.breakpoints.down("xs"),{noSsr:!0}),E=()=>s(!a),w=Hl({isPinned:a,sidebarConfig:l});return React.createElement(Nd,{value:{isPinned:a,toggleSidebarPinState:E,isMobile:g}},React.createElement($r.Provider,{value:p},React.createElement(Box,{className:w.root},t.children)))}function Os(){const{content:t}=(0,o.useContext)($r);return{focusContent:(0,o.useCallback)(()=>{var s,l;(l=(s=t==null?void 0:t.contentRef)==null?void 0:s.current)==null||l.focus()},[t]),contentRef:t==null?void 0:t.contentRef}}const La=(0,re.Z)(t=>({drawer:a=>({display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:t.zIndex.appBar,background:t.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",width:a.sidebarConfig.drawerWidthClosed,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}),drawerOpen:a=>({width:a.sidebarConfig.drawerWidthOpen,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),Kl=t=>{const{sidebarConfig:a}=useContext(ea),{openDelayMs:s=a.defaultOpenDelayMs,closeDelayMs:l=a.defaultCloseDelayMs,disableExpandOnHover:c,children:p}=t,g=La({sidebarConfig:a}),E=useMediaQuery(yt=>yt.breakpoints.down("md"),{noSsr:!0}),[w,S]=useState(0),P=useRef(),{isPinned:O,toggleSidebarPinState:M}=Ls(),F=()=>{O||c||(P.current&&(clearTimeout(P.current),P.current=void 0),w!==2&&!E&&(P.current=window.setTimeout(()=>{P.current=void 0,S(2)},s),S(1)))},ae=()=>{O||c||(P.current&&(clearTimeout(P.current),P.current=void 0),w===1?S(0):w===2&&(P.current=window.setTimeout(()=>{P.current=void 0,S(0)},l)))},Q=w===2&&!E||O,Re=yt=>{yt?(S(2),M()):(S(0),M())};return React.createElement("nav",{style:{},"aria-label":"sidebar nav"},React.createElement(Jl,null),React.createElement(Zo,{value:{isOpen:Q,setOpen:Re}},React.createElement(Box,{className:g.root,"data-testid":"sidebar-root",onMouseEnter:c?()=>{}:F,onFocus:c?()=>{}:F,onMouseLeave:c?()=>{}:ae,onBlur:c?()=>{}:ae},React.createElement(Box,{className:classNames(g.drawer,{[g.drawerOpen]:Q})},p))))},Yl=t=>{var a,s;const l=Po((a=t.sidebarOptions)!=null?a:{}),c=Dl((s=t.submenuOptions)!=null?s:{}),{children:p,disableExpandOnHover:g,openDelayMs:E,closeDelayMs:w}=t,{isMobile:S}=Ls();return S?React.createElement(Vl,null,p):React.createElement(ea.Provider,{value:{sidebarConfig:l,submenuConfig:c}},React.createElement(Kl,{openDelayMs:E,closeDelayMs:w,disableExpandOnHover:g},p))};function Jl(){const{sidebarConfig:t}=useContext(ea),{focusContent:a,contentRef:s}=Os(),l=La({sidebarConfig:t});return s!=null&&s.current?React.createElement(Button$1,{onClick:a,variant:"contained",className:classNames(l.visuallyHidden)},"Skip to content"):null}function Bs(t,a){const s=new URLSearchParams(a.search).toString(),l=te().parse(s),c=new URLSearchParams(t.search).toString(),p=te().parse(c);return(0,Me.isEqual)(a.pathname,t.pathname)&&(0,Me.isMatch)(p,l)}const sa=(0,re.Z)(t=>{var a,s;return{item:{height:48,width:"100%","&:hover":{background:((a=t.palette.navigation.navItem)==null?void 0:a.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:t.palette.navigation.color,padding:t.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:t.palette.common.white},label:{margin:t.spacing(1.75),marginLeft:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((s=t.palette.navigation.navItem)==null?void 0:s.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor}},textContent:{color:t.palette.navigation.color,paddingLeft:t.spacing(4),paddingRight:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),Fo=t=>{const{title:a,subtitle:s,to:l,icon:c,dropdownItems:p}=t,g=sa(),{setIsHoveredOn:E}=useContext(Ns),w=()=>{E(!1)},S=useResolvedPath$1(l!=null?l:""),P=useLocation();let O=Bs(P,S);const[M,F]=useState(!1),ae=()=>{F(!M)};return p!==void 0?(p.some(Q=>{const Re=resolvePath(Q.to);return O=Bs(P,Re),O}),React.createElement(Box,{className:g.itemContainer},React.createElement(Tooltip,{title:a,enterDelay:500,enterNextDelay:500},React.createElement(Button$1,{role:"button",onClick:ae,onTouchStart:Q=>Q.stopPropagation(),className:classNames(g.item,O?g.selected:void 0)},c&&React.createElement(c,{fontSize:"small"}),React.createElement(Typography,{variant:"subtitle1",className:g.label},a,React.createElement("br",null),s&&React.createElement(Typography,{variant:"caption",className:g.subtitle},s)),M?React.createElement(ArrowDropUpIcon,{className:g.dropdownArrow}):React.createElement(ArrowDropDownIcon,{className:g.dropdownArrow}))),p&&M&&React.createElement(Box,{className:g.dropdown},p.map((Q,Re)=>React.createElement(Tooltip,{key:Re,title:Q.title,enterDelay:500,enterNextDelay:500},React.createElement(ra,{to:Q.to,underline:"none",className:g.dropdownItem,onClick:w,onTouchStart:yt=>yt.stopPropagation()},React.createElement(Typography,{className:g.textContent},Q.title))))))):React.createElement(Box,{className:g.itemContainer},React.createElement(Tooltip,{title:a,enterDelay:500,enterNextDelay:500},React.createElement(ra,{to:l,underline:"none",className:classNames(g.item,O?g.selected:void 0),onClick:w,onTouchStart:Q=>Q.stopPropagation()},c&&React.createElement(c,{fontSize:"small"}),React.createElement(Typography,{variant:"subtitle1",className:g.label},a,React.createElement("br",null),s&&React.createElement(Typography,{variant:"caption",className:g.subtitle},s)))))},jo=(0,re.Z)(t=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:t.spacing(7)+1},drawer:a=>{var s,l;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[t.breakpoints.up("sm")]:{marginLeft:a.left,transition:t.transitions.create("margin-left",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(l=(s=t.palette.navigation.submenu)==null?void 0:s.background)!=null?l:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:a.submenuConfig.drawerWidthClosed,transitionDelay:`${a.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:a=>({width:a.submenuConfig.drawerWidthOpen,[t.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:t.spacing(3),left:0,top:0}}),title:{fontSize:t.typography.h5.fontSize,fontWeight:t.typography.fontWeightMedium,color:t.palette.common.white,padding:t.spacing(2.5),[t.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),zo=t=>{const{isOpen:a}=Zr(),{sidebarConfig:s,submenuConfig:l}=(0,o.useContext)(ea),c=a?s.drawerWidthOpen:s.drawerWidthClosed,p=jo({left:c,submenuConfig:l}),{isHoveredOn:g}=(0,o.useContext)(Ns),[E,w]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{w(g)},[g]),o.createElement(ye.Z,{className:bt()(p.drawer,{[p.drawerOpen]:E})},o.createElement(ee.Z,{variant:"h5",className:p.title},t.title),t.children)},Uo=(0,re.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),Vo=()=>{const t=Uo();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},Zs=(0,re.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),Ho=()=>{const t=Zs();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},Go=t=>(0,re.Z)(a=>{var s,l,c,p;return{root:{color:a.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:t.drawerWidthClosed,justifyContent:"center"},open:{[a.breakpoints.up("sm")]:{width:t.drawerWidthOpen}},highlightable:{"&:hover":{background:(l=(s=a.palette.navigation.navItem)==null?void 0:s.hoverBackground)!=null?l:"#404040"}},highlighted:{background:(p=(c=a.palette.navigation.navItem)==null?void 0:c.hoverBackground)!=null?p:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:t.iconContainerWidth,marginRight:-a.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:a.typography.fontWeightBold,fontSize:a.typography.fontSize},searchFieldHTMLInput:{padding:a.spacing(2,0,2)},searchContainer:{width:t.drawerWidthOpen-t.iconContainerWidth},secondaryAction:{width:a.spacing(6),textAlign:"center",marginRight:a.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:a.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${t.selectedIndicatorWidth}px ${a.palette.navigation.indicator}`,color:a.palette.navigation.selectedColor},"&$closed":{width:t.drawerWidthClosed},"& $closedItemIcon":{paddingRight:t.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-t.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function _r(t){return(0,o.useMemo)(()=>Go(t),[t])()}const Ko=(t,a)=>(0,Ue.vJ)(t.props.children,s=>{let l=!1;return s.getElements().forEach(({props:{to:c,dropdownItems:p}})=>{if(!l){if(p!=null&&p.length){p.forEach(({to:g})=>l=l||Bs(a,(0,fn.i3)(g)));return}c&&(l=Bs(a,(0,fn.i3)(c)))}}),l},[a.pathname]);function Yo(t){return t.to===void 0}const $s=o.createElement(zo).type,Ql=o.forwardRef(function({to:a,end:s,style:l,className:c,activeStyle:p,caseSensitive:g,activeClassName:E="active","aria-current":w="page",...S},P){let{pathname:O}=(0,ct.TH)(),{pathname:M}=(0,ct.WU)(a);g||(O=O.toLocaleLowerCase("en-US"),M=M.toLocaleLowerCase("en-US"));let F=O===M;!F&&!s&&(F=O.startsWith(`${M}/`));const ae=F?w:void 0;return o.createElement(mn.rU,{...S,to:a,ref:P,"aria-current":ae,style:{...l,...F?p:void 0},className:bt()([c,F?E:void 0])})}),Jo=(0,o.forwardRef)((t,a)=>{const{icon:s,text:l,hasNotifications:c=!1,hasSubmenu:p=!1,disableHighlight:g=!1,onClick:E,children:w,className:S,...P}=t,{sidebarConfig:O}=(0,o.useContext)(ea),M=_r(O),{isOpen:F}=Zr(),ae=!F&&p?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},Q=o.createElement(ye.Z,{style:ae},o.createElement(s,{fontSize:"small"}),!F&&p?o.createElement(ur.Z,{fontSize:"small"}):o.createElement(o.Fragment,null)),Re=o.createElement(Pe.Z,{color:"secondary",variant:"dot",overlap:"circular",invisible:!c,className:bt()({[M.closedItemIcon]:!F})},Q),yt=o.createElement(o.Fragment,null,o.createElement(ye.Z,{"data-testid":"login-button",className:M.iconContainer},Re),l&&o.createElement(ee.Z,{variant:"subtitle2",className:M.label},l),o.createElement("div",{className:M.secondaryAction},w)),at=F?yt:Re,mt={onClick:E,className:bt()(S,M.root,F?M.open:M.closed,Yo(t)&&M.buttonItem,{[M.highlightable]:!g})};return Yo(t)?o.createElement(xt.Z,{role:"button","aria-label":l,...mt,ref:a},at):o.createElement(Ql,{...mt,activeClassName:M.selected,to:t.to?t.to:"",ref:a,"aria-label":l||t.to,...P},at)}),Qo=({children:t,...a})=>{const{sidebarConfig:s}=(0,o.useContext)(ea),l=_r(s),[c,p]=(0,o.useState)(!1),g=(0,ct.TH)(),E=Ko(t,g),w=(0,dt.Z)(M=>M.breakpoints.down("sm")),S=()=>{p(!0)},P=()=>{p(!1)},O=()=>w?c?o.createElement(Tr.Z,{fontSize:"small",className:l.submenuArrow}):o.createElement(On.Z,{fontSize:"small",className:l.submenuArrow}):!c&&o.createElement(ur.Z,{fontSize:"small",className:l.submenuArrow});return o.createElement(Ns.Provider,{value:{isHoveredOn:c,setIsHoveredOn:p}},o.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:P,onTouchStart:c?P:S,onMouseEnter:S,className:bt()(c&&l.highlighted)},o.createElement(Jo,{hasSubmenu:!0,className:E?l.selected:"",...a},O()),c&&t))},Xo=(0,o.forwardRef)((t,a)=>{const[s]=(0,Ue.vJ)(t.children,l=>l.getElements().filter(c=>c.type===$s));return s?o.createElement(Qo,{...t},s):o.createElement(Jo,{...t,ref:a})});function Pd(t){const{sidebarConfig:a}=useContext(ea),[s,l]=useState(""),c=_r(a),p=t.icon?t.icon:SearchIcon,g=()=>{t.onSearch(s),l("")},E=O=>{O.key==="Enter"&&(O.preventDefault(),g())},w=O=>{l(O.target.value)},S=O=>{O.preventDefault(),O.stopPropagation()},P=O=>{g(),O.preventDefault()};return React.createElement(Box,{className:c.searchRoot},React.createElement(Xo,{icon:p,to:t.to,onClick:P,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:s,onClick:S,onChange:w,onKeyDown:E,className:c.searchContainer,InputProps:{disableUnderline:!0,className:c.searchField},inputProps:{className:c.searchFieldHTMLInput}})))}const Ld=(0,Ye.Z)("div")({flex:1},{name:"BackstageSidebarSpace"}),Od=(0,Ye.Z)("div")({height:8},{name:"BackstageSidebarSpacer"}),Xl=(0,Ye.Z)("hr")(({theme:t})=>({height:1,width:"100%",background:"#383838",border:"none",margin:t.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),qo=t=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:t.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:t.palette.text.hint,borderRadius:"5px"}}),Bd=(0,Ye.Z)("div")(({theme:t})=>{const a=qo(t);return{flex:"0 1 auto",overflowX:"hidden",width:"calc(100% - 5px)",minHeight:"48px",overflowY:"hidden","@media (hover: none)":a,"&:hover":a}}),ql=()=>{const{sidebarConfig:t}=useContext(ea),a=_r(t),{isOpen:s,setOpen:l}=Zr();if(useMediaQuery(g=>g.breakpoints.down("md"),{noSsr:!0}))return null;const p=()=>{l(!s)};return React.createElement(Button$1,{role:"button",onClick:p,className:a.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:a.arrows},s?React.createElement(Vo,null):React.createElement(Ho,null)))},Zd=(0,re.Z)(t=>({introCard:a=>({color:"#b5b5b5",fontSize:12,width:a.sidebarConfig.drawerWidthOpen,marginTop:t.spacing(2.25),marginBottom:t.spacing(1.5),paddingLeft:a.sidebarConfig.iconPadding,paddingRight:a.sidebarConfig.iconPadding}),introDismiss:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:t.spacing(1.5)},introDismissLink:{color:"#dddddd",display:"flex",alignItems:"center",marginBottom:t.spacing(.5),"&:hover":{color:t.palette.linkHover,transition:t.transitions.create("color",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest})}},introDismissText:{fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:1},introDismissIcon:{width:18,height:18,marginRight:t.spacing(1.5)}}),{name:"BackstageSidebarIntro"});function ei(t){const{sidebarConfig:a}=useContext(ea),s=Zd({sidebarConfig:a}),{text:l,onClose:c}=t,p=()=>c();return React.createElement(Box,{className:s.introCard},React.createElement(Typography,{variant:"subtitle2"},l),React.createElement(Box,{className:s.introDismiss},React.createElement(IconButton,{onClick:p,className:s.introDismissLink},React.createElement(CloseIcon,{className:s.introDismissIcon}),React.createElement(Typography,{component:"span",className:s.introDismissText},"Dismiss"))))}const _s=t=>{const{text:a,onDismiss:s}=t,[l,c]=useState(!1),p=()=>{c(!0)};return React.createElement(Collapse,{in:!l,onExited:s},React.createElement(ei,{text:a,onClose:p}))},ec=null,$d="And your recently viewed plugins will pop up here!";function _d(t){const{isOpen:a}=Zr(),s={starredItemsDismissed:!1,recentlyViewedItemsDismissed:!1},{value:l,set:c}=useLocalStorageValue(Lo),{starredItemsDismissed:p,recentlyViewedItemsDismissed:g}=l!=null?l:{},E=()=>{c(S=>({...s,...S,starredItemsDismissed:!0}))},w=()=>{c(S=>({...s,...S,recentlyViewedItemsDismissed:!0}))};return a?React.createElement(React.Fragment,null,!p&&React.createElement(React.Fragment,null,React.createElement(_s,{text:ec,onDismiss:E}),React.createElement(Xl,null)),!g&&React.createElement(_s,{text:$d,onDismiss:w})):null}const es=(0,re.Z)(t=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:t.spacing(3),paddingBottom:t.spacing(3),paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function ts(t){const{className:a,stretch:s,noPadding:l,children:c,...p}=t,{contentRef:g}=Os(),E=es();return o.createElement("article",{ref:g,tabIndex:-1,...p,className:bt()(E.root,a,{[E.stretch]:s,[E.noPadding]:l})},c)}const Dd=(0,re.Z)(t=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:t.palette.background.paper,paddingLeft:t.spacing(3),minWidth:0},defaultTab:{...t.typography.caption,padding:t.spacing(3,3),textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,color:t.palette.text.secondary},selected:{color:t.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:t.palette.background.default,color:t.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function tc(t){const{tabs:a,onChange:s,selectedIndex:l}=t,[c,p]=(0,o.useState)(l!=null?l:0),g=Dd(),E=(0,o.useCallback)((w,S)=>{l===void 0&&p(S),s&&l!==S&&s(S)},[l,s]);return(0,o.useEffect)(()=>{l!==void 0&&p(l)},[l]),o.createElement(ye.Z,{className:g.tabsWrapper},o.createElement(dr.Z,{selectionFollowsFocus:!0,indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:E,value:c},a.map((w,S)=>o.createElement(Ta.Z,{...w.tabProps,"data-testid":`header-tab-${S}`,label:w.label,key:w.id,value:S,className:g.defaultTab,classes:{selected:g.selected,root:g.tabRoot}}))))}function nc(t){var a,s,l,c;const p=(0,ct.UO)(),E=t.map(({path:M,children:F})=>({caseSensitive:!1,path:`${M}/*`,element:F})).sort((M,F)=>F.path.replace(/\/\*$/,"").localeCompare(M.path.replace(/\/\*$/,""))),w=(a=(0,ct.V$)(E))!=null?a:t[0].children;let S=(s=p["*"])!=null?s:"";S.startsWith("/")||(S=`/${S}`);const[P]=(l=(0,fn.fp)(E,S))!=null?l:[],O=P?t.findIndex(M=>`${M.path}/*`===P.route.path):0;return{index:O===-1?0:O,element:w,route:(c=t[O])!=null?c:t[0]}}function ac(t){const{routes:a}=t,s=(0,ct.s0)(),{index:l,route:c,element:p}=nc(a),g=(0,o.useMemo)(()=>a.map(w=>({id:w.path,label:w.title,tabProps:w.tabProps})),[a]),E=w=>{let{path:S}=a[w];S=S.replace(/\/\*$/,""),S=S.replace(/^\//,""),s(S)};return o.createElement(o.Fragment,null,o.createElement(tc,{tabs:g,selectedIndex:l,onChange:E}),o.createElement(ts,null,o.createElement(K.q,{title:c.title}),p))}const Ds=()=>null;(0,Ue.R5)(Ds,"core.gatherMountPoints",!0);function ti(t){const a=o.createElement(Ds,{path:"",title:""},o.createElement("div",null)).type;return o.Children.toArray(t).flatMap(s=>{if(!(0,o.isValidElement)(s))return[];if(s.type===o.Fragment)return ti(s.props.children);if(s.type!==a)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:l,title:c,children:p,tabProps:g}=s.props;return[{path:l,title:c,children:p,tabProps:g}]})}function rc(t){const a=ti(t.children);return o.createElement(ac,{routes:a})}rc.Route=Ds;const sc=(0,re.Z)(t=>({value:{marginBottom:t.spacing(.75)},subvalue:{color:t.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function Ms(t){const{value:a,subvalue:s}=t,l=sc();return React.createElement(React.Fragment,null,React.createElement(Box,{className:l.value},a),React.createElement(Box,{className:l.subvalue},s))}const oc=(0,re.Z)(t=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:t.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:t.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${t.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:t.spacing(2)}}}),{name:"BackstageTableFilters"}),Ws=t=>{var a;const s=oc(),{onChangeFilters:l}=t,[c,p]=(0,o.useState)({...t.selectedFilters}),[g,E]=(0,o.useState)(!1),w=()=>{p({}),E(S=>!S)};return(0,o.useEffect)(()=>{l(c)},[c,l]),o.createElement(ye.Z,{className:s.root},o.createElement(ye.Z,{className:s.header},o.createElement(ye.Z,{className:s.value},"Filters"),o.createElement(xt.Z,{color:"primary",onClick:w},"Clear all")),o.createElement(ye.Z,{className:s.filters},((a=t.filters)==null?void 0:a.length)&&t.filters.map(S=>o.createElement(xl,{triggerReset:g,key:S.element.label,...S.element,selected:c[S.element.label],onChange:P=>p({...c,[S.element.label]:P})}))))},ni={Add:(0,o.forwardRef)((t,a)=>o.createElement(Ya.Z,{...t,ref:a})),Check:(0,o.forwardRef)((t,a)=>o.createElement(kr.Z,{...t,ref:a})),Clear:(0,o.forwardRef)((t,a)=>o.createElement(oe.Z,{...t,ref:a})),Delete:(0,o.forwardRef)((t,a)=>o.createElement(Yt.Z,{...t,ref:a})),DetailPanel:(0,o.forwardRef)((t,a)=>o.createElement(Ln.Z,{...t,ref:a})),Edit:(0,o.forwardRef)((t,a)=>o.createElement(Ne.Z,{...t,ref:a})),Export:(0,o.forwardRef)((t,a)=>o.createElement(_a.Z,{...t,ref:a})),Filter:(0,o.forwardRef)((t,a)=>o.createElement(Ja.Z,{...t,ref:a})),FirstPage:(0,o.forwardRef)((t,a)=>o.createElement(dn.Z,{...t,ref:a})),LastPage:(0,o.forwardRef)((t,a)=>o.createElement(Qa.Z,{...t,ref:a})),NextPage:(0,o.forwardRef)((t,a)=>o.createElement(Ln.Z,{...t,ref:a})),PreviousPage:(0,o.forwardRef)((t,a)=>o.createElement(en.Z,{...t,ref:a})),ResetSearch:(0,o.forwardRef)((t,a)=>o.createElement(oe.Z,{...t,ref:a})),Search:(0,o.forwardRef)((t,a)=>o.createElement(Ja.Z,{...t,ref:a})),SortArrow:(0,o.forwardRef)((t,a)=>o.createElement(Ia.Z,{...t,ref:a})),ThirdStateCheck:(0,o.forwardRef)((t,a)=>o.createElement(Aa.Z,{...t,ref:a})),ViewColumn:(0,o.forwardRef)((t,a)=>o.createElement(Kn.Z,{...t,ref:a}))};function ai(t,a){const s=a.split(".");let l=t[s[0]];for(let c=1;c<s.length;++c){if(l===void 0)return l;const p=s[c];l=l[p]}return l}const ri=(0,He.Z)(t=>({header:{padding:t.spacing(1,2,1,2.5),borderTop:`1px solid ${t.palette.grey.A100}`,borderBottom:`1px solid ${t.palette.grey.A100}`,color:t.palette.textSubtle,fontWeight:t.typography.fontWeightBold,position:"static",wordBreak:"normal"}}),{name:"BackstageTableHeader"})($a.W$),si=(0,He.Z)(t=>({root:{padding:t.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:t.typography.fontWeightBold}},searchField:{paddingRight:t.spacing(2)}}),{name:"BackstageTableToolbar"})($a.UW),ic=(0,re.Z)(t=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:t.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),Md=(0,re.Z)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function Wd(t,a){return t.map(s=>{var l;const c=(l=s.headerStyle)!=null?l:{};let p=s.cellStyle||{};if(s.highlight)if(c.color=a.palette.textContrast,typeof p=="object")p.fontWeight=a.typography.fontWeightBold;else{const g=p;p=(E,w,S)=>({...g(E,w,S),fontWeight:a.typography.fontWeightBold})}return{...s,headerStyle:c,cellStyle:p}})}function Fd(t,a){return(0,Me.transform)(t,(s,l,c)=>{(0,Me.isEqual)(l,a[c])||(s[c]=l)})}const lc={search:"",filtersOpen:!1,filters:{}};function cc(t){const{toolbarRef:a,setSearch:s,hasFilters:l,selectedFiltersLength:c,toggleFilters:p}=t,g=ic(),E=(0,o.useCallback)(w=>{t.onSearchChanged(w),s(w)},[t,s]);return l?o.createElement(ye.Z,{className:g.root},o.createElement(ye.Z,{className:g.root},o.createElement(rt.Z,{onClick:p,"aria-label":"filter list"},o.createElement(Ja.Z,null)),o.createElement(ee.Z,{className:g.title},"Filters (",c,")")),o.createElement(si,{...t,ref:a,onSearchChanged:E})):o.createElement(si,{...t,ref:a,onSearchChanged:E})}function dc(t){const{data:a,columns:s,options:l,title:c,subtitle:p,filters:g,initialState:E,emptyContent:w,onStateChange:S,components:P,...O}=t,M=Md(),F=(0,Ve.Z)(),ae={...lc,...E},[Q,Re]=(0,o.useState)(ae.filtersOpen),yt=(0,o.useCallback)(()=>Re(Ke=>!Ke),[Re]),[at,mt]=(0,o.useState)(0),[we,st]=(0,o.useState)(a),[ot,Sn]=(0,o.useState)(ae.filters),Qt=Wd(s,F),[sn,oa]=(0,o.useState)(ae.search);(0,o.useEffect)(()=>{if(S){const Ke=Fd({search:sn,filtersOpen:Q,filters:ot},lc);S(Ke)}},[sn,Q,ot,S]);const Ua={headerStyle:{textTransform:"uppercase"}},Wn=(0,o.useCallback)(Ke=>{var At;return(At=s.find(Ut=>Ut.title===Ke))==null?void 0:At.field},[s]);(0,o.useEffect)(()=>{if(typeof a=="function")return;if(!ot){st(a);return}const Ke=Object.values(ot);if(a&&Ke.flat().length){const At=a.filter(Ut=>!!Object.entries(ot).filter(([,Cn])=>!!Cn.length).every(([Cn,ft])=>{const Vt=ai(Ut,Wn(Cn));return Array.isArray(Vt)&&Array.isArray(ft)?Vt.some(Oa=>ft.includes(Oa)):Array.isArray(Vt)?Vt.includes(ft):Array.isArray(ft)?ft.includes(Vt):Vt===ft}));st(At)}else st(a);mt(Ke.flat().length)},[a,ot,Wn]);const Va=(Ke,At)=>{const Ut=ft=>{const Vt=new Set,Oa=Rr=>{Rr!=null&&Vt.add(Rr)};return At&&At.forEach(Rr=>{const Wr=ai(Rr,Wn(ft));Array.isArray(Wr)?Wr.forEach(Oa):Oa(Wr)}),Vt},Cn=ft=>({placeholder:"All results",label:ft.column,multiple:ft.type==="multiple-select",items:[...Ut(ft.column)].sort().map(Vt=>({label:Vt,value:Vt}))});return Ke.map(ft=>({type:ft.type,element:Cn(ft)}))},vt=!!(g!=null&&g.length),Ha=(0,o.useCallback)(Ke=>o.createElement(cc,{setSearch:oa,hasFilters:vt,selectedFiltersLength:at,toggleFilters:yt,...Ke}),[yt,vt,at,oa]),br=typeof a!="function"&&a.length===0,it=s.length,It=(0,o.useCallback)(Ke=>w&&br?o.createElement("tbody",null,o.createElement("tr",null,o.createElement("td",{colSpan:it},w))):o.createElement($a.os,{...Ke}),[br,w,it]);return o.createElement(ye.Z,{className:M.root},Q&&a&&typeof a!="function"&&(g==null?void 0:g.length)&&o.createElement(Ws,{filters:Va(g,a),selectedFilters:ot,onChangeFilters:Sn}),o.createElement($a.ZP,{components:{Header:ri,Toolbar:Ha,Body:It,...P},options:{...Ua,...l},columns:Qt,icons:ni,title:o.createElement(o.Fragment,null,o.createElement(ee.Z,{variant:"h5",component:"h2"},c),p&&o.createElement(ee.Z,{color:"textSecondary",variant:"body1"},p)),data:typeof a=="function"?a:we,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"}},...O}))}dc.icons=Object.freeze(ni);function jd(t,a){if(a<=0)return[t];const s=[];for(let l=0;l<t.length;l+=a)s.push(t.slice(l,l+a));return s}const oi=t=>{const{children:a,value:s,index:l,...c}=t;return React.createElement(Box,{role:"tabpanel",hidden:s!==l,"aria-labelledby":`scrollable-auto-tab-${l}`,...c},s===l&&React.createElement(Box,{p:3},a))},uc=(0,re.Z)(t=>({root:{color:"#6E6E6E",overflow:"visible",fontSize:t.typography.h5.fontSize,textAlign:"center",borderRadius:"50%",backgroundColor:"#E6E6E6",marginLeft:a=>a.isNext?"auto":"0",marginRight:a=>a.isNext?"0":t.spacing(1.25),"&:hover":{backgroundColor:"#E6E6E6",opacity:"1"}}}),{name:"BackstageTabIcon"}),ii=t=>{const a=uc(t),{ariaLabel:s,onClick:l}=t;return React.createElement(IconButton,{onClick:l,className:a.root,size:"small",disableRipple:!0,disableFocusRipple:!0,"aria-label":s},t.children)},pc=(t,a)=>a?t?"20px":"0":"40px",Fs=(0,re.Z)(t=>({root:{textTransform:"none",height:"64px",fontWeight:t.typography.fontWeightBold,fontSize:t.typography.pxToRem(13),color:t.palette.textSubtle,marginLeft:a=>pc(a.isFirstNav,a.isFirstIndex),width:"130px",minWidth:"130px","&:hover":{outline:"none",backgroundColor:"transparent",color:t.palette.textSubtle}}}),{name:"BackstageTab"}),mc=t=>{const a=Fs(t),{isFirstNav:s,isFirstIndex:l,...c}=t;return React.createElement(Tab,{classes:a,disableRipple:!0,...c})},zd=(0,re.Z)(t=>({indicator:{display:"flex",justifyContent:"center",backgroundColor:t.palette.tabbar.indicator,height:t.spacing(.5)},flexContainer:{alignItems:"center"},root:{"&:last-child":{marginLeft:"auto"}}}),{name:"BackstageTabBar"}),fc=t=>{const a=zd(t);return React.createElement(Tabs$1,{classes:a,...t,TabIndicatorProps:{children:React.createElement(Typography,{component:"span"})}})},gc=(0,re.Z)(t=>({root:{flexGrow:1,width:"100%"},styledTabs:{backgroundColor:t.palette.background.paper},appbar:{boxShadow:"none",backgroundColor:t.palette.background.paper,paddingLeft:t.spacing(1.25),paddingRight:t.spacing(1.25)}}),{name:"BackstageTabs"});function lu(t){const{tabs:a}=t,s=gc(),[l,c]=useState([0,0]),[p,g]=useState(0),[E,w]=useState(0),[S,P]=useState([[]]),O=useRef(),{width:M}=useWindowSize(),F=(at,mt)=>{c([p,mt])},ae=()=>{g(p-1)},Q=()=>{g(p+1)},Re=()=>p+1<S.length;useEffect(()=>{const mt=p===0?1:2,we=O.current.offsetWidth-20-mt*30,st=l[0]*E+l[1],ot=Math.floor(we/170);w(ot),P(jd(a,ot)),c([Math.floor(st/ot),st%ot])},[M,a]);const yt=p===l[0]?l[1]:!1;return React.createElement(Box,{className:s.root},React.createElement(AppBar,{ref:O,className:s.appbar,position:"static"},React.createElement(Box,null,React.createElement(fc,{value:yt,onChange:F,selectionFollowsFocus:!0},p!==0&&React.createElement(ii,{onClick:ae,ariaLabel:"navigate-before"},React.createElement(NavigateBeforeIcon,null)),S[p].map((at,mt)=>React.createElement(mc,{value:mt,isFirstIndex:mt===0,isFirstNav:p===0,key:mt,icon:at.icon||void 0,label:at.label||void 0})),Re()&&React.createElement(ii,{isNext:!0,onClick:Q,ariaLabel:"navigate-next"},React.createElement(NavigateNextIcon,null))))),yt!==!1?S[p].map((at,mt)=>React.createElement(oi,{key:mt,value:mt,index:yt},at.content)):React.createElement(oi,{key:"panel_outside_chunked_array",value:l[1],index:l[1]},S[l[0]][l[1]].content))}function hc(t,a){const s=t[t.length-1];if(s)return s>=.9?a.palette.status.ok:s>=.5?a.palette.status.warning:a.palette.status.error}function Ud(t){var a;const s=useTheme();return t.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...t},t.title&&React.createElement("title",null,t.title),React.createElement(SparklinesLine,{color:(a=t.color)!=null?a:hc(t.data,s)})):null}const yc=t=>(0,re.Z)(a=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:a.spacing(2),textAlign:t.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:a.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),Vd=({title:t="Unknown page",className:a})=>o.createElement(ee.Z,{variant:"h4",component:"h2",className:a,"data-testid":"header-title"},t);function li(t){const{description:a,title:s,titleComponent:l=void 0,children:c,textAlign:p="left"}=t,g=yc({textAlign:p})(),E=l||o.createElement(Vd,{title:s,className:g.title});return o.createElement(o.Fragment,null,o.createElement(K.q,{title:s}),o.createElement(ye.Z,{className:g.container},o.createElement(ye.Z,{className:g.leftItemsBox},E,a&&o.createElement(ee.Z,{className:g.description,variant:"body2"},a)),o.createElement(ye.Z,{className:g.rightItemsBox},c)))}const vc=(0,re.Z)(t=>({micDrop:{maxWidth:"60%",bottom:t.spacing(2),right:t.spacing(2),[t.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:`${t.spacing(10)}px auto ${t.spacing(4)}px`}}}),{name:"BackstageErrorPageMicDrop"}),Hd=()=>{const t=vc();return React.createElement("img",{src:MicDropSvgUrl,className:t.micDrop,alt:"Girl dropping mic from her hands"})},Ec=(0,re.Z)(t=>({container:{padding:t.spacing(8),[t.breakpoints.down("xs")]:{padding:t.spacing(2)}},title:{paddingBottom:t.spacing(5),[t.breakpoints.down("xs")]:{paddingBottom:t.spacing(4),fontSize:t.typography.h3.fontSize}},subtitle:{color:t.palette.textSubtle}}),{name:"BackstageErrorPage"});function ci(t){const{status:a,statusMessage:s,additionalInfo:l,supportUrl:c}=t,p=Ec(),g=useNavigate(),E=Br();return React.createElement(Grid,{container:!0,spacing:0,className:p.container},React.createElement(Grid,{item:!0,xs:12,sm:8,md:4},React.createElement(Typography,{"data-testid":"error",variant:"body1",className:p.subtitle},"ERROR ",a,": ",s),React.createElement(Typography,{variant:"body1",className:p.subtitle},l),React.createElement(Typography,{variant:"h2",className:p.title},"Looks like someone dropped the mic!"),React.createElement(Typography,{variant:"h6"},React.createElement(ra,{to:"#","data-testid":"go-back-link",onClick:()=>g(-1)},"Go back"),"... or please"," ",React.createElement(ra,{to:c||E.url},"contact support")," if you think this is a bug.")),React.createElement(Hd,null))}const Gd=(0,He.Z)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(ee.Z),js=(0,He.Z)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(ye.Z);function bc(t){const{children:a,...s}=t,[l,c]=o.useState(null),p=o.Children.toArray(a),[g,E,...w]=p,S=w.length?w.pop():p[p.length-1],P=p.length>3,O=ae=>{c(ae.currentTarget)},M=()=>{c(null)},F=Boolean(l);return o.createElement(o.Fragment,null,o.createElement(pr.Z,{"aria-label":"breadcrumb",...s},p.length>1&&o.createElement(js,{clone:!0},g),p.length>2&&o.createElement(js,{clone:!0},E),P&&o.createElement(Gd,{onClick:O},"..."),o.createElement(ye.Z,{style:{fontStyle:"italic"}},S)),o.createElement(ut.ZP,{open:F,anchorEl:l,onClose:M,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},o.createElement(Ge.Z,null,w.map((ae,Q)=>o.createElement(Ee.Z,{key:Q,button:!0},o.createElement(js,{clone:!0},ae))))))}const Rc=(0,re.Z)(t=>({header:{gridArea:"pageHeader",padding:t.spacing(3),width:"100%",boxShadow:t.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:t.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[t.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:t.page.fontColor,wordBreak:"break-word",fontSize:t.typography.h3.fontSize,marginBottom:0},subtitle:{color:t.page.fontColor,opacity:.8,display:"inline-block",marginTop:t.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:t.spacing(1),color:t.page.fontColor},breadcrumb:{color:t.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-t.spacing(.3),marginBottom:t.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-t.spacing(.3),marginBottom:t.spacing(.3)}}),{name:"BackstageHeader"}),zs=({type:t,typeLink:a,classes:s,pageTitle:l})=>t?a?o.createElement(bc,{className:s.breadcrumb},o.createElement(ra,{to:a},t),o.createElement(ee.Z,null,l)):o.createElement(ee.Z,{className:s.type},t):null,di=({pageTitle:t,classes:a,tooltip:s})=>{const l=o.createElement(ee.Z,{className:a.title,variant:"h1"},t);return s?o.createElement(Xt.ZP,{title:s,placement:"top-start"},l):l},xc=({classes:t,subtitle:a})=>a?typeof a!="string"?o.createElement(o.Fragment,null,a):o.createElement(ee.Z,{className:t.subtitle,variant:"subtitle2",component:"span"},a):null;function ns(t){const{children:a,pageTitleOverride:s,style:l,subtitle:c,title:p,tooltip:g,type:E,typeLink:w}=t,S=Rc(),O=(0,Ae.u)(Ae.p).getOptionalString("app.title")||"Backstage",M=s||p,F=p||s,ae=`${M} | %s | ${O}`,Q=`${M} | ${O}`;return o.createElement(o.Fragment,null,o.createElement(K.q,{titleTemplate:ae,defaultTitle:Q}),o.createElement("header",{style:l,className:S.header},o.createElement(ye.Z,{className:S.leftItemsBox},o.createElement(zs,{classes:S,type:E,typeLink:w,pageTitle:F}),o.createElement(di,{classes:S,pageTitle:F,tooltip:g}),o.createElement(xc,{classes:S,subtitle:c})),o.createElement(J.Z,{container:!0,className:S.rightItemsBox,spacing:4},a)))}const Kd=({label:t,secondaryLabel:a,icon:s,disabled:l=!1,onClick:c})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:l,button:!0,onClick:p=>{c&&c(p)}},s&&React.createElement(ListItemIcon,null,s),React.createElement(ListItemText,{primary:t,secondary:a})));function ui(t){const{palette:{common:{white:a}}}=useTheme(),{actionItems:s}=t,[l,c]=React.useState(!1),p=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>c(!0),"data-testid":"header-action-menu",ref:p,style:{color:a,height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:l,anchorEl:p.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>c(!1)},React.createElement(List,null,s.map((g,E)=>React.createElement(Kd,{key:`header-action-menu-${E}`,...g})))))}const Sc=(0,re.Z)(t=>({root:{textAlign:"left"},label:{color:t.palette.common.white,fontWeight:t.typography.fontWeightBold,letterSpacing:0,fontSize:t.typography.fontSize,marginBottom:t.spacing(1)/2,lineHeight:1},value:{color:"rgba(255, 255, 255, 0.8)",fontSize:t.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),Us=({value:t,className:a})=>o.createElement(ee.Z,{className:a},t);function Cc(t){const{label:a,value:s,url:l}=t,c=Sc(),p=o.createElement(Us,{className:c.value,value:s||"<Unknown>"});return o.createElement(J.Z,{item:!0},o.createElement(ee.Z,{component:"span",className:c.root},o.createElement(ee.Z,{className:c.label},a),l?o.createElement(ra,{to:l},p):p))}const wc=t=>(0,lt.Z)({root:{color:t.palette.common.white,padding:t.spacing(2,2,3),backgroundImage:t.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),kc=(0,re.Z)(wc,{name:"BackstageItemCardHeader"});function Er(t){const{title:a,subtitle:s,children:l}=t,c=kc(t);return React.createElement(Box,{className:c.root},s&&React.createElement(Typography,{variant:"subtitle2",component:"h3"},s),a&&React.createElement(Typography,{variant:"h6",component:"h4"},a),l)}function pi(t){const{description:a,tags:s,title:l,type:c,subtitle:p,label:g,onClick:E,href:w}=t;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(Er,{title:l,subtitle:p||c})),React.createElement(CardContent,null,s!=null&&s.length?React.createElement(Box,null,s.map((S,P)=>React.createElement(Chip,{size:"small",label:S,key:P}))):null,a),React.createElement(CardActions,null,!w&&React.createElement(ps,{to:"#",onClick:E,color:"primary"},g),w&&React.createElement(ps,{to:w,color:"primary"},g)))}const as=t=>(0,lt.Z)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:t.spacing(2)}}),Yd=(0,re.Z)(as,{name:"BackstageItemCardGrid"});function cu(t){const{children:a,...s}=t,l=Yd(s);return React.createElement(Box,{className:l.root,...s},a)}const Tc=(0,re.Z)(t=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[t.breakpoints.down("xs")]:{height:"100%"}}}),{name:"BackstagePage"});function Vs(t){const{themeId:a,children:s}=t,l=Tc();return o.createElement(tt.Z,{theme:c=>({...c,page:c.getPageTheme({themeId:a})})},o.createElement("main",{className:l.root},s))}function du(t){const{themeId:a,children:s,...l}=t;return React.createElement(Vs,{themeId:a},React.createElement(ns,{...l}),s)}const Ic=Mn.object({providerInfo:Mn.object({}).catchall(Mn.unknown()).optional(),profile:Mn.object({email:Mn.string().optional(),displayName:Mn.string().optional(),picture:Mn.string().optional()}),backstageIdentity:Mn.object({token:Mn.string(),identity:Mn.object({type:Mn.literal("user"),userEntityRef:Mn.string(),ownershipEntityRefs:Mn.array(Mn.string())})})}),mi={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function Ac(t){const a=new Date(Date.now()+mi.defaultTokenExpiryMillis);if(!t)return a;const[s,l,c]=t.split("."),p=JSON.parse(window.atob(l));return typeof p.exp!="number"?a:new Date(p.exp*1e3-mi.tokenExpiryMarginMillis)}class fi{constructor(a){this.options=a,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:a}=this.getSessionSync(),s=a.identity.userEntityRef,l=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(s);if(!l)throw new TypeError(`Invalid user entity reference "${s}"`);return l[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const a=this.state.type==="active"?this.state.session:void 0,s=this.fetchSession().then(l=>(this.state={type:"active",session:l,expiresAt:Ac(l.backstageIdentity.token)},l),l=>{throw this.state={type:"failed",error:l},l});return this.state={type:"fetching",promise:s,previous:a},s}async fetchSession(){const a=await this.options.discoveryApi.getBaseUrl("auth"),s=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,l=new Headers(s);l.set("X-Requested-With","XMLHttpRequest");const c=await fetch(`${a}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:l,credentials:"include"});if(!c.ok)throw await ResponseError.fromResponse(c);return Ic.parse(await c.json())}}const uu=t=>{const a=useApi(discoveryApiRef),[{status:s,error:l},{execute:c}]=useAsync(async()=>{const p=new fi({provider:t.provider,discoveryApi:a,headers:t.headers});await p.start(),t.onSignInSuccess(p)});return useMountEffect(c),s==="loading"?React.createElement(Or,null):l?React.createElement(Jr,{title:"You do not appear to be signed in. Please try reloading the browser page.",error:l}):null};class gi{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const a="user:default/guest";return{type:"user",userEntityRef:a,ownershipEntityRefs:[a]}}async getCredentials(){return{}}async signOut(){}}function Nc(t){const[a,s,l]=t.split(".");return JSON.parse(window.atob(s))}class Dr{constructor(a){this.result=a}getUserId(){return this.result.userId}static fromResult(a){return new Dr(a)}async getIdToken(){var a,s;return(s=(a=this.result).getIdToken)==null?void 0:s.call(a)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const a=await this.getIdToken();if(!a){const c=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:c,ownershipEntityRefs:[c]}}const{sub:s,ent:l}=Nc(a);return{type:"user",userEntityRef:s,ownershipEntityRefs:l!=null?l:[]}}async getCredentials(){var a,s;return{token:await((s=(a=this.result).getIdToken)==null?void 0:s.call(a))}}async signOut(){var a,s;return(s=(a=this.result).signOut)==null?void 0:s.call(a)}}class ga{constructor(a,s,l){this.identity=a,this.authApi=s,this.profile=l}static createGuest(){return new gi}static fromLegacy(a){return Dr.fromResult(a)}static create(a){return new ga(a.identity,a.authApi,a.profile)}getUserId(){const a=this.identity.userEntityRef,s=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(a);if(!s)throw new TypeError(`Invalid user entity reference "${a}"`);return s[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(a){throw this.profilePromise=void 0,a}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const rs=(0,re.Z)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),Mr=({children:t})=>{const a=rs();return o.createElement(J.Z,{component:"li",item:!0,classes:a},t)},Pc={Component:({config:t,onSignInSuccess:a})=>{const{apiRef:s,title:l,message:c}=t,p=(0,Ae.u)(s),g=(0,Ae.u)(Ae.r),E=async()=>{try{const w=await p.getBackstageIdentity({instantPopup:!0});if(!w)throw new Error(`The ${l} provider is not configured to support sign-in`);const S=await p.getProfile();a(ga.create({identity:w.identity,profile:S,authApi:p}))}catch(w){g.post(new le.SP("Login failed",w))}};return o.createElement(Mr,null,o.createElement(yr,{variant:"fullHeight",title:l,actions:o.createElement(xt.Z,{color:"primary",variant:"outlined",onClick:E},"Sign In")},o.createElement(ee.Z,{variant:"body1"},c)))},loader:async(t,a)=>{const s=t.get(a),l=await s.getBackstageIdentity({optional:!0});if(!l)return;const c=await s.getProfile();return ga.create({identity:l.identity,profile:c,authApi:s})}},Lc={Component:({onSignInSuccess:t})=>o.createElement(Mr,null,o.createElement(yr,{title:"Guest",variant:"fullHeight",actions:o.createElement(xt.Z,{color:"primary",variant:"outlined",onClick:()=>t(new gi)},"Enter")},o.createElement(ee.Z,{variant:"body1"},"Enter as a Guest User.",o.createElement("br",null),"You will not have a verified identity,",o.createElement("br",null),"meaning some features might be unavailable."))),loader:async()=>new gi},Oc=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,qd=(0,re.Z)(t=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:t.spacing(2)}}),{name:"BackstageCustomProvider"}),hi=t=>{const{ref:a,...s}=t;return{inputRef:a,...s}},e={Component:({onSignInSuccess:t})=>{const a=qd(),{register:s,handleSubmit:l,formState:c}=(0,wi.cI)({mode:"onChange"}),{errors:p}=c,g=({userId:E,idToken:w})=>{t(ga.fromLegacy({userId:E,getIdToken:w!==void 0?async()=>w:void 0,profile:{email:`${E}@example.com`}}))};return o.createElement(Mr,null,o.createElement(yr,{title:"Custom User",variant:"fullHeight"},o.createElement(ee.Z,{variant:"body1"},"Enter your own User ID and credentials.",o.createElement("br",null),"This selection will not be stored."),o.createElement("form",{className:a.form,onSubmit:l(g)},o.createElement(rr.Z,null,o.createElement($e.Z,{...hi(s("userId",{required:!0})),label:"User ID",margin:"normal",error:Boolean(p.userId)}),p.userId&&o.createElement(Ys.Z,{error:!0},p.userId.message)),o.createElement(rr.Z,null,o.createElement($e.Z,{...hi(s("idToken",{required:!1,validate:E=>!E||Oc.test(E)||"Token is not a valid OpenID Connect JWT Token"})),label:"ID Token (optional)",margin:"normal",autoComplete:"off",error:Boolean(p.idToken)}),p.idToken&&o.createElement(Ys.Z,{error:!0},p.idToken.message)),o.createElement(xt.Z,{type:"submit",color:"primary",variant:"outlined",className:a.button,disabled:!(c!=null&&c.isDirty)||!ki()(p)},"Continue"))))},loader:async()=>{}};class r{constructor(a){this.config=a}static from(a){return new r(a)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const i="@backstage/core:SignInPage:provider",d={guest:Lc,custom:e,common:Pc};function u(t,a){if(t in a)throw new Error(`"${t}" ID is duplicated. IDs of identity providers have to be unique.`)}function f(t){return t.reduce((s,l)=>{if(typeof l=="string")return u(l,s),s[l]={components:d[l],id:l},s;const{id:c}=l;return u(c,s),s[c]={components:d.common,id:c,config:l},s},{})}const h=(t,a)=>{const s=useApi(errorApiRef),l=useApiHolder(),[c,p]=useState(!0),g=useCallback(w=>{a(r.from({identityApi:w,signOut:async()=>{var S;localStorage.removeItem(i),await((S=w.signOut)==null?void 0:S.call(w))}}))},[a]);useLayoutEffect(()=>{var w;if(!c)return;const S=localStorage.getItem(i);if(S===null){p(!1);return}const P=t[S];if(!P){p(!1);return}let O=!1;return P.components.loader(l,(w=P.config)==null?void 0:w.apiRef).then(M=>{O||(M?g(M):p(!1))}).catch(M=>{O||(localStorage.removeItem(i),s.post(M),p(!1))}),()=>{O=!0}},[c,s,a,l,t,g]);const E=useMemo(()=>Object.keys(t).map(w=>{const S=t[w],{Component:P}=S.components,O=M=>{localStorage.setItem(i,S.id),g(M)};return React.createElement(P,{key:S.id,config:S.config,onSignInSuccess:O})}),[t,g]);return[c,E]},C=({onSignInSuccess:t,providers:a=[],title:s,align:l="left"})=>{const c=useApi(configApiRef),p=rs(),g=f(a),[E,w]=h(g,t);return E?React.createElement(Or,null):React.createElement(Vs,{themeId:"home"},React.createElement(ns,{title:c.getString("app.title")}),React.createElement(ts,null,s&&React.createElement(li,{title:s,textAlign:l}),React.createElement(Grid,{container:!0,justifyContent:l==="center"?l:"flex-start",spacing:2,component:"ul",classes:p},w)))},x=({provider:t,auto:a,onSignInSuccess:s})=>{const l=rs(),c=useApi(t.apiRef),p=useApi(configApiRef),[g,E]=useState(),[w,S]=useState(!1),P=async({checkExisting:O,showPopup:M})=>{try{let F;if(O&&(F=await c.getBackstageIdentity({optional:!0})),!F&&(M||a)&&(S(!0),F=await c.getBackstageIdentity({instantPopup:!0}),!F))throw new Error(`The ${t.title} provider is not configured to support sign-in`);if(!F){S(!0);return}const ae=await c.getProfile();s(ga.create({identity:F.identity,authApi:c,profile:ae}))}catch(F){E(F),S(!0)}};return useMountEffect(()=>P({checkExisting:!0})),w?React.createElement(Vs,{themeId:"home"},React.createElement(ns,{title:p.getString("app.title")}),React.createElement(ts,null,React.createElement(Grid,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:l},React.createElement(Mr,null,React.createElement(yr,{variant:"fullHeight",title:t.title,actions:React.createElement(Button$1,{color:"primary",variant:"outlined",onClick:()=>{P({showPopup:!0})}},"Sign In")},React.createElement(Typography,{variant:"body1"},t.message),g&&g.name!=="PopupRejectedError"&&React.createElement(Typography,{variant:"body1",color:"error"},g.message)))))):React.createElement(Or,null)};function A(t){return"provider"in t?React.createElement(x,{...t}):React.createElement(C,{...t})}const B=(0,re.Z)(t=>({root:{padding:t.spacing(0,2,0,2.5),minHeight:t.spacing(3)},indicator:{backgroundColor:t.palette.info.main,height:t.spacing(.3)}}),{name:"BackstageTabbedCard"}),H=(0,He.Z)(t=>({root:{padding:t.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:t.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(Kt.Z);function W(t){const{slackChannel:a,errorBoundaryProps:s,children:l,title:c,deepLink:p,value:g,onChange:E}=t,w=B(),[S,P]=useState(0),O=E||((ae,Q)=>P(Q));let M;g?React.Children.map(l,ae=>{var Q;React.isValidElement(ae)&&(ae==null?void 0:ae.props.value)===g&&(M=(Q=ae==null?void 0:ae.props)==null?void 0:Q.children)}):React.Children.map(l,(ae,Q)=>{React.isValidElement(ae)&&Q===S&&(M=ae==null?void 0:ae.props.children)});const F=s||(a?{slackChannel:a}:{});return React.createElement(Card,null,React.createElement(pl,{...F},c&&React.createElement(H,{title:c}),React.createElement(Tabs$1,{selectionFollowsFocus:!0,classes:w,value:g||S,onChange:O},l),React.createElement(Divider,null),React.createElement(CardContent,null,M),p&&React.createElement(fo,{...p})))}const ne=(0,re.Z)(t=>({root:{minWidth:t.spacing(6),minHeight:t.spacing(3),margin:t.spacing(0,2,0,0),padding:t.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:t.palette.text.primary}},selected:{fontWeight:t.typography.fontWeightBold}}),{name:"BackstageCardTab"});function et(t){const{children:a,...s}=t,l=ne();return React.createElement(Tab,{disableRipple:!0,classes:l,...s})}},44567:(Ga,yn,v)=>{v.d(yn,{g:()=>ee,u:()=>Ve});var Ae=v(37004),Ue=v(18473),rt=v(2784);function ee(He,lt,Ye){var tt;let xt=((tt=He==null?void 0:He.relations)==null?void 0:tt.filter(wt=>wt.type===lt).map(wt=>(0,Ae.of)(wt.targetRef)))||[];return Ye!=null&&Ye.kind&&(xt=xt.filter(wt=>wt.kind.toLocaleLowerCase("en-US")===Ye.kind.toLocaleLowerCase("en-US"))),xt}const Fe=(0,Ue.CT)("entity-context"),o=He=>{const{children:lt,entity:Ye,loading:tt,error:xt,refresh:wt}=He,ln={entity:Ye,loading:tt,error:xt,refresh:wt};return React.createElement(Fe.Provider,{value:createVersionedValueMap({1:ln})},React.createElement(AnalyticsContext,{attributes:{...Ye?{entityRef:stringifyEntityRef(Ye)}:void 0}},lt))},re=He=>React.createElement(o,{entity:He.entity,loading:!Boolean(He.entity),error:void 0,refresh:void 0,children:He.children});function Ve(){const He=(0,Ue.Vt)("entity-context");if(!He)throw new Error("Entity context is not available");const lt=He.atVersion(1);if(!lt)throw new Error("EntityContext v1 not available");if(!lt.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:lt.entity}}function Y(){const He=useVersionedContext("entity-context");if(!He)throw new Error("Entity context is not available");const lt=He.atVersion(1);if(!lt)throw new Error("EntityContext v1 not available");const{entity:Ye,loading:tt,error:xt,refresh:wt}=lt;return{entity:Ye,loading:tt,error:xt,refresh:wt}}},38888:(Ga,yn,v)=>{v.d(yn,{Ah:()=>Ee,dx:()=>Kn});var Ae=v(29804),Ue=v(23807),rt=v(37004),ee=v(72579),Fe=v.n(ee),o=v(2784),re=v(82394),Ve=v.n(re),Y=v(41156),He=v(60364),lt=v(77277),Ye=v(4190),tt=v(95544),xt=v(90436),wt=v(60905),ln=v(21324),bt=v(5806),Me=v(79692),ct=v(80030),mn=v(15459),fn=v(36444),ye=v(64060),cn=v(44567),Nn=v(76635),jn=v.n(Nn),Xt=v(37794),ke=v.n(Xt),ue=v(18149),dt=v.n(ue),Ce=v(829),ge=v.n(Ce),j=v(19996),ve=v(25505),je=v(72779),J=v.n(je),pe=v(18473),xe=v(11640),Be=v(3440),Ze=v.n(Be),Ge=v(10921);const Ee=(0,Ae.c)({id:"plugin.catalog.service"}),gt=(0,Ae.c)({id:"plugin.catalog.entity-presentation"});function Lt(m,y){const{kind:b,namespace:R,name:k,title:N,description:L,displayName:I,type:D}=Dt(m),G=(0,rt.eE)({kind:b||"unknown",namespace:R||rt.zG,name:k||"unknown"}),z=Ht({kind:b,namespace:R,name:k,context:y}),q=[I,N,z].find(se=>se&&typeof se=="string"),de=[q!==G?G:void 0,D,L].filter(se=>se&&typeof se=="string").join(" | ");return{entityRef:G,primaryTitle:q,secondaryTitle:de||void 0,Icon:void 0}}function Dt(m){if(typeof m=="string"){let y=m.indexOf(":");const b=m.indexOf("/");b!==-1&&b<y&&(y=-1);const R=y===-1?void 0:m.slice(0,y),k=b===-1?void 0:m.slice(y+1,b),N=m.slice(Math.max(y+1,b+1));return{kind:R,namespace:k,name:N}}if(typeof m=="object"&&m!==null){const y=[Fe()(m,"kind")].find(D=>D&&typeof D=="string"),b=[Fe()(m,"metadata.namespace"),Fe()(m,"namespace")].find(D=>D&&typeof D=="string"),R=[Fe()(m,"metadata.name"),Fe()(m,"name")].find(D=>D&&typeof D=="string"),k=[Fe()(m,"metadata.title")].find(D=>D&&typeof D=="string"),N=[Fe()(m,"metadata.description")].find(D=>D&&typeof D=="string"),L=[Fe()(m,"spec.profile.displayName")].find(D=>D&&typeof D=="string"),I=[Fe()(m,"spec.type")].find(D=>D&&typeof D=="string");return{kind:y,namespace:b,name:R,title:k,description:N,displayName:L,type:I}}return{}}function Ht(m){var y,b,R,k,N;const L=((y=m.kind)==null?void 0:y.toLocaleLowerCase("en-US"))||"unknown",I=m.namespace||rt.zG,D=m.name||"unknown",G=(R=(b=m.context)==null?void 0:b.defaultKind)==null?void 0:R.toLocaleLowerCase("en-US"),z=(N=(k=m.context)==null?void 0:k.defaultNamespace)==null?void 0:N.toLocaleLowerCase("en-US");let q=D;return(z&&I.toLocaleLowerCase("en-US")!==z||I!==rt.zG)&&(q=`${I}/${q}`),G&&L.toLocaleLowerCase("en-US")!==G&&(q=`${L}:${q}`),q}function Pn(m,y,b){const[R,k]=(0,o.useState)(m);return(0,o.useEffect)(()=>{k(m);const N=y==null?void 0:y.subscribe({next:L=>{k(L)},complete:()=>{N==null||N.unsubscribe()}});return()=>{N==null||N.unsubscribe()}},b),R}function vn(m,y){const R=(0,Ae.b)().get(gt),k=[R,JSON.stringify(m),JSON.stringify(y||null)],N=(0,o.useMemo)(()=>R?R.forEntity(typeof m=="string"||"metadata"in m?m:(0,rt.eE)(m),y):{snapshot:Lt(m,y)},k);return Pn(N.snapshot,N.update$,[N])}const Nt=(0,Ae.c)({id:"catalog-react.starred-entities"});var qt=Object.defineProperty,zn=(m,y,b)=>y in m?qt(m,y,{enumerable:!0,configurable:!0,writable:!0,value:b}):m[y]=b,en=(m,y,b)=>(zn(m,typeof y!="symbol"?y+"":y,b),b);class Ln{constructor(){en(this,"starredEntities",new Set),en(this,"subscribers",new Set),en(this,"observable",new ObservableImpl(y=>(y.next(new Set(this.starredEntities)),this.subscribers.add(y),()=>{this.subscribers.delete(y)})))}async toggleStarred(y){this.starredEntities.delete(y)||this.starredEntities.add(y);for(const b of this.subscribers)b.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const U=m=>{var y,b;const R=(0,Y.Z)(I=>{var D,G;return I.breakpoints.down((G=(D=m.options)==null?void 0:D.drawerBreakpoint)!=null?G:"md")}),k=(0,He.Z)(),[N,L]=(0,o.useState)(!1);return R?o.createElement(o.Fragment,null,o.createElement(lt.Z,{style:{marginTop:k.spacing(1),marginLeft:k.spacing(1)},onClick:()=>L(!0),startIcon:o.createElement(fn.Z,null)},"Filters"),o.createElement(Ye.ZP,{open:N,onClose:()=>L(!1),anchor:(b=(y=m.options)==null?void 0:y.drawerAnchor)!=null?b:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},o.createElement(tt.Z,{m:2},o.createElement(xt.Z,{variant:"h6",component:"h2",style:{marginBottom:k.spacing(1)}},"Filters"),m.children))):o.createElement(wt.Z,{item:!0,lg:2},m.children)},_=m=>o.createElement(wt.Z,{item:!0,xs:12,lg:10},m.children),V=m=>o.createElement(wt.Z,{container:!0,style:{position:"relative"}},m.children);V.Filters=U,V.Content=_;function le(m){return!!m.getFullTextFilters}function he(m){var y;const b=m.reduce((k,N)=>({...k,...N.getCatalogFilters?N.getCatalogFilters():{}}),{}),R=(y=m.find(le))==null?void 0:y.getFullTextFilters();return{filter:b,fullTextFilter:R}}function Je(m){const y={};return m.forEach(b=>{var R;b instanceof Ca||b instanceof Vn||b instanceof kn||b instanceof Hn||b instanceof tn||b instanceof va||b instanceof wn||b instanceof ia||Object.assign(y,((R=b.getCatalogFilters)==null?void 0:R.call(b))||{})}),y}function Et(m){return y=>m.every(b=>!b.filterEntity||b.filterEntity(y))}function St(m,y){var b;const R=(b=m.metadata.annotations)==null?void 0:b[ANNOTATION_SOURCE_LOCATION];if(R)try{const k=parseLocationRef(R),N=y.byUrl(k.target);return{locationTargetUrl:k.target,integrationType:N==null?void 0:N.type}}catch{return}}var gn=Object.defineProperty,Kt=(m,y,b)=>y in m?gn(m,y,{enumerable:!0,configurable:!0,writable:!0,value:b}):m[y]=b,Un=(m,y,b)=>(Kt(m,typeof y!="symbol"?y+"":y,b),b);class ha{constructor(y){this.value=y}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class ya{constructor(y){this.value=y}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class Ca{constructor(y){this.values=y}filterEntity(y){return this.values.every(b=>{var R;return((R=y.metadata.tags)!=null?R:[]).includes(b)})}getCatalogFilters(){return{"metadata.tags":this.values}}toQueryValue(){return this.values}}class wn{constructor(y){this.value=y}filterEntity(y){const b=this.toUpperArray(this.value.split(/\s/)),R=this.toUpperArray([y.metadata.tags]),k=this.toUpperArray([y.metadata.name,y.metadata.title]);for(const N of b)if(R.every(L=>L!==N)&&k.every(L=>!L.includes(N)))return!1;return!0}getFullTextFilters(){return{term:this.value,fields:["metadata.name","metadata.title","spec.profile.displayName"]}}toUpperArray(y){return y.flat().filter(b=>Boolean(b)).map(b=>b.toLocaleUpperCase("en-US"))}}class Vn{constructor(y){Un(this,"values"),this.values=y.reduce((b,R)=>{try{return b.push(stringifyEntityRef(parseEntityRef(R,{defaultKind:"Group"}))),b}catch{return b}},[])}getCatalogFilters(){return{"relations.ownedBy":this.values}}filterEntity(y){return this.values.some(b=>getEntityRelations(y,RELATION_OWNED_BY).some(R=>stringifyEntityRef(R)===b))}toQueryValue(){return this.values}}class kn{constructor(y){this.values=y}getCatalogFilters(){return{"spec.lifecycle":this.values}}filterEntity(y){return this.values.some(b=>{var R;return((R=y.spec)==null?void 0:R.lifecycle)===b})}toQueryValue(){return this.values}}class Hn{constructor(y){this.values=y}getCatalogFilters(){return{"metadata.namespace":this.values}}filterEntity(y){return this.values.some(b=>y.metadata.namespace===b)}toQueryValue(){return this.values}}class tn{constructor(y,b){this.value=y,this.refs=b}static owned(y){return new tn("owned",y)}static all(){return new tn("all")}static starred(y){return new tn("starred",y)}getCatalogFilters(){var y,b,R;return this.value==="owned"?{"relations.ownedBy":(y=this.refs)!=null?y:[]}:this.value==="starred"?{"metadata.name":(R=(b=this.refs)==null?void 0:b.map(k=>parseEntityRef(k).name))!=null?R:[]}:{}}filterEntity(y){var b,R,k,N;if(this.value==="starred")return(R=(b=this.refs)==null?void 0:b.includes(stringifyEntityRef(y)))!=null?R:!0;if(this.value==="owned"){const L=getEntityRelations(y,RELATION_OWNED_BY);return(N=(k=this.refs)==null?void 0:k.some(I=>L.some(D=>stringifyEntityRef(D)===I)))!=null?N:!1}return!0}toQueryValue(){return this.value}}class ia{constructor(y,b,R){this.value=y,this.isOwnedEntity=b,this.isStarredEntity=R}filterEntity(y){switch(this.value){case"owned":return this.isOwnedEntity(y);case"starred":return this.isStarredEntity(y);default:return!0}}toQueryValue(){return this.value}}class va{constructor(y){this.value=y}getCatalogFilters(){return this.value?{"metadata.annotations.backstage.io/orphan":String(this.value)}:{}}filterEntity(y){var b;const R=(b=y.metadata.annotations)==null?void 0:b["backstage.io/orphan"];return R!==void 0&&this.value.toString()===R}}class Mt{constructor(y){this.value=y}filterEntity(y){var b,R;const k=((R=(b=y==null?void 0:y.status)==null?void 0:b.items)==null?void 0:R.length)>0;return k!==void 0&&this.value===k}}const Gn=(0,o.createContext)(void 0),xr=m=>{const y=useMountedState(),b=useApi(Ee),[R,k]=useState({}),N=useLocation(),L=m.pagination===!0||typeof m.pagination=="object",I=m.pagination&&typeof m.pagination=="object"&&typeof m.pagination.limit=="number"?m.pagination.limit:20,{queryParameters:D,cursor:G}=useMemo(()=>{var We;const Xe=qs.parse(N.search,{ignoreQueryPrefix:!0});return{queryParameters:(We=Xe.filters)!=null?We:{},cursor:typeof Xe.cursor=="string"?Xe.cursor:void 0}},[N]),[z,q]=useState(G),[de,se]=useState(()=>({appliedFilters:{},entities:[],backendEntities:[],pageInfo:L?{}:void 0})),[{loading:Ie,error:qe},Se]=useAsyncFn(async()=>{var We;const Xe=compact(Object.values(R)),jt=Object.keys(R).reduce(($t,zt)=>{const _t=R[zt];return _t!=null&&_t.toQueryValue&&($t[zt]=_t.toQueryValue()),$t},{});if(L)if(z){if(z!==de.appliedCursor){const $t=Et(Xe),zt=await b.queryEntities({cursor:z,limit:I});se({appliedFilters:R,appliedCursor:z,backendEntities:zt.items,entities:zt.items.filter($t),pageInfo:zt.pageInfo})}}else{const $t=Et(Xe),zt=he(Xe),_t=he(compact(Object.values(de.appliedFilters)));if(!isEqual(_t,zt)){const Jt=await b.queryEntities({...zt,limit:I,orderFields:[{field:"metadata.name",order:"asc"}]});se({appliedFilters:R,backendEntities:Jt.items,entities:Jt.items.filter($t),pageInfo:Jt.pageInfo})}}else{const $t=Et(Xe),zt=Je(Xe),_t=Je(compact(Object.values(de.appliedFilters)));if(isEqual(_t,zt))se({appliedFilters:R,backendEntities:de.backendEntities,entities:de.backendEntities.filter($t)});else{const Jt=await b.getEntities({filter:zt});se({appliedFilters:R,backendEntities:Jt.items,entities:Jt.items.filter($t)})}}if(y()){const $t=qs.parse(N.search,{ignoreQueryPrefix:!0}),zt=qs.stringify({...$t,filters:jt,cursor:z},{addQueryPrefix:!0,arrayFormat:"repeat"}),_t=`${window.location.pathname}${zt}`;(We=window.history)==null||We.replaceState(null,document.title,_t)}},[b,D,R,de,z,L],{loading:!0});useDebounce(Se,10,[R,z]);const pt=useCallback(We=>{q(void 0),k(Xe=>{const jt=typeof We=="function"?We(Xe):We;return{...Xe,...jt}})},[]),Ct=useMemo(()=>{var We,Xe;if(!L)return;const jt=(We=de.pageInfo)==null?void 0:We.prevCursor,$t=(Xe=de.pageInfo)==null?void 0:Xe.nextCursor;return{prev:jt?()=>q(jt):void 0,next:$t?()=>q($t):void 0}},[L,de.pageInfo]),De=useMemo(()=>({filters:de.appliedFilters,entities:de.entities,backendEntities:de.backendEntities,updateFilters:pt,queryParameters:D,loading:Ie,error:qe,pageInfo:Ct}),[de,pt,D,Ie,qe,Ct]);return React.createElement(Gn.Provider,{value:De},m.children)};function En(){const m=useContext(Gn);if(!m)throw new Error("useEntityList must be used within EntityListProvider");return m}function Sr(){var m;const y=useApi(Ee),{filters:{kind:b,type:R},queryParameters:{type:k},updateFilters:N}=En(),L=useMemo(()=>[k].flat().filter(Boolean),[k]),[I,D]=useState(L.length?L:(m=R==null?void 0:R.getTypes())!=null?m:[]);useEffect(()=>{L.length&&D(L)},[L]);const[G,z]=useState([]),q=useMemo(()=>b==null?void 0:b.value,[b]),{error:de,loading:se,value:Ie}=useAsync(async()=>q?await y.getEntityFacets({filter:{kind:q},facets:["spec.type"]}).then(pt=>pt.facets["spec.type"]||[]):[],[q,y]),qe=useRef(Ie);return useEffect(()=>{const Se=qe.current;if(qe.current=Ie,se||!q||Se===Ie||!Ie)return;const pt=[...new Set(sortBy(Ie,De=>-De.count).map(De=>De.value.toLocaleLowerCase("en-US")))];z(pt);const Ct=I.filter(De=>pt.includes(De));isEqual$1(I,Ct)||D(Ct)},[se,q,I,D,Ie]),useEffect(()=>{N({type:I.length?new ya(I):void 0})},[I,N]),{loading:se,error:de,availableTypes:G,selectedTypes:I,setSelectedTypes:D}}function nr(m,y){var b,R;const k=(b=y==null?void 0:y.type)==null?void 0:b.toLocaleLowerCase("en-US"),N=(R=y==null?void 0:y.kind)==null?void 0:R.toLocaleLowerCase("en-US"),L=useApi(Ee),{loading:I,value:D,error:G}=useAsync(async()=>{var z;const q=(z=m.relations)==null?void 0:z.filter(se=>(!k||se.type.toLocaleLowerCase("en-US")===k)&&(!N||parseEntityRef(se.targetRef).kind===N));if(!(q!=null&&q.length))return[];const{items:de}=await L.getEntitiesByRefs({entityRefs:q.map(se=>se.targetRef)});return de.filter(se=>Boolean(se))},[m,k,N]);return{entities:D,loading:I,error:G}}function ar(m){return typeof m=="string"?m:stringifyEntityRef(m)}function wa(){const m=useApi(Nt),y=useObservable(useMemo(()=>m.starredEntitie$(),[m]),new Set),b=useCallback(k=>y.has(ar(k)),[y]),R=useCallback(k=>m.toggleStarred(ar(k)).then(),[m]);return{starredEntities:y,toggleStarredEntity:R,isStarredEntity:b}}function Ea(m){return typeof m=="string"?m:stringifyEntityRef(m)}function Ka(m){const y=useApi(Nt),[b,R]=useState(!1);return useEffect(()=>{const N=y.starredEntitie$().subscribe({next(L){R(L.has(Ea(m)))}});return()=>{N.unsubscribe()}},[m,y]),{toggleStarredEntity:useCallback(()=>y.toggleStarred(Ea(m)).then(),[m,y]),isStarredEntity:b}}function ss(){const m=useApi(identityApiRef),{loading:y,value:b}=useAsync(async()=>{const{ownershipEntityRefs:k}=await m.getBackstageIdentity();return k},[]),R=useMemo(()=>{const k=new Set(b!=null?b:[]);return N=>{const L=getEntityRelations(N,RELATION_OWNED_BY).map(stringifyEntityRef);for(const I of L)if(k.has(I))return!0;return!1}},[b]);return{loading:y,isOwnedEntity:R}}function os(){const m=useApi(Ee),{error:y,loading:b,value:R}=useAsync(async()=>await m.getEntityFacets({facets:["kind"]}).then(N=>{var L;return((L=N.facets.kind)==null?void 0:L.map(I=>I.value).sort())||[]}),[m]);return{loading:b,error:y,allKinds:R!=null?R:[]}}function Cr(m,y,b){let R=m;return y&&(R=R.filter(N=>y.some(L=>L.toLocaleLowerCase("en-US")===N.toLocaleLowerCase("en-US")))),b&&!m.some(N=>N.toLocaleLowerCase("en-US")===b.toLocaleLowerCase("en-US"))&&(R=R.concat([b])),R.sort().reduce((N,L)=>(N[L.toLocaleLowerCase("en-US")]=L,N),{})}function wr(m){var y,b;const{filters:R,queryParameters:{kind:k},updateFilters:N}=En(),L=useMemo(()=>[k].flat()[0],[k]),[I,D]=useState((b=L!=null?L:(y=R.kind)==null?void 0:y.value)!=null?b:m.initialFilter);useEffect(()=>{L&&D(L)},[L]),useEffect(()=>{var de,se;(de=R.kind)!=null&&de.value&&D((se=R.kind)==null?void 0:se.value)},[R.kind]),useEffect(()=>{N({kind:I?new ha(I):void 0})},[I,N]);const{allKinds:G,loading:z,error:q}=os();return{loading:z,error:q,allKinds:G!=null?G:[],selectedKind:I,setSelectedKind:D}}const rr=m=>{const{allowedKinds:y,hidden:b,initialFilter:R="component"}=m,k=useApi(alertApiRef),{error:N,allKinds:L,selectedKind:I,setSelectedKind:D}=wr({initialFilter:R});if(useEffect(()=>{N&&k.post({message:"Failed to load entity kinds",severity:"error"})},[N,k]),N)return null;const G=Cr(L,y,I),z=Object.keys(G).map(q=>({value:q,label:G[q]}));return b?null:React.createElement(Box,{pb:1,pt:1},React.createElement(Select,{label:"Kind",items:z,selected:I.toLocaleLowerCase("en-US"),onChange:q=>D(String(q))}))},is=o.createElement(ve.Z,{fontSize:"small"}),sr=o.createElement(j.Z,{fontSize:"small"});function or({selected:m}){return o.createElement(ln.Z,{icon:is,checkedIcon:sr,checked:m})}const Fr=(0,o.memo)(m=>{const{selected:y,value:b,availableOptions:R,showCounts:k}=m,N=k?`${b} (${R==null?void 0:R[b]})`:b;return o.createElement(bt.Z,{control:o.createElement(or,{selected:y}),label:N,onClick:L=>L.preventDefault()})}),ir=(0,Me.Z)({input:{}},{name:"CatalogReactEntityAutocompletePickerInput"});function jr(m){const y=ir();return React.createElement(TextField,{variant:"outlined",...m,className:classNames(y.input,m.className)})}function ka(m){var y,b;const{label:R,name:k,path:N,showCounts:L,Filter:I,InputProps:D,initialSelectedOptions:G=[]}=m,{updateFilters:z,filters:q,queryParameters:{[k]:de}}=En(),se=useApi(Ee),{value:Ie}=useAsync(async()=>{var Xe;const jt=N,{facets:$t}=await se.getEntityFacets({facets:[jt],filter:(Xe=q.kind)==null?void 0:Xe.getCatalogFilters()});return Object.fromEntries($t[jt].map(({value:zt,count:_t})=>[zt,_t]))},[q.kind]),qe=useMemo(()=>[de].flat().filter(Boolean),[de]),[Se,pt]=useState(qe.length?qe:(b=(y=q[k])==null?void 0:y.values)!=null?b:G);useEffect(()=>{qe.length&&pt(qe)},[qe]);const Ct=Object.keys(Ie!=null?Ie:{}),De=Se.length&&Ct.length;useEffect(()=>{z({[k]:De?new I(Se):void 0})},[k,De,Se,I,z]);const We=q[k];return We&&typeof We=="object"&&!("values"in We)||!Ct.length||Ct.length<=1?null:React.createElement(Box,{pb:1,pt:1},React.createElement(Typography,{variant:"button",component:"label"},R,React.createElement(Autocomplete,{multiple:!0,disableCloseOnSelect:!0,options:Ct,value:Se,onChange:(Xe,jt)=>pt(jt),renderOption:(Xe,{selected:jt})=>React.createElement(Fr,{selected:jt,value:Xe,availableOptions:Ie,showCounts:!!L}),size:"small",popupIcon:React.createElement(ExpandMoreIcon,{"data-testid":`${String(k)}-picker-expand`}),renderInput:Xe=>React.createElement(jr,{...Xe,...D})})))}const lr=(0,Me.Z)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),ut=m=>{const{initialFilter:y=[]}=m,b=lr();return React.createElement(ka,{label:"Lifecycle",name:"lifecycles",path:"spec.lifecycle",Filter:kn,InputProps:{className:b.input},initialSelectedOptions:y})};function ba(m,y){const b=y==null?void 0:y.defaultKind;let R,k,N;return"metadata"in m?(R=m.kind,k=m.metadata.namespace,N=m.metadata.name):(R=m.kind,k=m.namespace,N=m.name),(k===void 0||k==="")&&(k=rt.zG),(y==null?void 0:y.defaultNamespace)!==void 0?(y==null?void 0:y.defaultNamespace)===k&&(k=void 0):k===rt.zG&&(k=void 0),R=R.toLocaleLowerCase("en-US"),R=b&&b.toLocaleLowerCase("en-US")===R?void 0:R,`${R?`${R}:`:""}${k?`${k}/`:""}${N}`}function te(m,y){for(const b of["spec.profile.displayName","metadata.title"]){const R=get(m,b);if(R&&typeof R=="string")return R}return y}function la({enabled:m}){const y=useApi(Ee),[b]=useState(async()=>{if(!m)return[];const R="relations.ownedBy";return y.getEntityFacets({facets:[R]}).then(k=>k.facets[R].map(N=>N.value).map(N=>{const{kind:L,name:I,namespace:D}=parseEntityRef(N);return{apiVersion:"backstage.io/v1beta1",kind:L,metadata:{name:I,namespace:D}}}).sort((N,L)=>(N.metadata.namespace||"").localeCompare(L.metadata.namespace||"","en-US")||N.metadata.name.localeCompare(L.metadata.name,"en-US")||N.kind.localeCompare(L.kind,"en-US"))).catch(()=>[])});return useAsyncFn(async(R,k)=>{var N;const L=await b;if(!L)return{items:[]};const I=(N=k==null?void 0:k.limit)!=null?N:20,{text:D,start:G}=K(R),z=L.filter(de=>Ta(D,de)),q=G+I;return{items:z.slice(0,q),...Tn({entities:z,limit:q,payload:{text:D,start:q}})}},[b],{loading:!0,value:{items:[]}})}function K(m){return cr(m)&&m.cursor?JSON.parse(atob(m.cursor)):{text:m.text||"",start:0}}function cr(m){return!!m.cursor}function Tn({entities:m,limit:y,payload:b}){return m.length>y?{cursor:btoa(JSON.stringify(b))}:{}}function Ta(m,y){var b;const R=m.trim();return y.kind.includes(R)||((b=y.metadata.namespace)==null?void 0:b.includes(R))||y.metadata.name.includes(R)}function dr(){const m=useApi(Ee);return useAsyncFn(async(y,b)=>{var R;const k=y,N=y,L=(R=b==null?void 0:b.limit)!=null?R:20;if(N.cursor){const D=await m.queryEntities({cursor:N.cursor,limit:L});return{cursor:D.pageInfo.nextCursor,items:[...N.items,...D.items]}}const I=await m.queryEntities({fullTextFilter:{term:k.text||"",fields:["metadata.name","kind","spec.profile.displayname","metadata.title"]},filter:{kind:["User","Group"]},orderFields:[{field:"metadata.name",order:"asc"}],limit:L});return{cursor:I.pageInfo.nextCursor,items:I.items}},[],{loading:!0})}function $a({mode:m,initialSelectedOwnersRefs:y}){const b=m==="owners-only",R=dr(),k=la({enabled:b}),[N,L]=b?k:R;return[N,L,Ya({enabled:!b,initialSelectedOwnersRefs:y})]}function Ya({enabled:m,initialSelectedOwnersRefs:y}){const b=useRef({}),R=useApi(Ee),[,k]=useAsyncFn(async()=>{(await R.getEntitiesByRefs({entityRefs:y})).items.forEach(L=>{L&&(b.current[stringifyEntityRef(L)]=L)})},[]);return useMountEffect(()=>{m&&y.length>0&&k()}),{getEntity:N=>b.current[N],setEntity:N=>{b.current[stringifyEntityRef(N)]=N}}}const Ia=(0,Me.Z)({input:{},fullWidth:{width:"100%"},boxLabel:{width:"100%",textOverflow:"ellipsis",overflow:"hidden"}},{name:"CatalogReactEntityOwnerPicker"}),kr=(0,mn.Z)(m=>({label:{width:"100%"},root:{width:"90%"}}),{name:"FixedWidthFormControlLabel"})(bt.Z),oe=o.createElement(ve.Z,{fontSize:"small"}),Yt=o.createElement(j.Z,{fontSize:"small"});function Ne(m){const y=Ia(),b=m.entity.kind.toLocaleLowerCase("en-US")==="group",{primaryTitle:R}=vn(m.entity);return React.createElement(Box,{className:y.fullWidth},React.createElement(kr,{className:y.fullWidth,control:React.createElement(Checkbox,{icon:oe,checkedIcon:Yt,checked:m.isSelected}),onClick:k=>k.preventDefault(),label:React.createElement(Tooltip,{title:R},React.createElement(Box,{display:"flex",alignItems:"center"},b?React.createElement(GroupIcon,{fontSize:"small"}):React.createElement(PersonIcon,{fontSize:"small"}),"\xA0",React.createElement(Box,{className:y.boxLabel},React.createElement(Typography,{noWrap:!0},R))))}))}const Ja=m=>{var y,b,R;const k=Ia(),{mode:N="owners-only"}=m||{},{updateFilters:L,filters:I,queryParameters:{owners:D}}=En(),[G,z]=useState(""),q=useMemo(()=>[D].flat().filter(Boolean),[D]),[de,se]=useState(q.length?q:(b=(y=I.owners)==null?void 0:y.values)!=null?b:[]),[{value:Ie,loading:qe},Se,pt]=$a({mode:N,initialSelectedOwnersRefs:de});useDebouncedEffect(()=>Se({text:G}),[G,Se],250);const Ct=(Ie==null?void 0:Ie.items)||[];return useEffect(()=>{if(q.length){const De=new Vn(q);se(De.values)}},[q]),useEffect(()=>{L({owners:de.length?new Vn(de):void 0})},[de,L]),["user","group"].includes(((R=I.kind)==null?void 0:R.value.toLocaleLowerCase("en-US"))||"")?null:React.createElement(Box,{pb:1,pt:1},React.createElement(Typography,{variant:"button",component:"label"},"Owner",React.createElement(Autocomplete,{multiple:!0,disableCloseOnSelect:!0,loading:qe,options:Ct,value:de,getOptionSelected:(De,We)=>typeof We=="string"?stringifyEntityRef(De)===We:De===We,getOptionLabel:De=>{const We=typeof De=="string"?pt.getEntity(De)||parseEntityRef(De,{defaultKind:"group",defaultNamespace:"default"}):De;return te(We,ba(We))},onChange:(De,We)=>{z(""),se(We.map(Xe=>{const jt=typeof Xe=="string"?Xe:stringifyEntityRef(Xe);return typeof Xe!="string"&&pt.setEntity(Xe),jt}))},filterOptions:De=>De,renderOption:(De,{selected:We})=>React.createElement(Ne,{entity:De,isSelected:We}),size:"small",popupIcon:React.createElement(ExpandMoreIcon,{"data-testid":"owner-picker-expand"}),renderInput:De=>React.createElement(TextField,{...De,className:k.input,onChange:We=>{z(We.currentTarget.value)},variant:"outlined"}),ListboxProps:{onScroll:De=>{const We=De.currentTarget;Math.abs(We.scrollHeight-We.clientHeight-We.scrollTop)<1&&(Ie!=null&&Ie.cursor)&&Se({items:Ie.items,cursor:Ie.cursor})},"data-testid":"owner-picker-listbox"}})))},dn=(0,Me.Z)(m=>({root:{display:"inline-flex",alignItems:"center"},icon:{marginRight:m.spacing(.5),color:m.palette.text.secondary,lineHeight:0}}),{name:"CatalogReactEntityDisplayName"}),Qa=m=>{const{entityRef:y,hideIcon:b,disableTooltip:R,defaultKind:k,defaultNamespace:N}=m,L=dn(),{primaryTitle:I,secondaryTitle:D,Icon:G}=vn(y,{defaultKind:k,defaultNamespace:N});let z=o.createElement(o.Fragment,null,I);return z=o.createElement(tt.Z,{component:"span",className:L.root},G&&!b?o.createElement(tt.Z,{component:"span",className:L.icon},o.createElement(G,{fontSize:"inherit"})):null,z),D&&!R&&(z=o.createElement(ct.ZP,{enterDelay:1500,title:D},z)),z},Aa=(0,pe.uW)("catalog:entity-route-ref",()=>(0,Ue.NT)({id:"catalog:entity",params:["namespace","kind","name"]}));function _a(m){var y,b;return{kind:m.kind.toLocaleLowerCase("en-US"),namespace:(b=(y=m.metadata.namespace)==null?void 0:y.toLocaleLowerCase("en-US"))!=null?b:DEFAULT_NAMESPACE,name:m.metadata.name}}const Kn=(0,o.forwardRef)((m,y)=>{var b;const{entityRef:R,defaultKind:k,defaultNamespace:N,title:L,children:I,hideIcon:D,...G}=m,z=be(m.entityRef),q=(b=I!=null?I:L)!=null?b:o.createElement(Qa,{entityRef:R,defaultKind:k,defaultNamespace:N,hideIcon:D});return o.createElement(ye.rU,{...G,ref:y,to:z},q)});function be(m){var y;const b=(0,Ue.tg)(Aa);let R,k,N;if(typeof m=="string"){const I=(0,rt.of)(m);R=I.kind,k=I.namespace,N=I.name}else"metadata"in m?(R=m.kind,k=m.metadata.namespace,N=m.metadata.name):(R=m.kind,k=m.namespace,N=m.name);R=R.toLocaleLowerCase("en-US"),k=(y=k==null?void 0:k.toLocaleLowerCase("en-US"))!=null?y:rt.zG;const L={kind:encodeURIComponent(R),namespace:encodeURIComponent(k),name:encodeURIComponent(N)};return b(L)}function On(m){const{entityRefs:y,hideIcons:b,...R}=m;return o.createElement(o.Fragment,null,y.map((k,N)=>{const L=typeof k=="string"?k:(0,rt.eE)(k);return o.createElement(o.Fragment,{key:`${N}.${L}`},N>0&&", ",o.createElement(Kn,{...R,entityRef:k,hideIcon:b}))}))}const Tr=m=>{const y=useRouteRef(Aa);return React.createElement(IconButton,{component:Link,"aria-label":"Show",title:"Show details",to:y(getCompoundEntityRef(m.entity))},React.createElement(InfoIcon,null))},Pe=m=>React.createElement(IconButton,{component:Link,"aria-label":"Email",title:`Email ${m.email}`,to:`mailto:${m.email}`},React.createElement(EmailIcon,null)),$e=m=>{var y;const b=(y=m.entity.spec.profile)==null?void 0:y.email;return b?React.createElement(Pe,{email:b}):null},ur=m=>{var y;const b=(y=m.entity.spec.profile)==null?void 0:y.email;return b?React.createElement(Pe,{email:b}):null},zr=(0,Me.Z)(()=>({popoverPaper:{width:"30em"},descriptionTypography:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}})),pr=4,Rt=m=>{var y,b,R,k;const{entityRef:N,children:L,delayTime:I=500}=m,D=zr(),G=useApiHolder(),z=usePopupState({variant:"popover",popupId:"entity-peek-ahead"}),[q,de]=useState(!1),se=useMemo(()=>debounce(()=>de(!0),I),[I]),[{loading:Ie,error:qe,value:Se},pt]=useAsyncFn(async()=>{const De=G.get(Ee);if(De){const We=await De.getEntityByRef(N);if(!We)throw new Error(`${N} not found`);return We}},[G,N]),Ct=()=>{de(!1),se.cancel()};return useEffect(()=>{z.isOpen&&!Se&&!qe&&!Ie&&pt()},[z.isOpen,pt,Se,qe,Ie]),React.createElement(React.Fragment,null,React.createElement(Typography,{component:"span",onMouseEnter:se},React.createElement(Typography,{component:"span","data-testid":"trigger",...bindHover(z)},L)),q&&React.createElement(HoverPopover,{PaperProps:{className:D.popoverPaper},...bindPopover(z),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onMouseLeave:Ct},React.createElement(Card,null,React.createElement(CardContent,null,qe&&React.createElement(ResponseErrorPanel,{error:qe}),Ie&&React.createElement(Progress,null),Se&&React.createElement(React.Fragment,null,React.createElement(Typography,{color:"textSecondary"},Se.metadata.namespace),React.createElement(Typography,{variant:"h5",component:"div"},Se.metadata.name),React.createElement(Typography,{color:"textSecondary",gutterBottom:!0},Se.kind),Se.metadata.description&&React.createElement(Typography,{className:D.descriptionTypography,paragraph:!0},Se.metadata.description),React.createElement(Typography,null,(b=(y=Se.spec)==null?void 0:y.type)==null?void 0:b.toString()),React.createElement(Box,{marginTop:"0.5em"},(Se.metadata.tags||[]).slice(0,pr).map(De=>React.createElement(Chip,{key:De,size:"small",label:De})),((R=Se.metadata.tags)==null?void 0:R.length)&&((k=Se.metadata.tags)==null?void 0:k.length)>pr&&React.createElement(Tooltip,{title:"Drill into the entity to see all of the tags."},React.createElement(Chip,{key:"other-tags",size:"small",label:"..."}))))),!qe&&Se&&React.createElement(CardActions,null,React.createElement(React.Fragment,null,isUserEntity(Se)&&React.createElement(ur,{entity:Se}),isGroupEntity(Se)&&React.createElement($e,{entity:Se}),React.createElement(Tr,{entity:Se}))))))},ie=(0,Me.Z)(m=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),ca=()=>{var m,y;const b=ie(),{filters:R,updateFilters:k}=En(),[N,L]=useState((y=(m=R.text)==null?void 0:m.value)!=null?y:"");return useDebounce(()=>{k({text:N.length?new wn(N):void 0})},250,[N,k]),React.createElement(Toolbar,{className:b.searchToolbar},React.createElement(FormControl,null,React.createElement(Input,{"aria-label":"search",id:"input-with-icon-adornment",className:b.input,placeholder:"Search",autoComplete:"off",onChange:I=>L(I.target.value),value:N,startAdornment:React.createElement(InputAdornment,{position:"start"},React.createElement(Search,null)),endAdornment:React.createElement(InputAdornment,{position:"end"},React.createElement(IconButton,{"aria-label":"clear search",onClick:()=>L(""),edge:"end",disabled:N.length===0},React.createElement(Clear,null)))})))},X=Object.freeze({createEntityRefColumn(m){const{defaultKind:y}=m;function b(R){var k;return((k=R.metadata)==null?void 0:k.title)||ba(R,{defaultKind:y})}return{title:"Name",highlight:!0,customFilterAndSearch(R,k){return b(k).includes(R)},customSort(R,k){return b(R).localeCompare(b(k))},render:R=>{var k;return o.createElement(Kn,{entityRef:R,defaultKind:y,title:(k=R.metadata)==null?void 0:k.title})}}},createEntityRelationColumn(m){const{title:y,relation:b,defaultKind:R,filter:k}=m;function N(I){return(0,cn.g)(I,b,k)}function L(I){return N(I).map(D=>ba(D,{defaultKind:R})).join(", ")}return{title:y,customFilterAndSearch(I,D){return L(D).includes(I)},customSort(I,D){return L(I).localeCompare(L(D))},render:I=>o.createElement(On,{entityRefs:N(I),defaultKind:R})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:rt.S4,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:rt.cz,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:rt.cz,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:m=>o.createElement(ye.Or,{text:m.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),Ur=[X.createEntityRefColumn({defaultKind:"system"}),X.createDomainColumn(),X.createOwnerColumn(),X.createMetadataDescriptionColumn()],ta=[X.createEntityRefColumn({defaultKind:"component"}),X.createSystemColumn(),X.createOwnerColumn(),X.createSpecTypeColumn(),X.createSpecLifecycleColumn(),X.createMetadataDescriptionColumn()],Da=(0,Me.Z)(m=>({empty:{padding:m.spacing(2),display:"flex",justifyContent:"center"}})),Xa=m=>{const{entities:y,title:b,emptyContent:R,variant:k="gridItem",columns:N,tableOptions:L={}}=m,I=Da(),D={minWidth:"0",width:"100%"};return k==="gridItem"&&(D.height="calc(100% - 10px)"),o.createElement(ye.iA,{columns:N,title:b,style:D,emptyContent:R&&o.createElement("div",{className:I.empty},R),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1,...L},data:y})};Xa.columns=X,Xa.systemEntityColumns=Ur,Xa.componentEntityColumns=ta;const Bn=(0,Me.Z)({input:{}},{name:"CatalogReactEntityTagPicker"}),mr=m=>{const y=Bn();return React.createElement(ka,{label:"Tags",name:"tags",path:"metadata.tags",Filter:Ca,showCounts:m.showCounts,InputProps:{className:y.input}})},Yn=m=>{var y;const{hidden:b,initialFilter:R}=m,k=useApi(alertApiRef),{error:N,availableTypes:L,selectedTypes:I,setSelectedTypes:D}=Sr();if(useEffect(()=>{N&&k.post({message:"Failed to load entity types",severity:"error"}),R&&D([R])},[N,k,R,D]),L.length===0||N)return null;const G=[{value:"all",label:"all"},...L.map(z=>({value:z,label:z}))];return b?null:React.createElement(Box,{pb:1,pt:1},React.createElement(Select,{label:"Type",items:G,selected:(y=G.length>1?I[0]:void 0)!=null?y:"all",onChange:z=>D(z==="all"?[]:[String(z)])}))},da=(0,mn.Z)({root:{color:"#f3ba37"}})(xe.Z),me=m=>{const{toggleStarredEntity:y,isStarredEntity:b}=Ka(m.entity);return React.createElement(IconButton,{"aria-label":"favorite",color:"inherit",...m,onClick:()=>y()},React.createElement(Tooltip,{title:b?"Remove from favorites":"Add to favorites"},b?React.createElement(da,null):React.createElement(StarBorder,null)))},Pt=null;function Le(m,y){if(m)return m.toLocaleLowerCase("en-US");if(y)try{return parseEntityRef(y).kind.toLocaleLowerCase("en-US")}catch{return}}function Ma(m,y){const b=useApp(),R=Le(m,y);return R&&b.getSystemIcon(`kind:${R}`)||Pt}function Ot(m){const{kind:y,entityRef:b,...R}=m,k=Ma(y,b);return React.createElement(k,{...R})}const na=(0,Me.Z)(m=>({node:{fill:m.palette.grey[300],stroke:m.palette.grey[300],"&.primary":{fill:m.palette.primary.light,stroke:m.palette.primary.light},"&.secondary":{fill:m.palette.secondary.light,stroke:m.palette.secondary.light}},text:{fill:m.palette.getContrastText(m.palette.grey[300]),"&.primary":{fill:m.palette.primary.contrastText},"&.secondary":{fill:m.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function Jn(m){const y=useApi(Ee),b=stringifyEntityRef(m),{loading:R,error:k,value:N}=useAsync(async()=>{const L=await y.getEntityAncestors({entityRef:b}),I=new Array,D=new Array;for(const G of L.items){const z=stringifyEntityRef(G.entity),q=z===L.rootEntityRef;I.push({id:z,root:q,...G.entity});for(const de of G.parentEntityRefs)D.push({from:z,to:de})}return{nodes:I,edges:D}},[b]);return{loading:R,error:k,nodes:(N==null?void 0:N.nodes)||[],edges:(N==null?void 0:N.edges)||[]}}function bn({node:m}){const y=na(),b=useNavigate(),R=useRouteRef(Aa),[k,N]=useState(0),[L,I]=useState(0),D=useApp(),G=useRef(null);useLayoutEffect(()=>{if(G.current){let{height:Ct,width:De}=G.current.getBBox();Ct=Math.round(Ct),De=Math.round(De),(Ct!==L||De!==k)&&(N(De),I(Ct))}},[k,L]);const z=D.getSystemIcon(`kind:${m.kind.toLocaleLowerCase("en-US")}`),q=10,de=L,se=z?de+q:0,Ie=se+k+q*2,qe=L+q*2,Se=m.metadata.title||(m.kind&&m.metadata.name&&m.metadata.namespace?ba({kind:m.kind,name:m.metadata.name,namespace:m.metadata.namespace||""}):m.id),pt=()=>{b(R({kind:m.kind,namespace:m.metadata.namespace||DEFAULT_NAMESPACE,name:m.metadata.name}))};return React.createElement("g",{onClick:pt,className:y.clickable},React.createElement("rect",{className:classNames(y.node,m.root?"secondary":"primary"),width:Ie,height:qe,rx:10}),z&&React.createElement(Ot,{kind:m.kind,y:q,x:q,width:de,height:de,className:classNames(y.text,m.root?"secondary":"primary")}),React.createElement("text",{ref:G,className:classNames(y.text,m.root?"secondary":"primary"),y:qe/2,x:se+(k+q*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},Se))}function Ra(m){const{loading:y,error:b,nodes:R,edges:k}=Jn(m.entity);return y?React.createElement(Progress,null):b?React.createElement(ResponseErrorPanel,{error:b}):React.createElement(React.Fragment,null,React.createElement(DialogContentText,{variant:"h2"},"Ancestry"),React.createElement(DialogContentText,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",React.createElement(Link,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),React.createElement(Box,{mt:4},React.createElement(DependencyGraph,{nodes:R,edges:k,renderNode:bn,direction:DependencyGraphTypes.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const nn=(0,Me.Z)(m=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:m.spacing(2)},helpIcon:{marginLeft:m.spacing(1),color:m.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function Te(m){const y=nn();return React.createElement(ListItemText$1,{...m,primaryTypographyProps:{className:y.monospace},secondaryTypographyProps:{className:y.monospace}})}function nt(m){const y=nn();return React.createElement(ListSubheader$1,{className:y.monospace},m.children)}function Qn(m){return React.createElement(Box,{mt:2},React.createElement(Card,{variant:"outlined"},React.createElement(CardContent,null,React.createElement(Typography,{variant:"h6",gutterBottom:!0},m.title,m.helpLink&&React.createElement(Wa,{to:m.helpLink})),m.children)))}function ze(m){if(m.match(/^url:https?:\/\//))return m.slice(4);if(m.match(/^https?:\/\//))return m}function _e(m){const[y,b]=m.entry,R=ze(b);return React.createElement(ListItem,null,m.indent&&React.createElement(ListItemIcon,null),React.createElement(Te,{primary:y,secondary:R?React.createElement(Link,{to:R},b):b}))}function Wa(m){const y=nn();return React.createElement(Link,{to:m.to,className:y.helpIcon},React.createElement(HelpOutlineIcon,{fontSize:"inherit"}))}const Na=(0,Me.Z)({root:{display:"flex",flexDirection:"column"}});function Xn(m){var y,b;const R=useApi(Ee),k=stringifyEntityRef(m),N=(y=m.metadata.annotations)==null?void 0:y[ANNOTATION_LOCATION],L=(b=m.metadata.annotations)==null?void 0:b[ANNOTATION_ORIGIN_LOCATION],{loading:I,error:D,value:G}=useAsync(async()=>!N&&!L?[]:(await R.getEntities({filter:[...N?[{[`metadata.annotations.${ANNOTATION_LOCATION}`]:N}]:[],...L?[{[`metadata.annotations.${ANNOTATION_ORIGIN_LOCATION}`]:L}]:[]]})).items,[N,L]);return{loading:I,error:D,location:N,originLocation:L,colocatedEntities:G==null?void 0:G.filter(z=>stringifyEntityRef(z)!==k)}}function un(m){return React.createElement(List,{dense:!0},m.header&&React.createElement(_e,{key:"header",entry:m.header}),m.entities.map(y=>React.createElement(ListItem,{key:stringifyEntityRef(y)},React.createElement(Te,{primary:React.createElement(Kn,{entityRef:y})}))))}function Fa(m){const{entity:y}=m,{loading:b,error:R,location:k,originLocation:N,colocatedEntities:L}=Xn(y);if(b)return React.createElement(Progress,null);if(R)return React.createElement(ResponseErrorPanel,{error:R});if(!k&&!N)return React.createElement(Alert,{severity:"warning"},"Entity had no location information.");if(!(L!=null&&L.length))return React.createElement(Alert,{severity:"info"},"There were no other entities on this location.");if(k===N)return React.createElement(un,{entities:L});const I=L.filter(G=>{var z;return((z=G.metadata.annotations)==null?void 0:z[ANNOTATION_LOCATION])===k}),D=L.filter(G=>{var z;return((z=G.metadata.annotations)==null?void 0:z[ANNOTATION_ORIGIN_LOCATION])===N});return React.createElement(React.Fragment,null,I.length>0&&React.createElement(un,{entities:I,header:["At the same location",k]}),D.length>0&&React.createElement(un,{entities:D,header:["At the same origin",N]}))}function hn(m){const y=Na();return React.createElement(React.Fragment,null,React.createElement(DialogContentText,{variant:"h2"},"Colocated"),React.createElement(DialogContentText,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),React.createElement("div",{className:y.root},React.createElement(Fa,{entity:m.entity})))}function Zn(m){return Object.fromEntries([...Object.entries(m)].sort((y,b)=>y[0]<b[0]?-1:1))}function aa(m){return React.createElement(React.Fragment,null,React.createElement(DialogContentText,{variant:"h2"},"Entity as JSON"),React.createElement(DialogContentText,null,"This is the raw entity data as received from the catalog, on JSON form."),React.createElement(DialogContentText,null,React.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},React.createElement(CodeSnippet,{text:JSON.stringify(Zn(m.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const $n=(0,Me.Z)({root:{display:"flex",flexDirection:"column"}});function ja(m){var y,b,R;const k=$n(),{apiVersion:N,kind:L,metadata:I,spec:D,relations:G=[],status:z={}}=m.entity,q=groupBy(sortBy(G,se=>se.targetRef),"type"),de=stringifyEntityRef(m.entity);return React.createElement(React.Fragment,null,React.createElement(DialogContentText,{variant:"h2"},"Overview"),React.createElement("div",{className:k.root},React.createElement(Qn,{title:"Identity"},React.createElement(List,{dense:!0},React.createElement(ListItem,null,React.createElement(Te,{primary:"apiVersion",secondary:N})),React.createElement(ListItem,null,React.createElement(Te,{primary:"kind",secondary:L})),(D==null?void 0:D.type)&&React.createElement(ListItem,null,React.createElement(Te,{primary:"spec.type",secondary:(y=D.type)==null?void 0:y.toString()})),I.uid&&React.createElement(ListItem,null,React.createElement(Te,{primary:"uid",secondary:I.uid}),React.createElement(ListItemSecondaryAction,null,React.createElement(CopyTextButton,{text:I.uid}))),I.etag&&React.createElement(ListItem,null,React.createElement(Te,{primary:"etag",secondary:I.etag}),React.createElement(ListItemSecondaryAction,null,React.createElement(CopyTextButton,{text:I.etag}))),React.createElement(ListItem,null,React.createElement(Te,{primary:"entityRef",secondary:de}),React.createElement(ListItemSecondaryAction,null,React.createElement(CopyTextButton,{text:de}))))),React.createElement(Qn,{title:"Metadata"},!!Object.keys(I.annotations||{}).length&&React.createElement(List,{dense:!0,subheader:React.createElement(nt,null,"Annotations",React.createElement(Wa,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(I.annotations).map(se=>React.createElement(_e,{key:se[0],indent:!0,entry:se}))),!!Object.keys(I.labels||{}).length&&React.createElement(List,{dense:!0,subheader:React.createElement(nt,null,"Labels")},Object.entries(I.labels).map(se=>React.createElement(_e,{key:se[0],indent:!0,entry:se}))),!!((b=I.tags)!=null&&b.length)&&React.createElement(List,{dense:!0,subheader:React.createElement(nt,null,"Tags")},I.tags.map((se,Ie)=>React.createElement(ListItem,{key:`${se}-${Ie}`},React.createElement(ListItemIcon,null),React.createElement(Te,{primary:se}))))),!!G.length&&React.createElement(Qn,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(q).map(([se,Ie],qe)=>React.createElement("div",{key:qe},React.createElement(List,{dense:!0,subheader:React.createElement(nt,null,se)},Ie.map(Se=>React.createElement(ListItem,{key:Se.targetRef},React.createElement(Te,{primary:React.createElement(Kn,{entityRef:Se.targetRef})}))))))),!!((R=z.items)!=null&&R.length)&&React.createElement(Qn,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},z.items.map((se,Ie)=>React.createElement("div",{key:Ie},React.createElement(Typography,null,se.level,": ",se.type),React.createElement(Box,{ml:2},se.message))))))}function In(m){return React.createElement(React.Fragment,null,React.createElement(DialogContentText$1,{variant:"h2"},"Entity as YAML"),React.createElement(DialogContentText$1,null,"This is the raw entity data as received from the catalog, on YAML form."),React.createElement(DialogContentText$1,null,React.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},React.createElement(CodeSnippet,{text:YAML.stringify(Zn(m.entity)),language:"yaml",showCopyCodeButton:!0}))))}const _n=(0,Me.Z)(m=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:m.palette.background.paper},tabs:{borderRight:`1px solid ${m.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function Gt(m){const{children:y,value:b,index:R,...k}=m,N=_n();return React.createElement("div",{role:"tabpanel",hidden:b!==R,id:`vertical-tabpanel-${R}`,"aria-labelledby":`vertical-tab-${R}`,className:N.tabContents,...k},b===R&&React.createElement(Box,{pl:3,pr:3},y))}function Tt(m){return{id:`vertical-tab-${m}`,"aria-controls":`vertical-tabpanel-${m}`}}function An(m){const y=_n(),[b,R]=React.useState(0);return useEffect(()=>{R(0)},[m.open]),m.entity?React.createElement(Dialog,{fullWidth:!0,maxWidth:"xl",open:m.open,onClose:m.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:y.fullHeightDialog}},React.createElement(DialogTitle,{id:"entity-inspector-dialog-title"},"Entity Inspector"),React.createElement(DialogContent,{dividers:!0},React.createElement("div",{className:y.root},React.createElement(Tabs,{orientation:"vertical",variant:"scrollable",value:b,onChange:(k,N)=>R(N),"aria-label":"Inspector options",className:y.tabs},React.createElement(Tab,{label:"Overview",...Tt(0)}),React.createElement(Tab,{label:"Ancestry",...Tt(1)}),React.createElement(Tab,{label:"Colocated",...Tt(2)}),React.createElement(Tab,{label:"Raw JSON",...Tt(3)}),React.createElement(Tab,{label:"Raw YAML",...Tt(4)})),React.createElement(Gt,{value:b,index:0},React.createElement(ja,{entity:m.entity})),React.createElement(Gt,{value:b,index:1},React.createElement(Ra,{entity:m.entity})),React.createElement(Gt,{value:b,index:2},React.createElement(hn,{entity:m.entity})),React.createElement(Gt,{value:b,index:3},React.createElement(aa,{entity:m.entity})),React.createElement(Gt,{value:b,index:4},React.createElement(In,{entity:m.entity})))),React.createElement(DialogActions,null,React.createElement(Button,{onClick:m.onClose,color:"primary"},"Close"))):null}function an(m){var y;const b=useApi(Ee),R=(y=m.metadata.annotations)==null?void 0:y[ANNOTATION_ORIGIN_LOCATION],k=m.metadata.uid,N=R==="bootstrap:bootstrap",L=useAsync(async()=>{const Ie=b.getLocationByRef(R);let qe;if(!R)qe=Promise.resolve([]);else{const Se=`metadata.annotations.${ANNOTATION_ORIGIN_LOCATION}`;qe=b.getEntities({filter:{[Se]:R},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(pt=>pt.items)}return Promise.all([Ie,qe]).then(([Se,pt])=>({location:Se,colocatedEntities:pt}))},[b,m]),I=useCallback(async function(){const{location:qe}=L.value;await b.removeLocationById(qe.id)},[b,L]),D=useCallback(async function(){await b.removeEntityByUid(k)},[b,k]);if(N)return{type:"bootstrap",location:R,deleteEntity:D};const{loading:G,error:z,value:q}=L;if(G)return{type:"loading"};if(z)return{type:"error",error:z};const{location:de,colocatedEntities:se}=q;return de?{type:"unregister",location:R,colocatedEntities:se.map(getCompoundEntityRef),unregisterLocation:I,deleteEntity:D}:{type:"only-delete",deleteEntity:D}}const ua=(0,Me.Z)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),Z=({entity:m,onConfirm:y,onClose:b})=>{var R;const k=useApi(alertApiRef),N=useApi(configApiRef),L=ua(),I=an(m),[D,G]=useState(!1),[z,q]=useState(!1),de=(R=N.getOptionalString("app.title"))!=null?R:"Backstage",se=useCallback(async function(){if("unregisterLocation"in I){q(!0);try{await I.unregisterLocation(),y()}catch(pt){assertError(pt),k.post({message:pt.message})}finally{q(!1)}}},[k,y,I]),Ie=useCallback(async function(){var pt;if("deleteEntity"in I){q(!0);try{await I.deleteEntity();const Ct=(pt=m.metadata.title)!=null?pt:m.metadata.name;y(),k.post({message:`Removed entity ${Ct}`,severity:"success",display:"transient"})}catch(Ct){assertError(Ct),k.post({message:Ct.message})}finally{q(!1)}}},[k,y,I,m]),qe=()=>React.createElement(DialogActions,{className:L.dialogActions},React.createElement(Button,{onClick:b,color:"primary"},"Cancel"));return I.type==="loading"?React.createElement(Progress,null):I.type==="error"?React.createElement(ResponseErrorPanel,{error:I.error}):I.type==="bootstrap"?React.createElement(React.Fragment,null,React.createElement(Alert$1,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',I.location,'"). If you believe this is in error, please contact the ',de," ","integrator."),React.createElement(Box,{marginTop:2},!D&&React.createElement(React.Fragment,null,React.createElement(Button,{variant:"text",size:"small",color:"primary",className:L.advancedButton,onClick:()=>G(!0)},"Advanced Options"),React.createElement(qe,null)),D&&React.createElement(React.Fragment,null,React.createElement(DialogContentText,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),React.createElement(Button,{variant:"contained",color:"secondary",disabled:z,onClick:Ie},"Delete Entity"),React.createElement(qe,null)))):I.type==="only-delete"?React.createElement(React.Fragment,null,React.createElement(DialogContentText,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),React.createElement(Button,{variant:"contained",color:"secondary",disabled:z,onClick:Ie},"Delete Entity"),React.createElement(qe,null)):I.type==="unregister"?React.createElement(React.Fragment,null,React.createElement(DialogContentText,null,"This action will unregister the following entities:"),React.createElement(DialogContentText,{component:"ul"},I.colocatedEntities.map(Se=>React.createElement("li",{key:`${Se.kind}:${Se.namespace}/${Se.name}`},React.createElement(Kn,{entityRef:Se})))),React.createElement(DialogContentText,null,"Located at the following location:"),React.createElement(DialogContentText,{component:"ul"},React.createElement("li",null,I.location)),React.createElement(DialogContentText,null,"To undo, just re-register the entity in ",de,"."),React.createElement(Box,{marginTop:2},React.createElement(Button,{variant:"contained",color:"secondary",disabled:z,onClick:se},"Unregister Location"),!D&&React.createElement(Box,{component:"span",marginLeft:2},React.createElement(Button,{variant:"text",size:"small",color:"primary",className:L.advancedButton,onClick:()=>G(!0)},"Advanced Options"))),D&&React.createElement(React.Fragment,null,React.createElement(Box,{paddingTop:4,paddingBottom:4},React.createElement(Divider,null)),React.createElement(DialogContentText,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),React.createElement(Button,{variant:"contained",color:"secondary",disabled:z,onClick:Ie},"Delete Entity"))):React.createElement(Alert$1,{severity:"error"},"Internal error: Unknown state")},T=m=>{const{open:y,onConfirm:b,onClose:R,entity:k}=m;return React.createElement(Dialog,{open:y,onClose:R},React.createElement(DialogTitle,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),React.createElement(DialogContent,null,React.createElement(Z,{entity:k,onConfirm:b,onClose:R})))};function $(){const m=useApi(identityApiRef),y=useApi(Ee),{filters:b}=En(),{value:R,loading:k}=useAsync(async()=>(await m.getBackstageIdentity()).ownershipEntityRefs,[]),{user:N,owners:L,...I}=b,D=he(compact(Object.values(I))),[{value:G,loading:z},q]=useAsyncFn(async se=>{const Ie=fe(se.owners,se.ownershipEntityRefs);if(Ie===void 0)return 0;const{["metadata.name"]:qe,...Se}=se.filter.filter,{totalItems:pt}=await y.queryEntities({...se.filter,filter:{...Se,"relations.ownedBy":Ie},limit:0});return pt},[],{loading:!0});return useDeepCompareEffect(()=>{Object.keys(D.filter).length!==0&&R!==void 0&&q({ownershipEntityRefs:R,owners:L,filter:D})},[R,L,D]),{count:G,loading:k||z,filter:useMemo(()=>tn.owned(R!=null?R:[]),[R]),ownershipEntityRefs:R}}function fe(m,y){var b;if(y===void 0)return;const R=(b=m==null?void 0:m.values)!=null?b:[];if(R.length){const k=intersection(R,y);return k.length===0?void 0:k}return y}function Oe(){const m=useApi(Ee),{filters:y}=En(),b=useRef(),R=useMemo(()=>{const{user:L,...I}=y,D=compact(Object.values(I)),G=he(D),z={...G,limit:0};return Object.keys(G.filter).length===0?(b.current=void 0,b.current):isEqual(z,b.current)?b.current:(b.current=z,z)},[y]),{value:k,loading:N}=useAsync(async()=>{if(R===void 0)return 0;const{totalItems:L}=await m.queryEntities(R);return L},[R]);return{count:k,loading:N}}function Qe(){const m=useApi(Ee),{filters:y}=En(),{starredEntities:b}=wa(),R=useRef(),k=useMemo(()=>{const{user:D,...G}=y,z=compact(Object.values(G)),q=he(z),de="metadata.name",se={...q,filter:{...q.filter,[de]:Array.from(b).map(Ie=>parseEntityRef(Ie).name)},limit:1e3};return isEqual(se,R.current)?R.current:(R.current=se,se)},[y,b]),{value:N,loading:L}=useAsync(async()=>b.size?(await m.queryEntities(k)).items.map(G=>stringifyEntityRef({kind:G.kind,namespace:G.metadata.namespace,name:G.metadata.name})).filter(G=>b.has(G)).length:0,[k,b]),I=useMemo(()=>tn.starred(Array.from(b)),[b]);return{count:N,loading:L,filter:I}}const kt=(0,Me.Z)(m=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:m.spacing(1,0,1,0)},title:{margin:m.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:m.palette.text.primary},menuItem:{minHeight:m.spacing(6)},groupWrapper:{margin:m.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function Bt(m){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:SettingsIcon},{id:"starred",label:"Starred",icon:Star}]},{name:m!=null?m:"Company",items:[{id:"all",label:"All"}]}]}const ce=m=>{var y;const{initialFilter:b,availableFilters:R}=m,k=kt(),L=(y=useApi(configApiRef).getOptionalString("organization.name"))!=null?y:"Company",{filters:I,updateFilters:D,queryParameters:{kind:G,user:z}}=En(),q=["starred","all"],de=Bt(L).map(_t=>({..._t,items:_t.items.filter(({id:Jt})=>["group","user"].some(Ir=>Ir===G)?q.includes(Jt):!R||R.includes(Jt))})).filter(({items:_t})=>!!_t.length),{count:se,loading:Ie,filter:qe}=$(),{count:Se}=Oe(),{count:pt,filter:Ct,loading:De}=Qe(),We=useMemo(()=>[z].flat()[0],[z]),[Xe,jt]=useState(We!=null?We:b),$t=useMemo(()=>({all:Se,starred:pt,owned:se}),[pt,se,Se]);useEffect(()=>{We&&jt(We)},[We]);const zt=Ie||De;return useEffect(()=>{!zt&&Xe&&Xe!=="all"&&$t[Xe]===0&&jt("all")},[zt,$t,Xe,jt]),useEffect(()=>{if(!Xe||zt)return;D({user:(()=>Xe==="owned"?qe:Xe==="starred"?Ct:tn.all())()})},[Xe,Ct,qe,D,zt]),React.createElement(Card,{className:k.root},de.map(_t=>React.createElement(Fragment,{key:_t.name},React.createElement(Typography,{variant:"subtitle2",component:"span",className:k.title},_t.name),React.createElement(Card,{className:k.groupWrapper},React.createElement(List,{disablePadding:!0,dense:!0,role:"menu","aria-label":_t.name},_t.items.map(Jt=>{var Ir,ls;return React.createElement(MenuItem,{role:"none presentation",key:Jt.id,divider:!0,onClick:()=>jt(Jt.id),selected:Jt.id===((Ir=I.user)==null?void 0:Ir.value),className:k.menuItem,disabled:$t[Jt.id]===0,"data-testid":`user-picker-${Jt.id}`,tabIndex:0,ContainerProps:{role:"menuitem"}},Jt.icon&&React.createElement(ListItemIcon,{className:k.listIcon},React.createElement(Jt.icon,{fontSize:"small"})),React.createElement(ListItemText$1,null,React.createElement(Typography,{variant:"body1"},Jt.label," ")),React.createElement(ListItemSecondaryAction,null,(ls=$t[Jt.id])!=null?ls:"-"))}))))))},Wt=(0,Me.Z)({input:{}},{name:"CatalogReactEntityProcessingStatusPickerPicker"}),rn=o.createElement(ve.Z,{fontSize:"small"}),Zt=o.createElement(j.Z,{fontSize:"small"}),xa=()=>{const m=Wt(),{updateFilters:y}=En(),[b,R]=useState([]);function k(I){y({orphan:I?new va(I):void 0})}function N(I){y({error:I?new Mt(I):void 0})}const L=["Is Orphan","Has Error"];return React.createElement(Box,{pb:1,pt:1},React.createElement(Typography,{variant:"button",component:"label"},"Processing Status",React.createElement(Autocomplete,{multiple:!0,disableCloseOnSelect:!0,options:L,value:b,onChange:(I,D)=>{R(D),k(D.includes("Is Orphan")),N(D.includes("Has Error"))},renderOption:(I,{selected:D})=>React.createElement(FormControlLabel,{control:React.createElement(Checkbox,{icon:rn,checkedIcon:Zt,checked:D}),onClick:G=>G.preventDefault(),label:I}),size:"small",popupIcon:React.createElement(ExpandMoreIcon,{"data-testid":"processing-status-picker-expand"}),renderInput:I=>React.createElement(TextField,{...I,className:m.input,variant:"outlined"})})))},ht=(0,Me.Z)({input:{}},{name:"CatalogReactEntityNamespacePicker"}),Rn=()=>{const m=ht();return React.createElement(ka,{label:"Namespace",name:"namespace",path:"metadata.namespace",Filter:Hn,InputProps:{className:m.input}})},pa=(0,Me.Z)(m=>({code:{borderRadius:6,margin:m.spacing(2,0),background:m.palette.type==="dark"?"#444":m.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function Pa(m,y){var b,R;const k=(y==null?void 0:y.kind)||"Component",N=(y==null?void 0:y.metadata.name)||"example",L=((b=y==null?void 0:y.spec)==null?void 0:b.type)||"website",I=((R=y==null?void 0:y.spec)==null?void 0:R.owner)||"user:default/guest",D=`apiVersion: backstage.io/v1alpha1
kind: ${k}
metadata:
  name: ${N}
  annotations:${m.map(q=>`
    ${q}: value`).join("")}
spec:
  type: ${L}
  owner: ${I}`;let G=6;const z=[];return m.forEach(()=>{z.push(G),G++}),{yamlText:D,lineNumbers:z}}function Ft(m,y="Component"){const b=m.length<=1;return React.createElement(React.Fragment,null,"The ",b?"annotation":"annotations"," ",m.map(R=>React.createElement("code",null,R)).reduce((R,k)=>React.createElement(React.Fragment,null,R,", ",k))," ",b?"is":"are"," missing. You need to add the"," ",b?"annotation":"annotations"," to your ",y," if you want to enable this tool.")}function qn(m){let y;try{y=useEntity().entity}catch{}const{annotation:b,readMoreUrl:R}=m,k=Array.isArray(b)?b:[b],N=R||"https://backstage.io/docs/features/software-catalog/well-known-annotations",L=pa(),I=(y==null?void 0:y.kind)||"Component",{yamlText:D,lineNumbers:G}=Pa(k,y);return React.createElement(EmptyState,{missing:"field",title:"Missing Annotation",description:Ft(k,I),action:React.createElement(React.Fragment,null,React.createElement(Typography$1,{variant:"body1"},"Add the annotation to your ",I," YAML as shown in the highlighted example below:"),React.createElement(Box$1,{className:L.code},React.createElement(CodeSnippet,{text:D,language:"yaml",showLineNumbers:!0,highlightedNumbers:G,customStyle:{background:"inherit",fontSize:"115%"}})),React.createElement(Button$1,{color:"primary",component:Link,to:N},"Read more"))})}function ma(m){var y;const{children:b,value:R}=m,[k,N]=useState((y=R==null?void 0:R.filters)!=null?y:{}),L=useCallback(G=>{N(z=>{const q=typeof G=="function"?G(z):G;return{...z,...q}})},[]),I=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),D=useMemo(()=>{var G,z,q,de,se;return{entities:(G=R==null?void 0:R.entities)!=null?G:I.entities,backendEntities:(z=R==null?void 0:R.backendEntities)!=null?z:I.backendEntities,updateFilters:(q=R==null?void 0:R.updateFilters)!=null?q:L,filters:k,loading:(de=R==null?void 0:R.loading)!=null?de:!1,queryParameters:(se=R==null?void 0:R.queryParameters)!=null?se:I.queryParameters,error:R==null?void 0:R.error}},[R,I,k,L]);return React.createElement(Gn.Provider,{value:D},b)}},64060:(Ga,yn,v)=>{v.d(yn,{rU:()=>xn,Or:()=>ol,iA:()=>Zr});var Ae=v(29804),Ue=v(23807),rt=v(61837),ee=v(90436),Fe=v(19928),o=v(2784),re=v(27429),Ve=v(77277),Y=v(79692),He=v(60364),lt=v(41128),Ye=v(15459),tt=v(12420),xt=v(76600),wt=v(86689),ln=v(72779),bt=v.n(ln),Me=v(76635),ct=v(73557),mn=v(39857),fn=v(16060),ye=v(95544),cn=v(56553),Nn=v(26639),jn=v(39595),Xt=v(80030),ke=v(19353),ue=v(95074),dt=v(41156),Ce=v(70367),ge=v(46506),j=v(54073),ve=v(10368),je=v(19574),J=v(60905),pe=v(11776),xe=v(38402),Be=v(49378),Ze=v(27616),Ge=v(8284),Ee=v(70660),gt=v(91750),Lt=v(38016),Dt=v(6466),Ht=v(41779),Pn=v(85256),vn=v(28316),Nt=v(48049),qt=v(51209),zn=v(32272),en=v(15277),Ln=v.n(en);function U(n=!1){const e=(0,o.useRef)(n),r=(0,o.useCallback)(()=>e.current,[]);return(0,o.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),r}var _=v(94339),V=v(14503),le=v(24579),he=v(32552),Je=v(27597),Et=v(11824),St=v(21324),gn=v(7089),Kt=v(42494),Un=v(74603),ha=v(56939),ya=v(12231),Ca=v(73698),wn=v(72379),Vn=v(74600),kn=v(15584),Hn=v(37794),tn=v.n(Hn),ia=v(18671),va=v(6487),Mt=v(99152),Gn=v(67222),xr=v(21070),En=v(90324),Sr=v(98281),nr=v(33375),ar=v(44233),wa=v(27604),Ea=v(36444),Ka=v(37971),ss=v(59709),os=v(17373),Cr=v(3702),wr=v(93111),rr=v(4614),is=v(44311),sr=v(18473),or=v(57998),Fr=v(83543),ir=v(59797),jr=v(26739),ka=v(86619),lr=v(98989),ut;(function(n){n.assertEqual=d=>d;function e(d){}n.assertIs=e;function r(d){throw new Error}n.assertNever=r,n.arrayToEnum=d=>{const u={};for(const f of d)u[f]=f;return u},n.getValidEnumValues=d=>{const u=n.objectKeys(d).filter(h=>typeof d[d[h]]!="number"),f={};for(const h of u)f[h]=d[h];return n.objectValues(f)},n.objectValues=d=>n.objectKeys(d).map(function(u){return d[u]}),n.objectKeys=typeof Object.keys=="function"?d=>Object.keys(d):d=>{const u=[];for(const f in d)Object.prototype.hasOwnProperty.call(d,f)&&u.push(f);return u},n.find=(d,u)=>{for(const f of d)if(u(f))return f},n.isInteger=typeof Number.isInteger=="function"?d=>Number.isInteger(d):d=>typeof d=="number"&&isFinite(d)&&Math.floor(d)===d;function i(d,u=" | "){return d.map(f=>typeof f=="string"?`'${f}'`:f).join(u)}n.joinValues=i,n.jsonStringifyReplacer=(d,u)=>typeof u=="bigint"?u.toString():u})(ut||(ut={}));var ba;(function(n){n.mergeShapes=(e,r)=>({...e,...r})})(ba||(ba={}));const te=ut.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),la=n=>{switch(typeof n){case"undefined":return te.undefined;case"string":return te.string;case"number":return isNaN(n)?te.nan:te.number;case"boolean":return te.boolean;case"function":return te.function;case"bigint":return te.bigint;case"symbol":return te.symbol;case"object":return Array.isArray(n)?te.array:n===null?te.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?te.promise:typeof Map!="undefined"&&n instanceof Map?te.map:typeof Set!="undefined"&&n instanceof Set?te.set:typeof Date!="undefined"&&n instanceof Date?te.date:te.object;default:return te.unknown}},K=ut.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),cr=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class Tn extends Error{constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(u){return u.message},i={_errors:[]},d=u=>{for(const f of u.issues)if(f.code==="invalid_union")f.unionErrors.map(d);else if(f.code==="invalid_return_type")d(f.returnTypeError);else if(f.code==="invalid_arguments")d(f.argumentsError);else if(f.path.length===0)i._errors.push(r(f));else{let h=i,C=0;for(;C<f.path.length;){const x=f.path[C];C===f.path.length-1?(h[x]=h[x]||{_errors:[]},h[x]._errors.push(r(f))):h[x]=h[x]||{_errors:[]},h=h[x],C++}}};return d(this),i}toString(){return this.message}get message(){return JSON.stringify(this.issues,ut.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},i=[];for(const d of this.issues)d.path.length>0?(r[d.path[0]]=r[d.path[0]]||[],r[d.path[0]].push(e(d))):i.push(e(d));return{formErrors:i,fieldErrors:r}}get formErrors(){return this.flatten()}}Tn.create=n=>new Tn(n);const Ta=(n,e)=>{let r;switch(n.code){case K.invalid_type:n.received===te.undefined?r="Required":r=`Expected ${n.expected}, received ${n.received}`;break;case K.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(n.expected,ut.jsonStringifyReplacer)}`;break;case K.unrecognized_keys:r=`Unrecognized key(s) in object: ${ut.joinValues(n.keys,", ")}`;break;case K.invalid_union:r="Invalid input";break;case K.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ut.joinValues(n.options)}`;break;case K.invalid_enum_value:r=`Invalid enum value. Expected ${ut.joinValues(n.options)}, received '${n.received}'`;break;case K.invalid_arguments:r="Invalid function arguments";break;case K.invalid_return_type:r="Invalid function return type";break;case K.invalid_date:r="Invalid date";break;case K.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(r=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?r=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?r=`Invalid input: must end with "${n.validation.endsWith}"`:ut.assertNever(n.validation):n.validation!=="regex"?r=`Invalid ${n.validation}`:r="Invalid";break;case K.too_small:n.type==="array"?r=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?r=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?r=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?r=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:r="Invalid input";break;case K.too_big:n.type==="array"?r=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?r=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?r=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?r=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?r=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:r="Invalid input";break;case K.custom:r="Invalid input";break;case K.invalid_intersection_types:r="Intersection results could not be merged";break;case K.not_multiple_of:r=`Number must be a multiple of ${n.multipleOf}`;break;case K.not_finite:r="Number must be finite";break;default:r=e.defaultError,ut.assertNever(n)}return{message:r}};let dr=Ta;function $a(n){dr=n}function Ya(){return dr}const Ia=n=>{const{data:e,path:r,errorMaps:i,issueData:d}=n,u=[...r,...d.path||[]],f={...d,path:u};let h="";const C=i.filter(x=>!!x).slice().reverse();for(const x of C)h=x(f,{data:e,defaultError:h}).message;return{...d,path:u,message:d.message||h}},kr=[];function oe(n,e){const r=Ia({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ya(),Ta].filter(i=>!!i)});n.common.issues.push(r)}class Yt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const i=[];for(const d of r){if(d.status==="aborted")return Ne;d.status==="dirty"&&e.dirty(),i.push(d.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,r){const i=[];for(const d of r)i.push({key:await d.key,value:await d.value});return Yt.mergeObjectSync(e,i)}static mergeObjectSync(e,r){const i={};for(const d of r){const{key:u,value:f}=d;if(u.status==="aborted"||f.status==="aborted")return Ne;u.status==="dirty"&&e.dirty(),f.status==="dirty"&&e.dirty(),u.value!=="__proto__"&&(typeof f.value!="undefined"||d.alwaysSet)&&(i[u.value]=f.value)}return{status:e.value,value:i}}}const Ne=Object.freeze({status:"aborted"}),Ja=n=>({status:"dirty",value:n}),dn=n=>({status:"valid",value:n}),Qa=n=>n.status==="aborted",Aa=n=>n.status==="dirty",_a=n=>n.status==="valid",Kn=n=>typeof Promise!="undefined"&&n instanceof Promise;var be;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(be||(be={}));class On{constructor(e,r,i,d){this._cachedPath=[],this.parent=e,this.data=r,this._path=i,this._key=d}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Tr=(n,e)=>{if(_a(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Tn(n.common.issues);return this._error=r,this._error}}};function Pe(n){if(!n)return{};const{errorMap:e,invalid_type_error:r,required_error:i,description:d}=n;if(e&&(r||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:d}:{errorMap:(f,h)=>f.code!=="invalid_type"?{message:h.defaultError}:typeof h.data=="undefined"?{message:i!=null?i:h.defaultError}:{message:r!=null?r:h.defaultError},description:d}}class $e{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return la(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:la(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Yt,ctx:{common:e.parent.common,data:e.data,parsedType:la(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Kn(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const i=this.safeParse(e,r);if(i.success)return i.data;throw i.error}safeParse(e,r){var i;const d={common:{issues:[],async:(i=r==null?void 0:r.async)!==null&&i!==void 0?i:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:la(e)},u=this._parseSync({data:e,path:d.path,parent:d});return Tr(d,u)}async parseAsync(e,r){const i=await this.safeParseAsync(e,r);if(i.success)return i.data;throw i.error}async safeParseAsync(e,r){const i={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:la(e)},d=this._parse({data:e,path:i.path,parent:i}),u=await(Kn(d)?d:Promise.resolve(d));return Tr(i,u)}refine(e,r){const i=d=>typeof r=="string"||typeof r=="undefined"?{message:r}:typeof r=="function"?r(d):r;return this._refinement((d,u)=>{const f=e(d),h=()=>u.addIssue({code:K.custom,...i(d)});return typeof Promise!="undefined"&&f instanceof Promise?f.then(C=>C?!0:(h(),!1)):f?!0:(h(),!1)})}refinement(e,r){return this._refinement((i,d)=>e(i)?!0:(d.addIssue(typeof r=="function"?r(i,d):r),!1))}_refinement(e){return new Tt({schema:this,typeName:ce.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return An.create(this,this._def)}nullable(){return an.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return nn.create(this,this._def)}promise(){return Gt.create(this,this._def)}or(e){return Qn.create([this,e],this._def)}and(e){return Na.create(this,e,this._def)}transform(e){return new Tt({...Pe(this._def),schema:this,typeName:ce.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new ua({...Pe(this._def),innerType:this,defaultValue:r,typeName:ce.ZodDefault})}brand(){return new fe({typeName:ce.ZodBranded,type:this,...Pe(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Z({...Pe(this._def),innerType:this,catchValue:r,typeName:ce.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Oe.create(this,e)}readonly(){return Qe.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ur=/^c[^\s-]{8,}$/i,zr=/^[a-z][a-z0-9]*$/,pr=/^[0-9A-HJKMNP-TV-Z]{26}$/,Rt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ie=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ca="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let X;const Ur=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,ta=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Da=n=>n.precision?n.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}Z$`):n.precision===0?n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Xa(n,e){return!!((e==="v4"||!e)&&Ur.test(n)||(e==="v6"||!e)&&ta.test(n))}class Bn extends $e{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==te.string){const u=this._getOrReturnCtx(e);return oe(u,{code:K.invalid_type,expected:te.string,received:u.parsedType}),Ne}const i=new Yt;let d;for(const u of this._def.checks)if(u.kind==="min")e.data.length<u.value&&(d=this._getOrReturnCtx(e,d),oe(d,{code:K.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),i.dirty());else if(u.kind==="max")e.data.length>u.value&&(d=this._getOrReturnCtx(e,d),oe(d,{code:K.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),i.dirty());else if(u.kind==="length"){const f=e.data.length>u.value,h=e.data.length<u.value;(f||h)&&(d=this._getOrReturnCtx(e,d),f?oe(d,{code:K.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}):h&&oe(d,{code:K.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}),i.dirty())}else if(u.kind==="email")ie.test(e.data)||(d=this._getOrReturnCtx(e,d),oe(d,{validation:"email",code:K.invalid_string,message:u.message}),i.dirty());else if(u.kind==="emoji")X||(X=new RegExp(ca,"u")),X.test(e.data)||(d=this._getOrReturnCtx(e,d),oe(d,{validation:"emoji",code:K.invalid_string,message:u.message}),i.dirty());else if(u.kind==="uuid")Rt.test(e.data)||(d=this._getOrReturnCtx(e,d),oe(d,{validation:"uuid",code:K.invalid_string,message:u.message}),i.dirty());else if(u.kind==="cuid")ur.test(e.data)||(d=this._getOrReturnCtx(e,d),oe(d,{validation:"cuid",code:K.invalid_string,message:u.message}),i.dirty());else if(u.kind==="cuid2")zr.test(e.data)||(d=this._getOrReturnCtx(e,d),oe(d,{validation:"cuid2",code:K.invalid_string,message:u.message}),i.dirty());else if(u.kind==="ulid")pr.test(e.data)||(d=this._getOrReturnCtx(e,d),oe(d,{validation:"ulid",code:K.invalid_string,message:u.message}),i.dirty());else if(u.kind==="url")try{new URL(e.data)}catch{d=this._getOrReturnCtx(e,d),oe(d,{validation:"url",code:K.invalid_string,message:u.message}),i.dirty()}else u.kind==="regex"?(u.regex.lastIndex=0,u.regex.test(e.data)||(d=this._getOrReturnCtx(e,d),oe(d,{validation:"regex",code:K.invalid_string,message:u.message}),i.dirty())):u.kind==="trim"?e.data=e.data.trim():u.kind==="includes"?e.data.includes(u.value,u.position)||(d=this._getOrReturnCtx(e,d),oe(d,{code:K.invalid_string,validation:{includes:u.value,position:u.position},message:u.message}),i.dirty()):u.kind==="toLowerCase"?e.data=e.data.toLowerCase():u.kind==="toUpperCase"?e.data=e.data.toUpperCase():u.kind==="startsWith"?e.data.startsWith(u.value)||(d=this._getOrReturnCtx(e,d),oe(d,{code:K.invalid_string,validation:{startsWith:u.value},message:u.message}),i.dirty()):u.kind==="endsWith"?e.data.endsWith(u.value)||(d=this._getOrReturnCtx(e,d),oe(d,{code:K.invalid_string,validation:{endsWith:u.value},message:u.message}),i.dirty()):u.kind==="datetime"?Da(u).test(e.data)||(d=this._getOrReturnCtx(e,d),oe(d,{code:K.invalid_string,validation:"datetime",message:u.message}),i.dirty()):u.kind==="ip"?Xa(e.data,u.version)||(d=this._getOrReturnCtx(e,d),oe(d,{validation:"ip",code:K.invalid_string,message:u.message}),i.dirty()):ut.assertNever(u);return{status:i.value,value:e.data}}_regex(e,r,i){return this.refinement(d=>e.test(d),{validation:r,code:K.invalid_string,...be.errToObj(i)})}_addCheck(e){return new Bn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...be.errToObj(e)})}url(e){return this._addCheck({kind:"url",...be.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...be.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...be.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...be.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...be.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...be.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...be.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...be.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...be.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...be.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...be.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...be.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...be.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...be.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...be.errToObj(r)})}nonempty(e){return this.min(1,be.errToObj(e))}trim(){return new Bn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Bn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Bn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Bn.create=n=>{var e;return new Bn({checks:[],typeName:ce.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...Pe(n)})};function mr(n,e){const r=(n.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,d=r>i?r:i,u=parseInt(n.toFixed(d).replace(".","")),f=parseInt(e.toFixed(d).replace(".",""));return u%f/Math.pow(10,d)}class Yn extends $e{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==te.number){const u=this._getOrReturnCtx(e);return oe(u,{code:K.invalid_type,expected:te.number,received:u.parsedType}),Ne}let i;const d=new Yt;for(const u of this._def.checks)u.kind==="int"?ut.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{code:K.invalid_type,expected:"integer",received:"float",message:u.message}),d.dirty()):u.kind==="min"?(u.inclusive?e.data<u.value:e.data<=u.value)&&(i=this._getOrReturnCtx(e,i),oe(i,{code:K.too_small,minimum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),d.dirty()):u.kind==="max"?(u.inclusive?e.data>u.value:e.data>=u.value)&&(i=this._getOrReturnCtx(e,i),oe(i,{code:K.too_big,maximum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),d.dirty()):u.kind==="multipleOf"?mr(e.data,u.value)!==0&&(i=this._getOrReturnCtx(e,i),oe(i,{code:K.not_multiple_of,multipleOf:u.value,message:u.message}),d.dirty()):u.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{code:K.not_finite,message:u.message}),d.dirty()):ut.assertNever(u);return{status:d.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,be.toString(r))}gt(e,r){return this.setLimit("min",e,!1,be.toString(r))}lte(e,r){return this.setLimit("max",e,!0,be.toString(r))}lt(e,r){return this.setLimit("max",e,!1,be.toString(r))}setLimit(e,r,i,d){return new Yn({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:i,message:be.toString(d)}]})}_addCheck(e){return new Yn({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:be.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:be.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:be.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:be.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:be.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:be.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ut.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(r===null||i.value>r)&&(r=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Yn.create=n=>new Yn({checks:[],typeName:ce.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...Pe(n)});class da extends $e{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==te.bigint){const u=this._getOrReturnCtx(e);return oe(u,{code:K.invalid_type,expected:te.bigint,received:u.parsedType}),Ne}let i;const d=new Yt;for(const u of this._def.checks)u.kind==="min"?(u.inclusive?e.data<u.value:e.data<=u.value)&&(i=this._getOrReturnCtx(e,i),oe(i,{code:K.too_small,type:"bigint",minimum:u.value,inclusive:u.inclusive,message:u.message}),d.dirty()):u.kind==="max"?(u.inclusive?e.data>u.value:e.data>=u.value)&&(i=this._getOrReturnCtx(e,i),oe(i,{code:K.too_big,type:"bigint",maximum:u.value,inclusive:u.inclusive,message:u.message}),d.dirty()):u.kind==="multipleOf"?e.data%u.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),oe(i,{code:K.not_multiple_of,multipleOf:u.value,message:u.message}),d.dirty()):ut.assertNever(u);return{status:d.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,be.toString(r))}gt(e,r){return this.setLimit("min",e,!1,be.toString(r))}lte(e,r){return this.setLimit("max",e,!0,be.toString(r))}lt(e,r){return this.setLimit("max",e,!1,be.toString(r))}setLimit(e,r,i,d){return new da({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:i,message:be.toString(d)}]})}_addCheck(e){return new da({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:be.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:be.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}da.create=n=>{var e;return new da({checks:[],typeName:ce.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...Pe(n)})};class me extends $e{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==te.boolean){const i=this._getOrReturnCtx(e);return oe(i,{code:K.invalid_type,expected:te.boolean,received:i.parsedType}),Ne}return dn(e.data)}}me.create=n=>new me({typeName:ce.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...Pe(n)});class Pt extends $e{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==te.date){const u=this._getOrReturnCtx(e);return oe(u,{code:K.invalid_type,expected:te.date,received:u.parsedType}),Ne}if(isNaN(e.data.getTime())){const u=this._getOrReturnCtx(e);return oe(u,{code:K.invalid_date}),Ne}const i=new Yt;let d;for(const u of this._def.checks)u.kind==="min"?e.data.getTime()<u.value&&(d=this._getOrReturnCtx(e,d),oe(d,{code:K.too_small,message:u.message,inclusive:!0,exact:!1,minimum:u.value,type:"date"}),i.dirty()):u.kind==="max"?e.data.getTime()>u.value&&(d=this._getOrReturnCtx(e,d),oe(d,{code:K.too_big,message:u.message,inclusive:!0,exact:!1,maximum:u.value,type:"date"}),i.dirty()):ut.assertNever(u);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Pt({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:be.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:be.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}Pt.create=n=>new Pt({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:ce.ZodDate,...Pe(n)});class Le extends $e{_parse(e){if(this._getType(e)!==te.symbol){const i=this._getOrReturnCtx(e);return oe(i,{code:K.invalid_type,expected:te.symbol,received:i.parsedType}),Ne}return dn(e.data)}}Le.create=n=>new Le({typeName:ce.ZodSymbol,...Pe(n)});class Ma extends $e{_parse(e){if(this._getType(e)!==te.undefined){const i=this._getOrReturnCtx(e);return oe(i,{code:K.invalid_type,expected:te.undefined,received:i.parsedType}),Ne}return dn(e.data)}}Ma.create=n=>new Ma({typeName:ce.ZodUndefined,...Pe(n)});class Ot extends $e{_parse(e){if(this._getType(e)!==te.null){const i=this._getOrReturnCtx(e);return oe(i,{code:K.invalid_type,expected:te.null,received:i.parsedType}),Ne}return dn(e.data)}}Ot.create=n=>new Ot({typeName:ce.ZodNull,...Pe(n)});class na extends $e{constructor(){super(...arguments),this._any=!0}_parse(e){return dn(e.data)}}na.create=n=>new na({typeName:ce.ZodAny,...Pe(n)});class Jn extends $e{constructor(){super(...arguments),this._unknown=!0}_parse(e){return dn(e.data)}}Jn.create=n=>new Jn({typeName:ce.ZodUnknown,...Pe(n)});class bn extends $e{_parse(e){const r=this._getOrReturnCtx(e);return oe(r,{code:K.invalid_type,expected:te.never,received:r.parsedType}),Ne}}bn.create=n=>new bn({typeName:ce.ZodNever,...Pe(n)});class Ra extends $e{_parse(e){if(this._getType(e)!==te.undefined){const i=this._getOrReturnCtx(e);return oe(i,{code:K.invalid_type,expected:te.void,received:i.parsedType}),Ne}return dn(e.data)}}Ra.create=n=>new Ra({typeName:ce.ZodVoid,...Pe(n)});class nn extends $e{_parse(e){const{ctx:r,status:i}=this._processInputParams(e),d=this._def;if(r.parsedType!==te.array)return oe(r,{code:K.invalid_type,expected:te.array,received:r.parsedType}),Ne;if(d.exactLength!==null){const f=r.data.length>d.exactLength.value,h=r.data.length<d.exactLength.value;(f||h)&&(oe(r,{code:f?K.too_big:K.too_small,minimum:h?d.exactLength.value:void 0,maximum:f?d.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:d.exactLength.message}),i.dirty())}if(d.minLength!==null&&r.data.length<d.minLength.value&&(oe(r,{code:K.too_small,minimum:d.minLength.value,type:"array",inclusive:!0,exact:!1,message:d.minLength.message}),i.dirty()),d.maxLength!==null&&r.data.length>d.maxLength.value&&(oe(r,{code:K.too_big,maximum:d.maxLength.value,type:"array",inclusive:!0,exact:!1,message:d.maxLength.message}),i.dirty()),r.common.async)return Promise.all([...r.data].map((f,h)=>d.type._parseAsync(new On(r,f,r.path,h)))).then(f=>Yt.mergeArray(i,f));const u=[...r.data].map((f,h)=>d.type._parseSync(new On(r,f,r.path,h)));return Yt.mergeArray(i,u)}get element(){return this._def.type}min(e,r){return new nn({...this._def,minLength:{value:e,message:be.toString(r)}})}max(e,r){return new nn({...this._def,maxLength:{value:e,message:be.toString(r)}})}length(e,r){return new nn({...this._def,exactLength:{value:e,message:be.toString(r)}})}nonempty(e){return this.min(1,e)}}nn.create=(n,e)=>new nn({type:n,minLength:null,maxLength:null,exactLength:null,typeName:ce.ZodArray,...Pe(e)});function Te(n){if(n instanceof nt){const e={};for(const r in n.shape){const i=n.shape[r];e[r]=An.create(Te(i))}return new nt({...n._def,shape:()=>e})}else return n instanceof nn?new nn({...n._def,type:Te(n.element)}):n instanceof An?An.create(Te(n.unwrap())):n instanceof an?an.create(Te(n.unwrap())):n instanceof Xn?Xn.create(n.items.map(e=>Te(e))):n}class nt extends $e{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=ut.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==te.object){const x=this._getOrReturnCtx(e);return oe(x,{code:K.invalid_type,expected:te.object,received:x.parsedType}),Ne}const{status:i,ctx:d}=this._processInputParams(e),{shape:u,keys:f}=this._getCached(),h=[];if(!(this._def.catchall instanceof bn&&this._def.unknownKeys==="strip"))for(const x in d.data)f.includes(x)||h.push(x);const C=[];for(const x of f){const A=u[x],B=d.data[x];C.push({key:{status:"valid",value:x},value:A._parse(new On(d,B,d.path,x)),alwaysSet:x in d.data})}if(this._def.catchall instanceof bn){const x=this._def.unknownKeys;if(x==="passthrough")for(const A of h)C.push({key:{status:"valid",value:A},value:{status:"valid",value:d.data[A]}});else if(x==="strict")h.length>0&&(oe(d,{code:K.unrecognized_keys,keys:h}),i.dirty());else if(x!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const x=this._def.catchall;for(const A of h){const B=d.data[A];C.push({key:{status:"valid",value:A},value:x._parse(new On(d,B,d.path,A)),alwaysSet:A in d.data})}}return d.common.async?Promise.resolve().then(async()=>{const x=[];for(const A of C){const B=await A.key;x.push({key:B,value:await A.value,alwaysSet:A.alwaysSet})}return x}).then(x=>Yt.mergeObjectSync(i,x)):Yt.mergeObjectSync(i,C)}get shape(){return this._def.shape()}strict(e){return be.errToObj,new nt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,i)=>{var d,u,f,h;const C=(f=(u=(d=this._def).errorMap)===null||u===void 0?void 0:u.call(d,r,i).message)!==null&&f!==void 0?f:i.defaultError;return r.code==="unrecognized_keys"?{message:(h=be.errToObj(e).message)!==null&&h!==void 0?h:C}:{message:C}}}:{}})}strip(){return new nt({...this._def,unknownKeys:"strip"})}passthrough(){return new nt({...this._def,unknownKeys:"passthrough"})}extend(e){return new nt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new nt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ce.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new nt({...this._def,catchall:e})}pick(e){const r={};return ut.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(r[i]=this.shape[i])}),new nt({...this._def,shape:()=>r})}omit(e){const r={};return ut.objectKeys(this.shape).forEach(i=>{e[i]||(r[i]=this.shape[i])}),new nt({...this._def,shape:()=>r})}deepPartial(){return Te(this)}partial(e){const r={};return ut.objectKeys(this.shape).forEach(i=>{const d=this.shape[i];e&&!e[i]?r[i]=d:r[i]=d.optional()}),new nt({...this._def,shape:()=>r})}required(e){const r={};return ut.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])r[i]=this.shape[i];else{let u=this.shape[i];for(;u instanceof An;)u=u._def.innerType;r[i]=u}}),new nt({...this._def,shape:()=>r})}keyof(){return ja(ut.objectKeys(this.shape))}}nt.create=(n,e)=>new nt({shape:()=>n,unknownKeys:"strip",catchall:bn.create(),typeName:ce.ZodObject,...Pe(e)}),nt.strictCreate=(n,e)=>new nt({shape:()=>n,unknownKeys:"strict",catchall:bn.create(),typeName:ce.ZodObject,...Pe(e)}),nt.lazycreate=(n,e)=>new nt({shape:n,unknownKeys:"strip",catchall:bn.create(),typeName:ce.ZodObject,...Pe(e)});class Qn extends $e{_parse(e){const{ctx:r}=this._processInputParams(e),i=this._def.options;function d(u){for(const h of u)if(h.result.status==="valid")return h.result;for(const h of u)if(h.result.status==="dirty")return r.common.issues.push(...h.ctx.common.issues),h.result;const f=u.map(h=>new Tn(h.ctx.common.issues));return oe(r,{code:K.invalid_union,unionErrors:f}),Ne}if(r.common.async)return Promise.all(i.map(async u=>{const f={...r,common:{...r.common,issues:[]},parent:null};return{result:await u._parseAsync({data:r.data,path:r.path,parent:f}),ctx:f}})).then(d);{let u;const f=[];for(const C of i){const x={...r,common:{...r.common,issues:[]},parent:null},A=C._parseSync({data:r.data,path:r.path,parent:x});if(A.status==="valid")return A;A.status==="dirty"&&!u&&(u={result:A,ctx:x}),x.common.issues.length&&f.push(x.common.issues)}if(u)return r.common.issues.push(...u.ctx.common.issues),u.result;const h=f.map(C=>new Tn(C));return oe(r,{code:K.invalid_union,unionErrors:h}),Ne}}get options(){return this._def.options}}Qn.create=(n,e)=>new Qn({options:n,typeName:ce.ZodUnion,...Pe(e)});const ze=n=>n instanceof aa?ze(n.schema):n instanceof Tt?ze(n.innerType()):n instanceof $n?[n.value]:n instanceof In?n.options:n instanceof _n?Object.keys(n.enum):n instanceof ua?ze(n._def.innerType):n instanceof Ma?[void 0]:n instanceof Ot?[null]:null;class _e extends $e{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==te.object)return oe(r,{code:K.invalid_type,expected:te.object,received:r.parsedType}),Ne;const i=this.discriminator,d=r.data[i],u=this.optionsMap.get(d);return u?r.common.async?u._parseAsync({data:r.data,path:r.path,parent:r}):u._parseSync({data:r.data,path:r.path,parent:r}):(oe(r,{code:K.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),Ne)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,i){const d=new Map;for(const u of r){const f=ze(u.shape[e]);if(!f)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const h of f){if(d.has(h))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(h)}`);d.set(h,u)}}return new _e({typeName:ce.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:d,...Pe(i)})}}function Wa(n,e){const r=la(n),i=la(e);if(n===e)return{valid:!0,data:n};if(r===te.object&&i===te.object){const d=ut.objectKeys(e),u=ut.objectKeys(n).filter(h=>d.indexOf(h)!==-1),f={...n,...e};for(const h of u){const C=Wa(n[h],e[h]);if(!C.valid)return{valid:!1};f[h]=C.data}return{valid:!0,data:f}}else if(r===te.array&&i===te.array){if(n.length!==e.length)return{valid:!1};const d=[];for(let u=0;u<n.length;u++){const f=n[u],h=e[u],C=Wa(f,h);if(!C.valid)return{valid:!1};d.push(C.data)}return{valid:!0,data:d}}else return r===te.date&&i===te.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Na extends $e{_parse(e){const{status:r,ctx:i}=this._processInputParams(e),d=(u,f)=>{if(Qa(u)||Qa(f))return Ne;const h=Wa(u.value,f.value);return h.valid?((Aa(u)||Aa(f))&&r.dirty(),{status:r.value,value:h.data}):(oe(i,{code:K.invalid_intersection_types}),Ne)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([u,f])=>d(u,f)):d(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Na.create=(n,e,r)=>new Na({left:n,right:e,typeName:ce.ZodIntersection,...Pe(r)});class Xn extends $e{_parse(e){const{status:r,ctx:i}=this._processInputParams(e);if(i.parsedType!==te.array)return oe(i,{code:K.invalid_type,expected:te.array,received:i.parsedType}),Ne;if(i.data.length<this._def.items.length)return oe(i,{code:K.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ne;!this._def.rest&&i.data.length>this._def.items.length&&(oe(i,{code:K.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const u=[...i.data].map((f,h)=>{const C=this._def.items[h]||this._def.rest;return C?C._parse(new On(i,f,i.path,h)):null}).filter(f=>!!f);return i.common.async?Promise.all(u).then(f=>Yt.mergeArray(r,f)):Yt.mergeArray(r,u)}get items(){return this._def.items}rest(e){return new Xn({...this._def,rest:e})}}Xn.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Xn({items:n,typeName:ce.ZodTuple,rest:null,...Pe(e)})};class un extends $e{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:i}=this._processInputParams(e);if(i.parsedType!==te.object)return oe(i,{code:K.invalid_type,expected:te.object,received:i.parsedType}),Ne;const d=[],u=this._def.keyType,f=this._def.valueType;for(const h in i.data)d.push({key:u._parse(new On(i,h,i.path,h)),value:f._parse(new On(i,i.data[h],i.path,h))});return i.common.async?Yt.mergeObjectAsync(r,d):Yt.mergeObjectSync(r,d)}get element(){return this._def.valueType}static create(e,r,i){return r instanceof $e?new un({keyType:e,valueType:r,typeName:ce.ZodRecord,...Pe(i)}):new un({keyType:Bn.create(),valueType:e,typeName:ce.ZodRecord,...Pe(r)})}}class Fa extends $e{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:i}=this._processInputParams(e);if(i.parsedType!==te.map)return oe(i,{code:K.invalid_type,expected:te.map,received:i.parsedType}),Ne;const d=this._def.keyType,u=this._def.valueType,f=[...i.data.entries()].map(([h,C],x)=>({key:d._parse(new On(i,h,i.path,[x,"key"])),value:u._parse(new On(i,C,i.path,[x,"value"]))}));if(i.common.async){const h=new Map;return Promise.resolve().then(async()=>{for(const C of f){const x=await C.key,A=await C.value;if(x.status==="aborted"||A.status==="aborted")return Ne;(x.status==="dirty"||A.status==="dirty")&&r.dirty(),h.set(x.value,A.value)}return{status:r.value,value:h}})}else{const h=new Map;for(const C of f){const x=C.key,A=C.value;if(x.status==="aborted"||A.status==="aborted")return Ne;(x.status==="dirty"||A.status==="dirty")&&r.dirty(),h.set(x.value,A.value)}return{status:r.value,value:h}}}}Fa.create=(n,e,r)=>new Fa({valueType:e,keyType:n,typeName:ce.ZodMap,...Pe(r)});class hn extends $e{_parse(e){const{status:r,ctx:i}=this._processInputParams(e);if(i.parsedType!==te.set)return oe(i,{code:K.invalid_type,expected:te.set,received:i.parsedType}),Ne;const d=this._def;d.minSize!==null&&i.data.size<d.minSize.value&&(oe(i,{code:K.too_small,minimum:d.minSize.value,type:"set",inclusive:!0,exact:!1,message:d.minSize.message}),r.dirty()),d.maxSize!==null&&i.data.size>d.maxSize.value&&(oe(i,{code:K.too_big,maximum:d.maxSize.value,type:"set",inclusive:!0,exact:!1,message:d.maxSize.message}),r.dirty());const u=this._def.valueType;function f(C){const x=new Set;for(const A of C){if(A.status==="aborted")return Ne;A.status==="dirty"&&r.dirty(),x.add(A.value)}return{status:r.value,value:x}}const h=[...i.data.values()].map((C,x)=>u._parse(new On(i,C,i.path,x)));return i.common.async?Promise.all(h).then(C=>f(C)):f(h)}min(e,r){return new hn({...this._def,minSize:{value:e,message:be.toString(r)}})}max(e,r){return new hn({...this._def,maxSize:{value:e,message:be.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}hn.create=(n,e)=>new hn({valueType:n,minSize:null,maxSize:null,typeName:ce.ZodSet,...Pe(e)});class Zn extends $e{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==te.function)return oe(r,{code:K.invalid_type,expected:te.function,received:r.parsedType}),Ne;function i(h,C){return Ia({data:h,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ya(),Ta].filter(x=>!!x),issueData:{code:K.invalid_arguments,argumentsError:C}})}function d(h,C){return Ia({data:h,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ya(),Ta].filter(x=>!!x),issueData:{code:K.invalid_return_type,returnTypeError:C}})}const u={errorMap:r.common.contextualErrorMap},f=r.data;if(this._def.returns instanceof Gt){const h=this;return dn(async function(...C){const x=new Tn([]),A=await h._def.args.parseAsync(C,u).catch(W=>{throw x.addIssue(i(C,W)),x}),B=await Reflect.apply(f,this,A);return await h._def.returns._def.type.parseAsync(B,u).catch(W=>{throw x.addIssue(d(B,W)),x})})}else{const h=this;return dn(function(...C){const x=h._def.args.safeParse(C,u);if(!x.success)throw new Tn([i(C,x.error)]);const A=Reflect.apply(f,this,x.data),B=h._def.returns.safeParse(A,u);if(!B.success)throw new Tn([d(A,B.error)]);return B.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Zn({...this._def,args:Xn.create(e).rest(Jn.create())})}returns(e){return new Zn({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,i){return new Zn({args:e||Xn.create([]).rest(Jn.create()),returns:r||Jn.create(),typeName:ce.ZodFunction,...Pe(i)})}}class aa extends $e{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}aa.create=(n,e)=>new aa({getter:n,typeName:ce.ZodLazy,...Pe(e)});class $n extends $e{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return oe(r,{received:r.data,code:K.invalid_literal,expected:this._def.value}),Ne}return{status:"valid",value:e.data}}get value(){return this._def.value}}$n.create=(n,e)=>new $n({value:n,typeName:ce.ZodLiteral,...Pe(e)});function ja(n,e){return new In({values:n,typeName:ce.ZodEnum,...Pe(e)})}class In extends $e{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),i=this._def.values;return oe(r,{expected:ut.joinValues(i),received:r.parsedType,code:K.invalid_type}),Ne}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),i=this._def.values;return oe(r,{received:r.data,code:K.invalid_enum_value,options:i}),Ne}return dn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return In.create(e)}exclude(e){return In.create(this.options.filter(r=>!e.includes(r)))}}In.create=ja;class _n extends $e{_parse(e){const r=ut.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==te.string&&i.parsedType!==te.number){const d=ut.objectValues(r);return oe(i,{expected:ut.joinValues(d),received:i.parsedType,code:K.invalid_type}),Ne}if(r.indexOf(e.data)===-1){const d=ut.objectValues(r);return oe(i,{received:i.data,code:K.invalid_enum_value,options:d}),Ne}return dn(e.data)}get enum(){return this._def.values}}_n.create=(n,e)=>new _n({values:n,typeName:ce.ZodNativeEnum,...Pe(e)});class Gt extends $e{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==te.promise&&r.common.async===!1)return oe(r,{code:K.invalid_type,expected:te.promise,received:r.parsedType}),Ne;const i=r.parsedType===te.promise?r.data:Promise.resolve(r.data);return dn(i.then(d=>this._def.type.parseAsync(d,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Gt.create=(n,e)=>new Gt({type:n,typeName:ce.ZodPromise,...Pe(e)});class Tt extends $e{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ce.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:i}=this._processInputParams(e),d=this._def.effect||null,u={addIssue:f=>{oe(i,f),f.fatal?r.abort():r.dirty()},get path(){return i.path}};if(u.addIssue=u.addIssue.bind(u),d.type==="preprocess"){const f=d.transform(i.data,u);return i.common.issues.length?{status:"dirty",value:i.data}:i.common.async?Promise.resolve(f).then(h=>this._def.schema._parseAsync({data:h,path:i.path,parent:i})):this._def.schema._parseSync({data:f,path:i.path,parent:i})}if(d.type==="refinement"){const f=h=>{const C=d.refinement(h,u);if(i.common.async)return Promise.resolve(C);if(C instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return h};if(i.common.async===!1){const h=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return h.status==="aborted"?Ne:(h.status==="dirty"&&r.dirty(),f(h.value),{status:r.value,value:h.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(h=>h.status==="aborted"?Ne:(h.status==="dirty"&&r.dirty(),f(h.value).then(()=>({status:r.value,value:h.value}))))}if(d.type==="transform")if(i.common.async===!1){const f=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!_a(f))return f;const h=d.transform(f.value,u);if(h instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:h}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(f=>_a(f)?Promise.resolve(d.transform(f.value,u)).then(h=>({status:r.value,value:h})):f);ut.assertNever(d)}}Tt.create=(n,e,r)=>new Tt({schema:n,typeName:ce.ZodEffects,effect:e,...Pe(r)}),Tt.createWithPreprocess=(n,e,r)=>new Tt({schema:e,effect:{type:"preprocess",transform:n},typeName:ce.ZodEffects,...Pe(r)});class An extends $e{_parse(e){return this._getType(e)===te.undefined?dn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}An.create=(n,e)=>new An({innerType:n,typeName:ce.ZodOptional,...Pe(e)});class an extends $e{_parse(e){return this._getType(e)===te.null?dn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}an.create=(n,e)=>new an({innerType:n,typeName:ce.ZodNullable,...Pe(e)});class ua extends $e{_parse(e){const{ctx:r}=this._processInputParams(e);let i=r.data;return r.parsedType===te.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}ua.create=(n,e)=>new ua({innerType:n,typeName:ce.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Pe(e)});class Z extends $e{_parse(e){const{ctx:r}=this._processInputParams(e),i={...r,common:{...r.common,issues:[]}},d=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Kn(d)?d.then(u=>({status:"valid",value:u.status==="valid"?u.value:this._def.catchValue({get error(){return new Tn(i.common.issues)},input:i.data})})):{status:"valid",value:d.status==="valid"?d.value:this._def.catchValue({get error(){return new Tn(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}Z.create=(n,e)=>new Z({innerType:n,typeName:ce.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Pe(e)});class T extends $e{_parse(e){if(this._getType(e)!==te.nan){const i=this._getOrReturnCtx(e);return oe(i,{code:K.invalid_type,expected:te.nan,received:i.parsedType}),Ne}return{status:"valid",value:e.data}}}T.create=n=>new T({typeName:ce.ZodNaN,...Pe(n)});const $=Symbol("zod_brand");class fe extends $e{_parse(e){const{ctx:r}=this._processInputParams(e),i=r.data;return this._def.type._parse({data:i,path:r.path,parent:r})}unwrap(){return this._def.type}}class Oe extends $e{_parse(e){const{status:r,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const u=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return u.status==="aborted"?Ne:u.status==="dirty"?(r.dirty(),Ja(u.value)):this._def.out._parseAsync({data:u.value,path:i.path,parent:i})})();{const d=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return d.status==="aborted"?Ne:d.status==="dirty"?(r.dirty(),{status:"dirty",value:d.value}):this._def.out._parseSync({data:d.value,path:i.path,parent:i})}}static create(e,r){return new Oe({in:e,out:r,typeName:ce.ZodPipeline})}}class Qe extends $e{_parse(e){const r=this._def.innerType._parse(e);return _a(r)&&(r.value=Object.freeze(r.value)),r}}Qe.create=(n,e)=>new Qe({innerType:n,typeName:ce.ZodReadonly,...Pe(e)});const kt=(n,e={},r)=>n?na.create().superRefine((i,d)=>{var u,f;if(!n(i)){const h=typeof e=="function"?e(i):typeof e=="string"?{message:e}:e,C=(f=(u=h.fatal)!==null&&u!==void 0?u:r)!==null&&f!==void 0?f:!0,x=typeof h=="string"?{message:h}:h;d.addIssue({code:"custom",...x,fatal:C})}}):na.create(),Bt={object:nt.lazycreate};var ce;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(ce||(ce={}));const Wt=(n,e={message:`Input not instance of ${n.name}`})=>kt(r=>r instanceof n,e),rn=Bn.create,Zt=Yn.create,xa=T.create,ht=da.create,Rn=me.create,pa=Pt.create,Pa=Le.create,Ft=Ma.create,qn=Ot.create,ma=na.create,m=Jn.create,y=bn.create,b=Ra.create,R=nn.create,k=nt.create,N=nt.strictCreate,L=Qn.create,I=_e.create,D=Na.create,G=Xn.create,z=un.create,q=Fa.create,de=hn.create,se=Zn.create,Ie=aa.create,qe=$n.create,Se=In.create,pt=_n.create,Ct=Gt.create,De=Tt.create,We=An.create,Xe=an.create,jt=Tt.createWithPreprocess,$t=Oe.create;var Dn=Object.freeze({__proto__:null,defaultErrorMap:Ta,setErrorMap:$a,getErrorMap:Ya,makeIssue:Ia,EMPTY_PATH:kr,addIssueToContext:oe,ParseStatus:Yt,INVALID:Ne,DIRTY:Ja,OK:dn,isAborted:Qa,isDirty:Aa,isValid:_a,isAsync:Kn,get util(){return ut},get objectUtil(){return ba},ZodParsedType:te,getParsedType:la,ZodType:$e,ZodString:Bn,ZodNumber:Yn,ZodBigInt:da,ZodBoolean:me,ZodDate:Pt,ZodSymbol:Le,ZodUndefined:Ma,ZodNull:Ot,ZodAny:na,ZodUnknown:Jn,ZodNever:bn,ZodVoid:Ra,ZodArray:nn,ZodObject:nt,ZodUnion:Qn,ZodDiscriminatedUnion:_e,ZodIntersection:Na,ZodTuple:Xn,ZodRecord:un,ZodMap:Fa,ZodSet:hn,ZodFunction:Zn,ZodLazy:aa,ZodLiteral:$n,ZodEnum:In,ZodNativeEnum:_n,ZodPromise:Gt,ZodEffects:Tt,ZodTransformer:Tt,ZodOptional:An,ZodNullable:an,ZodDefault:ua,ZodCatch:Z,ZodNaN:T,BRAND:$,ZodBranded:fe,ZodPipeline:Oe,ZodReadonly:Qe,custom:kt,Schema:$e,ZodSchema:$e,late:Bt,get ZodFirstPartyTypeKind(){return ce},coerce:{string:n=>Bn.create({...n,coerce:!0}),number:n=>Yn.create({...n,coerce:!0}),boolean:n=>me.create({...n,coerce:!0}),bigint:n=>da.create({...n,coerce:!0}),date:n=>Pt.create({...n,coerce:!0})},any:ma,array:R,bigint:ht,boolean:Rn,date:pa,discriminatedUnion:I,effect:De,enum:Se,function:se,instanceof:Wt,intersection:D,lazy:Ie,literal:qe,map:q,nan:xa,nativeEnum:pt,never:y,null:qn,nullable:Xe,number:Zt,object:k,oboolean:()=>Rn().optional(),onumber:()=>Zt().optional(),optional:We,ostring:()=>rn().optional(),pipeline:$t,preprocess:jt,promise:Ct,record:z,set:de,strictObject:N,string:rn,symbol:Pa,transformer:De,tuple:G,undefined:Ft,union:L,unknown:m,void:b,NEVER:Ne,ZodIssueCode:K,quotelessJson:cr,ZodError:Tn}),vi=v(63955),Gs=v(74828),Ei=v(45455),bi=v.n(Ei);function Bc(n){const[e,r]=useState([]),i=useApi(alertApiRef),{anchorOrigin:d={vertical:"top",horizontal:"center"},transientTimeoutMs:u}=n,f=u!=null?u:5e3;useEffect(()=>{const x=i.alert$().subscribe(A=>r(B=>B.concat(A)));return()=>{x.unsubscribe()}},[i]);const[h]=e;if(useEffect(()=>{if(h&&h.display==="transient"){const x=setTimeout(()=>{r(A=>{const B=A.filter(H=>H!==h);return B.length===A.length?A:B})},f);return()=>clearTimeout(x)}},[h,f]),e.length===0)return null;const C=()=>{r(x=>x.filter(A=>A!==h))};return React.createElement(Snackbar,{open:!0,anchorOrigin:d},React.createElement(Alert,{action:React.createElement(IconButton,{color:"inherit",size:"small",onClick:C,"data-testid":"error-button-close"},React.createElement(CloseIcon,null)),severity:h.severity},React.createElement(Typography,{component:"span"},String(h.message),e.length>1&&React.createElement("em",null,` (${e.length-1} older ${pluralize("message",e.length-1)})`))))}const Ri="@backstage/autologout:lastSeenOnline",xi=({enableEffect:n,autologoutIsEnabled:e,idleTimeoutSeconds:r,lastSeenOnlineStore:i,identityApi:d})=>{useEffect(()=>{if(e&&n){const u=i.get();if(u){const h=Math.ceil(new Date().getTime()/1e3),C=Math.ceil(u.getTime()/1e3);h-C>r&&d.signOut()}i.save(new Date)}else i.delete()},[e,n,d,r,i])},Ks=n=>{const{idleTimer:e,setOpen:r,open:i,promptTimeoutMillis:d,remainingTime:u,setRemainingTime:f}=n;useEffect(()=>{const A=setInterval(()=>{f(Math.ceil(e.getRemainingTime()))},500);return()=>{clearInterval(A)}},[e,f]);const h=()=>{r(!1),e.activate()},x=Math.max(u-d/1e3,0)>1?"seconds":"second";return React.createElement(Dialog,{open:i,"data-testid":"inactivity-prompt-dialog"},React.createElement(DialogTitle,null,"Logging out due to inactivity"),React.createElement(DialogContent,null,React.createElement(DialogContentText,null,"You are about to be disconnected in"," ",React.createElement("b",null,Math.ceil(u/1e3)," ",x),". Are you still there?")),React.createElement(DialogActions,null,React.createElement(Button$1,{onClick:h,color:"secondary",variant:"contained",size:"small"},"Yes! Don't log me out")))};class Si{constructor(e){this.key=e}save(e){localStorage.setItem(this.key,e.toJSON())}delete(){localStorage.removeItem(this.key)}get(){const e=localStorage.getItem(this.key);return e!==null?new Date(Date.parse(e)):null}}const Ci=({idleTimeoutMinutes:n,events:e,useWorkerTimers:r,logoutIfDisconnected:i,promptBeforeIdleSeconds:d,promptOpen:u,setPromptOpen:f,remainingTimeCountdown:h,setRemainingTimeCountdown:C,identityApi:x,lastSeenOnlineStore:A})=>{const B=d*1e3,H=B>0,W=async()=>{f(!0),C(B)},ne=()=>{f(!1),C(0),x.signOut()},et=()=>{f(!1),C(0)},t=(s,l)=>{A.save(new Date)},a=useIdleTimer({timeout:n*60*1e3,events:e,crossTab:!0,name:"autologout-timer",timers:r?workerTimers:void 0,onIdle:ne,onActive:H?et:void 0,onAction:i?t:void 0,onPrompt:H?W:void 0,promptBeforeIdle:H?B:void 0,syncTimers:1e3});return React.createElement(React.Fragment,null,H&&React.createElement(Ks,{idleTimer:a,open:u,setOpen:f,remainingTime:h,setRemainingTime:C,promptTimeoutMillis:B}))},Ar={enabled:!0,idleTimeoutMinutes:.5,promptBeforeIdleSeconds:10,useWorkerTimers:!0,logoutIfDisconnected:!0},Zc=null,$c=(n,e)=>{var r,i,d,u,f,h,C,x,A,B;return{enabled:(i=(r=n.getOptionalBoolean("auth.autologout.enabled"))!=null?r:e.enabled)!=null?i:Ar.enabled,idleTimeoutMinutes:(u=(d=n.getOptionalNumber("auth.autologout.idleTimeoutMinutes"))!=null?d:e.idleTimeoutMinutes)!=null?u:Ar.idleTimeoutMinutes,promptBeforeIdleSeconds:(h=(f=n.getOptionalNumber("auth.autologout.promptBeforeIdleSeconds"))!=null?f:e.promptBeforeIdleSeconds)!=null?h:Ar.promptBeforeIdleSeconds,useWorkerTimers:(x=(C=n.getOptionalBoolean("auth.autologout.useWorkerTimers"))!=null?C:e.useWorkerTimers)!=null?x:Ar.useWorkerTimers,logoutIfDisconnected:(B=(A=n.getOptionalBoolean("auth.autologout.logoutIfDisconnected"))!=null?A:e.logoutIfDisconnected)!=null?B:Ar.logoutIfDisconnected}},tu=n=>{const e=useApi(identityApiRef),r=useApi(configApiRef),[i,d]=useState(!1);useEffect(()=>{async function et(t){(await t.getCredentials()).token?d(!0):d(!1)}et(e)},[e]);const{enabled:u,idleTimeoutMinutes:f,promptBeforeIdleSeconds:h,logoutIfDisconnected:C,useWorkerTimers:x}=useMemo(()=>$c(r,n),[r,n]);useEffect(()=>{if(f<.5)throw new Error("\u274C idleTimeoutMinutes property should be >= 0.5 minutes (30 seconds).");if(h<0)throw new Error("\u274C promptBeforeIdleSeconds property should be >= 0 seconds. Set to 0 to disable the prompt.");if(f*60<=h)throw new Error("\u274C promptBeforeIdleSeconds should be smaller than idleTimeoutMinutes")},[f,h]);const A=useMemo(()=>new Si(Ri),[]),[B,H]=useState(!1),[W,ne]=useState(0);return xi({enableEffect:C,autologoutIsEnabled:u&&i,idleTimeoutSeconds:f*60,lastSeenOnlineStore:A,identityApi:e}),!u||!i?null:React.createElement(Ci,{idleTimeoutMinutes:f,promptBeforeIdleSeconds:h,useWorkerTimers:x,events:Zc,logoutIfDisconnected:C,promptOpen:B,setPromptOpen:H,remainingTimeCountdown:W,setRemainingTimeCountdown:ne,identityApi:e,lastSeenOnlineStore:A})};function Mn(n){let e=0;for(let i=0;i<n.length;i++)e=n.charCodeAt(i)+((e<<5)-e);let r="#";for(let i=0;i<3;i++){const d=e>>i*8&255;r+=`00${d.toString(16)}`.slice(-2)}return r}function wi(n){var e;const r=n.trim().split(" "),i=(e=r[0])!=null?e:"",d=r.length>1?r[r.length-1]:"";return i&&d?`${i.charAt(0)}${d.charAt(0)}`:i.charAt(0)}const Ys=(0,Y.Z)(n=>({avatar:{width:"4rem",height:"4rem",color:n.palette.common.white},avatarText:{fontWeight:n.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function _c(n){const{displayName:e,picture:r,customStyles:i}=n,d=Ys();let u={...i};const f={fontFamily:u.fontFamily,fontSize:u.fontSize,fontWeight:u.fontWeight};return r||(u={backgroundColor:Mn(e||""),...i}),React.createElement(MaterialAvatar,{alt:e,src:r,className:d.avatar,style:u},e&&React.createElement(Typography,{variant:"h6",component:"span",className:d.avatarText,style:f},wi(e)))}function ki(){const[n]=(0,ct.is)(o.createElement(ct.AW,{index:!0,element:o.createElement("div",null)}));return!n.index}const Dc=(0,Y.Z)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",userSelect:"none",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),Js=n=>/^([a-z+.-]+):/.test(n),Qs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,cs=window.open;if(cs&&!cs.__backstage){const n=function(...r){const i=String(r[0]);if(Qs.test(i))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return cs.apply(this,r)};n.__backstage=!0,window.open=n}const Mc=()=>{try{return(0,Ae.u)(Ae.p).getOptionalString("app.baseUrl")}catch{return}},Ti=()=>{var n;const e="http://sample.dev",r=(n=Mc())!=null?n:"/",{pathname:i}=new URL(r,e);return(0,Me.trimEnd)(i,"/")},Ii=n=>{let e=String(n);const r=Ti(),i=Js(e),d=e.startsWith(r);return!i&&!d&&(e=r.concat(e)),e},Vr=n=>{var e;return n instanceof Array?n.map(Vr).join(" ").trim():typeof n=="object"&&n?Vr((e=n==null?void 0:n.props)==null?void 0:e.children):["string","number"].includes(typeof n)?String(n):""},xn=o.forwardRef(({onClick:n,noTrack:e,...r},i)=>{const d=Dc(),u=(0,Ue.z$)(),f=ki()?Ii(r.to):r.to,h=Vr(r.children)||f,C=Js(f),x=C&&!!/^https?:/.exec(f);if(Qs.test(f))throw new Error("Link component rejected javascript: URL as a security precaution");const A=B=>{n==null||n(B),e||u.captureEvent("click",h,{attributes:{to:f}})};return C?o.createElement(wt.Z,{...x?{target:"_blank",rel:"noopener"}:{},...r,...r["aria-label"]?{"aria-label":`${r["aria-label"]}, Opens in a new window`}:{},ref:i,href:f,onClick:A,className:bt()(d.externalLink,r.className)},r.children,o.createElement(ee.Z,{component:"span",className:d.visuallyHidden},", Opens in a new window")):o.createElement(wt.Z,{...r,ref:i,component:mn.rU,to:f,onClick:A})}),ds=o.forwardRef((n,e)=>o.createElement(xn,{ref:e,...n,color:"initial"})),us=o.forwardRef((n,e)=>o.createElement(Ve.Z,{ref:e,component:ds,...n})),Wc=null;function Nr(n){const{text:e,tooltipDelay:r=1e3,tooltipText:i="Text copied to clipboard","aria-label":d="Copy text"}=n,u=(0,Ae.u)(Ae.r),[f,h]=(0,o.useState)(!1),[{error:C},x]=(0,ue.Z)();(0,o.useEffect)(()=>{C&&u.post(C)},[C,u]);const A=B=>{B.stopPropagation(),h(!0),x(e)};return o.createElement(o.Fragment,null,o.createElement(Xt.ZP,{id:"copy-test-tooltip",title:i,placement:"top",leaveDelay:r,onClose:()=>h(!1),open:f},o.createElement(rt.Z,{onClick:A,"aria-label":d},o.createElement(ke.Z,null))))}function fr(n){const{text:e,language:r,showLineNumbers:i=!1,highlightedNumbers:d,customStyle:u,showCopyCodeButton:f=!1}=n,h=(0,He.Z)(),C=h.palette.type==="dark"?Nn.Z:jn.Z,x=h.palette.type==="dark"?"#256bf3":"#e6ffed";return o.createElement(ye.Z,{position:"relative"},o.createElement(cn.Z,{customStyle:u,language:r,style:C,showLineNumbers:i,wrapLines:!0,lineNumberStyle:{color:h.palette.textVerySubtle},lineProps:A=>d!=null&&d.includes(A)?{style:{backgroundColor:x}}:{}},e),f&&o.createElement(ye.Z,{position:"absolute",top:0,right:0},o.createElement(Nr,{text:e})))}function ra(n){const{title:e,to:r}=n,i=useMediaQuery(d=>d.breakpoints.down("xs"));return r?i?React.createElement(IconButton,{component:Link$1,color:"primary",title:e,size:"small",to:r},React.createElement(AddCircleOutline,null)):React.createElement(Button$1,{component:Link$1,variant:"contained",color:"primary",to:r},e):null}var Pr;(n=>{(e=>{e.TOP_BOTTOM="TB",e.BOTTOM_TOP="BT",e.LEFT_RIGHT="LR",e.RIGHT_LEFT="RL"})(n.Direction||(n.Direction={})),(e=>{e.UP_LEFT="UL",e.UP_RIGHT="UR",e.DOWN_LEFT="DL",e.DOWN_RIGHT="DR"})(n.Alignment||(n.Alignment={})),(e=>{e.NETWORK_SIMPLEX="network-simplex",e.TIGHT_TREE="tight-tree",e.LONGEST_PATH="longest-path"})(n.Ranker||(n.Ranker={})),(e=>{e.LEFT="l",e.RIGHT="r",e.CENTER="c"})(n.LabelPosition||(n.LabelPosition={}))})(Pr||(Pr={}));const ps=(0,Y.Z)(n=>({node:{fill:n.palette.primary.light,stroke:n.palette.primary.light},text:{fill:n.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function Fc({node:{id:n}}){const e=ps(),[r,i]=React.useState(0),[d,u]=React.useState(0),f=React.useRef(null);React.useLayoutEffect(()=>{if(f.current){let{height:A,width:B}=f.current.getBBox();A=Math.round(A),B=Math.round(B),(A!==d||B!==r)&&(i(B),u(A))}},[r,d]);const h=10,C=r+h*2,x=d+h*2;return React.createElement("g",null,React.createElement("rect",{className:e.node,width:C,height:x,rx:10}),React.createElement("text",{ref:f,className:e.text,y:x/2,x:C/2,textAnchor:"middle",alignmentBaseline:"middle"},n))}const gr="arrow-marker",ms="node",jc="edge",fs="label",Xs=(0,ve.Z)(n=>({node:{transition:`${n.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),gs=n=>React.createElement(Fc,{...n});function hs({render:n=gs,setNode:e,node:r}){const{width:i,height:d,x:u=0,y:f=0}=r,h=r,C=Xs(),x=React.useRef(null);return React.useLayoutEffect(()=>{if(x.current){let{height:A,width:B}=x.current.getBBox();A=Math.round(A),B=Math.round(B),(A!==d||B!==i)&&e(r.id,{...r,height:A,width:B})}},[r,i,d,e]),React.createElement("g",{ref:x,"data-testid":ms,className:C.node,transform:`translate(${u-i/2},${f-d/2})`},n({node:h}))}const zc=(0,ve.Z)(n=>({text:{fill:n.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function Ai({edge:{label:n}}){const e=zc();return React.createElement("text",{className:e.text,textAnchor:"middle"},n)}const Ni=(0,ve.Z)(n=>({path:{strokeWidth:1.3,stroke:n.palette.textSubtle,fill:"none",transition:`${n.transitions.duration.shortest}ms`},label:{transition:`${n.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),Pi=n=>React.createElement(Ai,{...n});function Li({render:n=Pi,setEdge:e,id:r,edge:i,curve:d,showArrowHeads:u}){const{x:f=0,y:h=0,width:C,height:x,points:A}=i,B=i,H=Ni(),W=React.useRef(null);React.useLayoutEffect(()=>{if(W.current){let{height:t,width:a}=W.current.getBBox();t=Math.round(t),a=Math.round(a),(t!==x||a!==C)&&e(r,{...i,height:t,width:a})}},[i,x,C,e,r]);let ne="";const et=React.useMemo(()=>d3Shape.line().x(t=>t.x).y(t=>t.y).curve(d3Shape[d]),[d]);if(A){const t=A.filter(a=>isFinite(a.x)&&isFinite(a.y));ne=et(t)||""}return React.createElement(React.Fragment,null,ne&&React.createElement("path",{"data-testid":jc,className:H.path,markerEnd:u?`url(#${gr})`:void 0,d:ne}),B.label?React.createElement("g",{ref:W,"data-testid":fs,className:H.label,transform:`translate(${f},${h})`},n({edge:B})):null)}const eo="workspace";function Uc(n){var e,r;const{edges:i,nodes:d,renderNode:u,direction:f=Pr.Direction.TOP_BOTTOM,align:h,nodeMargin:C=50,edgeMargin:x=10,rankMargin:A=50,paddingX:B=0,paddingY:H=0,acyclicer:W,ranker:ne=Pr.Ranker.NETWORK_SIMPLEX,labelPosition:et=Pr.LabelPosition.RIGHT,labelOffset:t=10,edgeRanks:a=1,edgeWeight:s=1,renderLabel:l,defs:c,zoom:p="enabled",curve:g="curveMonotoneX",showArrowHeads:E=!1,fit:w="grow",...S}=n,P=useTheme$1(),[O,M]=React.useState(100),[F,ae]=React.useState(100),Q=React.useRef(new dagre.graphlib.Graph),[Re,yt]=React.useState(((e=Q.current.graph())==null?void 0:e.width)||0),[at,mt]=React.useState(((r=Q.current.graph())==null?void 0:r.height)||0),[we,st]=React.useState([]),[ot,Sn]=React.useState([]),Qt=Math.max(Re,O),sn=Math.max(at,F),oa=Math.min(at,F),Ua=w==="grow"?sn:oa,Wn=React.useMemo(()=>debounce(it=>{if(!it)return;const It=d3Selection.select(it),Ke=d3Selection.select(it.getElementById(eo));function At(){It.call(d3Zoom.zoom().scaleExtent([1,1/0]).on("zoom",ft=>{ft.transform.x=Math.min(0,Math.max(ft.transform.x,Qt-Qt*ft.transform.k)),ft.transform.y=Math.min(0,Math.max(ft.transform.y,sn-sn*ft.transform.k)),Ke.attr("transform",ft.transform)}))}p==="enabled"?At():p==="enable-on-click"&&It.on("click",()=>At());const{width:Ut,height:Cn}=it.getBoundingClientRect();O!==Ut&&M(Ut),F!==Cn&&ae(Cn)},100),[F,O,Qt,sn,p]),Va=React.useCallback(()=>{const it=Q.current.nodes(),It=Q.current.edges();it.forEach(Ke=>{d.some(Ut=>Ut.id===Ke)||Q.current.removeNode(Ke)}),It.forEach(Ke=>{i.some(Ut=>Ut.from===Ke.v&&Ut.to===Ke.w)||Q.current.removeEdge(Ke.v,Ke.w)}),d.forEach(Ke=>{const At=Q.current.nodes().find(Ut=>Ke.id===Ut);if(At&&Q.current.node(At)){const{width:Ut,height:Cn,x:ft,y:Vt}=Q.current.node(At);Q.current.setNode(At,{...Ke,width:Ut,height:Cn,x:ft,y:Vt})}else Q.current.setNode(Ke.id,{...Ke,width:0,height:0})}),i.forEach(Ke=>{Q.current.setEdge(Ke.from,Ke.to,{...Ke,label:Ke.label,width:0,height:0,labelpos:et,labeloffset:t,weight:s,minlen:a})})},[i,d,et,t,s,a]),vt=React.useMemo(()=>debounce(()=>{dagre.layout(Q.current);const{height:it,width:It}=Q.current.graph(),Ke=Math.max(0,it||0),At=Math.max(0,It||0);yt(At),mt(Ke),st(Q.current.nodes()),Sn(Q.current.edges())},250,{leading:!0}),[]);React.useEffect(()=>(Q.current.setGraph({rankdir:f,align:h,nodesep:C,edgesep:x,ranksep:A,marginx:B,marginy:H,acyclicer:W,ranker:ne}),Va(),vt(),vt.cancel),[W,h,f,x,B,H,C,A,ne,Va,vt]);function Ha(it,It){return Q.current.setNode(it,It),vt(),Q.current}function br(it,It){return Q.current.setEdge(it,It),vt(),Q.current}return React.createElement("svg",{ref:Wn,...S,width:"100%",height:Ua,viewBox:`0 0 ${Qt} ${sn}`},React.createElement("defs",null,React.createElement("marker",{id:gr,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},React.createElement("path",{fill:P.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),c),React.createElement("g",{id:eo},React.createElement("svg",{width:Re,height:at,y:sn/2-at/2,x:Qt/2-Re/2,viewBox:`0 0 ${Re} ${at}`},ot.map(it=>{const It=Q.current.edge(it);return It?React.createElement(Li,{key:`${it.v}-${it.w}`,id:it,setEdge:br,render:l,edge:It,curve:g,showArrowHeads:E}):null}),we.map(it=>{const It=Q.current.node(it);return It?React.createElement(hs,{key:it,setNode:Ha,render:u,node:It}):null}))))}const Oi=(0,Y.Z)(n=>{var e,r;return{root:{padding:n.spacing(0),marginBottom:n.spacing(0),marginTop:n.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:n.spacing(6),marginTop:-n.spacing(3),zIndex:"unset"},icon:{fontSize:n.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap",color:n.palette.banner.text},message:{display:"flex",alignItems:"center","& a":{color:n.palette.banner.link}},button:{color:(e=n.palette.banner.closeButtonColor)!=null?e:"inherit"},info:{backgroundColor:n.palette.banner.info},error:{backgroundColor:n.palette.banner.error},warning:{backgroundColor:(r=n.palette.banner.warning)!=null?r:n.palette.banner.error}}},{name:"BackstageDismissableBanner"}),Vc=n=>{var e;const{variant:r,message:i,id:d,fixed:u=!1}=n,f=Oi(),C=useApi(storageApiRef).forBucket("notifications"),x=(e=C.snapshot("dismissedBanners").value)!=null?e:[],[A,B]=useState(new Set(x)),H=useObservable(C.observe$("dismissedBanners"));useEffect(()=>{var ne;if(H!=null&&H.value){const et=(ne=H==null?void 0:H.value)!=null?ne:[];B(new Set(et))}},[H==null?void 0:H.value]);const W=()=>{C.set("dismissedBanners",[...A,d])};return React.createElement(Snackbar,{anchorOrigin:u?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!A.has(d),classes:{root:classNames(f.root,!u&&f.topPosition)}},React.createElement(SnackbarContent,{classes:{root:classNames(f.content,f[r]),message:f.message},message:i,action:[React.createElement(IconButton,{key:"dismiss",title:"Permanently dismiss this message",className:f.button,onClick:W},React.createElement(CloseIcon,{className:f.icon}))]}))},Bi=(0,Y.Z)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),Zi=({missing:n})=>{const e=Bi();switch(n){case"field":return React.createElement("img",{src:missingAnnotation,className:e.generalImg,alt:"annotation is missing"});case"info":return React.createElement("img",{src:noInformation,alt:"no Information",className:e.generalImg});case"content":return React.createElement("img",{src:createComponent,alt:"create Component",className:e.generalImg});case"data":return React.createElement("img",{src:noBuild,alt:"no Build",className:e.generalImg});default:return null}},$i=(0,Y.Z)(n=>({root:{backgroundColor:n.palette.background.default,padding:n.spacing(2,0,0,0)},action:{marginTop:n.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function _i(n){const{title:e,description:r,missing:i,action:d}=n,u=$i();return React.createElement(Grid,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:u.root,spacing:2},React.createElement(Grid,{item:!0,xs:12,md:6},React.createElement(Grid,{container:!0,direction:"column"},React.createElement(Grid,{item:!0,xs:!0},React.createElement(Typography,{variant:"h5"},e)),React.createElement(Grid,{item:!0,xs:!0},React.createElement(Typography,{variant:"body1"},r)),React.createElement(Grid,{item:!0,xs:!0,className:u.action},d))),React.createElement(Grid,{item:!0,xs:12,md:6,className:u.imageContainer},typeof i=="string"?React.createElement(Zi,{missing:i}):i.customImage))}const ys=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,to=/^.*ANNOTATION.*$/m,vs=ys.match(to)[0],Hc=ys.split(`
`).findIndex(n=>to.test(n)),Di=(0,Y.Z)(n=>({code:{borderRadius:6,margin:n.spacing(2,0),background:n.palette.type==="dark"?"#444":n.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function Gc(n){return Array.from(Array(n+1).keys(),e=>e+Hc)}function Mi(n){const e=n.map(r=>vs.replace("ANNOTATION",r)).join(`
`);return ys.replace(vs,e)}function Wi(n){const e=n.length<=1;return React.createElement(React.Fragment,null,"The ",e?"annotation":"annotations"," ",n.map(r=>React.createElement("code",null,r)).reduce((r,i)=>React.createElement(React.Fragment,null,r,", ",i))," ",e?"is":"are"," missing. You need to add the"," ",e?"annotation":"annotations"," to your component if you want to enable this tool.")}function Kc(n){const{annotation:e,readMoreUrl:r}=n,i=Array.isArray(e)?e:[e],d=r||"https://backstage.io/docs/features/software-catalog/well-known-annotations",u=Di();return React.createElement(_i,{missing:"field",title:"Missing Annotation",description:Wi(i),action:React.createElement(React.Fragment,null,React.createElement(Typography,{variant:"body1"},"Add the annotation to your component YAML as shown in the highlighted example below:"),React.createElement(Box,{className:u.code},React.createElement(fr,{text:Mi(i),language:"yaml",showLineNumbers:!0,highlightedNumbers:Gc(i.length),customStyle:{background:"inherit",fontSize:"115%"}})),React.createElement(Button$1,{color:"primary",component:xn,to:d},"Read more"))})}const no=(0,Y.Z)(n=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${n.palette.border}`},"& th, & td":{border:`1px solid ${n.palette.border}`,padding:n.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:n.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:n.palette.background.paper},"& tr":{backgroundColor:n.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:n.palette.background.default},"& a":{color:n.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),Hr=(n,e)=>e?typeof e=="string"?n+e:o.Children.toArray(e.props.children).reduce(Hr,n):n,qa=({level:n,children:e})=>{const d=o.Children.toArray(e).reduce(Hr,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return o.createElement(`h${n}`,{id:d},e)},ao={code:({inline:n,className:e,children:r,...i})=>{const d=String(r).replace(/\n+$/,""),u=/language-(\w+)/.exec(e||"");return!n&&u?o.createElement(fr,{language:u[1],text:d}):o.createElement("code",{className:e,...i},r)},h1:qa,h2:qa,h3:qa,h4:qa,h5:qa,h6:qa};function Fi(n){const{content:e,dialect:r="gfm",linkTarget:i,transformLinkUri:d,transformImageUri:u,className:f}=n,h=no();return o.createElement(Dt.D,{remarkPlugins:r==="gfm"?[Ht.Z]:[],className:`${h.markdown} ${f}`,children:e,components:ao,linkTarget:i,transformLinkUri:d,transformImageUri:u})}const Gr=(n,e)=>(e.palette.type==="light"?lt._j:lt.$n)(e.palette[n].light,.6),ro=(n,e)=>(e.palette.type==="light"?lt.$n:lt._j)(e.palette[n].light,.9),so=(0,Y.Z)(n=>({root:{marginRight:n.spacing(1),fill:({severity:e})=>Gr(e,n)}})),ji=({severity:n})=>{const e=so({severity:n});return o.createElement(gt.Z,{classes:e})},Yc=({severity:n})=>{const e=so({severity:n});return o.createElement(Lt.Z,{classes:e})},Kr=(0,Y.Z)(n=>({panel:{backgroundColor:({severity:e})=>ro(e,n),color:({severity:e})=>Gr(e,n),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:e})=>Gr(e,n),fontWeight:n.typography.fontWeightBold},markdownContent:{"& p":{display:"inline"}},message:{width:"100%",display:"block",color:({severity:e})=>Gr(e,n),backgroundColor:({severity:e})=>ro(e,n)},details:{width:"100%",display:"block",color:n.palette.textContrast,backgroundColor:n.palette.background.default,border:`1px solid ${n.palette.border}`,padding:n.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),oo=n=>n.charAt(0).toLocaleUpperCase("en-US")+n.slice(1);function io(n){const{severity:e="warning",title:r,titleFormat:i,message:d,children:u,defaultExpanded:f}=n,h=Kr({severity:e}),C=oo(e)+(r?`: ${r}`:"");return o.createElement(Ze.Z,{defaultExpanded:f!=null?f:!1,className:h.panel,role:"alert"},o.createElement(Ge.Z,{expandIcon:o.createElement(Yc,{severity:e}),className:h.summary},o.createElement(ji,{severity:e}),o.createElement(ee.Z,{className:h.summaryText,variant:"subtitle1"},i==="markdown"?o.createElement(Fi,{content:C,className:h.markdownContent}):C)),(d||u)&&o.createElement(Ee.Z,null,o.createElement(J.Z,{container:!0},d&&o.createElement(J.Z,{item:!0,xs:12},o.createElement(ee.Z,{className:h.message,variant:"body1"},d)),u&&o.createElement(J.Z,{item:!0,xs:12,className:h.details},u))))}const zi=(0,Y.Z)(n=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:n.spacing(2)},divider:{margin:n.spacing(2)}}),{name:"BackstageErrorPanel"}),Ui=({error:n,message:e,stack:r,children:i})=>{const d=zi();return o.createElement(pe.Z,{dense:!0},o.createElement(xe.Z,{alignItems:"flex-start"},o.createElement(Be.Z,{classes:{secondary:d.text},primary:"Error",secondary:n}),o.createElement(Nr,{text:n})),o.createElement(xe.Z,{alignItems:"flex-start"},o.createElement(Be.Z,{classes:{secondary:d.text},primary:"Message",secondary:e}),o.createElement(Nr,{text:e})),r&&o.createElement(xe.Z,{alignItems:"flex-start"},o.createElement(Be.Z,{classes:{secondary:d.text},primary:"Stack Trace",secondary:r}),o.createElement(Nr,{text:r})),i)};function Yr(n){const{title:e,error:r,defaultExpanded:i,titleFormat:d,children:u}=n;return o.createElement(io,{severity:"error",title:e!=null?e:r.message,defaultExpanded:i,titleFormat:d},o.createElement(Ui,{error:r.name,message:r.message,stack:r.stack,children:u}))}const Vi=(0,Y.Z)(n=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:n.spacing(2)},divider:{margin:n.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function Jc(n){var e;const{title:r,error:i,defaultExpanded:d}=n,u=Vi();if(i.name!=="ResponseError")return React.createElement(Yr,{title:r!=null?r:i.message,defaultExpanded:d,error:i});const{body:f,cause:h}=i,{request:C,response:x}=f,A=`${x.statusCode}: ${h.name}`,B=C&&`${C.method} ${C.url}`,H=h.message.replace(/\\n/g,`
`),W=(e=h.stack)==null?void 0:e.replace(/\\n/g,`
`),ne=JSON.stringify(f,void 0,2);return React.createElement(Yr,{title:r!=null?r:i.message,defaultExpanded:d,error:{name:A,message:H,stack:W}},B&&React.createElement(ListItem,{alignItems:"flex-start"},React.createElement(ListItemText,{classes:{secondary:u.text},primary:"Request",secondary:C?`${B}`:void 0}),React.createElement(Nr,{text:B})),React.createElement(React.Fragment,null,React.createElement(Divider,{component:"li",className:u.divider}),React.createElement(ListItem,{alignItems:"flex-start"},React.createElement(ListItemText,{classes:{secondary:u.text},primary:"Full Error as JSON"})),React.createElement(fr,{language:"json",text:ne,showCopyCodeButton:!0})))}function Hi(n){const e=document.createElement("div");return e.setAttribute("id",n),e}function Gi(n){document.body.insertBefore(n,document.body.lastElementChild.nextElementSibling)}function Jr(n){const e=useRef(null);useEffect(function(){const d=document.querySelector(`#${n}`),u=d||Hi(n);return d||Gi(u),u.appendChild(e.current),function(){e.current.remove(),u.childNodes.length===-1&&u.remove()}},[n]);function r(){return e.current||(e.current=document.createElement("div")),e.current}return r()}const Es="core.calloutSeen";function Ki(){const[n,e]=useState(()=>{const i=localStorage.getItem(Es);return i?JSON.parse(i):{}}),r=useCallback((i,d)=>{const u=localStorage.getItem(Es),h={...u?JSON.parse(u):{},[i]:d};e(h),localStorage.setItem(Es,JSON.stringify(h))},[]);return{states:n,setState:r}}function Yi(n){const{states:e,setState:r}=Ki(),i=useCallback(()=>{r(n,!0)},[r,n]);return{seen:e[n]===!0,markSeen:i}}function Ji(n){const{seen:e,markSeen:r}=Yi(n);return{show:e===!1,hide:r}}const Qi=(0,Y.Z)(n=>({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:`2px solid ${n.palette.common.white}`,zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:n.palette.common.white,zIndex:2003}}),{name:"BackstageFeatureCalloutCircular"});function lo(n){const{featureId:e,title:r,description:i,children:d}=n,{show:u,hide:f}=Ji(e),h=Jr("core.callout"),C=useRef(null),[x,A]=useState(),B=Qi(),H=useCallback(()=>{if(C.current){const W=C.current.getBoundingClientRect(),ne=Math.max(W.width,W.height),et=800,t=W.x-(ne-W.width)/2-et,a=W.y-(ne-W.height)/2-et,s=ne+2*et,l=450,c=W.x+W.width/2-l,p=W.y-(ne-W.height)/2+ne+20;A({dotLeft:t,dotTop:a,dotSize:s,borderWidth:et,textTop:p,textLeft:c,textWidth:l})}},[]);return useEffect(()=>(window.addEventListener("resize",H),window.addEventListener("scroll",H),()=>{window.removeEventListener("resize",H),window.removeEventListener("scroll",H)}),[H]),useLayoutEffect(H,[C.current,H]),u?React.createElement(React.Fragment,null,React.createElement(Box,{className:B.featureWrapper,ref:C},d),createPortal(React.createElement(Box,{className:B.backdrop},React.createElement(ClickAwayListener,{onClickAway:f},React.createElement(React.Fragment,null,React.createElement(Box,{className:B.dot,"data-testid":"dot",style:{left:x==null?void 0:x.dotLeft,top:x==null?void 0:x.dotTop,width:x==null?void 0:x.dotSize,height:x==null?void 0:x.dotSize,borderWidth:x==null?void 0:x.borderWidth},onClick:f,onKeyDown:f,role:"button",tabIndex:0},React.createElement(Box,{className:B.pulseCircle})),React.createElement(Box,{className:B.text,"data-testid":"text",style:{left:x==null?void 0:x.textLeft,top:x==null?void 0:x.textTop,width:x==null?void 0:x.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},r),React.createElement(Typography,null,i))))),h)):React.createElement(React.Fragment,null,d)}const Xi=(0,Y.Z)(n=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:n.palette.text.secondary,cursor:"default"},primary:{color:n.palette.primary.main},secondary:{color:n.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:n.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function qi({color:n="primary",disabled:e=!1,href:r="#",icon:i=React.createElement(LinkIcon,null),label:d,onClick:u,title:f}){const h=Xi();return e?React.createElement(Box,{title:f,className:classNames(h.link,h.disabled)},i,React.createElement(Typography,{variant:"caption",component:"span",className:h.label},d)):React.createElement(xn,{title:f,className:classNames(h.link,h[n]),to:r,onClick:u},i,React.createElement(Typography,{variant:"caption",component:"span",className:h.label},d))}const el=(0,Y.Z)(n=>({links:{margin:n.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:n.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function Qc(n){const{links:e}=n,r=el();return React.createElement("nav",{className:r.links},e.map((i,d)=>React.createElement(qi,{key:d+1,...i})))}const tl=n=>{const e=n==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${e}) 0%,
    hsla(0, 0%, ${e}, 0.987) 8.1%,
    hsla(0, 0%, ${e}, 0.951) 15.5%,
    hsla(0, 0%, ${e}, 0.896) 22.5%,
    hsla(0, 0%, ${e}, 0.825) 29%,
    hsla(0, 0%, ${e}, 0.741) 35.3%,
    hsla(0, 0%, ${e}, 0.648) 41.2%,
    hsla(0, 0%, ${e}, 0.55) 47.1%,
    hsla(0, 0%, ${e}, 0.45) 52.9%,
    hsla(0, 0%, ${e}, 0.352) 58.8%,
    hsla(0, 0%, ${e}, 0.259) 64.7%,
    hsla(0, 0%, ${e}, 0.175) 71%,
    hsla(0, 0%, ${e}, 0.104) 77.5%,
    hsla(0, 0%, ${e}, 0.049) 84.5%,
    hsla(0, 0%, ${e}, 0.013) 91.9%,
    hsla(0, 0%, ${e}, 0) 100%
  `},nl=100,bs=10,al=(0,Y.Z)(n=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:nl,height:`calc(100% + ${bs}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-bs,background:`linear-gradient(90deg, ${tl(n.palette.type)})`},fadeRight:{right:-bs,background:`linear-gradient(270deg, ${tl(n.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-n.spacing(2)},buttonRight:{right:-n.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function Xc(n){const[[e,r],i]=React.useState([0,0]);return React.useLayoutEffect(()=>{const d=n.current;if(!d){i([0,0]);return}const u=()=>{const f=d.scrollLeft,h=d.scrollWidth-d.offsetWidth-d.scrollLeft;i([f,h])};return u(),d.addEventListener("scroll",u),window.addEventListener("resize",u),()=>{d.removeEventListener("scroll",u),window.removeEventListener("resize",u)}},[n]),[e,r]}function co(n,e,r){const[i,d]=React.useState(0);return React.useLayoutEffect(()=>{if(i===0)return;const u=window.performance.now(),f=requestAnimationFrame(h=>{if(!n.current)return;const C=h-u,x=Math.abs(i)*C/e,B=Math.max(r,x)*Math.sign(i);n.current.scrollBy({left:B});const H=i-B;Math.sign(i)!==Math.sign(H)?d(0):d(H)});return()=>cancelAnimationFrame(f)},[n,i,e,r]),d}function qc(n){const{scrollStep:e=100,scrollSpeed:r=50,minScrollDistance:i=5,children:d,...u}=n,f=al(n),h=React.useRef(),[C,x]=Xc(h),A=co(h,r,i),B=H=>{h.current&&A(H?e:-e)};return React.createElement(Box,{...u,className:f.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:f.container,ref:h},d),React.createElement(Box,{className:classNames(f.fade,f.fadeLeft,{[f.fadeHidden]:C===0})}),React.createElement(Box,{className:classNames(f.fade,f.fadeRight,{[f.fadeHidden]:x===0})}),C>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>B(!1),className:classNames(f.button,f.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),x>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>B(!0),className:classNames(f.button,f.buttonRight,{})},React.createElement(ChevronRight,null)))}const Rs=(0,Y.Z)(n=>({alpha:{color:n.palette.common.white,fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}}),{name:"BackstageLifecycle"});function ed(n){const e=Rs(n),{shorthand:r,alpha:i}=n;return r?React.createElement(Typography,{component:"span",className:e[i?"alpha":"beta"],style:{fontSize:"120%"}},i?React.createElement(React.Fragment,null,"\u03B1"):React.createElement(React.Fragment,null,"\u03B2")):React.createElement(Typography,{component:"span",className:e[i?"alpha":"beta"]},i?"Alpha":"Beta")}const rl=(0,o.lazy)(()=>Promise.all([v.e(7996),v.e(3951),v.e(1704)]).then(v.bind(v,11704)).then(n=>({default:n.RealLogViewer})));function td(n){const{Progress:e}=useApp().getComponents();return React.createElement(Suspense,{fallback:React.createElement(e,null)},React.createElement(rl,{...n}))}const nd=(0,Y.Z)(n=>({root:{paddingLeft:n.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),sl=({request:n,busy:e,setBusy:r})=>{const i=nd(),[d,u]=useState(),f=async()=>{r(!0);try{await n.trigger()}catch(C){u(isError(C)?C.message:"An unspecified error occurred")}finally{r(!1)}},h=n.provider.icon;return React.createElement(ListItem,{disabled:e,classes:{root:i.root}},React.createElement(ListItemAvatar,null,React.createElement(h,{fontSize:"large"})),React.createElement(ListItemText,{primary:n.provider.title,secondary:d&&React.createElement(Typography,{color:"error"},d)}),React.createElement(Button$1,{color:"primary",variant:"contained",onClick:f},"Log in"))},ad=(0,Y.Z)(n=>({dialog:{paddingTop:n.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:n.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:n.spacing(2,0)}}),{name:"OAuthRequestDialog"});function rd(n){var e;const r=ad(),[i,d]=useState(!1),u=useApi(oauthRequestApiRef),h=(e=useApi(configApiRef).getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?e:!1,C=useObservable(useMemo(()=>u.authRequest$(),[u]),[]),x=()=>{C.forEach(A=>A.reject())};return React.createElement(Dialog,{open:Boolean(C.length),fullWidth:!0,maxWidth:"xs",classes:{paper:r.dialog},"aria-labelledby":"oauth-req-dialog-title"},React.createElement("main",null,React.createElement(DialogTitle,{classes:{root:r.title},id:"oauth-req-dialog-title"},React.createElement(Typography,{className:r.titleHeading,variant:"h1",variantMapping:{h1:"span"}},"Login Required"),h?React.createElement(Typography,null,"This will trigger a http redirect to OAuth Login."):null),React.createElement(DialogContent,{dividers:!0,classes:{root:r.contentList}},React.createElement(List,null,C.map(A=>React.createElement(sl,{key:A.provider.title,request:A,busy:i,setBusy:d}))))),React.createElement(DialogActions,{classes:{root:r.actionButtons}},React.createElement(Button$1,{onClick:x},"Reject All")))}const sd=(0,Y.Z)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function ol(n){var e;const[r,i]=(0,o.useState)(!1),d=U(),u=sd(),f=h=>{d()&&i(h)};return o.createElement(Xt.ZP,{title:(e=n.title)!=null?e:n.text||"",placement:n.placement,disableHoverListener:!r},o.createElement(Ln(),{text:n.text,line:n.line,onToggled:f,containerClassName:u.container}))}function Qr(n){const e=useTheme(),[r,i]=useState(!1);return useEffect(()=>{const d=setTimeout(()=>i(!0),e.transitions.duration.short);return()=>clearTimeout(d)},[e.transitions.duration.short]),r?React.createElement(LinearProgress,{...n,"data-testid":"progress"}):React.createElement(Box,{display:"none"})}const hr=(0,Y.Z)(n=>({root:{maxWidth:"fit-content",padding:n.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:n.palette.textSubtle},arrow:{color:n.palette.textSubtle}}),{name:"BackstageBottomLink"});function uo(n){const{link:e,title:r,onClick:i}=n,d=hr();return o.createElement(ye.Z,null,o.createElement(Pn.Z,null),o.createElement(xn,{to:e,onClick:i,underline:"none"},o.createElement(ye.Z,{display:"flex",alignItems:"center",className:d.root},o.createElement(ye.Z,{className:d.boxTitle,fontWeight:"fontWeightBold",m:1},o.createElement(ee.Z,null,o.createElement("strong",null,r))),o.createElement(Je.Z,{className:d.arrow}))))}const il=n=>{const{slackChannel:e}=n;if(e){if(typeof e=="string")return o.createElement(ee.Z,null,"Please contact ",e," for help.");if(!e.href)return o.createElement(ee.Z,null,"Please contact ",e.name," for help.")}else return null;return o.createElement(us,{to:e.href,variant:"contained"},e.name)},po=class extends o.Component{constructor(e){super(e),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(e,r){console.error(`ErrorBoundary, error: ${e}, info: ${r}`),this.setState({error:e,errorInfo:r})}render(){const{slackChannel:e,children:r}=this.props,{error:i}=this.state;return i?o.createElement(Yr,{title:"Something Went Wrong",error:i},o.createElement(il,{slackChannel:e})):r}},ll=(0,Y.Z)(n=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:n.spacing(2,2,2,2.5)},headerTitle:{fontWeight:n.typography.fontWeightBold},headerSubheader:{paddingTop:n.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),cl=(0,Ye.Z)(n=>({root:{display:"inline-block",padding:n.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(V.Z),dl={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function Lr(n){const{title:e,subheader:r,divider:i=!0,deepLink:d,slackChannel:u,errorBoundaryProps:f,variant:h,children:C,headerStyle:x,headerProps:A,icon:B,action:H,actionsClassName:W,actions:ne,cardClassName:et,actionsTopRight:t,className:a,noPadding:s,titleTypographyProps:l}=n,c=ll();let p={},g={};h&&h.split(/[\s]+/g).forEach(P=>{p={...p,...dl.card[P]},g={...g,...dl.cardContent[P]}});const E=()=>!r&&!B?null:o.createElement("div",{className:c.headerSubheader,"data-testid":"info-card-subheader"},r&&o.createElement("div",{className:c.subheader},r),B),w=f||(u?{slackChannel:u}:{});return o.createElement(_.Z,{style:p,className:a},o.createElement(po,{...w},e&&o.createElement(he.Z,{classes:{root:c.header,title:c.headerTitle,subheader:c.headerSubheader,avatar:c.headerAvatar,action:c.headerAction,content:c.headerContent},title:e,subheader:E(),action:H,style:{...x},titleTypographyProps:l,...A}),t&&o.createElement(cl,null,t),i&&o.createElement(Pn.Z,null),o.createElement(le.Z,{className:bt()(et,{[c.noPadding]:s}),style:g},C),ne&&o.createElement(V.Z,{className:W},ne),d&&o.createElement(uo,{...d})))}const od=(0,Y.Z)(n=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:n.typography.pxToRem(45),fontWeight:n.typography.fontWeightBold,color:n.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),Or={fractional:!0,inverse:!1,unit:"%",max:100},mo=({palette:n,value:e,inverse:r,max:i})=>{if(isNaN(e))return"#ddd";const d=i||Or.max,u=r?d-e:e;return u<d/3?n.status.error:u<d*(2/3)?n.status.warning:n.status.ok};function fo(n){const[e,r]=useState(null),{getColor:i=mo}=n,d=od(n),{palette:u}=useTheme(),{value:f,fractional:h,inverse:C,unit:x,max:A,description:B}={...Or,...n},H=h?Math.round(f*A):f,W=A!==100?Math.round(f):H,[ne,et]=useState(!1);return useEffect(()=>{const t=e,a=()=>et(!0),s=()=>et(!1);return t&&B?(t.addEventListener("mouseenter",a),t.addEventListener("mouseleave",s),()=>{t.removeEventListener("mouseenter",a),t.removeEventListener("mouseleave",s)}):()=>{et(!1)}},[B,e]),React.createElement(Box,{ref:r,className:d.root},React.createElement(Circle,{strokeLinecap:"butt",percent:H,strokeWidth:12,trailWidth:12,strokeColor:i({palette:u,value:W,inverse:C,max:A}),className:d.circle}),B&&ne?React.createElement(Box,{className:d.description},B):React.createElement(Box,{className:d.overlay},isNaN(f)?"N/A":`${W}${x}`))}const ul=(0,Y.Z)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function pl(n){const e=ul(n),{title:r,subheader:i,progress:d,inverse:u,deepLink:f,description:h,icon:C,variant:x,getColor:A}=n,B={inverse:u,description:h,getColor:A,value:d};return React.createElement(Box,{className:e.root},React.createElement(Lr,{title:r,subheader:i,deepLink:f,variant:x,icon:C},React.createElement(fo,{...B})))}function id(n){const{value:e,getColor:r=mo,width:i="thick"}=n,{palette:d}=useTheme();if(isNaN(e))return null;let u=Math.round(e*100*100)/100;u>100&&(u=100);const f=i==="thick"?4:1,h=r({palette:d,value:u,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${u}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:u,strokeWidth:f,trailWidth:f,strokeColor:h})))}const ml=(0,Y.Z)(n=>(0,tt.Z)({icon:{position:"absolute",right:n.spacing(.5),pointerEvents:"none"}}),{name:"BackstageClosedDropdown"}),go=()=>{const n=ml();return o.createElement(wn.Z,{className:n.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"#616161"}))},yr=(0,Y.Z)(n=>(0,tt.Z)({icon:{position:"absolute",right:n.spacing(.5),pointerEvents:"none"}}),{name:"BackstageOpenedDropdown"}),fl=()=>{const n=yr();return o.createElement(wn.Z,{className:n.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"#616161"}))},ho=(0,Ye.Z)(n=>(0,tt.Z)({root:{"label + &":{marginTop:n.spacing(3)},"&.Mui-focused > div[role=button]":{borderColor:n.palette.primary.main}},input:{borderRadius:n.shape.borderRadius,position:"relative",backgroundColor:n.palette.background.paper,border:"1px solid #ced4da",fontSize:n.typography.body1.fontSize,padding:n.spacing(1.25,3.25,1.25,1.5),transition:n.transitions.create(["border-color","box-shadow"]),fontFamily:"Helvetica Neue","&:focus":{background:n.palette.background.paper,borderRadius:n.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(Un.Z),yo=(0,Y.Z)(n=>(0,tt.Z)({formControl:{margin:n.spacing(1,0),maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:n.typography.body2.fontSize,fontFamily:n.typography.fontFamily,color:n.palette.text.primary,"&.Mui-focused":{color:n.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:n.typography.body2.fontSize,fontFamily:n.typography.fontFamily,color:n.palette.text.primary,"&.Mui-focused":{color:n.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function gl(n){const{multiple:e,items:r,label:i,placeholder:d,selected:u,onChange:f,triggerReset:h,native:C=!1,disabled:x=!1,margin:A}=n,B=yo(),[H,W]=(0,o.useState)(u||(e?[]:"")),[ne,et]=(0,o.useState)(!1);(0,o.useEffect)(()=>{W(e?[]:"")},[h,e]),(0,o.useEffect)(()=>{W(u||(e?[]:""))},[u,e]);const t=c=>{W(c.target.value),f(c.target.value)},a=c=>{if(x){c.preventDefault();return}et(p=>e&&!(c.target instanceof HTMLElement)?!0:!p)},s=()=>{et(!1)},l=c=>()=>{const p=H.filter(g=>g!==c);W(p),f(p)};return o.createElement(ye.Z,{className:B.root},o.createElement(Kt.Z,{className:B.formControl},o.createElement(ha.Z,{className:B.formLabel},i),o.createElement(Ca.Z,{"aria-label":i,value:H,native:C,disabled:x,"data-testid":"select",displayEmpty:!0,multiple:e,margin:A,onChange:t,open:ne,onOpen:a,onClose:s,input:o.createElement(ho,null),label:i,renderValue:c=>{var p;return e&&H.length!==0?o.createElement(ye.Z,{className:B.chips},c.map(g=>{const E=r.find(w=>w.value===g);return E?o.createElement(gn.Z,{key:E==null?void 0:E.value,label:E==null?void 0:E.label,clickable:!0,onDelete:l(g),className:B.chip}):!1})):o.createElement(ee.Z,null,H.length===0?d||"":(p=r.find(g=>g.value===c))==null?void 0:p.label)},IconComponent:()=>ne?o.createElement(fl,null):o.createElement(go,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},d&&!e&&o.createElement(ya.Z,{value:[]},d),C?r&&r.map(c=>o.createElement("option",{value:c.value,key:c.value},c.label)):r&&r.map(c=>o.createElement(ya.Z,{key:c.value,value:c.value},e&&o.createElement(St.Z,{color:"primary",checked:H.includes(c.value)||!1,className:B.checkbox}),c.label)))))}const xs=()=>{},hl=o.createContext({stepperLength:0,stepIndex:0,setStepIndex:xs,stepHistory:[],setStepHistory:xs,onStepChange:xs});function nu(n){const{children:e,elevated:r,onStepChange:i,activeStep:d=0}=n,[u,f]=useState(d),[h,C]=useState([0]);useEffect(()=>{f(d)},[d]);const x=[];let A;return Children.forEach(e,B=>{isValidElement(B)&&(B.props.end?A=B:x.push(B))}),React.createElement(React.Fragment,null,React.createElement(hl.Provider,{value:{stepIndex:u,setStepIndex:f,stepHistory:h,setStepHistory:C,onStepChange:i,stepperLength:Children.count(e)}},React.createElement(MuiStepper,{activeStep:u,orientation:"vertical",elevation:r?2:0},x)),u>=Children.count(e)-1&&A)}const yl=(0,Y.Z)(n=>({root:{marginTop:n.spacing(3),"& button":{marginRight:n.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),vl=({text:n,handleClick:e})=>React.createElement(Button$1,{onClick:e},n||"Reset"),El=({text:n,handleClick:e,disabled:r,last:i,stepIndex:d})=>React.createElement(Button$1,{variant:"contained",color:"primary",disabled:r,"data-testid":`nextButton-${d}`,onClick:e},n||(i?"Finish":"Next")),bl=({text:n,handleClick:e,disabled:r,stepIndex:i})=>React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:r,"data-testid":`skipButton-${i}`,onClick:e},n||"Skip"),Rl=({text:n,handleClick:e,disabled:r,stepIndex:i})=>React.createElement(Button$1,{onClick:e,"data-testid":`backButton-${i}`,disabled:r},n||"Back"),vo=({actions:n={},children:e})=>{const r=yl(),{stepperLength:i,stepIndex:d,setStepIndex:u,stepHistory:f,setStepHistory:h,onStepChange:C}=useContext(hl),x=(W,ne)=>{ne&&ne(),C&&C(d,W),u(W)},A=()=>{const W=n.nextStep?n.nextStep(d,i-1):d+1;x(W,n.onNext),h([...f,W])},B=()=>{f.pop(),x(f[f.length-1],n.onBack),h([...f])},H=()=>{x(0,n.onRestart),h([0])};return React.createElement(Box,{className:r.root},[void 0,!0].includes(n.showBack)&&d!==0&&React.createElement(Rl,{text:n.backText,handleClick:B,disabled:d===0,stepIndex:d}),n.showSkip&&React.createElement(bl,{text:n.skipText,handleClick:A,disabled:!!i&&d>=i||!!n.canSkip&&!n.canSkip(),stepIndex:d}),[void 0,!0].includes(n.showNext)&&React.createElement(El,{text:n.nextText,handleClick:A,disabled:!!i&&d>=i||!!n.canNext&&!n.canNext(),stepIndex:d}),n.showRestart&&d!==0&&React.createElement(vl,{text:n.restartText,handleClick:H,stepIndex:d}),e)},xl=(0,Y.Z)(n=>({end:{padding:n.spacing(3)}}),{name:"SimpleStepperStep"});function Eo(n){const{title:e,children:r,end:i,actions:d,...u}=n,f=xl();return i?React.createElement(Box,{className:f.end},React.createElement(Typography,{variant:"h6"},e),r,React.createElement(vo,{actions:{...d||{},showNext:!1}})):React.createElement(MuiStep,{...u},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},e)),React.createElement(StepContent,null,r,React.createElement(vo,{actions:d})))}const er=(0,Y.Z)(n=>({status:{fontWeight:n.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:n.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:n.palette.status.ok}},warning:{"&::before":{backgroundColor:n.palette.status.warning}},error:{"&::before":{backgroundColor:n.palette.status.error}},pending:{"&::before":{backgroundColor:n.palette.status.pending}},running:{"&::before":{backgroundColor:n.palette.status.running}},aborted:{"&::before":{backgroundColor:n.palette.status.aborted}}}),{name:"BackstageStatus"});function au(n){const e=er(n);return React.createElement(Typography,{component:"span",className:classNames(e.status,e.ok),"aria-label":"Status ok","aria-hidden":"true",...n})}function ld(n){const e=er(n);return React.createElement(Typography,{component:"span",className:classNames(e.status,e.warning),"aria-label":"Status warning","aria-hidden":"true",...n})}function cd(n){const e=er(n);return React.createElement(Typography,{component:"span",className:classNames(e.status,e.error),"aria-label":"Status error","aria-hidden":"true",...n})}function dd(n){const e=er(n);return React.createElement(Typography,{component:"span",className:classNames(e.status,e.pending),"aria-label":"Status pending","aria-hidden":"true",...n})}function ud(n){const e=er(n);return React.createElement(Typography,{component:"span",className:classNames(e.status,e.running),"aria-label":"Status running","aria-hidden":"true",...n})}function pd(n){const e=er(n);return React.createElement(Typography,{component:"span",className:classNames(e.status,e.aborted),"aria-label":"Status aborted","aria-hidden":"true",...n})}const bo=n=>(0,tt.Z)({root:{fontWeight:n.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:n.spacing(4),border:"0",verticalAlign:"top"}}),Sl={root:{border:"0",verticalAlign:"top"}},md=n=>(0,tt.Z)({root:{margin:n.spacing(0,0,-1,0)}}),vr=n=>(0,tt.Z)({root:{padding:n.spacing(0,0,1,0)},random:{}}),fd=(0,Ye.Z)(bo,{name:"BackstageMetadataTableTitleCell"})(kn.Z),gd=(0,Ye.Z)(Sl,{name:"BackstageMetadataTableCell"})(kn.Z),hd=({dense:n,children:e})=>React.createElement(Table$1,{size:n?"small":"medium"},React.createElement(TableBody,null,e)),yd=({title:n,children:e,...r})=>React.createElement(TableRow,null,n&&React.createElement(fd,null,n),React.createElement(gd,{colSpan:n?1:2,...r},e)),Cl=(0,Ye.Z)(md,{name:"BackstageMetadataTableList"})(({classes:n,children:e})=>o.createElement(pe.Z,{disablePadding:!0,className:n.root},e)),wl=(0,Ye.Z)(vr,{name:"BackstageMetadataTableListItem"})(({classes:n,children:e})=>o.createElement(xe.Z,{className:n.root},e)),Ro=(0,tt.Z)({root:{margin:"0 0",listStyleType:"none"}}),kl=n=>(0,tt.Z)({root:{...Ro.root,paddingLeft:n.spacing(1)}}),xo=(0,Ye.Z)(Ro,{name:"BackstageStructuredMetadataTableList"})(({classes:n,children:e})=>o.createElement(Cl,{classes:n},e)),So=(0,Ye.Z)(kl,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:n,children:e})=>o.createElement(Cl,{classes:n},e));function Tl(n,e,r){const i=n.map((d,u)=>React.createElement(wl,{key:u},Ss(d,e,r)));return r?React.createElement(So,null,i):React.createElement(xo,null,i)}function Il(n,e,r){const i=Object.keys(n).map(d=>{const u=Ss(n[d],e,!0);return React.createElement(wl,{key:d},React.createElement(Typography,{variant:"body2",component:"span"},`${e.titleFormat(d)}: `),u)});return r?React.createElement(So,null,i):React.createElement(xo,null,i)}function Ss(n,e,r){return React.isValidElement(n)?React.createElement(Fragment,null,n):n!==null&&typeof n=="object"&&!Array.isArray(n)?Il(n,e,r):Array.isArray(n)?Tl(n,e,r):typeof n=="boolean"?React.createElement(Fragment,null,n?"\u2705":"\u274C"):React.createElement(Typography,{variant:"body2",component:"span"},n)}const Al=({value:n,options:e})=>React.createElement(Fragment,null,Ss(n,e,!1)),Co=({title:n,value:e,options:r})=>React.createElement(yd,{title:r.titleFormat(n)},React.createElement(Al,{value:e,options:r}));function wo(n,e){return Object.keys(n).map(r=>React.createElement(Co,{key:r,title:r,value:n[r],options:e}))}function Nl(n){const{metadata:e,dense:r=!0,options:i={}}=n,d=wo(e,{titleFormat:startCase,...i});return React.createElement(hd,{dense:r},d)}function Pl(n){return qs.stringify(n,{strictNullHandling:!0})}function Cs(n){return qs.parse(n,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function ws(n,e){return Cs(n)[e]}function Ll(n,e,r){const i={...Cs(n),[e]:r};return Pl(i)}function vd(n,e=250){const[r,i]=useSearchParams(),d=r.toString(),[u,f]=useState(ws(d,n));return useEffect(()=>{const h=ws(d,n);f(C=>isEqual(h,C)?C:h)},[d,f,n]),useDebouncedEffect(()=>{const h=Ll(d,n,u);d!==h&&i(h,{replace:!0})},[i,u,d,n],e),[u,f]}const ks={url:"https://github.com/backstage/backstage/issues",items:[{title:"Support Not Configured",icon:"warning",links:[{title:"Add `app.support` config key",url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]};function ko(){const e=useApiHolder().get(configApiRef),r=e==null?void 0:e.getOptionalConfig("app.support");return r?{url:r.getString("url"),items:r.getConfigArray("items").flatMap(i=>{var d;return{title:i.getString("title"),icon:i.getOptionalString("icon"),links:((d=i.getOptionalConfigArray("links"))!=null?d:[]).flatMap(u=>({url:u.getString("url"),title:u.getString("title")}))}})}:ks}function fa(n,e){const i=useApp().getSystemIcon(n);return i?React.createElement(i,{...e}):React.createElement(MuiBrokenImageIcon,{...e})}function Ed(n){return fa("brokenImage",n)}function ru(n){return fa("catalog",n)}function bd(n){return fa("chat",n)}function Ol(n){return fa("dashboard",n)}function Bl(n){return fa("docs",n)}function Rd(n){return fa("email",n)}function su(n){return fa("github",n)}function xd(n){return fa("group",n)}function Br(n){return fa("help",n)}function Sa(n){return fa("user",n)}function ou(n){return fa("warning",n)}const Sd=(0,Y.Z)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),Cd=({icon:n})=>{var e;const r=useApp(),i=n&&(e=r.getSystemIcon(n))!=null?e:Br;return React.createElement(i,null)},wd=({link:n})=>{var e;return React.createElement(xn,{to:n.url},(e=n.title)!=null?e:n.url)},kd=({item:n})=>{var e;return React.createElement(MenuItem,null,React.createElement(ListItemIcon,null,React.createElement(Cd,{icon:n.icon})),React.createElement(ListItemText,{primary:n.title,secondary:(e=n.links)==null?void 0:e.reduce((r,i,d)=>[...r,d>0&&React.createElement("br",{key:d}),React.createElement(wd,{link:i,key:i.url})],[])}))};function iu(n){const{title:e,items:r,children:i}=n,{items:d}=ko(),[u,f]=useState(!1),[h,C]=useState(null),x=Sd(),A=useMediaQuery(W=>W.breakpoints.down("sm")),B=W=>{C(W.currentTarget),f(!0)},H=()=>{f(!1)};return React.createElement(React.Fragment,null,React.createElement(Box,{display:"flex",ml:1},A?React.createElement(IconButton,{color:"primary",size:"small",onClick:B,"data-testid":"support-button","aria-label":"Support"},React.createElement(Br,null)):React.createElement(Button$1,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:B,startIcon:React.createElement(Br,null)},"Support")),React.createElement(Popover,{"data-testid":"support-button-popover",open:u,anchorEl:h,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:H},React.createElement(MenuList,{className:x.popoverList,autoFocusItem:Boolean(h)},e&&React.createElement(MenuItem,{alignItems:"flex-start",className:x.menuItem},React.createElement(Typography,{variant:"subtitle1"},e)),React.Children.map(i,(W,ne)=>React.createElement(MenuItem,{alignItems:"flex-start",key:`child-${ne}`,className:x.menuItem},W)),(r!=null?r:d).map((W,ne)=>React.createElement(kd,{item:W,key:`item-${ne}`}))),React.createElement(DialogActions,null,React.createElement(Button$1,{color:"primary",onClick:H,"aria-label":"Close"},"Close"))))}const Td=(0,Y.Z)(n=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:n.spacing(3),paddingBottom:n.spacing(3),paddingLeft:n.spacing(2),paddingRight:n.spacing(2),[n.breakpoints.up("sm")]:{paddingLeft:n.spacing(3),paddingRight:n.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function To(n){const{className:e,stretch:r,noPadding:i,children:d,...u}=n,f=Td();return o.createElement("article",{...u,className:bt()(f.root,e,{[f.stretch]:r,[f.noPadding]:i})},d)}const Xr=(0,Y.Z)(n=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:n.palette.background.paper,paddingLeft:n.spacing(3),minWidth:0},defaultTab:{...n.typography.caption,padding:n.spacing(3,3),textTransform:"uppercase",fontWeight:n.typography.fontWeightBold,color:n.palette.text.secondary},selected:{color:n.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:n.palette.background.default,color:n.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function Id(n){const{tabs:e,onChange:r,selectedIndex:i}=n,[d,u]=(0,o.useState)(i!=null?i:0),f=Xr(),h=(0,o.useCallback)((C,x)=>{i===void 0&&u(x),r&&r(x)},[i,r]);return(0,o.useEffect)(()=>{i!==void 0&&u(i)},[i]),o.createElement(ye.Z,{className:f.tabsWrapper},o.createElement(Mt.Z,{indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:h,value:d},e.map((C,x)=>o.createElement(va.Z,{...C.tabProps,"data-testid":`header-tab-${x}`,label:C.label,key:C.id,value:x,className:f.defaultTab,classes:{selected:f.selected,root:f.tabRoot}}))))}function Ad(n){var e,r,i,d,u;const f=(0,ct.UO)(),C=n.map(({path:W,children:ne})=>({caseSensitive:!1,path:`${W}/*`,element:ne})).sort((W,ne)=>ne.path.replace(/\/\*$/,"").localeCompare(W.path.replace(/\/\*$/,""))),x=(r=(0,ct.V$)(C))!=null?r:(e=n[0])==null?void 0:e.children;let A=(i=f["*"])!=null?i:"";A.startsWith("/")||(A=`/${A}`);const[B]=(d=(0,fn.fp)(C,A))!=null?d:[],H=B?n.findIndex(W=>`${W.path}/*`===B.route.path):0;return{index:H===-1?0:H,element:x,route:(u=n[H])!=null?u:n[0]}}function Zl(n){const{routes:e}=n,r=(0,ct.s0)(),{index:i,route:d,element:u}=Ad(e),f=(0,o.useMemo)(()=>e.map(C=>({id:C.path,label:C.title,tabProps:C.tabProps})),[e]),h=C=>{let{path:x}=e[C];x=x.replace(/\/\*$/,""),x=x.replace(/^\//,""),r(x)};return o.createElement(o.Fragment,null,o.createElement(Id,{tabs:f,selectedIndex:i,onChange:h}),o.createElement(To,null,o.createElement(ia.q,{title:d==null?void 0:d.title}),u))}const Ts=()=>null;(0,Ue.R5)(Ts,"core.gatherMountPoints",!0);function Io(n){const e=o.createElement(Ts,{path:"",title:""},o.createElement("div",null)).type;return o.Children.toArray(n).flatMap(r=>{if(!(0,o.isValidElement)(r))return[];if(r.type===o.Fragment)return Io(r.props.children);if(r.type!==e)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:i,title:d,children:u,tabProps:f}=r.props;return[{path:i,title:d,children:u,tabProps:f}]})}function $l(n){const e=Io(n.children);return o.createElement(Zl,{routes:e})}$l.Route=Ts;const _l=(0,Y.Z)(n=>({value:{marginBottom:n.spacing(.75)},subvalue:{color:n.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function Is(n){const{value:e,subvalue:r}=n,i=_l();return React.createElement(React.Fragment,null,React.createElement(Box,{className:i.value},e),React.createElement(Box,{className:i.subvalue},r))}const Ao=(0,Y.Z)(n=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:n.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:n.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${n.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:n.spacing(2)}}}),{name:"BackstageTableFilters"}),No=n=>{var e;const r=Ao(),{onChangeFilters:i}=n,[d,u]=(0,o.useState)({...n.selectedFilters}),[f,h]=(0,o.useState)(!1),C=()=>{u({}),h(x=>!x)};return(0,o.useEffect)(()=>{i(d)},[d,i]),o.createElement(ye.Z,{className:r.root},o.createElement(ye.Z,{className:r.header},o.createElement(ye.Z,{className:r.value},"Filters"),o.createElement(Ve.Z,{color:"primary",onClick:C},"Clear all")),o.createElement(ye.Z,{className:r.filters},((e=n.filters)==null?void 0:e.length)&&n.filters.map(x=>o.createElement(gl,{triggerReset:f,key:x.element.label,...x.element,selected:d[x.element.label],onChange:A=>u({...d,[x.element.label]:A})}))))};function za(n){return o.createElement("tbody",{"data-testid":"loading-indicator"},o.createElement("tr",null,o.createElement("td",{colSpan:n.colSpan},o.createElement(ye.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",minHeight:"15rem"}},o.createElement(rr.Z,{size:"5rem"})))))}const Po={Add:(0,o.forwardRef)((n,e)=>o.createElement(xr.Z,{...n,ref:e})),Check:(0,o.forwardRef)((n,e)=>o.createElement(Sr.Z,{...n,ref:e})),Clear:(0,o.forwardRef)((n,e)=>o.createElement(nr.Z,{...n,ref:e})),Delete:(0,o.forwardRef)((n,e)=>o.createElement(ar.Z,{...n,ref:e})),DetailPanel:(0,o.forwardRef)((n,e)=>o.createElement(qt.Z,{...n,ref:e})),Edit:(0,o.forwardRef)((n,e)=>o.createElement(wa.Z,{...n,ref:e})),Export:(0,o.forwardRef)((n,e)=>o.createElement(Cr.Z,{...n,ref:e})),Filter:(0,o.forwardRef)((n,e)=>o.createElement(Ea.Z,{...n,ref:e})),FirstPage:(0,o.forwardRef)((n,e)=>o.createElement(Ka.Z,{...n,ref:e})),LastPage:(0,o.forwardRef)((n,e)=>o.createElement(ss.Z,{...n,ref:e})),NextPage:(0,o.forwardRef)((n,e)=>o.createElement(qt.Z,{...n,ref:e})),PreviousPage:(0,o.forwardRef)((n,e)=>o.createElement(Nt.Z,{...n,ref:e})),ResetSearch:(0,o.forwardRef)((n,e)=>o.createElement(nr.Z,{...n,ref:e})),Search:(0,o.forwardRef)((n,e)=>o.createElement(Ea.Z,{...n,ref:e})),SortArrow:(0,o.forwardRef)((n,e)=>o.createElement(En.Z,{...n,ref:e})),ThirdStateCheck:(0,o.forwardRef)((n,e)=>o.createElement(os.Z,{...n,ref:e})),ViewColumn:(0,o.forwardRef)((n,e)=>o.createElement(wr.Z,{...n,ref:e}))};function As(n,e){const r=e.split(".");let i=n[r[0]];for(let d=1;d<r.length;++d){if(i===void 0)return i;const u=r[d];i=i[u]}return i}const Dl=(0,Ye.Z)(n=>({header:{padding:n.spacing(1,2,1,2.5),borderTop:`1px solid ${n.palette.grey.A100}`,borderBottom:`1px solid ${n.palette.grey.A100}`,fontWeight:n.typography.fontWeightBold,position:"static",wordBreak:"normal"}}),{name:"BackstageTableHeader"})(Gn.W$),Lo=(0,Ye.Z)(n=>({root:{padding:n.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:n.typography.fontWeightBold}},searchField:{paddingRight:n.spacing(2)}}),{name:"BackstageTableToolbar"})(Gn.UW),ea=(0,Y.Z)(n=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:n.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),Ns=(0,Y.Z)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function Oo(n,e){return n.map(r=>{var i;const d=(i=r.headerStyle)!=null?i:{};let u=r.cellStyle||{};if(r.highlight)if(d.color=e.palette.textContrast,typeof u=="object")u.fontWeight=e.typography.fontWeightBold;else{const f=u;u=(h,C,x)=>({...f(h,C,x),fontWeight:e.typography.fontWeightBold})}return{...r,headerStyle:d,cellStyle:u}})}function Bo(n,e){return(0,Me.transform)(n,(r,i,d)=>{(0,Me.isEqual)(i,e[d])||(r[d]=i)})}const Ps={search:"",filtersOpen:!1,filters:{}};function Zo(n){const{toolbarRef:e,setSearch:r,hasFilters:i,selectedFiltersLength:d,toggleFilters:u}=n,f=ea(),h=(0,o.useCallback)(C=>{n.onSearchChanged(C),r(C)},[n,r]);return i?o.createElement(ye.Z,{className:f.root},o.createElement(ye.Z,{className:f.root},o.createElement(rt.Z,{onClick:u,"aria-label":"filter list"},o.createElement(Ea.Z,null)),o.createElement(ee.Z,{className:f.title},"Filters (",d,")")),o.createElement(Lo,{...n,ref:e,onSearchChanged:h})):o.createElement(Lo,{...n,ref:e,onSearchChanged:h})}function Zr(n){const{data:e,columns:r,emptyContent:i,options:d,title:u,subtitle:f,localization:h,filters:C,initialState:x,onStateChange:A,components:B,isLoading:H,...W}=n,ne=Ns(),et=(0,He.Z)(),t={...Ps,...x},[a,s]=(0,o.useState)(t.filtersOpen),l=(0,o.useCallback)(()=>s(Re=>!Re),[s]),[c,p]=(0,o.useState)(t.filters),[g,E]=(0,o.useState)(t.search);(0,o.useEffect)(()=>{if(A){const Re=Bo({search:g,filtersOpen:a,filters:c},Ps);A(Re)}},[g,a,c,A]);const w=(0,o.useCallback)(Re=>{var yt;return(yt=r.find(at=>at.title===Re))==null?void 0:yt.field},[r]),S=(0,o.useMemo)(()=>{if(typeof e=="function"||!c)return e;const Re=Object.values(c);return e&&Re.flat().length?e.filter(at=>!!Object.entries(c).filter(([,mt])=>!!mt.length).every(([mt,we])=>{const st=As(at,w(mt));return Array.isArray(st)&&Array.isArray(we)?st.some(ot=>we.includes(ot)):Array.isArray(st)?st.includes(we):Array.isArray(we)?we.includes(st):st===we})):e},[e,c,w]),P=Object.values(c).flat().length,O=!!(C!=null&&C.length),M=(0,o.useCallback)(Re=>o.createElement(Zo,{setSearch:E,hasFilters:O,selectedFiltersLength:P,toggleFilters:l,...Re}),[l,O,P,E]),F=typeof e!="function"&&e.length===0,ae=r.length,Q=(0,o.useMemo)(()=>$o({hasNoRows:F,emptyContent:i,columnCount:ae,loading:H}),[F,i,ae,H]);return o.createElement(ye.Z,{className:ne.root},a&&e&&typeof e!="function"&&(C==null?void 0:C.length)&&o.createElement(No,{filters:_o(C,e,r),selectedFilters:c,onChangeFilters:p}),o.createElement(Gn.ZP,{components:{Header:Dl,Body:Q,Toolbar:M,...B},options:{headerStyle:{textTransform:"uppercase"},...d},columns:Oo(r,et),icons:Po,title:o.createElement(o.Fragment,null,o.createElement(ee.Z,{variant:"h5",component:"h2"},u),f&&o.createElement(ee.Z,{color:"textSecondary",variant:"body1"},f)),data:S,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"},...h},...W}))}Zr.icons=Object.freeze(Po);function $o({columnCount:n,emptyContent:e,hasNoRows:r,loading:i}){return d=>i?o.createElement(za,{colSpan:n}):e&&r?o.createElement("tbody",null,o.createElement("tr",null,o.createElement("td",{colSpan:n},e))):o.createElement(Gn.os,{...d})}function _o(n,e,r){const i=u=>{const f=new Set,h=C=>{C!=null&&f.add(C)};return e&&e.forEach(C=>{var x;const A=As(C,(x=r.find(B=>B.title===u))==null?void 0:x.field);Array.isArray(A)?A.forEach(h):h(A)}),f},d=u=>({placeholder:"All results",label:u.column,multiple:u.type==="multiple-select",items:[...i(u.column)].sort().map(f=>({label:f,value:f}))});return n.map(u=>({type:u.type,element:d(u)}))}function Do(n,e){const r=n[n.length-1];if(r)return r>=.9?e.palette.status.ok:r>=.5?e.palette.status.warning:e.palette.status.error}function Nd(n){var e;const r=useTheme();return n.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...n},n.title&&React.createElement("title",null,n.title),React.createElement(SparklinesLine,{color:(e=n.color)!=null?e:Do(n.data,r)})):null}const Ls=n=>makeStyles(e=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:e.spacing(2),textAlign:n.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:e.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),Ml=({title:n="Unknown page",className:e})=>React.createElement(Typography,{variant:"h4",component:"h2",className:e,"data-testid":"header-title"},n);function Wl(n){const{description:e,title:r,titleComponent:i=void 0,children:d,textAlign:u="left"}=n,f=Ls({textAlign:u})(),h=i||React.createElement(Ml,{title:r,className:f.title});return React.createElement(React.Fragment,null,React.createElement(Helmet,{title:r}),React.createElement(Box,{className:f.container},React.createElement(Box,{className:f.leftItemsBox},h,e&&React.createElement(Typography,{className:f.description,variant:"body2"},e)),React.createElement(Box,{className:f.rightItemsBox},d)))}const Mo=(0,Y.Z)(n=>({micDrop:{maxWidth:"60%",bottom:n.spacing(2),right:n.spacing(2),[n.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:n.spacing(10,"auto",4)}}}),{name:"BackstageErrorPageMicDrop"}),Wo=()=>{const n=Mo();return React.createElement("img",{src:MicDropSvgUrl,className:n.micDrop,alt:"Girl dropping mic from her hands"})},Fl=(0,Y.Z)(n=>({title:{paddingBottom:n.spacing(5),[n.breakpoints.down("xs")]:{paddingBottom:n.spacing(4),fontSize:n.typography.h3.fontSize}}}),{name:"BackstageErrorPageStackDetails"});function jl(n){const{stack:e}=n,r=Fl(),[i,d]=useState(!1);return i?React.createElement(React.Fragment,null,React.createElement(Typography,{variant:"h6",className:r.title},React.createElement(xn,{to:"#",onClick:()=>d(!1)},"Show less details")),React.createElement(fr,{text:e,language:"text",showCopyCodeButton:!0,showLineNumbers:!0})):React.createElement(Typography,{variant:"h6",className:r.title},React.createElement(xn,{to:"#",onClick:()=>d(!0)},"Show more details"))}const zl=(0,Y.Z)(n=>({container:{padding:n.spacing(8),[n.breakpoints.down("xs")]:{padding:n.spacing(2)}},title:{paddingBottom:n.spacing(5),[n.breakpoints.down("xs")]:{paddingBottom:n.spacing(4),fontSize:n.typography.h3.fontSize}},subtitle:{color:n.palette.textSubtle}}),{name:"BackstageErrorPage"});function Ul(n){const{status:e,statusMessage:r,additionalInfo:i,supportUrl:d,stack:u}=n,f=zl(),h=useNavigate(),C=ko();return React.createElement(Grid,{container:!0,className:f.container},React.createElement(Grid,{item:!0,xs:12,sm:8,md:4},React.createElement(Typography,{"data-testid":"error",variant:"body1",className:f.subtitle},"ERROR ",e,": ",r),React.createElement(Typography,{variant:"body1",className:f.subtitle},i),React.createElement(Typography,{variant:"h2",className:f.title},"Looks like someone dropped the mic!"),React.createElement(Typography,{variant:"h6",className:f.title},React.createElement(xn,{to:"#","data-testid":"go-back-link",onClick:()=>h(-1)},"Go back"),"... or please"," ",React.createElement(xn,{to:d||C.url},"contact support")," if you think this is a bug."),u&&React.createElement(jl,{stack:u})),React.createElement(Wo,null))}const Vl=(0,Ye.Z)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(ee.Z),qr=(0,Ye.Z)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(ye.Z);function Hl(n){const{children:e,...r}=n,[i,d]=React.useState(null),u=React.Children.toArray(e),[f,h,...C]=u,x=C.length?C.pop():u[u.length-1],A=u.length>3,B=ne=>{d(ne.currentTarget)},H=()=>{d(null)},W=Boolean(i);return React.createElement(Fragment,null,React.createElement(MaterialBreadcrumbs,{"aria-label":"breadcrumb",...r},u.length>1&&React.createElement(qr,{clone:!0},f),u.length>2&&React.createElement(qr,{clone:!0},h),A&&React.createElement(Vl,{onClick:B},"..."),React.createElement(Box,{style:{fontStyle:"italic"}},x)),React.createElement(Popover,{open:W,anchorEl:i,onClose:H,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},React.createElement(List,null,C.map((ne,et)=>React.createElement(ListItem,{key:et,button:!0},React.createElement(qr,{clone:!0},ne))))))}const $r=72,Gl=24,Os=18,La={drawerWidthClosed:$r,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:$r,iconSize:$r-Gl*2,iconPadding:Gl,selectedIndicatorWidth:3,userBadgePadding:Os,userBadgeDiameter:$r-Os*2,mobileSidebarHeight:56},Kl=n=>({...La,...n,iconContainerWidth:La.drawerWidthClosed,iconSize:La.drawerWidthClosed-La.iconPadding*2,userBadgeDiameter:La.drawerWidthClosed-La.userBadgePadding*2}),Yl={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:La.defaultOpenDelayMs+200},Jl=n=>({...Yl,...n}),Bs="@backstage/core/sidebar-intro-dismissed",sa=(0,o.createContext)({sidebarConfig:La,submenuConfig:Yl}),Fo=(0,o.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),jo={isOpen:!1,setOpen:()=>{}},zo=(0,o.createContext)(jo),Uo=(0,sr.CT)("sidebar-open-state-context");function Vo(n){const{children:e,value:r}=n;return React.createElement(zo.Provider,{value:r},React.createElement(Uo.Provider,{value:createVersionedValueMap({1:r})},e))}const Zs=()=>{const n=(0,o.useContext)(Uo),e=(0,o.useContext)(zo);if(n===void 0)return e||jo;const r=n.atVersion(1);if(r===void 0)throw new Error("No context found for version 1.");return r},Ho=(0,o.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),Go={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},_r=(0,o.createContext)(Go),Ko=(0,sr.CT)("sidebar-pin-state-context");function Yo(n){const{children:e,value:r}=n;return React.createElement(_r.Provider,{value:r},React.createElement(Ko.Provider,{value:createVersionedValueMap({1:r})},e))}const $s=()=>{const n=(0,o.useContext)(Ko),e=(0,o.useContext)(_r);if(n===void 0)return e||Go;const r=n.atVersion(1);if(r===void 0)throw new Error("No context found for version 1.");return r},Ql=(0,Y.Z)(n=>({root:{flexGrow:0,margin:n.spacing(0,2),color:n.palette.navigation.color},selected:e=>({color:`${n.palette.navigation.selectedColor}!important`,borderTop:`solid ${e.sidebarConfig.selectedIndicatorWidth}px ${n.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),Jo=n=>{const{to:e,label:r,icon:i,value:d}=n,{sidebarConfig:u}=(0,o.useContext)(sa),f=Ql({sidebarConfig:u}),h=(0,ct.TH)(),{selectedMenuItemIndex:C,setSelectedMenuItemIndex:x}=(0,o.useContext)(Ho),A=(H,W)=>{x(W===C?-1:W)},B=d===C&&C>=0||d!==C&&!(C>=0)&&e===h.pathname;return o.createElement(or.Z,{"aria-label":r,label:r,icon:i,component:xn,to:e||h.pathname,onChange:A,value:d,selected:B,classes:f})},Qo=n=>{const{children:e,to:r,label:i,icon:d,value:u}=n,{isMobile:f}=$s();return f?o.createElement(Jo,{to:r,label:i,icon:d,value:u}):o.createElement(o.Fragment,null,e)},Xo=(0,Y.Z)(n=>({root:{position:"fixed",backgroundColor:n.palette.navigation.background,color:n.palette.navigation.color,bottom:0,left:0,right:0,zIndex:n.zIndex.snackbar,borderTop:"1px solid #383838","@media print":{display:"none"}},overlay:e=>({background:n.palette.navigation.background,width:"100%",bottom:`${e.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${e.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:n.palette.navigation.color,alignItems:"center",justifyContent:"space-between",padding:n.spacing(2,3)},overlayHeaderClose:{color:n.palette.navigation.color},marginMobileSidebar:e=>({marginBottom:`${e.sidebarConfig.mobileSidebarHeight}px`})})),Pd=n=>orderBy(n,({props:{priority:e}})=>Number.isInteger(e)?e:-1,"desc"),Ld=o.createElement(Qo).type,Od=({children:n,label:e="Menu",open:r,onClose:i})=>{const{sidebarConfig:d}=useContext(sa),u=Xo({sidebarConfig:d});return React.createElement(Drawer,{anchor:"bottom",open:r,onClose:i,ModalProps:{BackdropProps:{classes:{root:u.marginMobileSidebar}}},classes:{root:u.marginMobileSidebar,paperAnchorBottom:u.overlay}},React.createElement(Box,{className:u.overlayHeader},React.createElement(Typography,{variant:"h3"},e),React.createElement(IconButton,{onClick:i,classes:{root:u.overlayHeaderClose}},React.createElement(CloseIcon,null))),React.createElement(Box,{component:"nav"},n))},Xl=n=>{const{sidebarConfig:e}=useContext(sa),{children:r}=n,i=Xo({sidebarConfig:e}),d=useLocation(),[u,f]=useState(-1);useEffect(()=>{f(-1)},[d.pathname]);let h=useElementFilter(r,x=>x.getElements().filter(A=>A.type===Ld));if(r)h.length?h=Pd(h):h.push(React.createElement(Qo,{key:"default_menu",icon:React.createElement(MenuIcon,null)},r));else return null;const C=u>=0&&!h[u].props.to;return React.createElement(Vo,{value:{isOpen:!0,setOpen:()=>{}}},React.createElement(Ho.Provider,{value:{selectedMenuItemIndex:u,setSelectedMenuItemIndex:f}},React.createElement(Od,{label:h[u]&&h[u].props.label,open:C,onClose:()=>f(-1)},h[u]&&h[u].props.children),React.createElement(BottomNavigation,{className:i.root,"data-testid":"mobile-sidebar-root",component:"nav"},h)))},qo={getSidebarPinState(){let n;try{n=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!n},setSidebarPinState(n){return window.localStorage.setItem("sidebarPinState",JSON.stringify(n))}},Bd=(0,Y.Z)(n=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[n.breakpoints.up("sm")]:{paddingLeft:e=>e.isPinned?e.sidebarConfig.drawerWidthOpen:e.sidebarConfig.drawerWidthClosed},[n.breakpoints.down("xs")]:{paddingBottom:e=>e.sidebarConfig.mobileSidebarHeight},"@media print":{padding:"0px !important"}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),ql=(0,o.createContext)({content:{contentRef:void 0}});function Zd(n){const[e,r]=useState(()=>qo.getSidebarPinState()),{sidebarConfig:i}=useContext(sa),d=useRef(null),u=useMemo(()=>({content:{contentRef:d}}),[d]);useEffect(()=>{qo.setSidebarPinState(e)},[e]);const f=useMediaQuery(x=>x.breakpoints.down("xs"),{noSsr:!0}),h=()=>r(!e),C=Bd({isPinned:e,sidebarConfig:i});return React.createElement(Yo,{value:{isPinned:e,toggleSidebarPinState:h,isMobile:f}},React.createElement(ql.Provider,{value:u},React.createElement(Box,{className:C.root},n.children)))}function ei(){const{content:n}=useContext(ql);return{focusContent:useCallback(()=>{var r,i;(i=(r=n==null?void 0:n.contentRef)==null?void 0:r.current)==null||i.focus()},[n]),contentRef:n==null?void 0:n.contentRef}}const _s=(0,Y.Z)(n=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:n.zIndex.appBar,background:n.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:n.transitions.create("width",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"@media print":{display:"none"}},drawerWidth:e=>({width:e.sidebarConfig.drawerWidthClosed}),drawerOpen:e=>({width:e.sidebarConfig.drawerWidthOpen,transition:n.transitions.create("width",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),ec=n=>{const{sidebarConfig:e}=useContext(sa),{openDelayMs:r=e.defaultOpenDelayMs,closeDelayMs:i=e.defaultCloseDelayMs,disableExpandOnHover:d,children:u}=n,f=_s({sidebarConfig:e}),h=useMediaQuery(a=>a.breakpoints.down("md"),{noSsr:!0}),[C,x]=useState(0),A=useRef(),{isPinned:B,toggleSidebarPinState:H}=$s(),W=()=>{B||d||(A.current&&(clearTimeout(A.current),A.current=void 0),C!==2&&!h&&(A.current=window.setTimeout(()=>{A.current=void 0,x(2)},r),x(1)))},ne=()=>{B||d||(A.current&&(clearTimeout(A.current),A.current=void 0),C===1?x(0):C===2&&(A.current=window.setTimeout(()=>{A.current=void 0,x(0)},i)))},et=C===2&&!h||B,t=a=>{a?(x(2),H()):(x(0),H())};return React.createElement("nav",{style:{},"aria-label":"sidebar nav"},React.createElement(_d,null),React.createElement(Vo,{value:{isOpen:et,setOpen:t}},React.createElement(Box,{className:f.root,"data-testid":"sidebar-root",onMouseEnter:d?()=>{}:W,onFocus:d?()=>{}:W,onMouseLeave:d?()=>{}:ne,onBlur:d?()=>{}:ne},React.createElement(Box,{className:classNames(f.drawer,f.drawerWidth,{[f.drawerOpen]:et})},u))))},$d=n=>{var e,r;const i=Kl((e=n.sidebarOptions)!=null?e:{}),d=Jl((r=n.submenuOptions)!=null?r:{}),{children:u,disableExpandOnHover:f,openDelayMs:h,closeDelayMs:C}=n,{isMobile:x}=$s();return x?React.createElement(Xl,null,u):React.createElement(sa.Provider,{value:{sidebarConfig:i,submenuConfig:d}},React.createElement(ec,{openDelayMs:h,closeDelayMs:C,disableExpandOnHover:f},u))};function _d(){const{sidebarConfig:n}=useContext(sa),{focusContent:e,contentRef:r}=ei(),i=_s({sidebarConfig:n});return r!=null&&r.current?React.createElement(Button$1,{onClick:e,variant:"contained",className:classNames(i.visuallyHidden)},"Skip to content"):null}function es(n,e,r=!1){const i=new URLSearchParams(e.search).toString(),d=tn().parse(i),u=new URLSearchParams(n.search).toString(),f=tn().parse(u),h=r?Me.isEqual:Me.isMatch;return(0,Me.isEqual)(e.pathname,n.pathname)&&h(f,d)}const ts=(0,Y.Z)(n=>{var e,r;return{item:{height:48,width:"100%","&:hover":{background:((e=n.palette.navigation.navItem)==null?void 0:e.hoverBackground)||"#6f6f6f",color:n.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:n.palette.navigation.color,padding:n.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:n.palette.common.white},label:{margin:n.spacing(1.75),marginLeft:n.spacing(1),fontSize:n.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((r=n.palette.navigation.navItem)==null?void 0:r.hoverBackground)||"#6f6f6f",color:n.palette.navigation.selectedColor}},textContent:{color:n.palette.navigation.color,paddingLeft:n.spacing(4),paddingRight:n.spacing(1),fontSize:n.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),Dd=n=>{const{title:e,subtitle:r,to:i,icon:d,dropdownItems:u,exact:f}=n,h=ts(),{setIsHoveredOn:C}=useContext(Fo),x=()=>{C(!1)},A=useResolvedPath$1(i!=null?i:""),B=useLocation();let H=es(B,A,f);const[W,ne]=useState(!1),et=()=>{ne(!W)};return u!==void 0?(u.some(t=>{const a=resolvePath(t.to);return H=es(B,a,f),H}),React.createElement(Box,{className:h.itemContainer},React.createElement(Tooltip,{title:e,enterDelay:500,enterNextDelay:500},React.createElement(Button$1,{role:"button",onClick:et,onTouchStart:t=>t.stopPropagation(),className:classNames(h.item,H?h.selected:void 0)},d&&React.createElement(d,{fontSize:"small"}),React.createElement(Typography,{variant:"subtitle1",component:"span",className:h.label},e,React.createElement("br",null),r&&React.createElement(Typography,{variant:"caption",component:"span",className:h.subtitle},r)),W?React.createElement(ArrowDropUpIcon,{className:h.dropdownArrow}):React.createElement(ArrowDropDownIcon,{className:h.dropdownArrow}))),u&&W&&React.createElement(Box,{className:h.dropdown},u.map((t,a)=>React.createElement(Tooltip,{key:a,title:t.title,enterDelay:500,enterNextDelay:500},React.createElement(xn,{to:t.to,underline:"none",className:h.dropdownItem,onClick:x,onTouchStart:s=>s.stopPropagation()},React.createElement(Typography,{component:"span",className:h.textContent},t.title))))))):React.createElement(Box,{className:h.itemContainer},React.createElement(Tooltip,{title:e,enterDelay:500,enterNextDelay:500},React.createElement(xn,{to:i,underline:"none",className:classNames(h.item,H?h.selected:void 0),onClick:x,onTouchStart:t=>t.stopPropagation()},d&&React.createElement(d,{fontSize:"small"}),React.createElement(Typography,{variant:"subtitle1",component:"span",className:h.label},e,React.createElement("br",null),r&&React.createElement(Typography,{variant:"caption",component:"span",className:h.subtitle},r)))))},tc=(0,Y.Z)(n=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:n.spacing(7)+1},drawer:e=>{var r,i;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[n.breakpoints.up("sm")]:{marginLeft:e.left,transition:n.transitions.create("margin-left",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(i=(r=n.palette.navigation.submenu)==null?void 0:r.background)!=null?i:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:e.submenuConfig.drawerWidthClosed,transitionDelay:`${e.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:e=>({width:e.submenuConfig.drawerWidthOpen,[n.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:n.spacing(3),left:0,top:0}}),title:{fontSize:n.typography.h5.fontSize,fontWeight:n.typography.fontWeightMedium,color:n.palette.common.white,padding:n.spacing(2.5),[n.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),nc=n=>{const{isOpen:e}=Zs(),{sidebarConfig:r,submenuConfig:i}=(0,o.useContext)(sa),d=e?r.drawerWidthOpen:r.drawerWidthClosed,u=tc({left:d,submenuConfig:i}),{isHoveredOn:f}=(0,o.useContext)(Fo),[h,C]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{C(f)},[f]),o.createElement(ye.Z,{className:bt()(u.drawer,{[u.drawerOpen]:h})},o.createElement(ee.Z,{variant:"h5",component:"span",className:u.title},n.title),n.children)},ac=(0,Y.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),Ds=()=>{const n=ac();return React.createElement(Box,{className:n.iconContainer},React.createElement(Box,{className:n.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},ti=(0,Y.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),rc=()=>{const n=ti();return React.createElement(Box,{className:n.iconContainer},React.createElement(Box,{className:n.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},sc=n=>(0,Y.Z)(e=>{var r,i,d,u;return{root:{color:e.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:n.drawerWidthClosed,justifyContent:"center"},open:{[e.breakpoints.up("sm")]:{width:n.drawerWidthOpen}},highlightable:{"&:hover":{background:(i=(r=e.palette.navigation.navItem)==null?void 0:r.hoverBackground)!=null?i:"#404040"}},highlighted:{background:(u=(d=e.palette.navigation.navItem)==null?void 0:d.hoverBackground)!=null?u:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:n.iconContainerWidth,marginRight:-e.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:e.typography.fontWeightBold,fontSize:e.typography.fontSize},searchFieldHTMLInput:{padding:e.spacing(2,0,2)},searchContainer:{width:n.drawerWidthOpen-n.iconContainerWidth},secondaryAction:{width:e.spacing(6),textAlign:"center",marginRight:e.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:e.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${n.selectedIndicatorWidth}px ${e.palette.navigation.indicator}`,color:e.palette.navigation.selectedColor},"&$closed":{width:n.drawerWidthClosed},"& $closedItemIcon":{paddingRight:n.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-n.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function Ms(n){return(0,o.useMemo)(()=>sc(n),[n])()}const oc=(n,e)=>(0,Ue.vJ)(n.props.children,r=>{let i=!1;return r.getElements().forEach(({props:{to:d,dropdownItems:u}})=>{if(!i){if(u!=null&&u.length){u.forEach(({to:f})=>i=i||es(e,(0,fn.i3)(f)));return}d&&(i=es(e,(0,fn.i3)(d)))}}),i},[e.pathname]);function Ws(n){return n.to===void 0}const ni=o.createElement(nc).type,ai=o.forwardRef(function({to:e,end:r,style:i,className:d,activeStyle:u,caseSensitive:f,activeClassName:h="active","aria-current":C="page",...x},A){let{pathname:B}=(0,ct.TH)(),{pathname:H}=(0,ct.WU)(e);f||(B=B.toLocaleLowerCase("en-US"),H=H.toLocaleLowerCase("en-US"));let W=B===H;!W&&!r&&(W=B.startsWith(`${H}/`));const ne=W?C:void 0;return o.createElement(mn.rU,{...x,to:e,ref:A,"aria-current":ne,style:{...i,...W?u:void 0},className:bt()([typeof d!="function"?d:void 0,W?h:void 0])})}),ri=(0,o.forwardRef)((n,e)=>{const{icon:r,text:i,hasNotifications:d=!1,hasSubmenu:u=!1,disableHighlight:f=!1,onClick:h,noTrack:C,children:x,className:A,...B}=n,{sidebarConfig:H}=(0,o.useContext)(sa),W=Ms(H),{isOpen:ne}=Zs(),et=!ne&&u?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},t=o.createElement(ye.Z,{style:et},o.createElement(r,{fontSize:"small"}),!ne&&u?o.createElement(lr.Z,{fontSize:"small"}):o.createElement(o.Fragment,null)),a=o.createElement(jr.Z,{color:"secondary",variant:"dot",overlap:"circular",invisible:!d,className:bt()({[W.closedItemIcon]:!ne})},t),s=o.createElement(o.Fragment,null,o.createElement(ye.Z,{"data-testid":"login-button",className:W.iconContainer},a),i&&o.createElement(ee.Z,{variant:"subtitle2",component:"span",className:W.label},i),o.createElement("div",{className:W.secondaryAction},x)),l=ne?s:a,c={onClick:h,className:bt()(A,W.root,ne?W.open:W.closed,Ws(n)&&W.buttonItem,{[W.highlightable]:!f})},p=(0,Ue.z$)(),{pathname:g}=(0,ct.WU)(!Ws(n)&&n.to?n.to:""),E=(0,o.useCallback)(w=>{if(!C){const S="click",P=i!=null?i:"Sidebar Item",O=g?{attributes:{to:g}}:void 0;p.captureEvent(S,P,O)}h==null||h(w)},[p,i,g,C,h]);return Ws(n)?o.createElement(Ve.Z,{role:"button","aria-label":i,...c,ref:e,onClick:E},l):o.createElement(ai,{...c,activeClassName:W.selected,to:n.to?n.to:"",ref:e,"aria-label":i||n.to,...B,onClick:E},l)}),si=({children:n,...e})=>{const{sidebarConfig:r}=(0,o.useContext)(sa),i=Ms(r),[d,u]=(0,o.useState)(!1),f=(0,ct.TH)(),h=oc(n,f),C=(0,dt.Z)(H=>H.breakpoints.down("sm")),x=()=>{u(!0)},A=()=>{u(!1)},B=()=>C?d?o.createElement(ir.Z,{fontSize:"small",className:i.submenuArrow}):o.createElement(Fr.Z,{fontSize:"small",className:i.submenuArrow}):!d&&o.createElement(lr.Z,{fontSize:"small",className:i.submenuArrow});return o.createElement(Fo.Provider,{value:{isHoveredOn:d,setIsHoveredOn:u}},o.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:A,onTouchStart:d?A:x,onMouseEnter:x,className:bt()(d&&i.highlighted)},o.createElement(ri,{hasSubmenu:!0,className:h?i.selected:"",...e},B()),d&&n))},ic=(0,o.forwardRef)((n,e)=>{const[r]=(0,Ue.vJ)(n.children,i=>i.getElements().filter(d=>d.type===ni));return r?o.createElement(si,{...n},r):o.createElement(ri,{...n,ref:e})});function Md(n){const{sidebarConfig:e}=useContext(sa),[r,i]=useState(""),d=Ms(e),u=n.icon?n.icon:SearchIcon,f=()=>{n.onSearch(r),i("")},h=B=>{B.key==="Enter"&&(B.preventDefault(),f())},C=B=>{i(B.target.value)},x=B=>{B.preventDefault(),B.stopPropagation()},A=B=>{f(),B.preventDefault()};return React.createElement(Box,{className:d.searchRoot},React.createElement(ic,{icon:u,to:n.to,onClick:A,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:r,onClick:x,onChange:C,onKeyDown:h,className:d.searchContainer,InputProps:{disableUnderline:!0,className:d.searchField},inputProps:{className:d.searchFieldHTMLInput}})))}const Wd=(0,xt.Z)("div")({flex:1},{name:"BackstageSidebarSpace"}),Fd=(0,xt.Z)("div")({height:8},{name:"BackstageSidebarSpacer"}),lc=(0,xt.Z)("hr")(({theme:n})=>({height:1,width:"100%",background:"#383838",border:"none",margin:n.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),cc=n=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:n.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:n.palette.text.secondary,borderRadius:"5px"}}),dc=(0,xt.Z)("div")(({theme:n})=>{const e=cc(n);return{flex:"0 1 auto",overflowX:"hidden",width:"calc(100% - 5px)",minHeight:"48px",overflowY:"hidden","@media (hover: none)":e,"&:hover":e}}),jd=()=>{const{sidebarConfig:n}=useContext(sa),e=Ms(n),{isOpen:r,setOpen:i}=Zs();if(useMediaQuery(f=>f.breakpoints.down("md"),{noSsr:!0}))return null;const u=()=>{i(!r)};return React.createElement(Button$1,{role:"button",onClick:u,className:e.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:e.arrows},r?React.createElement(Ds,null):React.createElement(rc,null)))},oi=(0,Y.Z)(n=>({header:{gridArea:"pageHeader",padding:n.spacing(3),width:"100%",boxShadow:n.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:n.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[n.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:n.page.fontColor,wordBreak:"break-word",fontSize:n.typography.h3.fontSize,marginBottom:0},subtitle:{color:n.page.fontColor,opacity:.8,display:"inline-block",marginTop:n.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:n.spacing(1),color:n.page.fontColor},breadcrumb:{color:n.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-n.spacing(.3),marginBottom:n.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-n.spacing(.3),marginBottom:n.spacing(.3)}}),{name:"BackstageHeader"}),uc=({type:n,typeLink:e,classes:r,pageTitle:i})=>n?e?React.createElement(Hl,{className:r.breadcrumb},React.createElement(xn,{to:e},n),React.createElement(Typography,null,i)):React.createElement(Typography,{className:r.type},n):null,ii=({pageTitle:n,classes:e,tooltip:r})=>{const{contentRef:i}=ei(),d=React.createElement(Typography,{ref:i,tabIndex:-1,className:e.title,variant:"h1"},n);return r?React.createElement(Tooltip,{title:r,placement:"top-start"},d):d},pc=({classes:n,subtitle:e})=>e?typeof e!="string"?React.createElement(React.Fragment,null,e):React.createElement(Typography,{className:n.subtitle,variant:"subtitle2",component:"span"},e):null;function Fs(n){const{children:e,pageTitleOverride:r,style:i,subtitle:d,title:u,tooltip:f,type:h,typeLink:C}=n,x=oi(),B=useApi(configApiRef).getOptionalString("app.title")||"Backstage",H=r||u,W=u||r,ne=`${H} | %s | ${B}`,et=`${H} | ${B}`;return React.createElement(React.Fragment,null,React.createElement(Helmet,{titleTemplate:ne,defaultTitle:et}),React.createElement("header",{style:i,className:x.header},React.createElement(Box,{className:x.leftItemsBox},React.createElement(uc,{classes:x,type:h,typeLink:C,pageTitle:W}),React.createElement(ii,{classes:x,pageTitle:W,tooltip:f}),React.createElement(pc,{classes:x,subtitle:d})),React.createElement(Grid,{container:!0,className:x.rightItemsBox,spacing:4},e)))}const mc=({label:n,secondaryLabel:e,icon:r,disabled:i=!1,onClick:d})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:i,button:!0,onClick:u=>{d&&d(u)}},r&&React.createElement(ListItemIcon,null,r),React.createElement(ListItemText,{primary:n,secondary:e})));function zd(n){const{palette:{common:{white:e}}}=useTheme(),{actionItems:r}=n,[i,d]=React.useState(!1),u=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>d(!0),"data-testid":"header-action-menu",ref:u,style:{color:e,height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:i,anchorEl:u.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>d(!1)},React.createElement(List,null,r.map((f,h)=>React.createElement(mc,{key:`header-action-menu-${h}`,...f})))))}const fc=(0,Y.Z)(n=>({root:{textAlign:"left"},label:{color:n.page.fontColor,fontWeight:n.typography.fontWeightBold,letterSpacing:0,fontSize:n.typography.fontSize,marginBottom:n.spacing(1)/2,lineHeight:1},value:{color:(0,lt.Fq)(n.page.fontColor,.8),fontSize:n.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),gc=({value:n,className:e,typographyRootComponent:r})=>React.createElement(Typography,{component:r!=null?r:typeof n=="string"?"p":"span",className:e},n);function lu(n){const{label:e,value:r,url:i,contentTypograpyRootComponent:d}=n,u=fc(),f=React.createElement(gc,{className:u.value,value:r||"<Unknown>",typographyRootComponent:d});return React.createElement(Grid,{item:!0},React.createElement(Typography,{component:"span",className:u.root},React.createElement(Typography,{className:u.label},e),i?React.createElement(xn,{to:i},f):f))}const hc=n=>(0,tt.Z)({root:{color:n.palette.common.white,padding:n.spacing(2,2,3),backgroundImage:n.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),Ud=(0,Y.Z)(hc,{name:"BackstageItemCardHeader"});function yc(n){const{title:e,subtitle:r,children:i}=n,d=Ud(n);return React.createElement(Box,{className:d.root},r&&React.createElement(Typography,{variant:"subtitle2",component:"h3"},r),e&&React.createElement(Typography,{variant:"h6",component:"h4"},e),i)}function Vd(n){const{description:e,tags:r,title:i,type:d,subtitle:u,label:f,onClick:h,href:C}=n;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(yc,{title:i,subtitle:u||d})),React.createElement(CardContent,null,r!=null&&r.length?React.createElement(Box,null,r.map((x,A)=>React.createElement(Chip,{size:"small",label:x,key:A}))):null,e),React.createElement(CardActions,null,!C&&React.createElement(us,{to:"#",onClick:h,color:"primary"},f),C&&React.createElement(us,{to:C,color:"primary"},f)))}const li=n=>(0,tt.Z)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:n.spacing(2)}}),vc=(0,Y.Z)(li,{name:"BackstageItemCardGrid"});function Hd(n){const{children:e,...r}=n,i=vc(r);return React.createElement(Box,{className:i.root,...r},e)}const Ec=(0,Y.Z)(n=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[n.breakpoints.down("xs")]:{height:"100%"},"@media print":{display:"block",height:"auto",overflowY:"inherit"}}}),{name:"BackstagePage"});function ci(n){const{themeId:e,children:r}=n,i=Ec();return React.createElement(ThemeProvider,{theme:d=>({...d,page:d.getPageTheme({themeId:e})})},React.createElement("main",{className:i.root},r))}function Gd(n){const{themeId:e,children:r,...i}=n;return React.createElement(ci,{themeId:e},React.createElement(Fs,{...i}),r)}const js=Dn.object({providerInfo:Dn.object({}).catchall(Dn.unknown()).optional(),profile:Dn.object({email:Dn.string().optional(),displayName:Dn.string().optional(),picture:Dn.string().optional()}),backstageIdentity:Dn.object({token:Dn.string(),identity:Dn.object({type:Dn.literal("user"),userEntityRef:Dn.string(),ownershipEntityRefs:Dn.array(Dn.string())})})});var bc=Object.defineProperty,Rc=(n,e,r)=>e in n?bc(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,zs=(n,e,r)=>(Rc(n,typeof e!="symbol"?e+"":e,r),r);const di={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function xc(n){const e=new Date(Date.now()+di.defaultTokenExpiryMillis);if(!n)return e;const[r,i,d]=n.split("."),u=JSON.parse(window.atob(i));return typeof u.exp!="number"?e:new Date(u.exp*1e3-di.tokenExpiryMarginMillis)}class ns{constructor(e){zs(this,"options"),zs(this,"abortController"),zs(this,"state"),this.options=e,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:e}=this.getSessionSync(),r=e.identity.userEntityRef,i=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(r);if(!i)throw new TypeError(`Invalid user entity reference "${r}"`);return i[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const e=this.state.type==="active"?this.state.session:void 0,r=this.fetchSession().then(i=>(this.state={type:"active",session:i,expiresAt:xc(i.backstageIdentity.token)},i),i=>{throw this.state={type:"failed",error:i},i});return this.state={type:"fetching",promise:r,previous:e},r}async fetchSession(){const e=await this.options.discoveryApi.getBaseUrl("auth"),r=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,i=new Headers(r);i.set("X-Requested-With","XMLHttpRequest");const d=await fetch(`${e}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:i,credentials:"include"});if(!d.ok)throw await ResponseError.fromResponse(d);return js.parse(await d.json())}}const Kd=n=>{const e=useApi(discoveryApiRef),[{status:r,error:i},{execute:d}]=useAsync(async()=>{const u=new ns({provider:n.provider,discoveryApi:e,headers:n.headers});await u.start(),n.onSignInSuccess(u)});return useMountEffect(d),r==="loading"?React.createElement(Qr,null):i?React.createElement(Yr,{title:"You do not appear to be signed in. Please try reloading the browser page.",error:i}):null};class ui{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const e="user:default/guest";return{type:"user",userEntityRef:e,ownershipEntityRefs:[e]}}async getCredentials(){return{}}async signOut(){}}function Sc(n){const[e,r,i]=n.split(".");return JSON.parse(window.atob(r))}class Us{constructor(e){this.result=e}getUserId(){return this.result.userId}static fromResult(e){return new Us(e)}async getIdToken(){var e,r;return(r=(e=this.result).getIdToken)==null?void 0:r.call(e)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const e=await this.getIdToken();if(!e){const d=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:d,ownershipEntityRefs:[d]}}const{sub:r,ent:i}=Sc(e);return{type:"user",userEntityRef:r,ownershipEntityRefs:i!=null?i:[]}}async getCredentials(){var e,r;return{token:await((r=(e=this.result).getIdToken)==null?void 0:r.call(e))}}async signOut(){var e,r;return(r=(e=this.result).signOut)==null?void 0:r.call(e)}}var Cc=Object.defineProperty,wc=(n,e,r)=>e in n?Cc(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,kc=(n,e,r)=>(wc(n,typeof e!="symbol"?e+"":e,r),r);class Er{constructor(e,r,i){this.identity=e,this.authApi=r,this.profile=i,kc(this,"profilePromise")}static createGuest(){return new ui}static fromLegacy(e){return Us.fromResult(e)}static create(e){return new Er(e.identity,e.authApi,e.profile)}getUserId(){const e=this.identity.userEntityRef,r=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(e);if(!r)throw new TypeError(`Invalid user entity reference "${e}"`);return r[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(e){throw this.profilePromise=void 0,e}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const pi=(0,Y.Z)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),as=({children:n})=>{const e=pi();return o.createElement(J.Z,{component:"li",item:!0,classes:e},n)},Tc={Component:({config:n,onSignInStarted:e,onSignInSuccess:r,onSignInFailure:i})=>{const{apiRef:d,title:u,message:f}=n,h=(0,Ae.u)(d),C=(0,Ae.u)(Ae.r),x=async()=>{try{e();const A=await h.getBackstageIdentity({instantPopup:!0});if(!A)throw i(),new Error(`The ${u} provider is not configured to support sign-in`);const B=await h.getProfile();r(Er.create({identity:A.identity,profile:B,authApi:h}))}catch(A){i(),C.post(new zn.SP("Login failed",A))}};return o.createElement(as,null,o.createElement(Lr,{variant:"fullHeight",title:u,actions:o.createElement(Ve.Z,{color:"primary",variant:"outlined",onClick:x},"Sign In")},o.createElement(ee.Z,{variant:"body1"},f)))},loader:async(n,e)=>{const r=n.get(e),i=await r.getBackstageIdentity({optional:!0});if(!i)return;const d=await r.getProfile();return Er.create({identity:i.identity,profile:d,authApi:r})}},Ic={Component:({onSignInStarted:n,onSignInSuccess:e})=>o.createElement(as,null,o.createElement(Lr,{title:"Guest",variant:"fullHeight",actions:o.createElement(Ve.Z,{color:"primary",variant:"outlined",onClick:()=>{n(),e(new ui)}},"Enter")},o.createElement(ee.Z,{variant:"body1"},"Enter as a Guest User.",o.createElement("br",null),"You will not have a verified identity,",o.createElement("br",null),"meaning some features might be unavailable."))),loader:async()=>new ui},mi=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,Ac=(0,Y.Z)(n=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:n.spacing(2)}}),{name:"BackstageCustomProvider"}),fi=n=>{const{ref:e,...r}=n;return{inputRef:e,...r}},Nc={Component:({onSignInStarted:n,onSignInSuccess:e})=>{const r=Ac(),{register:i,handleSubmit:d,formState:u}=(0,vi.cI)({mode:"onChange"}),{errors:f}=u,h=({userId:C,idToken:x})=>{n(),e(Er.fromLegacy({userId:C,getIdToken:x!==void 0?async()=>x:void 0,profile:{email:`${C}@example.com`}}))};return o.createElement(as,null,o.createElement(Lr,{title:"Custom User",variant:"fullHeight"},o.createElement(ee.Z,{variant:"body1"},"Enter your own User ID and credentials.",o.createElement("br",null),"This selection will not be stored."),o.createElement("form",{className:r.form,onSubmit:d(h)},o.createElement(Kt.Z,null,o.createElement(ka.Z,{...fi(i("userId",{required:!0})),label:"User ID",margin:"normal",error:Boolean(f.userId)}),f.userId&&o.createElement(Gs.Z,{error:!0},f.userId.message)),o.createElement(Kt.Z,null,o.createElement(ka.Z,{...fi(i("idToken",{required:!1,validate:C=>!C||mi.test(C)||"Token is not a valid OpenID Connect JWT Token"})),label:"ID Token (optional)",margin:"normal",autoComplete:"off",error:Boolean(f.idToken)}),f.idToken&&o.createElement(Gs.Z,{error:!0},f.idToken.message)),o.createElement(Ve.Z,{type:"submit",color:"primary",variant:"outlined",className:r.button,disabled:!(u!=null&&u.isDirty)||!bi()(f)},"Continue"))))},loader:async()=>{}};class Dr{constructor(e){this.config=e}static from(e){return new Dr(e)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const ga="@backstage/core:SignInPage:provider",rs={guest:Ic,custom:Nc,common:Tc};function Mr(n,e){if(n in e)throw new Error(`"${n}" ID is duplicated. IDs of identity providers have to be unique.`)}function Jd(n){return n.reduce((r,i)=>{if(typeof i=="string")return Mr(i,r),r[i]={components:rs[i],id:i},r;const{id:d}=i;return Mr(d,r),r[d]={components:rs.common,id:d,config:i},r},{})}const Qd=(n,e)=>{const r=useApi(errorApiRef),i=useApiHolder(),[d,u]=useState(!0),f=useCallback(C=>{e(Dr.from({identityApi:C,signOut:async()=>{var x;localStorage.removeItem(ga),await((x=C.signOut)==null?void 0:x.call(C))}}))},[e]);useLayoutEffect(()=>{var C;if(!d)return;const x=localStorage.getItem(ga);if(x===null){u(!1);return}const A=n[x];if(!A){u(!1);return}let B=!1;return A.components.loader(i,(C=A.config)==null?void 0:C.apiRef).then(H=>{if(B){localStorage.removeItem(ga);return}H?f(H):u(!1)}).catch(H=>{localStorage.removeItem(ga),!B&&(r.post(H),u(!1))}),()=>{B=!0}},[d,r,e,i,n,f]);const h=useMemo(()=>Object.keys(n).map(C=>{const x=n[C],{Component:A}=x.components,B=ne=>{f(ne)},H=()=>{var ne;localStorage.setItem(ga,((ne=x==null?void 0:x.config)==null?void 0:ne.id)||x.id)},W=()=>{localStorage.removeItem(ga)};return React.createElement(A,{key:x.id,config:x.config,onSignInStarted:H,onSignInSuccess:B,onSignInFailure:W})}),[n,f]);return[d,h]},Pc=({onSignInSuccess:n,providers:e=[],title:r,align:i="left"})=>{const d=useApi(configApiRef),u=pi(),f=Jd(e),[h,C]=Qd(f,n);return h?React.createElement(Qr,null):React.createElement(ci,{themeId:"home"},React.createElement(Fs,{title:d.getString("app.title")}),React.createElement(To,null,r&&React.createElement(Wl,{title:r,textAlign:i}),React.createElement(Grid,{container:!0,justifyContent:i==="center"?i:"flex-start",spacing:2,component:"ul",classes:u},C)))},Xd=({provider:n,auto:e,onSignInSuccess:r})=>{const i=pi(),d=useApi(n.apiRef),u=useApi(configApiRef),[f,h]=useState(),[C,x]=useState(!1),A=async({checkExisting:B,showPopup:H})=>{try{let W;if(B&&(W=await d.getBackstageIdentity({optional:!0})),!W&&(H||e)&&(x(!0),W=await d.getBackstageIdentity({instantPopup:!0}),!W))throw new Error(`The ${n.title} provider is not configured to support sign-in`);if(!W){x(!0);return}const ne=await d.getProfile();r(Er.create({identity:W.identity,authApi:d,profile:ne}))}catch(W){h(W),x(!0)}};return useMountEffect(()=>A({checkExisting:!0})),C?React.createElement(ci,{themeId:"home"},React.createElement(Fs,{title:u.getString("app.title")}),React.createElement(To,null,React.createElement(Grid,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:i},React.createElement(as,null,React.createElement(Lr,{variant:"fullHeight",title:n.title,actions:React.createElement(Button$1,{color:"primary",variant:"outlined",onClick:()=>{A({showPopup:!0})}},"Sign In")},React.createElement(Typography,{variant:"body1"},n.message),f&&f.name!=="PopupRejectedError"&&React.createElement(Typography,{variant:"body1",color:"error"},f.message)))))):React.createElement(Qr,null)};function pu(n){return"provider"in n?React.createElement(Xd,{...n}):React.createElement(Pc,{...n})}const Lc=(0,Y.Z)(n=>({root:{padding:n.spacing(0,2,0,2.5),minHeight:n.spacing(3)},indicator:{backgroundColor:n.palette.info.main,height:n.spacing(.3)}}),{name:"BackstageTabbedCard"}),Oc=(0,Ye.Z)(n=>({root:{padding:n.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:n.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(he.Z);function qd(n){const{slackChannel:e,errorBoundaryProps:r,children:i,title:d,deepLink:u,value:f,onChange:h}=n,C=Lc(),[x,A]=useState(0),B=h||((ne,et)=>A(et));let H;f?React.Children.map(i,ne=>{React.isValidElement(ne)&&(ne==null?void 0:ne.props.value)===f&&(H=ne==null?void 0:ne.props.children)}):React.Children.map(i,(ne,et)=>{React.isValidElement(ne)&&et===x&&(H=ne==null?void 0:ne.props.children)});const W=r||(e?{slackChannel:e}:{});return React.createElement(Card,null,React.createElement(po,{...W},d&&React.createElement(Oc,{title:d}),React.createElement(Tabs,{classes:C,value:f||x,onChange:B},i),React.createElement(Divider,null),React.createElement(CardContent,null,H),u&&React.createElement(uo,{...u})))}const hi=(0,Y.Z)(n=>({root:{minWidth:n.spacing(6),minHeight:n.spacing(3),margin:n.spacing(0,2,0,0),padding:n.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:n.palette.text.primary}},selected:{fontWeight:n.typography.fontWeightBold}}),{name:"BackstageCardTab"});function mu(n){const{children:e,...r}=n,i=hi();return React.createElement(TabUI,{disableRipple:!0,classes:i,...r})}},29804:(Ga,yn,v)=>{v.d(yn,{a:()=>fn,b:()=>ee,c:()=>Ve,f:()=>ke,p:()=>cn,r:()=>jn,u:()=>Fe});var Ae=v(2784),Ue=v(18473),rt=v(32272);function ee(){const j=(0,Ue.Vt)("api-context");if(!j)throw new rt.nj("API context is not available");const ve=j.atVersion(1);if(!ve)throw new rt.nj("ApiContext v1 not available");return ve}function Fe(j){const je=ee().get(j);if(!je)throw new rt.nj(`No implementation available for ${j}`);return je}function o(j){return function(je){const J=xe=>{const Be=ee(),Ze={};for(const Ge in j)if(j.hasOwnProperty(Ge)){const Ee=j[Ge],gt=Be.get(Ee);if(!gt)throw new NotImplementedError(`No implementation available for ${Ee}`);Ze[Ge]=gt}return React.createElement(je,{...xe,...Ze})},pe=je.displayName||je.name||"Component";return J.displayName=`withApis(${pe})`,J}}class re{constructor(ve){if(this.config=ve,!ve.id.split(".").flatMap(J=>J.split("-")).every(J=>J.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${ve.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function Ve(j){return new re(j)}var Y=(j=>(j.SignedIn="SignedIn",j.SignedOut="SignedOut",j))(Y||{});const He=Ve({id:"core.auth.google"}),lt=Ve({id:"core.auth.github"}),Ye=Ve({id:"core.auth.okta"}),tt=Ve({id:"core.auth.gitlab"}),xt=Ve({id:"core.auth.microsoft"}),wt=Ve({id:"core.auth.onelogin"}),ln=Ve({id:"core.auth.bitbucket"}),bt=Ve({id:"core.auth.bitbucket-server"}),Me=Ve({id:"core.auth.atlassian"}),ct=Ve({id:"core.auth.vmware-cloud"}),mn=Ve({id:"core.alert"}),fn=Ve({id:"core.analytics"}),ye=Ve({id:"core.apptheme"}),cn=Ve({id:"core.config"}),Nn=Ve({id:"core.discovery"}),jn=Ve({id:"core.error"});var Xt=(j=>(j[j.None=0]="None",j[j.Active=1]="Active",j))(Xt||{});const ke=Ve({id:"core.featureflags"}),ue=Ve({id:"core.fetch"}),dt=Ve({id:"core.identity"}),Ce=Ve({id:"core.oauthrequest"}),ge=Ve({id:"core.storage"})},23807:(Ga,yn,v)=>{v.d(yn,{NT:()=>jn,R5:()=>bt,tg:()=>Ze,vJ:()=>zn,z$:()=>tt});var Ae=v(18473),Ue=v(2784),rt=v(29804),ee=v(73557);const Fe=(0,Ae.CT)("analytics-context"),o=()=>{const U=(0,Ue.useContext)(Fe);if(U===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const _=U.atVersion(1);if(_===void 0)throw new Error("No context found for version 1.");return _},re=U=>{const{attributes:_,children:V}=U,he={...o(),..._},Je=createVersionedValueMap({1:he});return React.createElement(Fe.Provider,{value:Je},V)};function Ve(U,_){return"id"in U?{api:U,deps:{},factory:()=>_}:U}const Y=(0,Ae.uW)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),He="_ROUTABLE-EXTENSION-RENDERED";class lt{constructor(_,V={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=_,this.context=V,Y.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{Y.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...Y.mostRecentGatheredNavigation,...Y.mostRecentRoutableExtensionRender}),Y.mostRecentGatheredNavigation=void 0,Y.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),Y.beforeUnloadRegistered=!0)}setContext(_){this.context=_}captureEvent(_,V,{value:le,attributes:he}={}){const{_routeNodeType:Je,...Et}=this.context;if(_===He){Y.mostRecentGatheredNavigation&&(Y.mostRecentRoutableExtensionRender={context:{...Et,extension:"App"}});return}if(Y.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...Y.mostRecentGatheredNavigation,...Y.mostRecentRoutableExtensionRender})}catch(St){console.warn("Error during analytics event capture. %o",St)}Y.mostRecentGatheredNavigation=void 0,Y.mostRecentRoutableExtensionRender=void 0}if(_==="navigate"&&Je==="gathered"&&Et.pluginId==="root"){Y.mostRecentGatheredNavigation={action:_,subject:V,value:le,attributes:he,context:Et};return}try{this.analyticsApi.captureEvent({action:_,subject:V,value:le,attributes:he,context:Et})}catch(St){console.warn("Error during analytics event capture. %o",St)}}}function Ye(){try{return(0,rt.u)(rt.a)}catch{return{captureEvent:()=>{}}}}function tt(){const U=(0,Ue.useRef)(null),_=o(),V=Ye();function le(){return U.current===null&&(U.current=new lt(V)),U.current}const he=le();return he.setContext(_),he}const xt=()=>{const U=useVersionedContext("app-context");if(!U)throw new Error("App context is not available");const _=U.atVersion(1);if(!_)throw new Error("AppContext v1 not available");return _},wt=(0,Ae.uW)("component-data-store",()=>new WeakMap),ln="__backstage_data";function bt(U,_,V){var le;const he=U;let Je=(le=he[ln])!=null?le:wt.get(U);if(Je||(Je={map:new Map},Object.defineProperty(he,ln,{enumerable:!1,configurable:!0,writable:!1,value:Je}),wt.set(U,Je)),Je.map.has(_)){const Et=U.displayName||U.name;throw new Error(`Attempted to attach duplicate data "${_}" to component "${Et}"`)}Je.map.set(_,V)}function Me(U,_){var V;if(!U)return;const le=U.type;if(!le)return;const he=(V=le[ln])!=null?V:wt.get(le);if(he)return he.map.get(_)}const ct=(0,Ae.uW)("route-ref-type",()=>Symbol("route-ref-type"));var mn=Object.defineProperty,fn=(U,_,V)=>_ in U?mn(U,_,{enumerable:!0,configurable:!0,writable:!0,value:V}):U[_]=V,ye=(U,_,V)=>(fn(U,typeof _!="symbol"?_+"":_,V),V),cn;class Nn{constructor(_,V){this.id=_,this.params=V,ye(this,cn,"absolute")}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}cn=ct;function jn(U){var _;return new Nn(U.id,(_=U.params)!=null?_:[])}var Xt=Object.defineProperty,ke=(U,_,V)=>_ in U?Xt(U,_,{enumerable:!0,configurable:!0,writable:!0,value:V}):U[_]=V,ue=(U,_,V)=>(ke(U,typeof _!="symbol"?_+"":_,V),V),dt;const Ce=/^\w+$/;class ge{constructor(_,V,le,he){this.id=_,this.path=V,this.parent=le,this.params=he,ue(this,dt,"sub")}toString(){return`routeRef{type=sub,id=${this.id}}`}}dt=ct;function j(U){const{id:_,path:V,parent:le}=U,he=V.split("/").filter(St=>St.startsWith(":")).map(St=>St.substring(1)),Je=[...le.params,...he];if(le.params.some(St=>he.includes(St)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!V.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${V}'`);if(V.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${V}'`);for(const St of he)if(!Ce.test(St))throw new Error(`SubRouteRef path has invalid param, got '${St}'`);return new ge(_,V,le,Je)}var ve=Object.defineProperty,je=(U,_,V)=>_ in U?ve(U,_,{enumerable:!0,configurable:!0,writable:!0,value:V}):U[_]=V,J=(U,_,V)=>(je(U,typeof _!="symbol"?_+"":_,V),V),pe;class xe{constructor(_,V,le){this.id=_,this.params=V,this.optional=le,J(this,pe,"external")}toString(){return`routeRef{type=external,id=${this.id}}`}}pe=ct;function Be(U){var _;return new xe(U.id,(_=U.params)!=null?_:[],Boolean(U.optional))}function Ze(U){const{pathname:_}=(0,ee.TH)(),V=(0,Ae.Vt)("routing-context");if(!V)throw new Error("Routing context is not available");const le=V.atVersion(1),he=(0,Ue.useMemo)(()=>le&&le.resolve(U,{pathname:_}),[le,U,_]);if(!V)throw new Error("useRouteRef used outside of routing context");if(!le)throw new Error("RoutingContext v1 not available");const Je="optional"in U&&U.optional;if(!he&&!Je)throw new Error(`No path for ${U}`);return he}function Ge(U){return useParams()}var Ee=Object.defineProperty,gt=(U,_,V)=>_ in U?Ee(U,_,{enumerable:!0,configurable:!0,writable:!0,value:V}):U[_]=V,Lt=(U,_,V)=>(gt(U,typeof _!="symbol"?_+"":_,V),V);class Dt extends Ue.Component{constructor(){super(...arguments),Lt(this,"state",{error:void 0}),Lt(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(_){return{error:_}}render(){const{error:_}=this.state,{app:V,plugin:le}=this.props,{ErrorBoundaryFallback:he}=V.getComponents();return _?Ue.createElement(he,{error:_,resetError:this.handleErrorReset,plugin:le}):this.props.children}}function Ht(U){const{component:_,mountPoint:V,name:le}=U;return vn({component:{lazy:()=>_().then(he=>{const Je=St=>{const gn=tt();try{Ze(V)}catch(Kt){if(typeof Kt=="object"&&Kt!==null){const{message:Un}=Kt;if(typeof Un=="string"&&Un.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${V} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw Kt}return useEffect(()=>{gn.captureEvent(He,"")},[gn]),React.createElement(he,{...St})},Et=le||he.displayName||he.name||"LazyComponent";return Je.displayName=`RoutableExtension(${Et})`,Je},he=>Et=>{const St=xt(),{BootErrorPage:gn}=St.getComponents();return React.createElement(gn,{step:"load-chunk",error:he})})},data:{"core.mountPoint":V},name:le})}function Pn(U){const{component:_,name:V}=U;return vn({component:_,name:V})}function vn(U){const{data:_={},name:V}=U;V||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let le;if("lazy"in U.component){const Je=U.component.lazy;le=lazy(()=>Je().then(Et=>({default:Et})))}else le=U.component.sync;const he=V||le.displayName||le.name||"Component";return{expose(Je){const Et=St=>{const gn=xt(),{Progress:Kt}=gn.getComponents(),Un=_==null?void 0:_["core.mountPoint"];return React.createElement(Suspense,{fallback:React.createElement(Kt,null)},React.createElement(Dt,{app:gn,plugin:Je},React.createElement(re,{attributes:{pluginId:Je.getId(),...V&&{extension:V},...Un&&{routeRef:Un.id}}},React.createElement(le,{...St}))))};bt(Et,"core.plugin",Je),bt(Et,"core.extensionName",V);for(const[St,gn]of Object.entries(_))bt(Et,St,gn);return Et.displayName=`Extension(${he})`,Et}}}function Nt(U,_,V,le){return Ue.Children.toArray(U).flatMap(he=>{if(!(0,Ue.isValidElement)(he))return[];if(he.type===Ue.Fragment)return Nt(he.props.children,_,V,le);if(Me(he,"core.featureFlagged")){const Je=he.props;return("with"in Je?_.isActive(Je.with):!_.isActive(Je.without))?Nt(he.props.children,_,V,le):[]}if(V===void 0||V(he))return[he];if(le)throw new Error(le);return Nt(he.props.children,_,V,le)})}class qt{constructor(_,V){this.node=_,this.featureFlagsApi=V}selectByComponentData(_){const V=Nt(this.node,this.featureFlagsApi,le=>Me(le,_.key)!==void 0,_.withStrictError);return new qt(V,this.featureFlagsApi)}findComponentData(_){return Nt(this.node,this.featureFlagsApi,le=>Me(le,_.key)!==void 0).map(le=>Me(le,_.key)).filter(le=>le!==void 0)}getElements(){return Nt(this.node,this.featureFlagsApi)}}function zn(U,_,V=[]){const le=(0,rt.u)(rt.f),he=new qt(U,le);return(0,Ue.useMemo)(()=>_(he),[U,...V])}class en{constructor(_){this.config=_}getId(){return this.config.id}getApis(){var _;return(_=this.config.apis)!=null?_:[]}getFeatureFlags(){var _,V;return(V=(_=this.config.featureFlags)==null?void 0:_.slice())!=null?V:[]}get routes(){var _;return(_=this.config.routes)!=null?_:{}}get externalRoutes(){var _;return(_=this.config.externalRoutes)!=null?_:{}}provide(_){return _.expose(this)}toString(){return`plugin{${this.config.id}}`}}function Ln(U){return new en(U)}},11824:(Ga,yn,v)=>{var Ae=v(7896),Ue=v(33028),rt=v(59740),ee=v(2784),Fe=v(72779),o=v.n(Fe),re={percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},Ve=function(){var ge=(0,ee.useRef)([]),j=(0,ee.useRef)(null);return(0,ee.useEffect)(function(){var ve=Date.now(),je=!1;ge.current.forEach(function(J){if(J){je=!0;var pe=J.style;pe.transitionDuration=".3s, .3s, .3s, .06s",j.current&&ve-j.current<100&&(pe.transitionDuration="0s, 0s")}}),je&&(j.current=Date.now())}),ge.current},Y=["className","percent","prefixCls","strokeColor","strokeLinecap","strokeWidth","style","trailColor","trailWidth","transition"],He=function(ge){var j=(0,Ue.Z)((0,Ue.Z)({},re),ge),ve=j.className,je=j.percent,J=j.prefixCls,pe=j.strokeColor,xe=j.strokeLinecap,Be=j.strokeWidth,Ze=j.style,Ge=j.trailColor,Ee=j.trailWidth,gt=j.transition,Lt=(0,rt.Z)(j,Y);delete Lt.gapPosition;var Dt=Array.isArray(je)?je:[je],Ht=Array.isArray(pe)?pe:[pe],Pn=Ve(),vn=Be/2,Nt=100-Be/2,qt="M ".concat(xe==="round"?vn:0,",").concat(vn,`
         L `).concat(xe==="round"?Nt:100,",").concat(vn),zn="0 0 100 ".concat(Be),en=0;return ee.createElement("svg",(0,Ae.Z)({className:o()("".concat(J,"-line"),ve),viewBox:zn,preserveAspectRatio:"none",style:Ze},Lt),ee.createElement("path",{className:"".concat(J,"-line-trail"),d:qt,strokeLinecap:xe,stroke:Ge,strokeWidth:Ee||Be,fillOpacity:"0"}),Dt.map(function(Ln,U){var _=1;switch(xe){case"round":_=1-Be/100;break;case"square":_=1-Be/2/100;break;default:_=1;break}var V={strokeDasharray:"".concat(Ln*_,"px, 100px"),strokeDashoffset:"-".concat(en,"px"),transition:gt||"stroke-dashoffset 0.3s ease 0s, stroke-dasharray .3s ease 0s, stroke 0.3s linear"},le=Ht[U]||Ht[Ht.length-1];return en+=Ln,ee.createElement("path",{key:U,className:"".concat(J,"-line-path"),d:qt,strokeLinecap:xe,stroke:le,strokeWidth:Be,fillOpacity:"0",ref:function(Je){Pn[U]=Je},style:V})}))};const lt=He;var Ye=v(86522),tt=v(96234),xt=v(39588),wt=0,ln=(0,xt.Z)();function bt(){var Ce;return ln?(Ce=wt,wt+=1):Ce="TEST_OR_SSR",Ce}const Me=function(Ce){var ge=ee.useState(),j=(0,tt.Z)(ge,2),ve=j[0],je=j[1];return ee.useEffect(function(){je("rc_progress_".concat(bt()))},[]),Ce||ve};var ct=function(ge){var j=ge.bg,ve=ge.children;return ee.createElement("div",{style:{width:"100%",height:"100%",background:j}},ve)};function mn(Ce,ge){return Object.keys(Ce).map(function(j){var ve=parseFloat(j),je="".concat(Math.floor(ve*ge),"%");return"".concat(Ce[j]," ").concat(je)})}var fn=ee.forwardRef(function(Ce,ge){var j=Ce.prefixCls,ve=Ce.color,je=Ce.gradientId,J=Ce.radius,pe=Ce.style,xe=Ce.ptg,Be=Ce.strokeLinecap,Ze=Ce.strokeWidth,Ge=Ce.size,Ee=Ce.gapDegree,gt=ve&&(0,Ye.Z)(ve)==="object",Lt=gt?"#FFF":void 0,Dt=Ge/2,Ht=ee.createElement("circle",{className:"".concat(j,"-circle-path"),r:J,cx:Dt,cy:Dt,stroke:Lt,strokeLinecap:Be,strokeWidth:Ze,opacity:xe===0?0:1,style:pe,ref:ge});if(!gt)return Ht;var Pn="".concat(je,"-conic"),vn=Ee?"".concat(180+Ee/2,"deg"):"0deg",Nt=mn(ve,(360-Ee)/360),qt=mn(ve,1),zn="conic-gradient(from ".concat(vn,", ").concat(Nt.join(", "),")"),en="linear-gradient(to ".concat(Ee?"bottom":"top",", ").concat(qt.join(", "),")");return ee.createElement(ee.Fragment,null,ee.createElement("mask",{id:Pn},Ht),ee.createElement("foreignObject",{x:0,y:0,width:Ge,height:Ge,mask:"url(#".concat(Pn,")")},ee.createElement(ct,{bg:en},ee.createElement(ct,{bg:zn}))))});const ye=fn;var cn=100,Nn=function(ge,j,ve,je,J,pe,xe,Be,Ze,Ge){var Ee=arguments.length>10&&arguments[10]!==void 0?arguments[10]:0,gt=ve/100*360*((360-pe)/360),Lt=pe===0?0:{bottom:0,top:180,left:90,right:-90}[xe],Dt=(100-je)/100*j;Ze==="round"&&je!==100&&(Dt+=Ge/2,Dt>=j&&(Dt=j-.01));var Ht=cn/2;return{stroke:typeof Be=="string"?Be:void 0,strokeDasharray:"".concat(j,"px ").concat(ge),strokeDashoffset:Dt+Ee,transform:"rotate(".concat(J+gt+Lt,"deg)"),transformOrigin:"".concat(Ht,"px ").concat(Ht,"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},jn=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function Xt(Ce){var ge=Ce!=null?Ce:[];return Array.isArray(ge)?ge:[ge]}var ke=function(ge){var j=(0,Ue.Z)((0,Ue.Z)({},re),ge),ve=j.id,je=j.prefixCls,J=j.steps,pe=j.strokeWidth,xe=j.trailWidth,Be=j.gapDegree,Ze=Be===void 0?0:Be,Ge=j.gapPosition,Ee=j.trailColor,gt=j.strokeLinecap,Lt=j.style,Dt=j.className,Ht=j.strokeColor,Pn=j.percent,vn=(0,rt.Z)(j,jn),Nt=cn/2,qt=Me(ve),zn="".concat(qt,"-gradient"),en=Nt-pe/2,Ln=Math.PI*2*en,U=Ze>0?90+Ze/2:-90,_=Ln*((360-Ze)/360),V=(0,Ye.Z)(J)==="object"?J:{count:J,space:2},le=V.count,he=V.space,Je=Xt(Pn),Et=Xt(Ht),St=Et.find(function(wn){return wn&&(0,Ye.Z)(wn)==="object"}),gn=St&&(0,Ye.Z)(St)==="object",Kt=gn?"butt":gt,Un=Nn(Ln,_,0,100,U,Ze,Ge,Ee,Kt,pe),ha=Ve(),ya=function(){var Vn=0;return Je.map(function(kn,Hn){var tn=Et[Hn]||Et[Et.length-1],ia=Nn(Ln,_,Vn,kn,U,Ze,Ge,tn,Kt,pe);return Vn+=kn,ee.createElement(ye,{key:Hn,color:tn,ptg:kn,radius:en,prefixCls:je,gradientId:zn,style:ia,strokeLinecap:Kt,strokeWidth:pe,gapDegree:Ze,ref:function(Mt){ha[Hn]=Mt},size:cn})}).reverse()},Ca=function(){var Vn=Math.round(le*(Je[0]/100)),kn=100/le,Hn=0;return new Array(le).fill(null).map(function(tn,ia){var va=ia<=Vn-1?Et[0]:Ee,Mt=va&&(0,Ye.Z)(va)==="object"?"url(#".concat(zn,")"):void 0,Gn=Nn(Ln,_,Hn,kn,U,Ze,Ge,va,"butt",pe,he);return Hn+=(_-Gn.strokeDashoffset+he)*100/_,ee.createElement("circle",{key:ia,className:"".concat(je,"-circle-path"),r:en,cx:Nt,cy:Nt,stroke:Mt,strokeWidth:pe,opacity:1,style:Gn,ref:function(En){ha[ia]=En}})})};return ee.createElement("svg",(0,Ae.Z)({className:o()("".concat(je,"-circle"),Dt),viewBox:"0 0 ".concat(cn," ").concat(cn),style:Lt,id:ve,role:"presentation"},vn),!le&&ee.createElement("circle",{className:"".concat(je,"-circle-trail"),r:en,cx:Nt,cy:Nt,stroke:Ee,strokeLinecap:Kt,strokeWidth:xe||pe,style:Un}),le?Ca():ya())};const dt={Line:lt,Circle:ke}}}]);})();

//# sourceMappingURL=module-oriflame.8dd6ea63.js.map